(()=>{var ai=Object.create;var yr=Object.defineProperty;var ui=Object.getOwnPropertyDescriptor;var ci=Object.getOwnPropertyNames;var li=Object.getPrototypeOf,hi=Object.prototype.hasOwnProperty;var fi=R=>yr(R,"__esModule",{value:!0});var Ht=(R,P)=>()=>(P||R((P={exports:{}}).exports,P),P.exports);var di=(R,P,A,e)=>{if(P&&typeof P=="object"||typeof P=="function")for(let p of ci(P))!hi.call(R,p)&&(A||p!=="default")&&yr(R,p,{get:()=>P[p],enumerable:!(e=ui(P,p))||e.enumerable});return R},jt=(R,P)=>di(fi(yr(R!=null?ai(li(R)):{},"default",!P&&R&&R.__esModule?{get:()=>R.default,enumerable:!0}:{value:R,enumerable:!0})),R);var kr=Ht((Wt,mr)=>{(function(R,P){if(typeof Wt=="object"&&typeof mr=="object")mr.exports=P();else if(typeof define=="function"&&define.amd)define([],P);else{var A=P();for(var e in A)(typeof Wt=="object"?Wt:R)[e]=A[e]}})(self,function(){return(()=>{"use strict";var R={4567:function(A,e,p){var c,f=this&&this.__extends||(c=function(r,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(i[u]=s[u])},c(r,t)},function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=r}c(r,t),r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.AccessibilityManager=void 0;var _=p(9042),l=p(6114),y=p(9924),D=p(3656),o=p(844),a=p(5596),d=p(9631),n=function(r){function t(i,s){var u=r.call(this)||this;u._terminal=i,u._renderService=s,u._liveRegionLineCount=0,u._charsToConsume=[],u._charsToAnnounce="",u._accessibilityTreeRoot=document.createElement("div"),u._accessibilityTreeRoot.setAttribute("role","document"),u._accessibilityTreeRoot.classList.add("xterm-accessibility"),u._accessibilityTreeRoot.tabIndex=0,u._rowContainer=document.createElement("div"),u._rowContainer.setAttribute("role","list"),u._rowContainer.classList.add("xterm-accessibility-tree"),u._rowElements=[];for(var h=0;h<u._terminal.rows;h++)u._rowElements[h]=u._createAccessibilityTreeNode(),u._rowContainer.appendChild(u._rowElements[h]);if(u._topBoundaryFocusListener=function(v){return u._onBoundaryFocus(v,0)},u._bottomBoundaryFocusListener=function(v){return u._onBoundaryFocus(v,1)},u._rowElements[0].addEventListener("focus",u._topBoundaryFocusListener),u._rowElements[u._rowElements.length-1].addEventListener("focus",u._bottomBoundaryFocusListener),u._refreshRowsDimensions(),u._accessibilityTreeRoot.appendChild(u._rowContainer),u._renderRowsDebouncer=new y.TimeBasedDebouncer(u._renderRows.bind(u)),u._refreshRows(),u._liveRegion=document.createElement("div"),u._liveRegion.classList.add("live-region"),u._liveRegion.setAttribute("aria-live","assertive"),u._accessibilityTreeRoot.appendChild(u._liveRegion),!u._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return u._terminal.element.insertAdjacentElement("afterbegin",u._accessibilityTreeRoot),u.register(u._renderRowsDebouncer),u.register(u._terminal.onResize(function(v){return u._onResize(v.rows)})),u.register(u._terminal.onRender(function(v){return u._refreshRows(v.start,v.end)})),u.register(u._terminal.onScroll(function(){return u._refreshRows()})),u.register(u._terminal.onA11yChar(function(v){return u._onChar(v)})),u.register(u._terminal.onLineFeed(function(){return u._onChar(`
`)})),u.register(u._terminal.onA11yTab(function(v){return u._onTab(v)})),u.register(u._terminal.onKey(function(v){return u._onKey(v.key)})),u.register(u._terminal.onBlur(function(){return u._clearLiveRegion()})),u.register(u._renderService.onDimensionsChange(function(){return u._refreshRowsDimensions()})),u._screenDprMonitor=new a.ScreenDprMonitor,u.register(u._screenDprMonitor),u._screenDprMonitor.setListener(function(){return u._refreshRowsDimensions()}),u.register((0,D.addDisposableDomListener)(window,"resize",function(){return u._refreshRowsDimensions()})),u}return f(t,r),t.prototype.dispose=function(){r.prototype.dispose.call(this),(0,d.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},t.prototype._onBoundaryFocus=function(i,s){var u=i.target,h=this._rowElements[s===0?1:this._rowElements.length-2];if(u.getAttribute("aria-posinset")!==(s===0?"1":""+this._terminal.buffer.lines.length)&&i.relatedTarget===h){var v,b;if(s===0?(v=u,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(v=this._rowElements.shift(),b=u,this._rowContainer.removeChild(v)),v.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),s===0){var m=this._createAccessibilityTreeNode();this._rowElements.unshift(m),this._rowContainer.insertAdjacentElement("afterbegin",m)}else m=this._createAccessibilityTreeNode(),this._rowElements.push(m),this._rowContainer.appendChild(m);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(s===0?-1:1),this._rowElements[s===0?1:this._rowElements.length-2].focus(),i.preventDefault(),i.stopImmediatePropagation()}},t.prototype._onResize=function(i){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var s=this._rowContainer.children.length;s<this._terminal.rows;s++)this._rowElements[s]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[s]);for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},t.prototype._createAccessibilityTreeNode=function(){var i=document.createElement("div");return i.setAttribute("role","listitem"),i.tabIndex=-1,this._refreshRowDimensions(i),i},t.prototype._onTab=function(i){for(var s=0;s<i;s++)this._onChar(" ")},t.prototype._onChar=function(i){var s=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==i&&(this._charsToAnnounce+=i):this._charsToAnnounce+=i,i===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=_.tooMuchOutput)),l.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){s._accessibilityTreeRoot.appendChild(s._liveRegion)},0))},t.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,l.isMac&&(0,d.removeElementFromParent)(this._liveRegion)},t.prototype._onKey=function(i){this._clearLiveRegion(),this._charsToConsume.push(i)},t.prototype._refreshRows=function(i,s){this._renderRowsDebouncer.refresh(i,s,this._terminal.rows)},t.prototype._renderRows=function(i,s){for(var u=this._terminal.buffer,h=u.lines.length.toString(),v=i;v<=s;v++){var b=u.translateBufferLineToString(u.ydisp+v,!0),m=(u.ydisp+v+1).toString(),g=this._rowElements[v];g&&(b.length===0?g.innerText="\xA0":g.textContent=b,g.setAttribute("aria-posinset",m),g.setAttribute("aria-setsize",h))}this._announceCharacters()},t.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var i=0;i<this._terminal.rows;i++)this._refreshRowDimensions(this._rowElements[i])}},t.prototype._refreshRowDimensions=function(i){i.style.height=this._renderService.dimensions.actualCellHeight+"px"},t.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},t}(o.Disposable);e.AccessibilityManager=n},3614:(A,e)=>{function p(l){return l.replace(/\r?\n/g,"\r")}function c(l,y){return y?"\x1B[200~"+l+"\x1B[201~":l}function f(l,y,D){l=c(l=p(l),D.decPrivateModes.bracketedPasteMode),D.triggerDataEvent(l,!0),y.value=""}function _(l,y,D){var o=D.getBoundingClientRect(),a=l.clientX-o.left-10,d=l.clientY-o.top-10;y.style.width="20px",y.style.height="20px",y.style.left=a+"px",y.style.top=d+"px",y.style.zIndex="1000",y.focus()}Object.defineProperty(e,"__esModule",{value:!0}),e.rightClickHandler=e.moveTextAreaUnderMouseCursor=e.paste=e.handlePasteEvent=e.copyHandler=e.bracketTextForPaste=e.prepareTextForTerminal=void 0,e.prepareTextForTerminal=p,e.bracketTextForPaste=c,e.copyHandler=function(l,y){l.clipboardData&&l.clipboardData.setData("text/plain",y.selectionText),l.preventDefault()},e.handlePasteEvent=function(l,y,D){l.stopPropagation(),l.clipboardData&&f(l.clipboardData.getData("text/plain"),y,D)},e.paste=f,e.moveTextAreaUnderMouseCursor=_,e.rightClickHandler=function(l,y,D,o,a){_(l,y,D),a&&o.rightClickSelect(l),y.value=o.selectionText,y.select()}},4774:(A,e)=>{var p,c,f,_;function l(D){var o=D.toString(16);return o.length<2?"0"+o:o}function y(D,o){return D<o?(o+.05)/(D+.05):(D+.05)/(o+.05)}Object.defineProperty(e,"__esModule",{value:!0}),e.contrastRatio=e.toPaddedHex=e.rgba=e.rgb=e.css=e.color=e.channels=void 0,function(D){D.toCss=function(o,a,d,n){return n!==void 0?"#"+l(o)+l(a)+l(d)+l(n):"#"+l(o)+l(a)+l(d)},D.toRgba=function(o,a,d,n){return n===void 0&&(n=255),(o<<24|a<<16|d<<8|n)>>>0}}(p=e.channels||(e.channels={})),(c=e.color||(e.color={})).blend=function(D,o){var a=(255&o.rgba)/255;if(a===1)return{css:o.css,rgba:o.rgba};var d=o.rgba>>24&255,n=o.rgba>>16&255,r=o.rgba>>8&255,t=D.rgba>>24&255,i=D.rgba>>16&255,s=D.rgba>>8&255,u=t+Math.round((d-t)*a),h=i+Math.round((n-i)*a),v=s+Math.round((r-s)*a);return{css:p.toCss(u,h,v),rgba:p.toRgba(u,h,v)}},c.isOpaque=function(D){return(255&D.rgba)==255},c.ensureContrastRatio=function(D,o,a){var d=_.ensureContrastRatio(D.rgba,o.rgba,a);if(d)return _.toColor(d>>24&255,d>>16&255,d>>8&255)},c.opaque=function(D){var o=(255|D.rgba)>>>0,a=_.toChannels(o),d=a[0],n=a[1],r=a[2];return{css:p.toCss(d,n,r),rgba:o}},c.opacity=function(D,o){var a=Math.round(255*o),d=_.toChannels(D.rgba),n=d[0],r=d[1],t=d[2];return{css:p.toCss(n,r,t,a),rgba:p.toRgba(n,r,t,a)}},c.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]},(e.css||(e.css={})).toColor=function(D){switch(D.length){case 7:return{css:D,rgba:(parseInt(D.slice(1),16)<<8|255)>>>0};case 9:return{css:D,rgba:parseInt(D.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(D){function o(a,d,n){var r=a/255,t=d/255,i=n/255;return .2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}D.relativeLuminance=function(a){return o(a>>16&255,a>>8&255,255&a)},D.relativeLuminance2=o}(f=e.rgb||(e.rgb={})),function(D){function o(d,n,r){for(var t=d>>24&255,i=d>>16&255,s=d>>8&255,u=n>>24&255,h=n>>16&255,v=n>>8&255,b=y(f.relativeLuminance2(u,v,h),f.relativeLuminance2(t,i,s));b<r&&(u>0||h>0||v>0);)u-=Math.max(0,Math.ceil(.1*u)),h-=Math.max(0,Math.ceil(.1*h)),v-=Math.max(0,Math.ceil(.1*v)),b=y(f.relativeLuminance2(u,v,h),f.relativeLuminance2(t,i,s));return(u<<24|h<<16|v<<8|255)>>>0}function a(d,n,r){for(var t=d>>24&255,i=d>>16&255,s=d>>8&255,u=n>>24&255,h=n>>16&255,v=n>>8&255,b=y(f.relativeLuminance2(u,v,h),f.relativeLuminance2(t,i,s));b<r&&(u<255||h<255||v<255);)u=Math.min(255,u+Math.ceil(.1*(255-u))),h=Math.min(255,h+Math.ceil(.1*(255-h))),v=Math.min(255,v+Math.ceil(.1*(255-v))),b=y(f.relativeLuminance2(u,v,h),f.relativeLuminance2(t,i,s));return(u<<24|h<<16|v<<8|255)>>>0}D.ensureContrastRatio=function(d,n,r){var t=f.relativeLuminance(d>>8),i=f.relativeLuminance(n>>8);if(y(t,i)<r)return i<t?o(d,n,r):a(d,n,r)},D.reduceLuminance=o,D.increaseLuminance=a,D.toChannels=function(d){return[d>>24&255,d>>16&255,d>>8&255,255&d]},D.toColor=function(d,n,r){return{css:p.toCss(d,n,r),rgba:p.toRgba(d,n,r)}}}(_=e.rgba||(e.rgba={})),e.toPaddedHex=l,e.contrastRatio=y},7239:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorContrastCache=void 0;var p=function(){function c(){this._color={},this._rgba={}}return c.prototype.clear=function(){this._color={},this._rgba={}},c.prototype.setCss=function(f,_,l){this._rgba[f]||(this._rgba[f]={}),this._rgba[f][_]=l},c.prototype.getCss=function(f,_){return this._rgba[f]?this._rgba[f][_]:void 0},c.prototype.setColor=function(f,_,l){this._color[f]||(this._color[f]={}),this._color[f][_]=l},c.prototype.getColor=function(f,_){return this._color[f]?this._color[f][_]:void 0},c}();e.ColorContrastCache=p},5680:function(A,e,p){var c=this&&this.__spreadArray||function(n,r,t){if(t||arguments.length===2)for(var i,s=0,u=r.length;s<u;s++)!i&&s in r||(i||(i=Array.prototype.slice.call(r,0,s)),i[s]=r[s]);return n.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(e,"__esModule",{value:!0}),e.ColorManager=e.DEFAULT_ANSI_COLORS=void 0;var f=p(4774),_=p(7239),l=f.css.toColor("#ffffff"),y=f.css.toColor("#000000"),D=f.css.toColor("#ffffff"),o=f.css.toColor("#000000"),a={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};e.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var n=[f.css.toColor("#2e3436"),f.css.toColor("#cc0000"),f.css.toColor("#4e9a06"),f.css.toColor("#c4a000"),f.css.toColor("#3465a4"),f.css.toColor("#75507b"),f.css.toColor("#06989a"),f.css.toColor("#d3d7cf"),f.css.toColor("#555753"),f.css.toColor("#ef2929"),f.css.toColor("#8ae234"),f.css.toColor("#fce94f"),f.css.toColor("#729fcf"),f.css.toColor("#ad7fa8"),f.css.toColor("#34e2e2"),f.css.toColor("#eeeeec")],r=[0,95,135,175,215,255],t=0;t<216;t++){var i=r[t/36%6|0],s=r[t/6%6|0],u=r[t%6];n.push({css:f.channels.toCss(i,s,u),rgba:f.channels.toRgba(i,s,u)})}for(t=0;t<24;t++){var h=8+10*t;n.push({css:f.channels.toCss(h,h,h),rgba:f.channels.toRgba(h,h,h)})}return n}());var d=function(){function n(r,t){this.allowTransparency=t;var i=r.createElement("canvas");i.width=1,i.height=1;var s=i.getContext("2d");if(!s)throw new Error("Could not get rendering context");this._ctx=s,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new _.ColorContrastCache,this.colors={foreground:l,background:y,cursor:D,cursorAccent:o,selectionTransparent:a,selectionOpaque:f.color.blend(y,a),ansi:e.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return n.prototype.onOptionsChange=function(r){r==="minimumContrastRatio"&&this._contrastCache.clear()},n.prototype.setTheme=function(r){r===void 0&&(r={}),this.colors.foreground=this._parseColor(r.foreground,l),this.colors.background=this._parseColor(r.background,y),this.colors.cursor=this._parseColor(r.cursor,D,!0),this.colors.cursorAccent=this._parseColor(r.cursorAccent,o,!0),this.colors.selectionTransparent=this._parseColor(r.selection,a,!0),this.colors.selectionOpaque=f.color.blend(this.colors.background,this.colors.selectionTransparent),f.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=f.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(r.black,e.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(r.red,e.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(r.green,e.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(r.yellow,e.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(r.blue,e.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(r.magenta,e.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(r.cyan,e.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(r.white,e.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(r.brightBlack,e.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(r.brightRed,e.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(r.brightGreen,e.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(r.brightYellow,e.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(r.brightBlue,e.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(r.brightMagenta,e.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(r.brightCyan,e.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(r.brightWhite,e.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},n.prototype.restoreColor=function(r){if(r!==void 0)switch(r){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[r]=this._restoreColors.ansi[r]}else for(var t=0;t<this._restoreColors.ansi.length;++t)this.colors.ansi[t]=this._restoreColors.ansi[t]},n.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:c([],this.colors.ansi,!0)}},n.prototype._parseColor=function(r,t,i){if(i===void 0&&(i=this.allowTransparency),r===void 0)return t;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=r,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+r+" is invalid using fallback "+t.css),t;this._ctx.fillRect(0,0,1,1);var s=this._ctx.getImageData(0,0,1,1).data;if(s[3]!==255){if(!i)return console.warn("Color: "+r+" is using transparency, but allowTransparency is false. Using fallback "+t.css+"."),t;var u=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(C){return Number(C)}),h=u[0],v=u[1],b=u[2],m=u[3],g=Math.round(255*m);return{rgba:f.channels.toRgba(h,v,b,g),css:r}}return{css:this._ctx.fillStyle,rgba:f.channels.toRgba(s[0],s[1],s[2],s[3])}},n}();e.ColorManager=d},9631:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeElementFromParent=void 0,e.removeElementFromParent=function(){for(var p,c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];for(var _=0,l=c;_<l.length;_++){var y=l[_];(p=y==null?void 0:y.parentElement)===null||p===void 0||p.removeChild(y)}}},3656:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.addDisposableDomListener=void 0,e.addDisposableDomListener=function(p,c,f,_){p.addEventListener(c,f,_);var l=!1;return{dispose:function(){l||(l=!0,p.removeEventListener(c,f,_))}}}},3551:function(A,e,p){var c=this&&this.__decorate||function(o,a,d,n){var r,t=arguments.length,i=t<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,d):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,a,d,n);else for(var s=o.length-1;s>=0;s--)(r=o[s])&&(i=(t<3?r(i):t>3?r(a,d,i):r(a,d))||i);return t>3&&i&&Object.defineProperty(a,d,i),i},f=this&&this.__param||function(o,a){return function(d,n){a(d,n,o)}};Object.defineProperty(e,"__esModule",{value:!0}),e.MouseZone=e.Linkifier=void 0;var _=p(8460),l=p(2585),y=function(){function o(a,d,n){this._bufferService=a,this._logService=d,this._unicodeService=n,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new _.EventEmitter,this._onHideLinkUnderline=new _.EventEmitter,this._onLinkTooltip=new _.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(o.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),o.prototype.attachToDom=function(a,d){this._element=a,this._mouseZoneManager=d},o.prototype.linkifyRows=function(a,d){var n=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=a,this._rowsToLinkify.end=d):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,a),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,d)),this._mouseZoneManager.clearAll(a,d),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return n._linkifyRows()},o._timeBeforeLatency))},o.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var a=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var d=a.ydisp+this._rowsToLinkify.start;if(!(d>=a.lines.length)){for(var n=a.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,r=Math.ceil(2e3/this._bufferService.cols),t=this._bufferService.buffer.iterator(!1,d,n,r,r);t.hasNext();)for(var i=t.next(),s=0;s<this._linkMatchers.length;s++)this._doLinkifyRow(i.range.first,i.content,this._linkMatchers[s]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},o.prototype.registerLinkMatcher=function(a,d,n){if(n===void 0&&(n={}),!d)throw new Error("handler must be defined");var r={id:this._nextLinkMatcherId++,regex:a,handler:d,matchIndex:n.matchIndex,validationCallback:n.validationCallback,hoverTooltipCallback:n.tooltipCallback,hoverLeaveCallback:n.leaveCallback,willLinkActivate:n.willLinkActivate,priority:n.priority||0};return this._addLinkMatcherToList(r),r.id},o.prototype._addLinkMatcherToList=function(a){if(this._linkMatchers.length!==0){for(var d=this._linkMatchers.length-1;d>=0;d--)if(a.priority<=this._linkMatchers[d].priority)return void this._linkMatchers.splice(d+1,0,a);this._linkMatchers.splice(0,0,a)}else this._linkMatchers.push(a)},o.prototype.deregisterLinkMatcher=function(a){for(var d=0;d<this._linkMatchers.length;d++)if(this._linkMatchers[d].id===a)return this._linkMatchers.splice(d,1),!0;return!1},o.prototype._doLinkifyRow=function(a,d,n){for(var r,t=this,i=new RegExp(n.regex.source,(n.regex.flags||"")+"g"),s=-1,u=function(){var v=r[typeof n.matchIndex!="number"?0:n.matchIndex];if(!v)return h._logService.debug("match found without corresponding matchIndex",r,n),"break";if(s=d.indexOf(v,s+1),i.lastIndex=s+v.length,s<0)return"break";var b=h._bufferService.buffer.stringIndexToBufferIndex(a,s);if(b[0]<0)return"break";var m=h._bufferService.buffer.lines.get(b[0]);if(!m)return"break";var g=m.getFg(b[1]),C=g?g>>9&511:void 0;n.validationCallback?n.validationCallback(v,function(x){t._rowsTimeoutId||x&&t._addLink(b[1],b[0]-t._bufferService.buffer.ydisp,v,n,C)}):h._addLink(b[1],b[0]-h._bufferService.buffer.ydisp,v,n,C)},h=this;(r=i.exec(d))!==null&&u()!=="break";);},o.prototype._addLink=function(a,d,n,r,t){var i=this;if(this._mouseZoneManager&&this._element){var s=this._unicodeService.getStringCellWidth(n),u=a%this._bufferService.cols,h=d+Math.floor(a/this._bufferService.cols),v=(u+s)%this._bufferService.cols,b=h+Math.floor((u+s)/this._bufferService.cols);v===0&&(v=this._bufferService.cols,b--),this._mouseZoneManager.add(new D(u+1,h+1,v+1,b+1,function(m){if(r.handler)return r.handler(m,n);var g=window.open();g?(g.opener=null,g.location.href=n):console.warn("Opening link blocked as opener could not be cleared")},function(){i._onShowLinkUnderline.fire(i._createLinkHoverEvent(u,h,v,b,t)),i._element.classList.add("xterm-cursor-pointer")},function(m){i._onLinkTooltip.fire(i._createLinkHoverEvent(u,h,v,b,t)),r.hoverTooltipCallback&&r.hoverTooltipCallback(m,n,{start:{x:u,y:h},end:{x:v,y:b}})},function(){i._onHideLinkUnderline.fire(i._createLinkHoverEvent(u,h,v,b,t)),i._element.classList.remove("xterm-cursor-pointer"),r.hoverLeaveCallback&&r.hoverLeaveCallback()},function(m){return!r.willLinkActivate||r.willLinkActivate(m,n)}))}},o.prototype._createLinkHoverEvent=function(a,d,n,r,t){return{x1:a,y1:d,x2:n,y2:r,cols:this._bufferService.cols,fg:t}},o._timeBeforeLatency=200,o=c([f(0,l.IBufferService),f(1,l.ILogService),f(2,l.IUnicodeService)],o)}();e.Linkifier=y;var D=function(o,a,d,n,r,t,i,s,u){this.x1=o,this.y1=a,this.x2=d,this.y2=n,this.clickCallback=r,this.hoverCallback=t,this.tooltipCallback=i,this.leaveCallback=s,this.willLinkActivate=u};e.MouseZone=D},6465:function(A,e,p){var c,f=this&&this.__extends||(c=function(n,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},c(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=n}c(n,r),n.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),_=this&&this.__decorate||function(n,r,t,i){var s,u=arguments.length,h=u<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(n,r,t,i);else for(var v=n.length-1;v>=0;v--)(s=n[v])&&(h=(u<3?s(h):u>3?s(r,t,h):s(r,t))||h);return u>3&&h&&Object.defineProperty(r,t,h),h},l=this&&this.__param||function(n,r){return function(t,i){r(t,i,n)}};Object.defineProperty(e,"__esModule",{value:!0}),e.Linkifier2=void 0;var y=p(2585),D=p(8460),o=p(844),a=p(3656),d=function(n){function r(t){var i=n.call(this)||this;return i._bufferService=t,i._linkProviders=[],i._linkCacheDisposables=[],i._isMouseOut=!0,i._activeLine=-1,i._onShowLinkUnderline=i.register(new D.EventEmitter),i._onHideLinkUnderline=i.register(new D.EventEmitter),i.register((0,o.getDisposeArrayDisposable)(i._linkCacheDisposables)),i}return f(r,n),Object.defineProperty(r.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),r.prototype.registerLinkProvider=function(t){var i=this;return this._linkProviders.push(t),{dispose:function(){var s=i._linkProviders.indexOf(t);s!==-1&&i._linkProviders.splice(s,1)}}},r.prototype.attachToDom=function(t,i,s){var u=this;this._element=t,this._mouseService=i,this._renderService=s,this.register((0,a.addDisposableDomListener)(this._element,"mouseleave",function(){u._isMouseOut=!0,u._clearCurrentLink()})),this.register((0,a.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},r.prototype._onMouseMove=function(t){if(this._lastMouseEvent=t,this._element&&this._mouseService){var i=this._positionFromMouseEvent(t,this._element,this._mouseService);if(i){this._isMouseOut=!1;for(var s=t.composedPath(),u=0;u<s.length;u++){var h=s[u];if(h.classList.contains("xterm"))break;if(h.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._onHover(i),this._lastBufferCell=i)}}},r.prototype._onHover=function(t){if(this._activeLine!==t.y)return this._clearCurrentLink(),void this._askForLink(t,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))},r.prototype._askForLink=function(t,i){var s,u=this;this._activeProviderReplies&&i||((s=this._activeProviderReplies)===null||s===void 0||s.forEach(function(v){v==null||v.forEach(function(b){b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);var h=!1;this._linkProviders.forEach(function(v,b){var m;i?((m=u._activeProviderReplies)===null||m===void 0?void 0:m.get(b))&&(h=u._checkLinkProviderResult(b,t,h)):v.provideLinks(t.y,function(g){var C,x;if(!u._isMouseOut){var w=g==null?void 0:g.map(function(T){return{link:T}});(C=u._activeProviderReplies)===null||C===void 0||C.set(b,w),h=u._checkLinkProviderResult(b,t,h),((x=u._activeProviderReplies)===null||x===void 0?void 0:x.size)===u._linkProviders.length&&u._removeIntersectingLinks(t.y,u._activeProviderReplies)}})})},r.prototype._removeIntersectingLinks=function(t,i){for(var s=new Set,u=0;u<i.size;u++){var h=i.get(u);if(h)for(var v=0;v<h.length;v++)for(var b=h[v],m=b.link.range.start.y<t?0:b.link.range.start.x,g=b.link.range.end.y>t?this._bufferService.cols:b.link.range.end.x,C=m;C<=g;C++){if(s.has(C)){h.splice(v--,1);break}s.add(C)}}},r.prototype._checkLinkProviderResult=function(t,i,s){var u,h=this;if(!this._activeProviderReplies)return s;for(var v=this._activeProviderReplies.get(t),b=!1,m=0;m<t;m++)this._activeProviderReplies.has(m)&&!this._activeProviderReplies.get(m)||(b=!0);if(!b&&v){var g=v.find(function(x){return h._linkAtPosition(x.link,i)});g&&(s=!0,this._handleNewLink(g))}if(this._activeProviderReplies.size===this._linkProviders.length&&!s)for(m=0;m<this._activeProviderReplies.size;m++){var C=(u=this._activeProviderReplies.get(m))===null||u===void 0?void 0:u.find(function(x){return h._linkAtPosition(x.link,i)});if(C){s=!0,this._handleNewLink(C);break}}return s},r.prototype._onClick=function(t){if(this._element&&this._mouseService&&this._currentLink){var i=this._positionFromMouseEvent(t,this._element,this._mouseService);i&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(t,this._currentLink.link.text)}},r.prototype._clearCurrentLink=function(t,i){this._element&&this._currentLink&&this._lastMouseEvent&&(!t||!i||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,o.disposeArray)(this._linkCacheDisposables))},r.prototype._handleNewLink=function(t){var i=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._linkAtPosition(t.link,s)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:t.link.decorations===void 0||t.link.decorations.underline,pointerCursor:t.link.decorations===void 0||t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:function(){var u,h;return(h=(u=i._currentLink)===null||u===void 0?void 0:u.state)===null||h===void 0?void 0:h.decorations.pointerCursor},set:function(u){var h,v;((h=i._currentLink)===null||h===void 0?void 0:h.state)&&i._currentLink.state.decorations.pointerCursor!==u&&(i._currentLink.state.decorations.pointerCursor=u,i._currentLink.state.isHovered&&((v=i._element)===null||v===void 0||v.classList.toggle("xterm-cursor-pointer",u)))}},underline:{get:function(){var u,h;return(h=(u=i._currentLink)===null||u===void 0?void 0:u.state)===null||h===void 0?void 0:h.decorations.underline},set:function(u){var h,v,b;((h=i._currentLink)===null||h===void 0?void 0:h.state)&&((b=(v=i._currentLink)===null||v===void 0?void 0:v.state)===null||b===void 0?void 0:b.decorations.underline)!==u&&(i._currentLink.state.decorations.underline=u,i._currentLink.state.isHovered&&i._fireUnderlineEvent(t.link,u))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(u){var h=u.start===0?0:u.start+1+i._bufferService.buffer.ydisp;i._clearCurrentLink(h,u.end+1+i._bufferService.buffer.ydisp)})))}},r.prototype._linkHover=function(t,i,s){var u;((u=this._currentLink)===null||u===void 0?void 0:u.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(s,i.text)},r.prototype._fireUnderlineEvent=function(t,i){var s=t.range,u=this._bufferService.buffer.ydisp,h=this._createLinkUnderlineEvent(s.start.x-1,s.start.y-u-1,s.end.x,s.end.y-u-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(h)},r.prototype._linkLeave=function(t,i,s){var u;((u=this._currentLink)===null||u===void 0?void 0:u.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(s,i.text)},r.prototype._linkAtPosition=function(t,i){var s=t.range.start.y===t.range.end.y,u=t.range.start.y<i.y,h=t.range.end.y>i.y;return(s&&t.range.start.x<=i.x&&t.range.end.x>=i.x||u&&t.range.end.x>=i.x||h&&t.range.start.x<=i.x||u&&h)&&t.range.start.y<=i.y&&t.range.end.y>=i.y},r.prototype._positionFromMouseEvent=function(t,i,s){var u=s.getCoords(t,i,this._bufferService.cols,this._bufferService.rows);if(u)return{x:u[0],y:u[1]+this._bufferService.buffer.ydisp}},r.prototype._createLinkUnderlineEvent=function(t,i,s,u,h){return{x1:t,y1:i,x2:s,y2:u,cols:this._bufferService.cols,fg:h}},_([l(0,y.IBufferService)],r)}(o.Disposable);e.Linkifier2=d},9042:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tooMuchOutput=e.promptLabel=void 0,e.promptLabel="Terminal input",e.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(A,e,p){var c,f=this&&this.__extends||(c=function(n,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},c(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=n}c(n,r),n.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),_=this&&this.__decorate||function(n,r,t,i){var s,u=arguments.length,h=u<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(n,r,t,i);else for(var v=n.length-1;v>=0;v--)(s=n[v])&&(h=(u<3?s(h):u>3?s(r,t,h):s(r,t))||h);return u>3&&h&&Object.defineProperty(r,t,h),h},l=this&&this.__param||function(n,r){return function(t,i){r(t,i,n)}};Object.defineProperty(e,"__esModule",{value:!0}),e.MouseZoneManager=void 0;var y=p(844),D=p(3656),o=p(4725),a=p(2585),d=function(n){function r(t,i,s,u,h,v){var b=n.call(this)||this;return b._element=t,b._screenElement=i,b._bufferService=s,b._mouseService=u,b._selectionService=h,b._optionsService=v,b._zones=[],b._areZonesActive=!1,b._lastHoverCoords=[void 0,void 0],b._initialSelectionLength=0,b.register((0,D.addDisposableDomListener)(b._element,"mousedown",function(m){return b._onMouseDown(m)})),b._mouseMoveListener=function(m){return b._onMouseMove(m)},b._mouseLeaveListener=function(m){return b._onMouseLeave(m)},b._clickListener=function(m){return b._onClick(m)},b}return f(r,n),r.prototype.dispose=function(){n.prototype.dispose.call(this),this._deactivate()},r.prototype.add=function(t){this._zones.push(t),this._zones.length===1&&this._activate()},r.prototype.clearAll=function(t,i){if(this._zones.length!==0){t&&i||(t=0,i=this._bufferService.rows-1);for(var s=0;s<this._zones.length;s++){var u=this._zones[s];(u.y1>t&&u.y1<=i+1||u.y2>t&&u.y2<=i+1||u.y1<t&&u.y2>i+1)&&(this._currentZone&&this._currentZone===u&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(s--,1))}this._zones.length===0&&this._deactivate()}},r.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},r.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},r.prototype._onMouseMove=function(t){this._lastHoverCoords[0]===t.pageX&&this._lastHoverCoords[1]===t.pageY||(this._onHover(t),this._lastHoverCoords=[t.pageX,t.pageY])},r.prototype._onHover=function(t){var i=this,s=this._findZoneEventAt(t);s!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),s&&(this._currentZone=s,s.hoverCallback&&s.hoverCallback(t),this._tooltipTimeout=window.setTimeout(function(){return i._onTooltip(t)},this._optionsService.rawOptions.linkTooltipHoverDuration)))},r.prototype._onTooltip=function(t){this._tooltipTimeout=void 0;var i=this._findZoneEventAt(t);i==null||i.tooltipCallback(t)},r.prototype._onMouseDown=function(t){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var i=this._findZoneEventAt(t);(i==null?void 0:i.willLinkActivate(t))&&(t.preventDefault(),t.stopImmediatePropagation())}},r.prototype._onMouseLeave=function(t){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},r.prototype._onClick=function(t){var i=this._findZoneEventAt(t),s=this._getSelectionLength();i&&s===this._initialSelectionLength&&(i.clickCallback(t),t.preventDefault(),t.stopImmediatePropagation())},r.prototype._getSelectionLength=function(){var t=this._selectionService.selectionText;return t?t.length:0},r.prototype._findZoneEventAt=function(t){var i=this._mouseService.getCoords(t,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(i)for(var s=i[0],u=i[1],h=0;h<this._zones.length;h++){var v=this._zones[h];if(v.y1===v.y2){if(u===v.y1&&s>=v.x1&&s<v.x2)return v}else if(u===v.y1&&s>=v.x1||u===v.y2&&s<v.x2||u>v.y1&&u<v.y2)return v}},_([l(2,a.IBufferService),l(3,o.IMouseService),l(4,o.ISelectionService),l(5,a.IOptionsService)],r)}(y.Disposable);e.MouseZoneManager=d},6193:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RenderDebouncer=void 0;var p=function(){function c(f){this._renderCallback=f}return c.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},c.prototype.refresh=function(f,_,l){var y=this;this._rowCount=l,f=f!==void 0?f:0,_=_!==void 0?_:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,f):f,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,_):_,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return y._innerRefresh()}))},c.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var f=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(f,_)}},c}();e.RenderDebouncer=p},5596:function(A,e,p){var c,f=this&&this.__extends||(c=function(l,y){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,o){D.__proto__=o}||function(D,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(D[a]=o[a])},c(l,y)},function(l,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function D(){this.constructor=l}c(l,y),l.prototype=y===null?Object.create(y):(D.prototype=y.prototype,new D)});Object.defineProperty(e,"__esModule",{value:!0}),e.ScreenDprMonitor=void 0;var _=function(l){function y(){var D=l!==null&&l.apply(this,arguments)||this;return D._currentDevicePixelRatio=window.devicePixelRatio,D}return f(y,l),y.prototype.setListener=function(D){var o=this;this._listener&&this.clearListener(),this._listener=D,this._outerListener=function(){o._listener&&(o._listener(window.devicePixelRatio,o._currentDevicePixelRatio),o._updateDpr())},this._updateDpr()},y.prototype.dispose=function(){l.prototype.dispose.call(this),this.clearListener()},y.prototype._updateDpr=function(){var D;this._outerListener&&((D=this._resolutionMediaMatchList)===null||D===void 0||D.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},y.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},y}(p(844).Disposable);e.ScreenDprMonitor=_},3236:function(A,e,p){var c,f=this&&this.__extends||(c=function(X,E){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,M){B.__proto__=M}||function(B,M){for(var U in M)Object.prototype.hasOwnProperty.call(M,U)&&(B[U]=M[U])},c(X,E)},function(X,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function B(){this.constructor=X}c(X,E),X.prototype=E===null?Object.create(E):(B.prototype=E.prototype,new B)});Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;var _=p(2950),l=p(1680),y=p(3614),D=p(2584),o=p(5435),a=p(3525),d=p(3551),n=p(9312),r=p(6114),t=p(3656),i=p(9042),s=p(357),u=p(6954),h=p(4567),v=p(1296),b=p(7399),m=p(8460),g=p(8437),C=p(5680),x=p(3230),w=p(4725),T=p(428),L=p(8934),S=p(6465),F=p(5114),k=p(8969),I=p(4774),q=p(4269),N=p(5941),V=typeof window<"u"?window.document:null,Y=function(X){function E(B){B===void 0&&(B={});var M=X.call(this,B)||this;return M.browser=r,M._keyDownHandled=!1,M._keyPressHandled=!1,M._unprocessedDeadKey=!1,M._onCursorMove=new m.EventEmitter,M._onKey=new m.EventEmitter,M._onRender=new m.EventEmitter,M._onSelectionChange=new m.EventEmitter,M._onTitleChange=new m.EventEmitter,M._onBell=new m.EventEmitter,M._onFocus=new m.EventEmitter,M._onBlur=new m.EventEmitter,M._onA11yCharEmitter=new m.EventEmitter,M._onA11yTabEmitter=new m.EventEmitter,M._setup(),M.linkifier=M._instantiationService.createInstance(d.Linkifier),M.linkifier2=M.register(M._instantiationService.createInstance(S.Linkifier2)),M.register(M._inputHandler.onRequestBell(function(){return M.bell()})),M.register(M._inputHandler.onRequestRefreshRows(function(U,O){return M.refresh(U,O)})),M.register(M._inputHandler.onRequestSendFocus(function(){return M._reportFocus()})),M.register(M._inputHandler.onRequestReset(function(){return M.reset()})),M.register(M._inputHandler.onRequestWindowsOptionsReport(function(U){return M._reportWindowsOptions(U)})),M.register(M._inputHandler.onColor(function(U){return M._handleColorEvent(U)})),M.register((0,m.forwardEvent)(M._inputHandler.onCursorMove,M._onCursorMove)),M.register((0,m.forwardEvent)(M._inputHandler.onTitleChange,M._onTitleChange)),M.register((0,m.forwardEvent)(M._inputHandler.onA11yChar,M._onA11yCharEmitter)),M.register((0,m.forwardEvent)(M._inputHandler.onA11yTab,M._onA11yTabEmitter)),M.register(M._bufferService.onResize(function(U){return M._afterResize(U.cols,U.rows)})),M}return f(E,X),Object.defineProperty(E.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),E.prototype._handleColorEvent=function(B){var M,U;if(this._colorManager){for(var O=0,z=B;O<z.length;O++){var G=z[O],Z=void 0,$="";switch(G.index){case 256:Z="foreground",$="10";break;case 257:Z="background",$="11";break;case 258:Z="cursor",$="12";break;default:Z="ansi",$="4;"+G.index}if(Z)switch(G.type){case 0:var te=I.color.toColorRGB(Z==="ansi"?this._colorManager.colors.ansi[G.index]:this._colorManager.colors[Z]);this.coreService.triggerDataEvent(D.C0.ESC+"]"+$+";"+(0,N.toRgbString)(te)+D.C0.BEL);break;case 1:Z==="ansi"?this._colorManager.colors.ansi[G.index]=I.rgba.toColor.apply(I.rgba,G.color):this._colorManager.colors[Z]=I.rgba.toColor.apply(I.rgba,G.color);break;case 2:this._colorManager.restoreColor(G.index)}}(M=this._renderService)===null||M===void 0||M.setColors(this._colorManager.colors),(U=this.viewport)===null||U===void 0||U.onThemeChange(this._colorManager.colors)}},E.prototype.dispose=function(){var B,M,U;this._isDisposed||(X.prototype.dispose.call(this),(B=this._renderService)===null||B===void 0||B.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(U=(M=this.element)===null||M===void 0?void 0:M.parentNode)===null||U===void 0||U.removeChild(this.element))},E.prototype._setup=function(){X.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(E.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),E.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},E.prototype._updateOptions=function(B){var M,U,O,z;switch(X.prototype._updateOptions.call(this,B),B){case"fontFamily":case"fontSize":(M=this._renderService)===null||M===void 0||M.clear(),(U=this._charSizeService)===null||U===void 0||U.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(O=this.viewport)===null||O===void 0||O.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new h.AccessibilityManager(this,this._renderService)):((z=this._accessibilityManager)===null||z===void 0||z.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},E.prototype._onTextAreaFocus=function(B){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(D.C0.ESC+"[I"),this.updateCursorStyle(B),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},E.prototype.blur=function(){var B;return(B=this.textarea)===null||B===void 0?void 0:B.blur()},E.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(D.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},E.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var B=this.buffer.ybase+this.buffer.y,M=this.buffer.lines.get(B);if(M){var U=Math.min(this.buffer.x,this.cols-1),O=this._renderService.dimensions.actualCellHeight,z=M.getWidth(U),G=this._renderService.dimensions.actualCellWidth*z,Z=this.buffer.y*this._renderService.dimensions.actualCellHeight,$=U*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=$+"px",this.textarea.style.top=Z+"px",this.textarea.style.width=G+"px",this.textarea.style.height=O+"px",this.textarea.style.lineHeight=O+"px",this.textarea.style.zIndex="-5"}}},E.prototype._initGlobal=function(){var B=this;this._bindKeys(),this.register((0,t.addDisposableDomListener)(this.element,"copy",function(U){B.hasSelection()&&(0,y.copyHandler)(U,B._selectionService)}));var M=function(U){return(0,y.handlePasteEvent)(U,B.textarea,B.coreService)};this.register((0,t.addDisposableDomListener)(this.textarea,"paste",M)),this.register((0,t.addDisposableDomListener)(this.element,"paste",M)),r.isFirefox?this.register((0,t.addDisposableDomListener)(this.element,"mousedown",function(U){U.button===2&&(0,y.rightClickHandler)(U,B.textarea,B.screenElement,B._selectionService,B.options.rightClickSelectsWord)})):this.register((0,t.addDisposableDomListener)(this.element,"contextmenu",function(U){(0,y.rightClickHandler)(U,B.textarea,B.screenElement,B._selectionService,B.options.rightClickSelectsWord)})),r.isLinux&&this.register((0,t.addDisposableDomListener)(this.element,"auxclick",function(U){U.button===1&&(0,y.moveTextAreaUnderMouseCursor)(U,B.textarea,B.screenElement)}))},E.prototype._bindKeys=function(){var B=this;this.register((0,t.addDisposableDomListener)(this.textarea,"keyup",function(M){return B._keyUp(M)},!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"keydown",function(M){return B._keyDown(M)},!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"keypress",function(M){return B._keyPress(M)},!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionstart",function(){return B._compositionHelper.compositionstart()})),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionupdate",function(M){return B._compositionHelper.compositionupdate(M)})),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionend",function(){return B._compositionHelper.compositionend()})),this.register((0,t.addDisposableDomListener)(this.textarea,"input",function(M){return B._inputEvent(M)},!0)),this.register(this.onRender(function(){return B._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(M){return B._queueLinkification(M.start,M.end)}))},E.prototype.open=function(B){var M=this;if(!B)throw new Error("Terminal requires a parent element.");B.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=B.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),B.appendChild(this.element);var U=V.createDocumentFragment();this._viewportElement=V.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),U.appendChild(this._viewportElement),this._viewportScrollArea=V.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=V.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=V.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),U.appendChild(this.screenElement),this.textarea=V.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",i.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,t.addDisposableDomListener)(this.textarea,"focus",function(G){return M._onTextAreaFocus(G)})),this.register((0,t.addDisposableDomListener)(this.textarea,"blur",function(){return M._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var O=this._instantiationService.createInstance(F.CoreBrowserService,this.textarea);this._instantiationService.setService(w.ICoreBrowserService,O),this._charSizeService=this._instantiationService.createInstance(T.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new C.ColorManager(V,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(G){return M._colorManager.onOptionsChange(G)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(q.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService);var z=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,z,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(G){return M._onRender.fire(G)})),this.onResize(function(G){return M._renderService.resize(G.cols,G.rows)}),this._compositionView=V.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(_.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(U),this._soundService=this._instantiationService.createInstance(s.SoundService),this._instantiationService.setService(w.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(L.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(l.Viewport,function(G){return M.scrollLines(G,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return M.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){M._renderService.onCursorMove(),M._syncTextArea()})),this.register(this.onResize(function(){return M._renderService.onResize(M.cols,M.rows)})),this.register(this.onBlur(function(){return M._renderService.onBlur()})),this.register(this.onFocus(function(){return M._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return M.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(n.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(G){return M.scrollLines(G.amount,G.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return M._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(G){return M._renderService.onSelectionChanged(G.start,G.end,G.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(G){M.textarea.value=G,M.textarea.focus(),M.textarea.select()})),this.register(this._onScroll.event(function(G){M.viewport.syncScrollArea(),M._selectionService.refresh()})),this.register((0,t.addDisposableDomListener)(this._viewportElement,"scroll",function(){return M._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(u.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return M._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register((0,t.addDisposableDomListener)(this.element,"mousedown",function(G){return M._selectionService.onMouseDown(G)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new h.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},E.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(a.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(v.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},E.prototype._setTheme=function(B){var M,U,O;this._theme=B,(M=this._colorManager)===null||M===void 0||M.setTheme(B),(U=this._renderService)===null||U===void 0||U.setColors(this._colorManager.colors),(O=this.viewport)===null||O===void 0||O.onThemeChange(this._colorManager.colors)},E.prototype.bindMouse=function(){var B=this,M=this,U=this.element;function O(K){var ee,ne,le=M._mouseService.getRawByteCoords(K,M.screenElement,M.cols,M.rows);if(!le)return!1;switch(K.overrideType||K.type){case"mousemove":ne=32,K.buttons===void 0?(ee=3,K.button!==void 0&&(ee=K.button<3?K.button:3)):ee=1&K.buttons?0:4&K.buttons?1:2&K.buttons?2:3;break;case"mouseup":ne=0,ee=K.button<3?K.button:3;break;case"mousedown":ne=1,ee=K.button<3?K.button:3;break;case"wheel":K.deltaY!==0&&(ne=K.deltaY<0?0:1),ee=4;break;default:return!1}return!(ne===void 0||ee===void 0||ee>4)&&M.coreMouseService.triggerMouseEvent({col:le.x-33,row:le.y-33,button:ee,action:ne,ctrl:K.ctrlKey,alt:K.altKey,shift:K.shiftKey})}var z={mouseup:null,wheel:null,mousedrag:null,mousemove:null},G=function(K){return O(K),K.buttons||(B._document.removeEventListener("mouseup",z.mouseup),z.mousedrag&&B._document.removeEventListener("mousemove",z.mousedrag)),B.cancel(K)},Z=function(K){return O(K),B.cancel(K,!0)},$=function(K){K.buttons&&O(K)},te=function(K){K.buttons||O(K)};this.register(this.coreMouseService.onProtocolChange(function(K){K?(B.optionsService.rawOptions.logLevel==="debug"&&B._logService.debug("Binding to mouse events:",B.coreMouseService.explainEvents(K)),B.element.classList.add("enable-mouse-events"),B._selectionService.disable()):(B._logService.debug("Unbinding from mouse events."),B.element.classList.remove("enable-mouse-events"),B._selectionService.enable()),8&K?z.mousemove||(U.addEventListener("mousemove",te),z.mousemove=te):(U.removeEventListener("mousemove",z.mousemove),z.mousemove=null),16&K?z.wheel||(U.addEventListener("wheel",Z,{passive:!1}),z.wheel=Z):(U.removeEventListener("wheel",z.wheel),z.wheel=null),2&K?z.mouseup||(z.mouseup=G):(B._document.removeEventListener("mouseup",z.mouseup),z.mouseup=null),4&K?z.mousedrag||(z.mousedrag=$):(B._document.removeEventListener("mousemove",z.mousedrag),z.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,t.addDisposableDomListener)(U,"mousedown",function(K){if(K.preventDefault(),B.focus(),B.coreMouseService.areMouseEventsActive&&!B._selectionService.shouldForceSelection(K))return O(K),z.mouseup&&B._document.addEventListener("mouseup",z.mouseup),z.mousedrag&&B._document.addEventListener("mousemove",z.mousedrag),B.cancel(K)})),this.register((0,t.addDisposableDomListener)(U,"wheel",function(K){if(!z.wheel){if(!B.buffer.hasScrollback){var ee=B.viewport.getLinesScrolled(K);if(ee===0)return;for(var ne=D.C0.ESC+(B.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(K.deltaY<0?"A":"B"),le="",we=0;we<Math.abs(ee);we++)le+=ne;return B.coreService.triggerDataEvent(le,!0),B.cancel(K,!0)}return B.viewport.onWheel(K)?B.cancel(K):void 0}},{passive:!1})),this.register((0,t.addDisposableDomListener)(U,"touchstart",function(K){if(!B.coreMouseService.areMouseEventsActive)return B.viewport.onTouchStart(K),B.cancel(K)},{passive:!0})),this.register((0,t.addDisposableDomListener)(U,"touchmove",function(K){if(!B.coreMouseService.areMouseEventsActive)return B.viewport.onTouchMove(K)?void 0:B.cancel(K)},{passive:!1}))},E.prototype.refresh=function(B,M){var U;(U=this._renderService)===null||U===void 0||U.refreshRows(B,M)},E.prototype._queueLinkification=function(B,M){var U;(U=this.linkifier)===null||U===void 0||U.linkifyRows(B,M)},E.prototype.updateCursorStyle=function(B){var M;((M=this._selectionService)===null||M===void 0?void 0:M.shouldColumnSelect(B))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},E.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},E.prototype.scrollLines=function(B,M,U){U===void 0&&(U=0),X.prototype.scrollLines.call(this,B,M,U),this.refresh(0,this.rows-1)},E.prototype.paste=function(B){(0,y.paste)(B,this.textarea,this.coreService)},E.prototype.attachCustomKeyEventHandler=function(B){this._customKeyEventHandler=B},E.prototype.registerLinkMatcher=function(B,M,U){var O=this.linkifier.registerLinkMatcher(B,M,U);return this.refresh(0,this.rows-1),O},E.prototype.deregisterLinkMatcher=function(B){this.linkifier.deregisterLinkMatcher(B)&&this.refresh(0,this.rows-1)},E.prototype.registerLinkProvider=function(B){return this.linkifier2.registerLinkProvider(B)},E.prototype.registerCharacterJoiner=function(B){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var M=this._characterJoinerService.register(B);return this.refresh(0,this.rows-1),M},E.prototype.deregisterCharacterJoiner=function(B){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(B)&&this.refresh(0,this.rows-1)},Object.defineProperty(E.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),E.prototype.addMarker=function(B){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+B)},E.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},E.prototype.select=function(B,M,U){this._selectionService.setSelection(B,M,U)},E.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},E.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},E.prototype.clearSelection=function(){var B;(B=this._selectionService)===null||B===void 0||B.clearSelection()},E.prototype.selectAll=function(){var B;(B=this._selectionService)===null||B===void 0||B.selectAll()},E.prototype.selectLines=function(B,M){var U;(U=this._selectionService)===null||U===void 0||U.selectLines(B,M)},E.prototype._keyDown=function(B){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1)return!1;if(!this._compositionHelper.keydown(B))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;B.key!=="Dead"&&B.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var M=(0,b.evaluateKeyboardEvent)(B,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(B),M.type===3||M.type===2){var U=this.rows-1;return this.scrollLines(M.type===2?-U:U),this.cancel(B,!0)}return M.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,B)||(M.cancel&&this.cancel(B,!0),!M.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(M.key!==D.C0.ETX&&M.key!==D.C0.CR||(this.textarea.value=""),this._onKey.fire({key:M.key,domEvent:B}),this._showCursor(),this.coreService.triggerDataEvent(M.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(B,!0))))},E.prototype._isThirdLevelShift=function(B,M){var U=B.isMac&&!this.options.macOptionIsMeta&&M.altKey&&!M.ctrlKey&&!M.metaKey||B.isWindows&&M.altKey&&M.ctrlKey&&!M.metaKey||B.isWindows&&M.getModifierState("AltGraph");return M.type==="keypress"?U:U&&(!M.keyCode||M.keyCode>47)},E.prototype._keyUp=function(B){this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1||(function(M){return M.keyCode===16||M.keyCode===17||M.keyCode===18}(B)||this.focus(),this.updateCursorStyle(B),this._keyPressHandled=!1)},E.prototype._keyPress=function(B){var M;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(B)===!1)return!1;if(this.cancel(B),B.charCode)M=B.charCode;else if(B.which===null||B.which===void 0)M=B.keyCode;else{if(B.which===0||B.charCode===0)return!1;M=B.which}return!(!M||(B.altKey||B.ctrlKey||B.metaKey)&&!this._isThirdLevelShift(this.browser,B)||(M=String.fromCharCode(M),this._onKey.fire({key:M,domEvent:B}),this._showCursor(),this.coreService.triggerDataEvent(M,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},E.prototype._inputEvent=function(B){if(B.data&&B.inputType==="insertText"&&!B.composed&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var M=B.data;return this.coreService.triggerDataEvent(M,!0),this.cancel(B),!0}return!1},E.prototype.bell=function(){var B;this._soundBell()&&((B=this._soundService)===null||B===void 0||B.playBellSound()),this._onBell.fire()},E.prototype.resize=function(B,M){B!==this.cols||M!==this.rows?X.prototype.resize.call(this,B,M):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},E.prototype._afterResize=function(B,M){var U,O;(U=this._charSizeService)===null||U===void 0||U.measure(),(O=this.viewport)===null||O===void 0||O.syncScrollArea(!0)},E.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var B=1;B<this.rows;B++)this.buffer.lines.push(this.buffer.getBlankLine(g.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},E.prototype.reset=function(){var B,M;this.options.rows=this.rows,this.options.cols=this.cols;var U=this._customKeyEventHandler;this._setup(),X.prototype.reset.call(this),(B=this._selectionService)===null||B===void 0||B.reset(),this._customKeyEventHandler=U,this.refresh(0,this.rows-1),(M=this.viewport)===null||M===void 0||M.syncScrollArea()},E.prototype.clearTextureAtlas=function(){var B;(B=this._renderService)===null||B===void 0||B.clearTextureAtlas()},E.prototype._reportFocus=function(){var B;((B=this.element)===null||B===void 0?void 0:B.classList.contains("focus"))?this.coreService.triggerDataEvent(D.C0.ESC+"[I"):this.coreService.triggerDataEvent(D.C0.ESC+"[O")},E.prototype._reportWindowsOptions=function(B){if(this._renderService)switch(B){case o.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var M=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),U=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(D.C0.ESC+"[4;"+U+";"+M+"t");break;case o.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var O=this._renderService.dimensions.scaledCellWidth.toFixed(0),z=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(D.C0.ESC+"[6;"+z+";"+O+"t")}},E.prototype.cancel=function(B,M){if(this.options.cancelEvents||M)return B.preventDefault(),B.stopPropagation(),!1},E.prototype._visualBell=function(){return!1},E.prototype._soundBell=function(){return this.options.bellStyle==="sound"},E}(k.CoreTerminal);e.Terminal=Y},9924:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TimeBasedDebouncer=void 0;var p=function(){function c(f,_){_===void 0&&(_=1e3),this._renderCallback=f,this._debounceThresholdMS=_,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return c.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},c.prototype.refresh=function(f,_,l){var y=this;this._rowCount=l,f=f!==void 0?f:0,_=_!==void 0?_:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,f):f,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,_):_;var D=Date.now();if(D-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=D,this._innerRefresh();else if(!this._additionalRefreshRequested){var o=D-this._lastRefreshMs,a=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){y._lastRefreshMs=Date.now(),y._innerRefresh(),y._additionalRefreshRequested=!1,y._refreshTimeoutID=void 0},a)}},c.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var f=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(f,_)}},c}();e.TimeBasedDebouncer=p},1680:function(A,e,p){var c,f=this&&this.__extends||(c=function(n,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},c(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=n}c(n,r),n.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),_=this&&this.__decorate||function(n,r,t,i){var s,u=arguments.length,h=u<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(n,r,t,i);else for(var v=n.length-1;v>=0;v--)(s=n[v])&&(h=(u<3?s(h):u>3?s(r,t,h):s(r,t))||h);return u>3&&h&&Object.defineProperty(r,t,h),h},l=this&&this.__param||function(n,r){return function(t,i){r(t,i,n)}};Object.defineProperty(e,"__esModule",{value:!0}),e.Viewport=void 0;var y=p(844),D=p(3656),o=p(4725),a=p(2585),d=function(n){function r(t,i,s,u,h,v,b,m){var g=n.call(this)||this;return g._scrollLines=t,g._viewportElement=i,g._scrollArea=s,g._element=u,g._bufferService=h,g._optionsService=v,g._charSizeService=b,g._renderService=m,g.scrollBarWidth=0,g._currentRowHeight=0,g._currentScaledCellHeight=0,g._lastRecordedBufferLength=0,g._lastRecordedViewportHeight=0,g._lastRecordedBufferHeight=0,g._lastTouchY=0,g._lastScrollTop=0,g._lastHadScrollBar=!1,g._wheelPartialScroll=0,g._refreshAnimationFrame=null,g._ignoreNextScrollEvent=!1,g.scrollBarWidth=g._viewportElement.offsetWidth-g._scrollArea.offsetWidth||15,g._lastHadScrollBar=!0,g.register((0,D.addDisposableDomListener)(g._viewportElement,"scroll",g._onScroll.bind(g))),g._activeBuffer=g._bufferService.buffer,g.register(g._bufferService.buffers.onBufferActivate(function(C){return g._activeBuffer=C.activeBuffer})),g._renderDimensions=g._renderService.dimensions,g.register(g._renderService.onDimensionsChange(function(C){return g._renderDimensions=C})),setTimeout(function(){return g.syncScrollArea()},0),g}return f(r,n),r.prototype.onThemeChange=function(t){this._viewportElement.style.backgroundColor=t.background.css},r.prototype._refresh=function(t){var i=this;if(t)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return i._innerRefresh()}))},r.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var t=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==t&&(this._lastRecordedBufferHeight=t,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==i&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=i),this._optionsService.rawOptions.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var s=window.getComputedStyle(this._element),u=parseInt(s.paddingLeft)+parseInt(s.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?u:0)).toString()+"px",this._refreshAnimationFrame=null},r.prototype.syncScrollArea=function(t){if(t===void 0&&(t=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(t);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.rawOptions.scrollback>0&&this._refresh(t):this._refresh(t)},r.prototype._onScroll=function(t){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var i=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(i)}},r.prototype._bubbleScroll=function(t,i){var s=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(i<0&&this._viewportElement.scrollTop!==0||i>0&&s<this._lastRecordedBufferHeight)||(t.cancelable&&t.preventDefault(),!1)},r.prototype.onWheel=function(t){var i=this._getPixelsScrolled(t);return i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(t,i))},r.prototype._getPixelsScrolled=function(t){if(t.deltaY===0||t.shiftKey)return 0;var i=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._currentRowHeight:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._currentRowHeight*this._bufferService.rows),i},r.prototype.getLinesScrolled=function(t){if(t.deltaY===0||t.shiftKey)return 0;var i=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(i/=this._currentRowHeight+0,this._wheelPartialScroll+=i,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i},r.prototype._applyScrollModifier=function(t,i){var s=this._optionsService.rawOptions.fastScrollModifier;return s==="alt"&&i.altKey||s==="ctrl"&&i.ctrlKey||s==="shift"&&i.shiftKey?t*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:t*this._optionsService.rawOptions.scrollSensitivity},r.prototype.onTouchStart=function(t){this._lastTouchY=t.touches[0].pageY},r.prototype.onTouchMove=function(t){var i=this._lastTouchY-t.touches[0].pageY;return this._lastTouchY=t.touches[0].pageY,i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(t,i))},_([l(4,a.IBufferService),l(5,a.IOptionsService),l(6,o.ICharSizeService),l(7,o.IRenderService)],r)}(y.Disposable);e.Viewport=d},2950:function(A,e,p){var c=this&&this.__decorate||function(D,o,a,d){var n,r=arguments.length,t=r<3?o:d===null?d=Object.getOwnPropertyDescriptor(o,a):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(D,o,a,d);else for(var i=D.length-1;i>=0;i--)(n=D[i])&&(t=(r<3?n(t):r>3?n(o,a,t):n(o,a))||t);return r>3&&t&&Object.defineProperty(o,a,t),t},f=this&&this.__param||function(D,o){return function(a,d){o(a,d,D)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CompositionHelper=void 0;var _=p(4725),l=p(2585),y=function(){function D(o,a,d,n,r,t){this._textarea=o,this._compositionView=a,this._bufferService=d,this._optionsService=n,this._coreService=r,this._renderService=t,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(D.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),D.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},D.prototype.compositionupdate=function(o){var a=this;this._compositionView.textContent=o.data,this.updateCompositionElements(),setTimeout(function(){a._compositionPosition.end=a._textarea.value.length},0)},D.prototype.compositionend=function(){this._finalizeComposition(!0)},D.prototype.keydown=function(o){if(this._isComposing||this._isSendingComposition){if(o.keyCode===229||o.keyCode===16||o.keyCode===17||o.keyCode===18)return!1;this._finalizeComposition(!1)}return o.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},D.prototype._finalizeComposition=function(o){var a=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,o){var d={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(a._isSendingComposition){a._isSendingComposition=!1;var r;d.start+=a._dataAlreadySent.length,(r=a._isComposing?a._textarea.value.substring(d.start,d.end):a._textarea.value.substring(d.start)).length>0&&a._coreService.triggerDataEvent(r,!0)}},0)}else{this._isSendingComposition=!1;var n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}},D.prototype._handleAnyTextareaChanges=function(){var o=this,a=this._textarea.value;setTimeout(function(){if(!o._isComposing){var d=o._textarea.value.replace(a,"");d.length>0&&(o._dataAlreadySent=d,o._coreService.triggerDataEvent(d,!0))}},0)},D.prototype.updateCompositionElements=function(o){var a=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var d=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.actualCellHeight,r=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,t=d*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=t+"px",this._compositionView.style.top=r+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var i=this._compositionView.getBoundingClientRect();this._textarea.style.left=t+"px",this._textarea.style.top=r+"px",this._textarea.style.width=Math.max(i.width,1)+"px",this._textarea.style.height=Math.max(i.height,1)+"px",this._textarea.style.lineHeight=i.height+"px"}o||setTimeout(function(){return a.updateCompositionElements(!0)},0)}},c([f(2,l.IBufferService),f(3,l.IOptionsService),f(4,l.ICoreService),f(5,_.IRenderService)],D)}();e.CompositionHelper=y},9806:(A,e)=>{function p(c,f){var _=f.getBoundingClientRect();return[c.clientX-_.left,c.clientY-_.top]}Object.defineProperty(e,"__esModule",{value:!0}),e.getRawByteCoords=e.getCoords=e.getCoordsRelativeToElement=void 0,e.getCoordsRelativeToElement=p,e.getCoords=function(c,f,_,l,y,D,o,a){if(y){var d=p(c,f);if(d)return d[0]=Math.ceil((d[0]+(a?D/2:0))/D),d[1]=Math.ceil(d[1]/o),d[0]=Math.min(Math.max(d[0],1),_+(a?1:0)),d[1]=Math.min(Math.max(d[1],1),l),d}},e.getRawByteCoords=function(c){if(c)return{x:c[0]+32,y:c[1]+32}}},9504:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.moveToCellSequence=void 0;var c=p(2584);function f(a,d,n,r){var t=a-_(n,a),i=d-_(n,d),s=Math.abs(t-i)-function(u,h,v){for(var b=0,m=u-_(v,u),g=h-_(v,h),C=0;C<Math.abs(m-g);C++){var x=l(u,h)==="A"?-1:1,w=v.buffer.lines.get(m+x*C);(w==null?void 0:w.isWrapped)&&b++}return b}(a,d,n);return o(s,D(l(a,d),r))}function _(a,d){for(var n=0,r=a.buffer.lines.get(d),t=r==null?void 0:r.isWrapped;t&&d>=0&&d<a.rows;)n++,t=(r=a.buffer.lines.get(--d))==null?void 0:r.isWrapped;return n}function l(a,d){return a>d?"A":"B"}function y(a,d,n,r,t,i){for(var s=a,u=d,h="";s!==n||u!==r;)s+=t?1:-1,t&&s>i.cols-1?(h+=i.buffer.translateBufferLineToString(u,!1,a,s),s=0,a=0,u++):!t&&s<0&&(h+=i.buffer.translateBufferLineToString(u,!1,0,a+1),a=s=i.cols-1,u--);return h+i.buffer.translateBufferLineToString(u,!1,a,s)}function D(a,d){var n=d?"O":"[";return c.C0.ESC+n+a}function o(a,d){a=Math.floor(a);for(var n="",r=0;r<a;r++)n+=d;return n}e.moveToCellSequence=function(a,d,n,r){var t,i=n.buffer.x,s=n.buffer.y;if(!n.buffer.hasScrollback)return function(h,v,b,m,g,C){return f(v,m,g,C).length===0?"":o(y(h,v,h,v-_(g,v),!1,g).length,D("D",C))}(i,s,0,d,n,r)+f(s,d,n,r)+function(h,v,b,m,g,C){var x;x=f(v,m,g,C).length>0?m-_(g,m):v;var w=m,T=function(L,S,F,k,I,q){var N;return N=f(F,k,I,q).length>0?k-_(I,k):S,L<F&&N<=k||L>=F&&N<k?"C":"D"}(h,v,b,m,g,C);return o(y(h,x,b,w,T==="C",g).length,D(T,C))}(i,s,a,d,n,r);if(s===d)return t=i>a?"D":"C",o(Math.abs(i-a),D(t,r));t=s>d?"D":"C";var u=Math.abs(s-d);return o(function(h,v){return v.cols-h}(s>d?a:i,n)+(u-1)*n.cols+1+((s>d?i:a)-1),D(t,r))}},4389:function(A,e,p){var c=this&&this.__assign||function(){return c=Object.assign||function(n){for(var r,t=1,i=arguments.length;t<i;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s]);return n},c.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;var f=p(3236),_=p(9042),l=p(7975),y=p(7090),D=p(5741),o=p(8285),a=["cols","rows"],d=function(){function n(r){var t=this;this._core=new f.Terminal(r),this._addonManager=new D.AddonManager,this._publicOptions=c({},this._core.options);var i=function(v){return t._core.options[v]},s=function(v,b){t._checkReadonlyOptions(v),t._core.options[v]=b};for(var u in this._core.options){var h={get:i.bind(this,u),set:s.bind(this,u)};Object.defineProperty(this._publicOptions,u,h)}}return n.prototype._checkReadonlyOptions=function(r){if(a.includes(r))throw new Error('Option "'+r+'" can only be set in the constructor')},n.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(n.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new l.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"unicode",{get:function(){return this._checkProposedApi(),new y.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new o.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"modes",{get:function(){var r=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:r.applicationCursorKeys,applicationKeypadMode:r.applicationKeypad,bracketedPasteMode:r.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:r.origin,reverseWraparoundMode:r.reverseWraparound,sendFocusMode:r.sendFocus,wraparoundMode:r.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"options",{get:function(){return this._publicOptions},set:function(r){for(var t in r)this._publicOptions[t]=r[t]},enumerable:!1,configurable:!0}),n.prototype.blur=function(){this._core.blur()},n.prototype.focus=function(){this._core.focus()},n.prototype.resize=function(r,t){this._verifyIntegers(r,t),this._core.resize(r,t)},n.prototype.open=function(r){this._core.open(r)},n.prototype.attachCustomKeyEventHandler=function(r){this._core.attachCustomKeyEventHandler(r)},n.prototype.registerLinkMatcher=function(r,t,i){return this._checkProposedApi(),this._core.registerLinkMatcher(r,t,i)},n.prototype.deregisterLinkMatcher=function(r){this._checkProposedApi(),this._core.deregisterLinkMatcher(r)},n.prototype.registerLinkProvider=function(r){return this._checkProposedApi(),this._core.registerLinkProvider(r)},n.prototype.registerCharacterJoiner=function(r){return this._checkProposedApi(),this._core.registerCharacterJoiner(r)},n.prototype.deregisterCharacterJoiner=function(r){this._checkProposedApi(),this._core.deregisterCharacterJoiner(r)},n.prototype.registerMarker=function(r){return this._checkProposedApi(),this._verifyIntegers(r),this._core.addMarker(r)},n.prototype.addMarker=function(r){return this.registerMarker(r)},n.prototype.hasSelection=function(){return this._core.hasSelection()},n.prototype.select=function(r,t,i){this._verifyIntegers(r,t,i),this._core.select(r,t,i)},n.prototype.getSelection=function(){return this._core.getSelection()},n.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},n.prototype.clearSelection=function(){this._core.clearSelection()},n.prototype.selectAll=function(){this._core.selectAll()},n.prototype.selectLines=function(r,t){this._verifyIntegers(r,t),this._core.selectLines(r,t)},n.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},n.prototype.scrollLines=function(r){this._verifyIntegers(r),this._core.scrollLines(r)},n.prototype.scrollPages=function(r){this._verifyIntegers(r),this._core.scrollPages(r)},n.prototype.scrollToTop=function(){this._core.scrollToTop()},n.prototype.scrollToBottom=function(){this._core.scrollToBottom()},n.prototype.scrollToLine=function(r){this._verifyIntegers(r),this._core.scrollToLine(r)},n.prototype.clear=function(){this._core.clear()},n.prototype.write=function(r,t){this._core.write(r,t)},n.prototype.writeUtf8=function(r,t){this._core.write(r,t)},n.prototype.writeln=function(r,t){this._core.write(r),this._core.write(`\r
`,t)},n.prototype.paste=function(r){this._core.paste(r)},n.prototype.getOption=function(r){return this._core.optionsService.getOption(r)},n.prototype.setOption=function(r,t){this._checkReadonlyOptions(r),this._core.optionsService.setOption(r,t)},n.prototype.refresh=function(r,t){this._verifyIntegers(r,t),this._core.refresh(r,t)},n.prototype.reset=function(){this._core.reset()},n.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},n.prototype.loadAddon=function(r){return this._addonManager.loadAddon(this,r)},Object.defineProperty(n,"strings",{get:function(){return _},enumerable:!1,configurable:!0}),n.prototype._verifyIntegers=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var i=0,s=r;i<s.length;i++){var u=s[i];if(u===1/0||isNaN(u)||u%1!=0)throw new Error("This API only accepts integers")}},n}();e.Terminal=d},1546:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseRenderLayer=void 0;var c=p(643),f=p(8803),_=p(1420),l=p(3734),y=p(1752),D=p(4774),o=p(9631),a=p(8978),d=function(){function n(r,t,i,s,u,h,v,b){this._container=r,this._alpha=s,this._colors=u,this._rendererId=h,this._bufferService=v,this._optionsService=b,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+t+"-layer"),this._canvas.style.zIndex=i.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return n.prototype.dispose=function(){var r;(0,o.removeElementFromParent)(this._canvas),(r=this._charAtlas)===null||r===void 0||r.dispose()},n.prototype._initCanvas=function(){this._ctx=(0,y.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},n.prototype.onOptionsChanged=function(){},n.prototype.onBlur=function(){},n.prototype.onFocus=function(){},n.prototype.onCursorMove=function(){},n.prototype.onGridChanged=function(r,t){},n.prototype.onSelectionChanged=function(r,t,i){i===void 0&&(i=!1)},n.prototype.setColors=function(r){this._refreshCharAtlas(r)},n.prototype._setTransparency=function(r){if(r!==this._alpha){var t=this._canvas;this._alpha=r,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,t),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},n.prototype._refreshCharAtlas=function(r){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,_.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,r,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},n.prototype.resize=function(r){this._scaledCellWidth=r.scaledCellWidth,this._scaledCellHeight=r.scaledCellHeight,this._scaledCharWidth=r.scaledCharWidth,this._scaledCharHeight=r.scaledCharHeight,this._scaledCharLeft=r.scaledCharLeft,this._scaledCharTop=r.scaledCharTop,this._canvas.width=r.scaledCanvasWidth,this._canvas.height=r.scaledCanvasHeight,this._canvas.style.width=r.canvasWidth+"px",this._canvas.style.height=r.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},n.prototype.clearTextureAtlas=function(){var r;(r=this._charAtlas)===null||r===void 0||r.clear()},n.prototype._fillCells=function(r,t,i,s){this._ctx.fillRect(r*this._scaledCellWidth,t*this._scaledCellHeight,i*this._scaledCellWidth,s*this._scaledCellHeight)},n.prototype._fillMiddleLineAtCells=function(r,t,i){i===void 0&&(i=1);var s=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(r*this._scaledCellWidth,(t+1)*this._scaledCellHeight-s-window.devicePixelRatio,i*this._scaledCellWidth,window.devicePixelRatio)},n.prototype._fillBottomLineAtCells=function(r,t,i){i===void 0&&(i=1),this._ctx.fillRect(r*this._scaledCellWidth,(t+1)*this._scaledCellHeight-window.devicePixelRatio-1,i*this._scaledCellWidth,window.devicePixelRatio)},n.prototype._fillLeftLineAtCell=function(r,t,i){this._ctx.fillRect(r*this._scaledCellWidth,t*this._scaledCellHeight,window.devicePixelRatio*i,this._scaledCellHeight)},n.prototype._strokeRectAtCell=function(r,t,i,s){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(r*this._scaledCellWidth+window.devicePixelRatio/2,t*this._scaledCellHeight+window.devicePixelRatio/2,i*this._scaledCellWidth-window.devicePixelRatio,s*this._scaledCellHeight-window.devicePixelRatio)},n.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},n.prototype._clearCells=function(r,t,i,s){this._alpha?this._ctx.clearRect(r*this._scaledCellWidth,t*this._scaledCellHeight,i*this._scaledCellWidth,s*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(r*this._scaledCellWidth,t*this._scaledCellHeight,i*this._scaledCellWidth,s*this._scaledCellHeight))},n.prototype._fillCharTrueColor=function(r,t,i){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=f.TEXT_BASELINE,this._clipRow(i);var s=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(s=(0,a.tryDrawCustomChar)(this._ctx,r.getChars(),t*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),s||this._ctx.fillText(r.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},n.prototype._drawChars=function(r,t,i){var s,u,h,v=this._getContrastColor(r);v||r.isFgRGB()||r.isBgRGB()?this._drawUncachedChars(r,t,i,v):(r.isInverse()?(u=r.isBgDefault()?f.INVERTED_DEFAULT_COLOR:r.getBgColor(),h=r.isFgDefault()?f.INVERTED_DEFAULT_COLOR:r.getFgColor()):(h=r.isBgDefault()?c.DEFAULT_COLOR:r.getBgColor(),u=r.isFgDefault()?c.DEFAULT_COLOR:r.getFgColor()),u+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&r.isBold()&&u<8?8:0,this._currentGlyphIdentifier.chars=r.getChars()||c.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=r.getCode()||c.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=h,this._currentGlyphIdentifier.fg=u,this._currentGlyphIdentifier.bold=!!r.isBold(),this._currentGlyphIdentifier.dim=!!r.isDim(),this._currentGlyphIdentifier.italic=!!r.isItalic(),((s=this._charAtlas)===null||s===void 0?void 0:s.draw(this._ctx,this._currentGlyphIdentifier,t*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(r,t,i))},n.prototype._drawUncachedChars=function(r,t,i,s){if(this._ctx.save(),this._ctx.font=this._getFont(!!r.isBold(),!!r.isItalic()),this._ctx.textBaseline=f.TEXT_BASELINE,r.isInverse())if(s)this._ctx.fillStyle=s.css;else if(r.isBgDefault())this._ctx.fillStyle=D.color.opaque(this._colors.background).css;else if(r.isBgRGB())this._ctx.fillStyle="rgb("+l.AttributeData.toColorRGB(r.getBgColor()).join(",")+")";else{var u=r.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&r.isBold()&&u<8&&(u+=8),this._ctx.fillStyle=this._colors.ansi[u].css}else if(s)this._ctx.fillStyle=s.css;else if(r.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(r.isFgRGB())this._ctx.fillStyle="rgb("+l.AttributeData.toColorRGB(r.getFgColor()).join(",")+")";else{var h=r.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&r.isBold()&&h<8&&(h+=8),this._ctx.fillStyle=this._colors.ansi[h].css}this._clipRow(i),r.isDim()&&(this._ctx.globalAlpha=f.DIM_OPACITY);var v=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(v=(0,a.tryDrawCustomChar)(this._ctx,r.getChars(),t*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),v||this._ctx.fillText(r.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},n.prototype._clipRow=function(r){this._ctx.beginPath(),this._ctx.rect(0,r*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},n.prototype._getFont=function(r,t){return(t?"italic":"")+" "+(r?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},n.prototype._getContrastColor=function(r){if(this._optionsService.rawOptions.minimumContrastRatio!==1){var t=this._colors.contrastCache.getColor(r.bg,r.fg);if(t!==void 0)return t||void 0;var i=r.getFgColor(),s=r.getFgColorMode(),u=r.getBgColor(),h=r.getBgColorMode(),v=!!r.isInverse(),b=!!r.isInverse();if(v){var m=i;i=u,u=m;var g=s;s=h,h=g}var C=this._resolveBackgroundRgba(h,u,v),x=this._resolveForegroundRgba(s,i,v,b),w=D.rgba.ensureContrastRatio(C,x,this._optionsService.rawOptions.minimumContrastRatio);if(w){var T={css:D.channels.toCss(w>>24&255,w>>16&255,w>>8&255),rgba:w};return this._colors.contrastCache.setColor(r.bg,r.fg,T),T}this._colors.contrastCache.setColor(r.bg,r.fg,null)}},n.prototype._resolveBackgroundRgba=function(r,t,i){switch(r){case 16777216:case 33554432:return this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return i?this._colors.foreground.rgba:this._colors.background.rgba}},n.prototype._resolveForegroundRgba=function(r,t,i,s){switch(r){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&s&&t<8&&(t+=8),this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return i?this._colors.background.rgba:this._colors.foreground.rgba}},n}();e.BaseRenderLayer=d},2512:function(A,e,p){var c,f=this&&this.__extends||(c=function(t,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(s[h]=u[h])},c(t,i)},function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=t}c(t,i),t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}),_=this&&this.__decorate||function(t,i,s,u){var h,v=arguments.length,b=v<3?i:u===null?u=Object.getOwnPropertyDescriptor(i,s):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(t,i,s,u);else for(var m=t.length-1;m>=0;m--)(h=t[m])&&(b=(v<3?h(b):v>3?h(i,s,b):h(i,s))||b);return v>3&&b&&Object.defineProperty(i,s,b),b},l=this&&this.__param||function(t,i){return function(s,u){i(s,u,t)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CursorRenderLayer=void 0;var y=p(1546),D=p(511),o=p(2585),a=p(4725),d=600,n=function(t){function i(s,u,h,v,b,m,g,C,x){var w=t.call(this,s,"cursor",u,!0,h,v,m,g)||this;return w._onRequestRedraw=b,w._coreService=C,w._coreBrowserService=x,w._cell=new D.CellData,w._state={x:0,y:0,isFocused:!1,style:"",width:0},w._cursorRenderers={bar:w._renderBarCursor.bind(w),block:w._renderBlockCursor.bind(w),underline:w._renderUnderlineCursor.bind(w)},w}return f(i,t),i.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),t.prototype.dispose.call(this)},i.prototype.resize=function(s){t.prototype.resize.call(this,s),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},i.prototype.reset=function(){var s;this._clearCursor(),(s=this._cursorBlinkStateManager)===null||s===void 0||s.restartBlinkAnimation(),this.onOptionsChanged()},i.prototype.onBlur=function(){var s;(s=this._cursorBlinkStateManager)===null||s===void 0||s.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onFocus=function(){var s;(s=this._cursorBlinkStateManager)===null||s===void 0||s.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onOptionsChanged=function(){var s,u=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new r(this._coreBrowserService.isFocused,function(){u._render(!0)})):((s=this._cursorBlinkStateManager)===null||s===void 0||s.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onCursorMove=function(){var s;(s=this._cursorBlinkStateManager)===null||s===void 0||s.restartBlinkAnimation()},i.prototype.onGridChanged=function(s,u){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},i.prototype._render=function(s){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var u=this._bufferService.buffer.ybase+this._bufferService.buffer.y,h=u-this._bufferService.buffer.ydisp;if(h<0||h>=this._bufferService.rows)this._clearCursor();else{var v=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(u).loadCell(v,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var b=this._optionsService.rawOptions.cursorStyle;return b&&b!=="block"?this._cursorRenderers[b](v,h,this._cell):this._renderBlurCursor(v,h,this._cell),this._ctx.restore(),this._state.x=v,this._state.y=h,this._state.isFocused=!1,this._state.style=b,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===v&&this._state.y===h&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](v,h,this._cell),this._ctx.restore(),this._state.x=v,this._state.y=h,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},i.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},i.prototype._renderBarCursor=function(s,u,h){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(s,u,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},i.prototype._renderBlockCursor=function(s,u,h){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(s,u,h.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(h,s,u),this._ctx.restore()},i.prototype._renderUnderlineCursor=function(s,u,h){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(s,u),this._ctx.restore()},i.prototype._renderBlurCursor=function(s,u,h){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(s,u,h.getWidth(),1),this._ctx.restore()},_([l(5,o.IBufferService),l(6,o.IOptionsService),l(7,o.ICoreService),l(8,a.ICoreBrowserService)],i)}(y.BaseRenderLayer);e.CursorRenderLayer=n;var r=function(){function t(i,s){this._renderCallback=s,this.isCursorVisible=!0,i&&this._restartInterval()}return Object.defineProperty(t.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.restartBlinkAnimation=function(){var i=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){i._renderCallback(),i._animationFrame=void 0})))},t.prototype._restartInterval=function(i){var s=this;i===void 0&&(i=d),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(s._animationTimeRestarted){var u=d-(Date.now()-s._animationTimeRestarted);if(s._animationTimeRestarted=void 0,u>0)return void s._restartInterval(u)}s.isCursorVisible=!1,s._animationFrame=window.requestAnimationFrame(function(){s._renderCallback(),s._animationFrame=void 0}),s._blinkInterval=window.setInterval(function(){if(s._animationTimeRestarted){var h=d-(Date.now()-s._animationTimeRestarted);return s._animationTimeRestarted=void 0,void s._restartInterval(h)}s.isCursorVisible=!s.isCursorVisible,s._animationFrame=window.requestAnimationFrame(function(){s._renderCallback(),s._animationFrame=void 0})},d)},i)},t.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},t}()},8978:(A,e,p)=>{var c,f,_,l,y,D,o,a,d,n,r,t,i,s,u,h,v,b,m,g,C,x,w,T,L,S,F,k,I,q,N,V,Y,X,E,B,M,U,O,z,G,Z,$,te,K,ee,ne,le,we,Nt,zt,Kt,Gt,Vt,Yt,Xt,Zt,Jt,$t,Qt,er,tr,Ue,qe,Ne,ze,Ke,Ge,Ve,Ye,Xe,Ze,Je,$e,Qe,et,tt,rt,it,nt,ot,st,at,ut,ct,lt,ht,ft,dt,_t,pt,vt,Dt,gt,Ct,yt,mt,bt,St,Et,wt,xt,Ft,Lt,At,Bt,Mt,kt,Rt,Ot,Tt,Pt,rr,ir,nr,or,sr,ar,ur,cr,lr,hr,fr,dr,_r,pr,vr,Dr;Object.defineProperty(e,"__esModule",{value:!0}),e.tryDrawCustomChar=e.boxDrawingDefinitions=e.blockElementDefinitions=void 0;var Ar=p(1752);e.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var ii={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};e.boxDrawingDefinitions={"\u2500":(c={},c[1]="M0,.5 L1,.5",c),"\u2501":(f={},f[3]="M0,.5 L1,.5",f),"\u2502":(_={},_[1]="M.5,0 L.5,1",_),"\u2503":(l={},l[3]="M.5,0 L.5,1",l),"\u250C":(y={},y[1]="M0.5,1 L.5,.5 L1,.5",y),"\u250F":(D={},D[3]="M0.5,1 L.5,.5 L1,.5",D),"\u2510":(o={},o[1]="M0,.5 L.5,.5 L.5,1",o),"\u2513":(a={},a[3]="M0,.5 L.5,.5 L.5,1",a),"\u2514":(d={},d[1]="M.5,0 L.5,.5 L1,.5",d),"\u2517":(n={},n[3]="M.5,0 L.5,.5 L1,.5",n),"\u2518":(r={},r[1]="M.5,0 L.5,.5 L0,.5",r),"\u251B":(t={},t[3]="M.5,0 L.5,.5 L0,.5",t),"\u251C":(i={},i[1]="M.5,0 L.5,1 M.5,.5 L1,.5",i),"\u2523":(s={},s[3]="M.5,0 L.5,1 M.5,.5 L1,.5",s),"\u2524":(u={},u[1]="M.5,0 L.5,1 M.5,.5 L0,.5",u),"\u252B":(h={},h[3]="M.5,0 L.5,1 M.5,.5 L0,.5",h),"\u252C":(v={},v[1]="M0,.5 L1,.5 M.5,.5 L.5,1",v),"\u2533":(b={},b[3]="M0,.5 L1,.5 M.5,.5 L.5,1",b),"\u2534":(m={},m[1]="M0,.5 L1,.5 M.5,.5 L.5,0",m),"\u253B":(g={},g[3]="M0,.5 L1,.5 M.5,.5 L.5,0",g),"\u253C":(C={},C[1]="M0,.5 L1,.5 M.5,0 L.5,1",C),"\u254B":(x={},x[3]="M0,.5 L1,.5 M.5,0 L.5,1",x),"\u2574":(w={},w[1]="M.5,.5 L0,.5",w),"\u2578":(T={},T[3]="M.5,.5 L0,.5",T),"\u2575":(L={},L[1]="M.5,.5 L.5,0",L),"\u2579":(S={},S[3]="M.5,.5 L.5,0",S),"\u2576":(F={},F[1]="M.5,.5 L1,.5",F),"\u257A":(k={},k[3]="M.5,.5 L1,.5",k),"\u2577":(I={},I[1]="M.5,.5 L.5,1",I),"\u257B":(q={},q[3]="M.5,.5 L.5,1",q),"\u2550":(N={},N[1]=function(W,H){return"M0,"+(.5-H)+" L1,"+(.5-H)+" M0,"+(.5+H)+" L1,"+(.5+H)},N),"\u2551":(V={},V[1]=function(W,H){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},V),"\u2552":(Y={},Y[1]=function(W,H){return"M.5,1 L.5,"+(.5-H)+" L1,"+(.5-H)+" M.5,"+(.5+H)+" L1,"+(.5+H)},Y),"\u2553":(X={},X[1]=function(W,H){return"M"+(.5-W)+",1 L"+(.5-W)+",.5 L1,.5 M"+(.5+W)+",.5 L"+(.5+W)+",1"},X),"\u2554":(E={},E[1]=function(W,H){return"M1,"+(.5-H)+" L"+(.5-W)+","+(.5-H)+" L"+(.5-W)+",1 M1,"+(.5+H)+" L"+(.5+W)+","+(.5+H)+" L"+(.5+W)+",1"},E),"\u2555":(B={},B[1]=function(W,H){return"M0,"+(.5-H)+" L.5,"+(.5-H)+" L.5,1 M0,"+(.5+H)+" L.5,"+(.5+H)},B),"\u2556":(M={},M[1]=function(W,H){return"M"+(.5+W)+",1 L"+(.5+W)+",.5 L0,.5 M"+(.5-W)+",.5 L"+(.5-W)+",1"},M),"\u2557":(U={},U[1]=function(W,H){return"M0,"+(.5+H)+" L"+(.5-W)+","+(.5+H)+" L"+(.5-W)+",1 M0,"+(.5-H)+" L"+(.5+W)+","+(.5-H)+" L"+(.5+W)+",1"},U),"\u2558":(O={},O[1]=function(W,H){return"M.5,0 L.5,"+(.5+H)+" L1,"+(.5+H)+" M.5,"+(.5-H)+" L1,"+(.5-H)},O),"\u2559":(z={},z[1]=function(W,H){return"M1,.5 L"+(.5-W)+",.5 L"+(.5-W)+",0 M"+(.5+W)+",.5 L"+(.5+W)+",0"},z),"\u255A":(G={},G[1]=function(W,H){return"M1,"+(.5-H)+" L"+(.5+W)+","+(.5-H)+" L"+(.5+W)+",0 M1,"+(.5+H)+" L"+(.5-W)+","+(.5+H)+" L"+(.5-W)+",0"},G),"\u255B":(Z={},Z[1]=function(W,H){return"M0,"+(.5+H)+" L.5,"+(.5+H)+" L.5,0 M0,"+(.5-H)+" L.5,"+(.5-H)},Z),"\u255C":($={},$[1]=function(W,H){return"M0,.5 L"+(.5+W)+",.5 L"+(.5+W)+",0 M"+(.5-W)+",.5 L"+(.5-W)+",0"},$),"\u255D":(te={},te[1]=function(W,H){return"M0,"+(.5-H)+" L"+(.5-W)+","+(.5-H)+" L"+(.5-W)+",0 M0,"+(.5+H)+" L"+(.5+W)+","+(.5+H)+" L"+(.5+W)+",0"},te),"\u255E":(K={},K[1]=function(W,H){return"M.5,0 L.5,1 M.5,"+(.5-H)+" L1,"+(.5-H)+" M.5,"+(.5+H)+" L1,"+(.5+H)},K),"\u255F":(ee={},ee[1]=function(W,H){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1 M"+(.5+W)+",.5 L1,.5"},ee),"\u2560":(ne={},ne[1]=function(W,H){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M1,"+(.5+H)+" L"+(.5+W)+","+(.5+H)+" L"+(.5+W)+",1 M1,"+(.5-H)+" L"+(.5+W)+","+(.5-H)+" L"+(.5+W)+",0"},ne),"\u2561":(le={},le[1]=function(W,H){return"M.5,0 L.5,1 M0,"+(.5-H)+" L.5,"+(.5-H)+" M0,"+(.5+H)+" L.5,"+(.5+H)},le),"\u2562":(we={},we[1]=function(W,H){return"M0,.5 L"+(.5-W)+",.5 M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},we),"\u2563":(Nt={},Nt[1]=function(W,H){return"M"+(.5+W)+",0 L"+(.5+W)+",1 M0,"+(.5+H)+" L"+(.5-W)+","+(.5+H)+" L"+(.5-W)+",1 M0,"+(.5-H)+" L"+(.5-W)+","+(.5-H)+" L"+(.5-W)+",0"},Nt),"\u2564":(zt={},zt[1]=function(W,H){return"M0,"+(.5-H)+" L1,"+(.5-H)+" M0,"+(.5+H)+" L1,"+(.5+H)+" M.5,"+(.5+H)+" L.5,1"},zt),"\u2565":(Kt={},Kt[1]=function(W,H){return"M0,.5 L1,.5 M"+(.5-W)+",.5 L"+(.5-W)+",1 M"+(.5+W)+",.5 L"+(.5+W)+",1"},Kt),"\u2566":(Gt={},Gt[1]=function(W,H){return"M0,"+(.5-H)+" L1,"+(.5-H)+" M0,"+(.5+H)+" L"+(.5-W)+","+(.5+H)+" L"+(.5-W)+",1 M1,"+(.5+H)+" L"+(.5+W)+","+(.5+H)+" L"+(.5+W)+",1"},Gt),"\u2567":(Vt={},Vt[1]=function(W,H){return"M.5,0 L.5,"+(.5-H)+" M0,"+(.5-H)+" L1,"+(.5-H)+" M0,"+(.5+H)+" L1,"+(.5+H)},Vt),"\u2568":(Yt={},Yt[1]=function(W,H){return"M0,.5 L1,.5 M"+(.5-W)+",.5 L"+(.5-W)+",0 M"+(.5+W)+",.5 L"+(.5+W)+",0"},Yt),"\u2569":(Xt={},Xt[1]=function(W,H){return"M0,"+(.5+H)+" L1,"+(.5+H)+" M0,"+(.5-H)+" L"+(.5-W)+","+(.5-H)+" L"+(.5-W)+",0 M1,"+(.5-H)+" L"+(.5+W)+","+(.5-H)+" L"+(.5+W)+",0"},Xt),"\u256A":(Zt={},Zt[1]=function(W,H){return"M.5,0 L.5,1 M0,"+(.5-H)+" L1,"+(.5-H)+" M0,"+(.5+H)+" L1,"+(.5+H)},Zt),"\u256B":(Jt={},Jt[1]=function(W,H){return"M0,.5 L1,.5 M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},Jt),"\u256C":($t={},$t[1]=function(W,H){return"M0,"+(.5+H)+" L"+(.5-W)+","+(.5+H)+" L"+(.5-W)+",1 M1,"+(.5+H)+" L"+(.5+W)+","+(.5+H)+" L"+(.5+W)+",1 M0,"+(.5-H)+" L"+(.5-W)+","+(.5-H)+" L"+(.5-W)+",0 M1,"+(.5-H)+" L"+(.5+W)+","+(.5-H)+" L"+(.5+W)+",0"},$t),"\u2571":(Qt={},Qt[1]="M1,0 L0,1",Qt),"\u2572":(er={},er[1]="M0,0 L1,1",er),"\u2573":(tr={},tr[1]="M1,0 L0,1 M0,0 L1,1",tr),"\u257C":(Ue={},Ue[1]="M.5,.5 L0,.5",Ue[3]="M.5,.5 L1,.5",Ue),"\u257D":(qe={},qe[1]="M.5,.5 L.5,0",qe[3]="M.5,.5 L.5,1",qe),"\u257E":(Ne={},Ne[1]="M.5,.5 L1,.5",Ne[3]="M.5,.5 L0,.5",Ne),"\u257F":(ze={},ze[1]="M.5,.5 L.5,1",ze[3]="M.5,.5 L.5,0",ze),"\u250D":(Ke={},Ke[1]="M.5,.5 L.5,1",Ke[3]="M.5,.5 L1,.5",Ke),"\u250E":(Ge={},Ge[1]="M.5,.5 L1,.5",Ge[3]="M.5,.5 L.5,1",Ge),"\u2511":(Ve={},Ve[1]="M.5,.5 L.5,1",Ve[3]="M.5,.5 L0,.5",Ve),"\u2512":(Ye={},Ye[1]="M.5,.5 L0,.5",Ye[3]="M.5,.5 L.5,1",Ye),"\u2515":(Xe={},Xe[1]="M.5,.5 L.5,0",Xe[3]="M.5,.5 L1,.5",Xe),"\u2516":(Ze={},Ze[1]="M.5,.5 L1,.5",Ze[3]="M.5,.5 L.5,0",Ze),"\u2519":(Je={},Je[1]="M.5,.5 L.5,0",Je[3]="M.5,.5 L0,.5",Je),"\u251A":($e={},$e[1]="M.5,.5 L0,.5",$e[3]="M.5,.5 L.5,0",$e),"\u251D":(Qe={},Qe[1]="M.5,0 L.5,1",Qe[3]="M.5,.5 L1,.5",Qe),"\u251E":(et={},et[1]="M0.5,1 L.5,.5 L1,.5",et[3]="M.5,.5 L.5,0",et),"\u251F":(tt={},tt[1]="M.5,0 L.5,.5 L1,.5",tt[3]="M.5,.5 L.5,1",tt),"\u2520":(rt={},rt[1]="M.5,.5 L1,.5",rt[3]="M.5,0 L.5,1",rt),"\u2521":(it={},it[1]="M.5,.5 L.5,1",it[3]="M.5,0 L.5,.5 L1,.5",it),"\u2522":(nt={},nt[1]="M.5,.5 L.5,0",nt[3]="M0.5,1 L.5,.5 L1,.5",nt),"\u2525":(ot={},ot[1]="M.5,0 L.5,1",ot[3]="M.5,.5 L0,.5",ot),"\u2526":(st={},st[1]="M0,.5 L.5,.5 L.5,1",st[3]="M.5,.5 L.5,0",st),"\u2527":(at={},at[1]="M.5,0 L.5,.5 L0,.5",at[3]="M.5,.5 L.5,1",at),"\u2528":(ut={},ut[1]="M.5,.5 L0,.5",ut[3]="M.5,0 L.5,1",ut),"\u2529":(ct={},ct[1]="M.5,.5 L.5,1",ct[3]="M.5,0 L.5,.5 L0,.5",ct),"\u252A":(lt={},lt[1]="M.5,.5 L.5,0",lt[3]="M0,.5 L.5,.5 L.5,1",lt),"\u252D":(ht={},ht[1]="M0.5,1 L.5,.5 L1,.5",ht[3]="M.5,.5 L0,.5",ht),"\u252E":(ft={},ft[1]="M0,.5 L.5,.5 L.5,1",ft[3]="M.5,.5 L1,.5",ft),"\u252F":(dt={},dt[1]="M.5,.5 L.5,1",dt[3]="M0,.5 L1,.5",dt),"\u2530":(_t={},_t[1]="M0,.5 L1,.5",_t[3]="M.5,.5 L.5,1",_t),"\u2531":(pt={},pt[1]="M.5,.5 L1,.5",pt[3]="M0,.5 L.5,.5 L.5,1",pt),"\u2532":(vt={},vt[1]="M.5,.5 L0,.5",vt[3]="M0.5,1 L.5,.5 L1,.5",vt),"\u2535":(Dt={},Dt[1]="M.5,0 L.5,.5 L1,.5",Dt[3]="M.5,.5 L0,.5",Dt),"\u2536":(gt={},gt[1]="M.5,0 L.5,.5 L0,.5",gt[3]="M.5,.5 L1,.5",gt),"\u2537":(Ct={},Ct[1]="M.5,.5 L.5,0",Ct[3]="M0,.5 L1,.5",Ct),"\u2538":(yt={},yt[1]="M0,.5 L1,.5",yt[3]="M.5,.5 L.5,0",yt),"\u2539":(mt={},mt[1]="M.5,.5 L1,.5",mt[3]="M.5,0 L.5,.5 L0,.5",mt),"\u253A":(bt={},bt[1]="M.5,.5 L0,.5",bt[3]="M.5,0 L.5,.5 L1,.5",bt),"\u253D":(St={},St[1]="M.5,0 L.5,1 M.5,.5 L1,.5",St[3]="M.5,.5 L0,.5",St),"\u253E":(Et={},Et[1]="M.5,0 L.5,1 M.5,.5 L0,.5",Et[3]="M.5,.5 L1,.5",Et),"\u253F":(wt={},wt[1]="M.5,0 L.5,1",wt[3]="M0,.5 L1,.5",wt),"\u2540":(xt={},xt[1]="M0,.5 L1,.5 M.5,.5 L.5,1",xt[3]="M.5,.5 L.5,0",xt),"\u2541":(Ft={},Ft[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Ft[3]="M.5,.5 L.5,1",Ft),"\u2542":(Lt={},Lt[1]="M0,.5 L1,.5",Lt[3]="M.5,0 L.5,1",Lt),"\u2543":(At={},At[1]="M0.5,1 L.5,.5 L1,.5",At[3]="M.5,0 L.5,.5 L0,.5",At),"\u2544":(Bt={},Bt[1]="M0,.5 L.5,.5 L.5,1",Bt[3]="M.5,0 L.5,.5 L1,.5",Bt),"\u2545":(Mt={},Mt[1]="M.5,0 L.5,.5 L1,.5",Mt[3]="M0,.5 L.5,.5 L.5,1",Mt),"\u2546":(kt={},kt[1]="M.5,0 L.5,.5 L0,.5",kt[3]="M0.5,1 L.5,.5 L1,.5",kt),"\u2547":(Rt={},Rt[1]="M.5,.5 L.5,1",Rt[3]="M.5,.5 L.5,0 M0,.5 L1,.5",Rt),"\u2548":(Ot={},Ot[1]="M.5,.5 L.5,0",Ot[3]="M0,.5 L1,.5 M.5,.5 L.5,1",Ot),"\u2549":(Tt={},Tt[1]="M.5,.5 L1,.5",Tt[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Tt),"\u254A":(Pt={},Pt[1]="M.5,.5 L0,.5",Pt[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Pt),"\u254C":(rr={},rr[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",rr),"\u254D":(ir={},ir[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",ir),"\u2504":(nr={},nr[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",nr),"\u2505":(or={},or[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",or),"\u2508":(sr={},sr[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",sr),"\u2509":(ar={},ar[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",ar),"\u254E":(ur={},ur[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",ur),"\u254F":(cr={},cr[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",cr),"\u2506":(lr={},lr[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",lr),"\u2507":(hr={},hr[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",hr),"\u250A":(fr={},fr[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",fr),"\u250B":(dr={},dr[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",dr),"\u256D":(_r={},_r[1]="C.5,1,.5,.5,1,.5",_r),"\u256E":(pr={},pr[1]="C.5,1,.5,.5,0,.5",pr),"\u256F":(vr={},vr[1]="C.5,0,.5,.5,0,.5",vr),"\u2570":(Dr={},Dr[1]="C.5,0,.5,.5,1,.5",Dr)},e.tryDrawCustomChar=function(W,H,he,Me,ke,Q){var fe=e.blockElementDefinitions[H];if(fe)return function(re,_e,Oe,Te,xe,Fe){for(var oe=0;oe<_e.length;oe++){var ie=_e[oe],J=xe/8,pe=Fe/8;re.fillRect(Oe+ie.x*J,Te+ie.y*pe,ie.w*J,ie.h*pe)}}(W,fe,he,Me,ke,Q),!0;var de=ii[H];if(de)return function(re,_e,Oe,Te,xe,Fe){var oe,ie=Br.get(_e);ie||(ie=new Map,Br.set(_e,ie));var J=re.fillStyle;if(typeof J!="string")throw new Error('Unexpected fillStyle type "'+J+'"');var pe=ie.get(J);if(!pe){var se=_e[0].length,Ce=_e.length,ye=document.createElement("canvas");ye.width=se,ye.height=Ce;var It=(0,Ar.throwIfFalsy)(ye.getContext("2d")),ve=new ImageData(se,Ce),Le=void 0,me=void 0,gr=void 0,Cr=void 0;if(J.startsWith("#"))Le=parseInt(J.substr(1,2),16),me=parseInt(J.substr(3,2),16),gr=parseInt(J.substr(5,2),16),Cr=J.length>7&&parseInt(J.substr(7,2),16)||1;else{if(!J.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+J+'" when drawing pattern glyph');Le=(oe=J.substring(5,J.length-1).split(",").map(function(si){return parseFloat(si)}))[0],me=oe[1],gr=oe[2],Cr=oe[3]}for(var be=0;be<Ce;be++)for(var Se=0;Se<se;Se++)ve.data[4*(be*se+Se)]=Le,ve.data[4*(be*se+Se)+1]=me,ve.data[4*(be*se+Se)+2]=gr,ve.data[4*(be*se+Se)+3]=_e[be][Se]*(255*Cr);It.putImageData(ve,0,0),pe=(0,Ar.throwIfFalsy)(re.createPattern(ye,null)),ie.set(J,pe)}re.fillStyle=pe,re.fillRect(Oe,Te,xe,Fe)}(W,de,he,Me,ke,Q),!0;var Re=e.boxDrawingDefinitions[H];return!!Re&&(function(re,_e,Oe,Te,xe,Fe){re.strokeStyle=re.fillStyle;for(var oe=0,ie=Object.entries(_e);oe<ie.length;oe++){var J=ie[oe],pe=J[0],se=J[1];re.beginPath(),re.lineWidth=window.devicePixelRatio*Number.parseInt(pe);for(var Ce=0,ye=(typeof se=="function"?se(.15,.15/Fe*xe):se).split(" ");Ce<ye.length;Ce++){var It=ye[Ce],ve=It[0],Le=ni[ve];if(Le){var me=It.substring(1).split(",");me[0]&&me[1]&&Le(re,oi(me,xe,Fe,Oe,Te))}else console.error('Could not find drawing instructions for "'+ve+'"')}re.stroke(),re.closePath()}}(W,Re,he,Me,ke,Q),!0)};var Br=new Map;function Mr(W,H,he){return he===void 0&&(he=0),Math.max(Math.min(W,H),he)}var ni={C:function(W,H){return W.bezierCurveTo(H[0],H[1],H[2],H[3],H[4],H[5])},L:function(W,H){return W.lineTo(H[0],H[1])},M:function(W,H){return W.moveTo(H[0],H[1])}};function oi(W,H,he,Me,ke){var Q=W.map(function(Re){return parseFloat(Re)||parseInt(Re)});if(Q.length<2)throw new Error("Too few arguments for instruction");for(var fe=0;fe<Q.length;fe+=2)Q[fe]*=H,Q[fe]!==0&&(Q[fe]=Mr(Math.round(Q[fe]+.5)-.5,H,0)),Q[fe]+=Me;for(var de=1;de<Q.length;de+=2)Q[de]*=he,Q[de]!==0&&(Q[de]=Mr(Math.round(Q[de]+.5)-.5,he,0)),Q[de]+=ke;return Q}},3700:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GridCache=void 0;var p=function(){function c(){this.cache=[]}return c.prototype.resize=function(f,_){for(var l=0;l<f;l++){this.cache.length<=l&&this.cache.push([]);for(var y=this.cache[l].length;y<_;y++)this.cache[l].push(void 0);this.cache[l].length=_}this.cache.length=f},c.prototype.clear=function(){for(var f=0;f<this.cache.length;f++)for(var _=0;_<this.cache[f].length;_++)this.cache[f][_]=void 0},c}();e.GridCache=p},5098:function(A,e,p){var c,f=this&&this.__extends||(c=function(n,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},c(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=n}c(n,r),n.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),_=this&&this.__decorate||function(n,r,t,i){var s,u=arguments.length,h=u<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(n,r,t,i);else for(var v=n.length-1;v>=0;v--)(s=n[v])&&(h=(u<3?s(h):u>3?s(r,t,h):s(r,t))||h);return u>3&&h&&Object.defineProperty(r,t,h),h},l=this&&this.__param||function(n,r){return function(t,i){r(t,i,n)}};Object.defineProperty(e,"__esModule",{value:!0}),e.LinkRenderLayer=void 0;var y=p(1546),D=p(8803),o=p(2040),a=p(2585),d=function(n){function r(t,i,s,u,h,v,b,m){var g=n.call(this,t,"link",i,!0,s,u,b,m)||this;return h.onShowLinkUnderline(function(C){return g._onShowLinkUnderline(C)}),h.onHideLinkUnderline(function(C){return g._onHideLinkUnderline(C)}),v.onShowLinkUnderline(function(C){return g._onShowLinkUnderline(C)}),v.onHideLinkUnderline(function(C){return g._onHideLinkUnderline(C)}),g}return f(r,n),r.prototype.resize=function(t){n.prototype.resize.call(this,t),this._state=void 0},r.prototype.reset=function(){this._clearCurrentLink()},r.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var t=this._state.y2-this._state.y1-1;t>0&&this._clearCells(0,this._state.y1+1,this._state.cols,t),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},r.prototype._onShowLinkUnderline=function(t){if(t.fg===D.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:t.fg&&(0,o.is256Color)(t.fg)?this._ctx.fillStyle=this._colors.ansi[t.fg].css:this._ctx.fillStyle=this._colors.foreground.css,t.y1===t.y2)this._fillBottomLineAtCells(t.x1,t.y1,t.x2-t.x1);else{this._fillBottomLineAtCells(t.x1,t.y1,t.cols-t.x1);for(var i=t.y1+1;i<t.y2;i++)this._fillBottomLineAtCells(0,i,t.cols);this._fillBottomLineAtCells(0,t.y2,t.x2)}this._state=t},r.prototype._onHideLinkUnderline=function(t){this._clearCurrentLink()},_([l(6,a.IBufferService),l(7,a.IOptionsService)],r)}(y.BaseRenderLayer);e.LinkRenderLayer=d},3525:function(A,e,p){var c,f=this&&this.__extends||(c=function(h,v){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,m){b.__proto__=m}||function(b,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(b[g]=m[g])},c(h,v)},function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function b(){this.constructor=h}c(h,v),h.prototype=v===null?Object.create(v):(b.prototype=v.prototype,new b)}),_=this&&this.__decorate||function(h,v,b,m){var g,C=arguments.length,x=C<3?v:m===null?m=Object.getOwnPropertyDescriptor(v,b):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,v,b,m);else for(var w=h.length-1;w>=0;w--)(g=h[w])&&(x=(C<3?g(x):C>3?g(v,b,x):g(v,b))||x);return C>3&&x&&Object.defineProperty(v,b,x),x},l=this&&this.__param||function(h,v){return function(b,m){v(b,m,h)}};Object.defineProperty(e,"__esModule",{value:!0}),e.Renderer=void 0;var y=p(9596),D=p(4149),o=p(2512),a=p(5098),d=p(844),n=p(4725),r=p(2585),t=p(1420),i=p(8460),s=1,u=function(h){function v(b,m,g,C,x,w,T,L){var S=h.call(this)||this;S._colors=b,S._screenElement=m,S._bufferService=w,S._charSizeService=T,S._optionsService=L,S._id=s++,S._onRequestRedraw=new i.EventEmitter;var F=S._optionsService.rawOptions.allowTransparency;return S._renderLayers=[x.createInstance(y.TextRenderLayer,S._screenElement,0,S._colors,F,S._id),x.createInstance(D.SelectionRenderLayer,S._screenElement,1,S._colors,S._id),x.createInstance(a.LinkRenderLayer,S._screenElement,2,S._colors,S._id,g,C),x.createInstance(o.CursorRenderLayer,S._screenElement,3,S._colors,S._id,S._onRequestRedraw)],S.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},S._devicePixelRatio=window.devicePixelRatio,S._updateDimensions(),S.onOptionsChanged(),S}return f(v,h),Object.defineProperty(v.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),v.prototype.dispose=function(){for(var b=0,m=this._renderLayers;b<m.length;b++)m[b].dispose();h.prototype.dispose.call(this),(0,t.removeTerminalFromCache)(this._id)},v.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},v.prototype.setColors=function(b){this._colors=b;for(var m=0,g=this._renderLayers;m<g.length;m++){var C=g[m];C.setColors(this._colors),C.reset()}},v.prototype.onResize=function(b,m){this._updateDimensions();for(var g=0,C=this._renderLayers;g<C.length;g++)C[g].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},v.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},v.prototype.onBlur=function(){this._runOperation(function(b){return b.onBlur()})},v.prototype.onFocus=function(){this._runOperation(function(b){return b.onFocus()})},v.prototype.onSelectionChanged=function(b,m,g){g===void 0&&(g=!1),this._runOperation(function(C){return C.onSelectionChanged(b,m,g)})},v.prototype.onCursorMove=function(){this._runOperation(function(b){return b.onCursorMove()})},v.prototype.onOptionsChanged=function(){this._runOperation(function(b){return b.onOptionsChanged()})},v.prototype.clear=function(){this._runOperation(function(b){return b.reset()})},v.prototype._runOperation=function(b){for(var m=0,g=this._renderLayers;m<g.length;m++)b(g[m])},v.prototype.renderRows=function(b,m){for(var g=0,C=this._renderLayers;g<C.length;g++)C[g].onGridChanged(b,m)},v.prototype.clearTextureAtlas=function(){for(var b=0,m=this._renderLayers;b<m.length;b++)m[b].clearTextureAtlas()},v.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},_([l(4,r.IInstantiationService),l(5,r.IBufferService),l(6,n.ICharSizeService),l(7,r.IOptionsService)],v)}(d.Disposable);e.Renderer=u},1752:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throwIfFalsy=void 0,e.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p}},4149:function(A,e,p){var c,f=this&&this.__extends||(c=function(a,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])},c(a,d)},function(a,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function n(){this.constructor=a}c(a,d),a.prototype=d===null?Object.create(d):(n.prototype=d.prototype,new n)}),_=this&&this.__decorate||function(a,d,n,r){var t,i=arguments.length,s=i<3?d:r===null?r=Object.getOwnPropertyDescriptor(d,n):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(a,d,n,r);else for(var u=a.length-1;u>=0;u--)(t=a[u])&&(s=(i<3?t(s):i>3?t(d,n,s):t(d,n))||s);return i>3&&s&&Object.defineProperty(d,n,s),s},l=this&&this.__param||function(a,d){return function(n,r){d(n,r,a)}};Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionRenderLayer=void 0;var y=p(1546),D=p(2585),o=function(a){function d(n,r,t,i,s,u){var h=a.call(this,n,"selection",r,!0,t,i,s,u)||this;return h._clearState(),h}return f(d,a),d.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},d.prototype.resize=function(n){a.prototype.resize.call(this,n),this._clearState()},d.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},d.prototype.onSelectionChanged=function(n,r,t){if(this._didStateChange(n,r,t,this._bufferService.buffer.ydisp))if(this._clearAll(),n&&r){var i=n[1]-this._bufferService.buffer.ydisp,s=r[1]-this._bufferService.buffer.ydisp,u=Math.max(i,0),h=Math.min(s,this._bufferService.rows-1);if(u>=this._bufferService.rows||h<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,t){var v=n[0],b=r[0]-v,m=h-u+1;this._fillCells(v,u,b,m)}else{v=i===u?n[0]:0;var g=u===s?r[0]:this._bufferService.cols;this._fillCells(v,u,g-v,1);var C=Math.max(h-u-1,0);if(this._fillCells(0,u+1,this._bufferService.cols,C),u!==h){var x=s===h?r[0]:this._bufferService.cols;this._fillCells(0,h,x,1)}}this._state.start=[n[0],n[1]],this._state.end=[r[0],r[1]],this._state.columnSelectMode=t,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},d.prototype._didStateChange=function(n,r,t,i){return!this._areCoordinatesEqual(n,this._state.start)||!this._areCoordinatesEqual(r,this._state.end)||t!==this._state.columnSelectMode||i!==this._state.ydisp},d.prototype._areCoordinatesEqual=function(n,r){return!(!n||!r)&&n[0]===r[0]&&n[1]===r[1]},_([l(4,D.IBufferService),l(5,D.IOptionsService)],d)}(y.BaseRenderLayer);e.SelectionRenderLayer=o},9596:function(A,e,p){var c,f=this&&this.__extends||(c=function(s,u){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(h[b]=v[b])},c(s,u)},function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function h(){this.constructor=s}c(s,u),s.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}),_=this&&this.__decorate||function(s,u,h,v){var b,m=arguments.length,g=m<3?u:v===null?v=Object.getOwnPropertyDescriptor(u,h):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(s,u,h,v);else for(var C=s.length-1;C>=0;C--)(b=s[C])&&(g=(m<3?b(g):m>3?b(u,h,g):b(u,h))||g);return m>3&&g&&Object.defineProperty(u,h,g),g},l=this&&this.__param||function(s,u){return function(h,v){u(h,v,s)}};Object.defineProperty(e,"__esModule",{value:!0}),e.TextRenderLayer=void 0;var y=p(3700),D=p(1546),o=p(3734),a=p(643),d=p(511),n=p(2585),r=p(4725),t=p(4269),i=function(s){function u(h,v,b,m,g,C,x,w){var T=s.call(this,h,"text",v,m,b,g,C,x)||this;return T._characterJoinerService=w,T._characterWidth=0,T._characterFont="",T._characterOverlapCache={},T._workCell=new d.CellData,T._state=new y.GridCache,T}return f(u,s),u.prototype.resize=function(h){s.prototype.resize.call(this,h);var v=this._getFont(!1,!1);this._characterWidth===h.scaledCharWidth&&this._characterFont===v||(this._characterWidth=h.scaledCharWidth,this._characterFont=v,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},u.prototype.reset=function(){this._state.clear(),this._clearAll()},u.prototype._forEachCell=function(h,v,b){for(var m=h;m<=v;m++)for(var g=m+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.lines.get(g),x=this._characterJoinerService.getJoinedCharacters(g),w=0;w<this._bufferService.cols;w++){C.loadCell(w,this._workCell);var T=this._workCell,L=!1,S=w;if(T.getWidth()!==0){if(x.length>0&&w===x[0][0]){L=!0;var F=x.shift();T=new t.JoinedCellData(this._workCell,C.translateToString(!0,F[0],F[1]),F[1]-F[0]),S=F[1]-1}!L&&this._isOverlapping(T)&&S<C.length-1&&C.getCodePoint(S+1)===a.NULL_CELL_CODE&&(T.content&=-12582913,T.content|=2<<22),b(T,w,m),w=S}}},u.prototype._drawBackground=function(h,v){var b=this,m=this._ctx,g=this._bufferService.cols,C=0,x=0,w=null;m.save(),this._forEachCell(h,v,function(T,L,S){var F=null;T.isInverse()?F=T.isFgDefault()?b._colors.foreground.css:T.isFgRGB()?"rgb("+o.AttributeData.toColorRGB(T.getFgColor()).join(",")+")":b._colors.ansi[T.getFgColor()].css:T.isBgRGB()?F="rgb("+o.AttributeData.toColorRGB(T.getBgColor()).join(",")+")":T.isBgPalette()&&(F=b._colors.ansi[T.getBgColor()].css),w===null&&(C=L,x=S),S!==x?(m.fillStyle=w||"",b._fillCells(C,x,g-C,1),C=L,x=S):w!==F&&(m.fillStyle=w||"",b._fillCells(C,x,L-C,1),C=L,x=S),w=F}),w!==null&&(m.fillStyle=w,this._fillCells(C,x,g-C,1)),m.restore()},u.prototype._drawForeground=function(h,v){var b=this;this._forEachCell(h,v,function(m,g,C){if(!m.isInvisible()&&(b._drawChars(m,g,C),m.isUnderline()||m.isStrikethrough())){if(b._ctx.save(),m.isInverse())if(m.isBgDefault())b._ctx.fillStyle=b._colors.background.css;else if(m.isBgRGB())b._ctx.fillStyle="rgb("+o.AttributeData.toColorRGB(m.getBgColor()).join(",")+")";else{var x=m.getBgColor();b._optionsService.rawOptions.drawBoldTextInBrightColors&&m.isBold()&&x<8&&(x+=8),b._ctx.fillStyle=b._colors.ansi[x].css}else if(m.isFgDefault())b._ctx.fillStyle=b._colors.foreground.css;else if(m.isFgRGB())b._ctx.fillStyle="rgb("+o.AttributeData.toColorRGB(m.getFgColor()).join(",")+")";else{var w=m.getFgColor();b._optionsService.rawOptions.drawBoldTextInBrightColors&&m.isBold()&&w<8&&(w+=8),b._ctx.fillStyle=b._colors.ansi[w].css}m.isStrikethrough()&&b._fillMiddleLineAtCells(g,C,m.getWidth()),m.isUnderline()&&b._fillBottomLineAtCells(g,C,m.getWidth()),b._ctx.restore()}})},u.prototype.onGridChanged=function(h,v){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,h,this._bufferService.cols,v-h+1),this._drawBackground(h,v),this._drawForeground(h,v))},u.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},u.prototype._isOverlapping=function(h){if(h.getWidth()!==1||h.getCode()<256)return!1;var v=h.getChars();if(this._characterOverlapCache.hasOwnProperty(v))return this._characterOverlapCache[v];this._ctx.save(),this._ctx.font=this._characterFont;var b=Math.floor(this._ctx.measureText(v).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[v]=b,b},_([l(5,n.IBufferService),l(6,n.IOptionsService),l(7,r.ICharacterJoinerService)],u)}(D.BaseRenderLayer);e.TextRenderLayer=i},9616:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseCharAtlas=void 0;var p=function(){function c(){this._didWarmUp=!1}return c.prototype.dispose=function(){},c.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},c.prototype._doWarmUp=function(){},c.prototype.clear=function(){},c.prototype.beginFrame=function(){},c}();e.BaseCharAtlas=p},1420:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeTerminalFromCache=e.acquireCharAtlas=void 0;var c=p(2040),f=p(1906),_=[];e.acquireCharAtlas=function(l,y,D,o,a){for(var d=(0,c.generateConfig)(o,a,l,D),n=0;n<_.length;n++){var r=(t=_[n]).ownedBy.indexOf(y);if(r>=0){if((0,c.configEquals)(t.config,d))return t.atlas;t.ownedBy.length===1?(t.atlas.dispose(),_.splice(n,1)):t.ownedBy.splice(r,1);break}}for(n=0;n<_.length;n++){var t=_[n];if((0,c.configEquals)(t.config,d))return t.ownedBy.push(y),t.atlas}var i={atlas:new f.DynamicCharAtlas(document,d),config:d,ownedBy:[y]};return _.push(i),i.atlas},e.removeTerminalFromCache=function(l){for(var y=0;y<_.length;y++){var D=_[y].ownedBy.indexOf(l);if(D!==-1){_[y].ownedBy.length===1?(_[y].atlas.dispose(),_.splice(y,1)):_[y].ownedBy.splice(D,1);break}}}},2040:function(A,e,p){var c=this&&this.__spreadArray||function(_,l,y){if(y||arguments.length===2)for(var D,o=0,a=l.length;o<a;o++)!D&&o in l||(D||(D=Array.prototype.slice.call(l,0,o)),D[o]=l[o]);return _.concat(D||Array.prototype.slice.call(l))};Object.defineProperty(e,"__esModule",{value:!0}),e.is256Color=e.configEquals=e.generateConfig=void 0;var f=p(643);e.generateConfig=function(_,l,y,D){var o={foreground:D.foreground,background:D.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:c([],D.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:_,scaledCharHeight:l,fontFamily:y.fontFamily,fontSize:y.fontSize,fontWeight:y.fontWeight,fontWeightBold:y.fontWeightBold,allowTransparency:y.allowTransparency,colors:o}},e.configEquals=function(_,l){for(var y=0;y<_.colors.ansi.length;y++)if(_.colors.ansi[y].rgba!==l.colors.ansi[y].rgba)return!1;return _.devicePixelRatio===l.devicePixelRatio&&_.fontFamily===l.fontFamily&&_.fontSize===l.fontSize&&_.fontWeight===l.fontWeight&&_.fontWeightBold===l.fontWeightBold&&_.allowTransparency===l.allowTransparency&&_.scaledCharWidth===l.scaledCharWidth&&_.scaledCharHeight===l.scaledCharHeight&&_.colors.foreground===l.colors.foreground&&_.colors.background===l.colors.background},e.is256Color=function(_){return _<f.DEFAULT_COLOR}},8803:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CHAR_ATLAS_CELL_SPACING=e.TEXT_BASELINE=e.DIM_OPACITY=e.INVERTED_DEFAULT_COLOR=void 0;var c=p(6114);e.INVERTED_DEFAULT_COLOR=257,e.DIM_OPACITY=.5,e.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic",e.CHAR_ATLAS_CELL_SPACING=1},1906:function(A,e,p){var c,f=this&&this.__extends||(c=function(v,b){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var C in g)Object.prototype.hasOwnProperty.call(g,C)&&(m[C]=g[C])},c(v,b)},function(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function m(){this.constructor=v}c(v,b),v.prototype=b===null?Object.create(b):(m.prototype=b.prototype,new m)});Object.defineProperty(e,"__esModule",{value:!0}),e.NoneCharAtlas=e.DynamicCharAtlas=e.getGlyphCacheKey=void 0;var _=p(8803),l=p(9616),y=p(5680),D=p(7001),o=p(6114),a=p(1752),d=p(4774),n=1024,r=1024,t={css:"rgba(0, 0, 0, 0)",rgba:0};function i(v){return v.code<<21|v.bg<<12|v.fg<<3|(v.bold?0:4)+(v.dim?0:2)+(v.italic?0:1)}e.getGlyphCacheKey=i;var s=function(v){function b(m,g){var C=v.call(this)||this;C._config=g,C._drawToCacheCount=0,C._glyphsWaitingOnBitmap=[],C._bitmapCommitTimeout=null,C._bitmap=null,C._cacheCanvas=m.createElement("canvas"),C._cacheCanvas.width=n,C._cacheCanvas.height=r,C._cacheCtx=(0,a.throwIfFalsy)(C._cacheCanvas.getContext("2d",{alpha:!0}));var x=m.createElement("canvas");x.width=C._config.scaledCharWidth,x.height=C._config.scaledCharHeight,C._tmpCtx=(0,a.throwIfFalsy)(x.getContext("2d",{alpha:C._config.allowTransparency})),C._width=Math.floor(n/C._config.scaledCharWidth),C._height=Math.floor(r/C._config.scaledCharHeight);var w=C._width*C._height;return C._cacheMap=new D.LRUMap(w),C._cacheMap.prealloc(w),C}return f(b,v),b.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},b.prototype.beginFrame=function(){this._drawToCacheCount=0},b.prototype.clear=function(){if(this._cacheMap.size>0){var m=this._width*this._height;this._cacheMap=new D.LRUMap(m),this._cacheMap.prealloc(m)}this._cacheCtx.clearRect(0,0,n,r),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},b.prototype.draw=function(m,g,C,x){if(g.code===32)return!0;if(!this._canCache(g))return!1;var w=i(g),T=this._cacheMap.get(w);if(T!=null)return this._drawFromCache(m,T,C,x),!0;if(this._drawToCacheCount<100){var L;L=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var S=this._drawToCache(g,L);return this._cacheMap.set(w,S),this._drawFromCache(m,S,C,x),!0}return!1},b.prototype._canCache=function(m){return m.code<256},b.prototype._toCoordinateX=function(m){return m%this._width*this._config.scaledCharWidth},b.prototype._toCoordinateY=function(m){return Math.floor(m/this._width)*this._config.scaledCharHeight},b.prototype._drawFromCache=function(m,g,C,x){if(!g.isEmpty){var w=this._toCoordinateX(g.index),T=this._toCoordinateY(g.index);m.drawImage(g.inBitmap?this._bitmap:this._cacheCanvas,w,T,this._config.scaledCharWidth,this._config.scaledCharHeight,C,x,this._config.scaledCharWidth,this._config.scaledCharHeight)}},b.prototype._getColorFromAnsiIndex=function(m){return m<this._config.colors.ansi.length?this._config.colors.ansi[m]:y.DEFAULT_ANSI_COLORS[m]},b.prototype._getBackgroundColor=function(m){return this._config.allowTransparency?t:m.bg===_.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:m.bg<256?this._getColorFromAnsiIndex(m.bg):this._config.colors.background},b.prototype._getForegroundColor=function(m){return m.fg===_.INVERTED_DEFAULT_COLOR?d.color.opaque(this._config.colors.background):m.fg<256?this._getColorFromAnsiIndex(m.fg):this._config.colors.foreground},b.prototype._drawToCache=function(m,g){this._drawToCacheCount++,this._tmpCtx.save();var C=this._getBackgroundColor(m);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=C.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var x=m.bold?this._config.fontWeightBold:this._config.fontWeight,w=m.italic?"italic":"";this._tmpCtx.font=w+" "+x+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=_.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(m).css,m.dim&&(this._tmpCtx.globalAlpha=_.DIM_OPACITY),this._tmpCtx.fillText(m.chars,0,this._config.scaledCharHeight);var T=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),L=!1;if(this._config.allowTransparency||(L=h(T,C)),L&&m.chars==="_"&&!this._config.allowTransparency)for(var S=1;S<=5&&(this._tmpCtx.fillText(m.chars,0,this._config.scaledCharHeight-S),L=h(T=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),C));S++);this._tmpCtx.restore();var F=this._toCoordinateX(g),k=this._toCoordinateY(g);this._cacheCtx.putImageData(T,F,k);var I={index:g,isEmpty:L,inBitmap:!1};return this._addGlyphToBitmap(I),I},b.prototype._addGlyphToBitmap=function(m){var g=this;!("createImageBitmap"in window)||o.isFirefox||o.isSafari||(this._glyphsWaitingOnBitmap.push(m),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return g._generateBitmap()},100)))},b.prototype._generateBitmap=function(){var m=this,g=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(C){m._bitmap=C;for(var x=0;x<g.length;x++)g[x].inBitmap=!0}),this._bitmapCommitTimeout=null},b}(l.BaseCharAtlas);e.DynamicCharAtlas=s;var u=function(v){function b(m,g){return v.call(this)||this}return f(b,v),b.prototype.draw=function(m,g,C,x){return!1},b}(l.BaseCharAtlas);function h(v,b){for(var m=!0,g=b.rgba>>>24,C=b.rgba>>>16&255,x=b.rgba>>>8&255,w=0;w<v.data.length;w+=4)v.data[w]===g&&v.data[w+1]===C&&v.data[w+2]===x?v.data[w+3]=0:m=!1;return m}e.NoneCharAtlas=u},7001:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LRUMap=void 0;var p=function(){function c(f){this.capacity=f,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return c.prototype._unlinkNode=function(f){var _=f.prev,l=f.next;f===this._head&&(this._head=l),f===this._tail&&(this._tail=_),_!==null&&(_.next=l),l!==null&&(l.prev=_)},c.prototype._appendNode=function(f){var _=this._tail;_!==null&&(_.next=f),f.prev=_,f.next=null,this._tail=f,this._head===null&&(this._head=f)},c.prototype.prealloc=function(f){for(var _=this._nodePool,l=0;l<f;l++)_.push({prev:null,next:null,key:null,value:null})},c.prototype.get=function(f){var _=this._map[f];return _!==void 0?(this._unlinkNode(_),this._appendNode(_),_.value):null},c.prototype.peekValue=function(f){var _=this._map[f];return _!==void 0?_.value:null},c.prototype.peek=function(){var f=this._head;return f===null?null:f.value},c.prototype.set=function(f,_){var l=this._map[f];if(l!==void 0)l=this._map[f],this._unlinkNode(l),l.value=_;else if(this.size>=this.capacity)l=this._head,this._unlinkNode(l),delete this._map[l.key],l.key=f,l.value=_,this._map[f]=l;else{var y=this._nodePool;y.length>0?((l=y.pop()).key=f,l.value=_):l={prev:null,next:null,key:f,value:_},this._map[f]=l,this.size++}this._appendNode(l)},c}();e.LRUMap=p},1296:function(A,e,p){var c,f=this&&this.__extends||(c=function(m,g){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,x){C.__proto__=x}||function(C,x){for(var w in x)Object.prototype.hasOwnProperty.call(x,w)&&(C[w]=x[w])},c(m,g)},function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function C(){this.constructor=m}c(m,g),m.prototype=g===null?Object.create(g):(C.prototype=g.prototype,new C)}),_=this&&this.__decorate||function(m,g,C,x){var w,T=arguments.length,L=T<3?g:x===null?x=Object.getOwnPropertyDescriptor(g,C):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(m,g,C,x);else for(var S=m.length-1;S>=0;S--)(w=m[S])&&(L=(T<3?w(L):T>3?w(g,C,L):w(g,C))||L);return T>3&&L&&Object.defineProperty(g,C,L),L},l=this&&this.__param||function(m,g){return function(C,x){g(C,x,m)}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomRenderer=void 0;var y=p(3787),D=p(8803),o=p(844),a=p(4725),d=p(2585),n=p(8460),r=p(4774),t=p(9631),i="xterm-dom-renderer-owner-",s="xterm-fg-",u="xterm-bg-",h="xterm-focus",v=1,b=function(m){function g(C,x,w,T,L,S,F,k,I,q){var N=m.call(this)||this;return N._colors=C,N._element=x,N._screenElement=w,N._viewportElement=T,N._linkifier=L,N._linkifier2=S,N._charSizeService=k,N._optionsService=I,N._bufferService=q,N._terminalClass=v++,N._rowElements=[],N._rowContainer=document.createElement("div"),N._rowContainer.classList.add("xterm-rows"),N._rowContainer.style.lineHeight="normal",N._rowContainer.setAttribute("aria-hidden","true"),N._refreshRowElements(N._bufferService.cols,N._bufferService.rows),N._selectionContainer=document.createElement("div"),N._selectionContainer.classList.add("xterm-selection"),N._selectionContainer.setAttribute("aria-hidden","true"),N.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},N._updateDimensions(),N._injectCss(),N._rowFactory=F.createInstance(y.DomRendererRowFactory,document,N._colors),N._element.classList.add(i+N._terminalClass),N._screenElement.appendChild(N._rowContainer),N._screenElement.appendChild(N._selectionContainer),N._linkifier.onShowLinkUnderline(function(V){return N._onLinkHover(V)}),N._linkifier.onHideLinkUnderline(function(V){return N._onLinkLeave(V)}),N._linkifier2.onShowLinkUnderline(function(V){return N._onLinkHover(V)}),N._linkifier2.onHideLinkUnderline(function(V){return N._onLinkLeave(V)}),N}return f(g,m),Object.defineProperty(g.prototype,"onRequestRedraw",{get:function(){return new n.EventEmitter().event},enumerable:!1,configurable:!0}),g.prototype.dispose=function(){this._element.classList.remove(i+this._terminalClass),(0,t.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),m.prototype.dispose.call(this)},g.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var C=0,x=this._rowElements;C<x.length;C++){var w=x[C];w.style.width=this.dimensions.canvasWidth+"px",w.style.height=this.dimensions.actualCellHeight+"px",w.style.lineHeight=this.dimensions.actualCellHeight+"px",w.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var T=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=T,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},g.prototype.setColors=function(C){this._colors=C,this._injectCss()},g.prototype._injectCss=function(){var C=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var x=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";x+=this._terminalSelector+" span:not(."+y.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+y.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+y.ITALIC_CLASS+" { font-style: italic;}",x+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",x+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",x+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_BLINK_CLASS+":not(."+y.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_BLINK_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",x+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(w,T){x+=C._terminalSelector+" ."+s+T+" { color: "+w.css+"; }"+C._terminalSelector+" ."+u+T+" { background-color: "+w.css+"; }"}),x+=this._terminalSelector+" ."+s+D.INVERTED_DEFAULT_COLOR+" { color: "+r.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+u+D.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=x},g.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},g.prototype._refreshRowElements=function(C,x){for(var w=this._rowElements.length;w<=x;w++){var T=document.createElement("div");this._rowContainer.appendChild(T),this._rowElements.push(T)}for(;this._rowElements.length>x;)this._rowContainer.removeChild(this._rowElements.pop())},g.prototype.onResize=function(C,x){this._refreshRowElements(C,x),this._updateDimensions()},g.prototype.onCharSizeChanged=function(){this._updateDimensions()},g.prototype.onBlur=function(){this._rowContainer.classList.remove(h)},g.prototype.onFocus=function(){this._rowContainer.classList.add(h)},g.prototype.onSelectionChanged=function(C,x,w){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(C&&x){var T=C[1]-this._bufferService.buffer.ydisp,L=x[1]-this._bufferService.buffer.ydisp,S=Math.max(T,0),F=Math.min(L,this._bufferService.rows-1);if(!(S>=this._bufferService.rows||F<0)){var k=document.createDocumentFragment();if(w)k.appendChild(this._createSelectionElement(S,C[0],x[0],F-S+1));else{var I=T===S?C[0]:0,q=S===L?x[0]:this._bufferService.cols;k.appendChild(this._createSelectionElement(S,I,q));var N=F-S-1;if(k.appendChild(this._createSelectionElement(S+1,0,this._bufferService.cols,N)),S!==F){var V=L===F?x[0]:this._bufferService.cols;k.appendChild(this._createSelectionElement(F,0,V))}}this._selectionContainer.appendChild(k)}}},g.prototype._createSelectionElement=function(C,x,w,T){T===void 0&&(T=1);var L=document.createElement("div");return L.style.height=T*this.dimensions.actualCellHeight+"px",L.style.top=C*this.dimensions.actualCellHeight+"px",L.style.left=x*this.dimensions.actualCellWidth+"px",L.style.width=this.dimensions.actualCellWidth*(w-x)+"px",L},g.prototype.onCursorMove=function(){},g.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},g.prototype.clear=function(){for(var C=0,x=this._rowElements;C<x.length;C++)x[C].innerText=""},g.prototype.renderRows=function(C,x){for(var w=this._bufferService.buffer.ybase+this._bufferService.buffer.y,T=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),L=this._optionsService.rawOptions.cursorBlink,S=C;S<=x;S++){var F=this._rowElements[S];F.innerText="";var k=S+this._bufferService.buffer.ydisp,I=this._bufferService.buffer.lines.get(k),q=this._optionsService.rawOptions.cursorStyle;F.appendChild(this._rowFactory.createRow(I,k,k===w,q,T,L,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(g.prototype,"_terminalSelector",{get:function(){return"."+i+this._terminalClass},enumerable:!1,configurable:!0}),g.prototype._onLinkHover=function(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!0)},g.prototype._onLinkLeave=function(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!1)},g.prototype._setCellUnderline=function(C,x,w,T,L,S){for(;C!==x||w!==T;){var F=this._rowElements[w];if(!F)return;var k=F.children[C];k&&(k.style.textDecoration=S?"underline":"none"),++C>=L&&(C=0,w++)}},_([l(6,d.IInstantiationService),l(7,a.ICharSizeService),l(8,d.IOptionsService),l(9,d.IBufferService)],g)}(o.Disposable);e.DomRenderer=b},3787:function(A,e,p){var c=this&&this.__decorate||function(t,i,s,u){var h,v=arguments.length,b=v<3?i:u===null?u=Object.getOwnPropertyDescriptor(i,s):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(t,i,s,u);else for(var m=t.length-1;m>=0;m--)(h=t[m])&&(b=(v<3?h(b):v>3?h(i,s,b):h(i,s))||b);return v>3&&b&&Object.defineProperty(i,s,b),b},f=this&&this.__param||function(t,i){return function(s,u){i(s,u,t)}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomRendererRowFactory=e.CURSOR_STYLE_UNDERLINE_CLASS=e.CURSOR_STYLE_BAR_CLASS=e.CURSOR_STYLE_BLOCK_CLASS=e.CURSOR_BLINK_CLASS=e.CURSOR_CLASS=e.STRIKETHROUGH_CLASS=e.UNDERLINE_CLASS=e.ITALIC_CLASS=e.DIM_CLASS=e.BOLD_CLASS=void 0;var _=p(8803),l=p(643),y=p(511),D=p(2585),o=p(4774),a=p(4725),d=p(4269);e.BOLD_CLASS="xterm-bold",e.DIM_CLASS="xterm-dim",e.ITALIC_CLASS="xterm-italic",e.UNDERLINE_CLASS="xterm-underline",e.STRIKETHROUGH_CLASS="xterm-strikethrough",e.CURSOR_CLASS="xterm-cursor",e.CURSOR_BLINK_CLASS="xterm-cursor-blink",e.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",e.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",e.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var n=function(){function t(i,s,u,h,v){this._document=i,this._colors=s,this._characterJoinerService=u,this._optionsService=h,this._coreService=v,this._workCell=new y.CellData}return t.prototype.setColors=function(i){this._colors=i},t.prototype.createRow=function(i,s,u,h,v,b,m,g){for(var C=this._document.createDocumentFragment(),x=this._characterJoinerService.getJoinedCharacters(s),w=0,T=Math.min(i.length,g)-1;T>=0;T--)if(i.loadCell(T,this._workCell).getCode()!==l.NULL_CELL_CODE||u&&T===v){w=T+1;break}for(T=0;T<w;T++){i.loadCell(T,this._workCell);var L=this._workCell.getWidth();if(L!==0){var S=!1,F=T,k=this._workCell;if(x.length>0&&T===x[0][0]){S=!0;var I=x.shift();k=new d.JoinedCellData(this._workCell,i.translateToString(!0,I[0],I[1]),I[1]-I[0]),F=I[1]-1,L=k.getWidth()}var q=this._document.createElement("span");if(L>1&&(q.style.width=m*L+"px"),S&&(q.style.display="inline",v>=T&&v<=F&&(v=T)),!this._coreService.isCursorHidden&&u&&T===v)switch(q.classList.add(e.CURSOR_CLASS),b&&q.classList.add(e.CURSOR_BLINK_CLASS),h){case"bar":q.classList.add(e.CURSOR_STYLE_BAR_CLASS);break;case"underline":q.classList.add(e.CURSOR_STYLE_UNDERLINE_CLASS);break;default:q.classList.add(e.CURSOR_STYLE_BLOCK_CLASS)}k.isBold()&&q.classList.add(e.BOLD_CLASS),k.isItalic()&&q.classList.add(e.ITALIC_CLASS),k.isDim()&&q.classList.add(e.DIM_CLASS),k.isUnderline()&&q.classList.add(e.UNDERLINE_CLASS),k.isInvisible()?q.textContent=l.WHITESPACE_CELL_CHAR:q.textContent=k.getChars()||l.WHITESPACE_CELL_CHAR,k.isStrikethrough()&&q.classList.add(e.STRIKETHROUGH_CLASS);var N=k.getFgColor(),V=k.getFgColorMode(),Y=k.getBgColor(),X=k.getBgColorMode(),E=!!k.isInverse();if(E){var B=N;N=Y,Y=B;var M=V;V=X,X=M}switch(V){case 16777216:case 33554432:k.isBold()&&N<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(N+=8),this._applyMinimumContrast(q,this._colors.background,this._colors.ansi[N])||q.classList.add("xterm-fg-"+N);break;case 50331648:var U=o.rgba.toColor(N>>16&255,N>>8&255,255&N);this._applyMinimumContrast(q,this._colors.background,U)||this._addStyle(q,"color:#"+r(N.toString(16),"0",6));break;default:this._applyMinimumContrast(q,this._colors.background,this._colors.foreground)||E&&q.classList.add("xterm-fg-"+_.INVERTED_DEFAULT_COLOR)}switch(X){case 16777216:case 33554432:q.classList.add("xterm-bg-"+Y);break;case 50331648:this._addStyle(q,"background-color:#"+r(Y.toString(16),"0",6));break;default:E&&q.classList.add("xterm-bg-"+_.INVERTED_DEFAULT_COLOR)}C.appendChild(q),T=F}}return C},t.prototype._applyMinimumContrast=function(i,s,u){if(this._optionsService.rawOptions.minimumContrastRatio===1)return!1;var h=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return h===void 0&&(h=o.color.ensureContrastRatio(s,u,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,h??null)),!!h&&(this._addStyle(i,"color:"+h.css),!0)},t.prototype._addStyle=function(i,s){i.setAttribute("style",""+(i.getAttribute("style")||"")+s+";")},c([f(2,a.ICharacterJoinerService),f(3,D.IOptionsService),f(4,D.ICoreService)],t)}();function r(t,i,s){for(;t.length<s;)t=i+t;return t}e.DomRendererRowFactory=n},456:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionModel=void 0;var p=function(){function c(f){this._bufferService=f,this.isSelectAllActive=!1,this.selectionStartLength=0}return c.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(c.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var f=this.selectionStart[0]+this.selectionStartLength;return f>this._bufferService.cols?f%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(f/this._bufferService.cols)-1]:[f%this._bufferService.cols,this.selectionStart[1]+Math.floor(f/this._bufferService.cols)]:[f,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),c.prototype.areSelectionValuesReversed=function(){var f=this.selectionStart,_=this.selectionEnd;return!(!f||!_)&&(f[1]>_[1]||f[1]===_[1]&&f[0]>_[0])},c.prototype.onTrim=function(f){return this.selectionStart&&(this.selectionStart[1]-=f),this.selectionEnd&&(this.selectionEnd[1]-=f),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},c}();e.SelectionModel=p},428:function(A,e,p){var c=this&&this.__decorate||function(o,a,d,n){var r,t=arguments.length,i=t<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,d):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,a,d,n);else for(var s=o.length-1;s>=0;s--)(r=o[s])&&(i=(t<3?r(i):t>3?r(a,d,i):r(a,d))||i);return t>3&&i&&Object.defineProperty(a,d,i),i},f=this&&this.__param||function(o,a){return function(d,n){a(d,n,o)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CharSizeService=void 0;var _=p(2585),l=p(8460),y=function(){function o(a,d,n){this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=new l.EventEmitter,this._measureStrategy=new D(a,d,this._optionsService)}return Object.defineProperty(o.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),o.prototype.measure=function(){var a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())},c([f(2,_.IOptionsService)],o)}();e.CharSizeService=y;var D=function(){function o(a,d,n){this._document=a,this._parentElement=d,this._optionsService=n,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return o.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var a=this._measureElement.getBoundingClientRect();return a.width!==0&&a.height!==0&&(this._result.width=a.width,this._result.height=Math.ceil(a.height)),this._result},o}()},4269:function(A,e,p){var c,f=this&&this.__extends||(c=function(r,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(i[u]=s[u])},c(r,t)},function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=r}c(r,t),r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}),_=this&&this.__decorate||function(r,t,i,s){var u,h=arguments.length,v=h<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(r,t,i,s);else for(var b=r.length-1;b>=0;b--)(u=r[b])&&(v=(h<3?u(v):h>3?u(t,i,v):u(t,i))||v);return h>3&&v&&Object.defineProperty(t,i,v),v},l=this&&this.__param||function(r,t){return function(i,s){t(i,s,r)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterJoinerService=e.JoinedCellData=void 0;var y=p(3734),D=p(643),o=p(511),a=p(2585),d=function(r){function t(i,s,u){var h=r.call(this)||this;return h.content=0,h.combinedData="",h.fg=i.fg,h.bg=i.bg,h.combinedData=s,h._width=u,h}return f(t,r),t.prototype.isCombined=function(){return 2097152},t.prototype.getWidth=function(){return this._width},t.prototype.getChars=function(){return this.combinedData},t.prototype.getCode=function(){return 2097151},t.prototype.setFromCharData=function(i){throw new Error("not implemented")},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(y.AttributeData);e.JoinedCellData=d;var n=function(){function r(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new o.CellData}return r.prototype.register=function(t){var i={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(i),i.id},r.prototype.deregister=function(t){for(var i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===t)return this._characterJoiners.splice(i,1),!0;return!1},r.prototype.getJoinedCharacters=function(t){if(this._characterJoiners.length===0)return[];var i=this._bufferService.buffer.lines.get(t);if(!i||i.length===0)return[];for(var s=[],u=i.translateToString(!0),h=0,v=0,b=0,m=i.getFg(0),g=i.getBg(0),C=0;C<i.getTrimmedLength();C++)if(i.loadCell(C,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==m||this._workCell.bg!==g){if(C-h>1)for(var x=this._getJoinedRanges(u,b,v,i,h),w=0;w<x.length;w++)s.push(x[w]);h=C,b=v,m=this._workCell.fg,g=this._workCell.bg}v+=this._workCell.getChars().length||D.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-h>1)for(x=this._getJoinedRanges(u,b,v,i,h),w=0;w<x.length;w++)s.push(x[w]);return s},r.prototype._getJoinedRanges=function(t,i,s,u,h){var v=t.substring(i,s),b=[];try{b=this._characterJoiners[0].handler(v)}catch(x){console.error(x)}for(var m=1;m<this._characterJoiners.length;m++)try{for(var g=this._characterJoiners[m].handler(v),C=0;C<g.length;C++)r._mergeRanges(b,g[C])}catch(x){console.error(x)}return this._stringRangesToCellRanges(b,u,h),b},r.prototype._stringRangesToCellRanges=function(t,i,s){var u=0,h=!1,v=0,b=t[u];if(b){for(var m=s;m<this._bufferService.cols;m++){var g=i.getWidth(m),C=i.getString(m).length||D.WHITESPACE_CELL_CHAR.length;if(g!==0){if(!h&&b[0]<=v&&(b[0]=m,h=!0),b[1]<=v){if(b[1]=m,!(b=t[++u]))break;b[0]<=v?(b[0]=m,h=!0):h=!1}v+=C}}b&&(b[1]=this._bufferService.cols)}},r._mergeRanges=function(t,i){for(var s=!1,u=0;u<t.length;u++){var h=t[u];if(s){if(i[1]<=h[0])return t[u-1][1]=i[1],t;if(i[1]<=h[1])return t[u-1][1]=Math.max(i[1],h[1]),t.splice(u,1),t;t.splice(u,1),u--}else{if(i[1]<=h[0])return t.splice(u,0,i),t;if(i[1]<=h[1])return h[0]=Math.min(i[0],h[0]),t;i[0]<h[1]&&(h[0]=Math.min(i[0],h[0]),s=!0)}}return s?t[t.length-1][1]=i[1]:t.push(i),t},r=_([l(0,a.IBufferService)],r)}();e.CharacterJoinerService=n},5114:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoreBrowserService=void 0;var p=function(){function c(f){this._textarea=f}return Object.defineProperty(c.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),c}();e.CoreBrowserService=p},8934:function(A,e,p){var c=this&&this.__decorate||function(D,o,a,d){var n,r=arguments.length,t=r<3?o:d===null?d=Object.getOwnPropertyDescriptor(o,a):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(D,o,a,d);else for(var i=D.length-1;i>=0;i--)(n=D[i])&&(t=(r<3?n(t):r>3?n(o,a,t):n(o,a))||t);return r>3&&t&&Object.defineProperty(o,a,t),t},f=this&&this.__param||function(D,o){return function(a,d){o(a,d,D)}};Object.defineProperty(e,"__esModule",{value:!0}),e.MouseService=void 0;var _=p(4725),l=p(9806),y=function(){function D(o,a){this._renderService=o,this._charSizeService=a}return D.prototype.getCoords=function(o,a,d,n,r){return(0,l.getCoords)(o,a,d,n,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,r)},D.prototype.getRawByteCoords=function(o,a,d,n){var r=this.getCoords(o,a,d,n);return(0,l.getRawByteCoords)(r)},c([f(0,_.IRenderService),f(1,_.ICharSizeService)],D)}();e.MouseService=y},3230:function(A,e,p){var c,f=this&&this.__extends||(c=function(i,s){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(u[v]=h[v])},c(i,s)},function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=i}c(i,s),i.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}),_=this&&this.__decorate||function(i,s,u,h){var v,b=arguments.length,m=b<3?s:h===null?h=Object.getOwnPropertyDescriptor(s,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(i,s,u,h);else for(var g=i.length-1;g>=0;g--)(v=i[g])&&(m=(b<3?v(m):b>3?v(s,u,m):v(s,u))||m);return b>3&&m&&Object.defineProperty(s,u,m),m},l=this&&this.__param||function(i,s){return function(u,h){s(u,h,i)}};Object.defineProperty(e,"__esModule",{value:!0}),e.RenderService=void 0;var y=p(6193),D=p(8460),o=p(844),a=p(5596),d=p(3656),n=p(2585),r=p(4725),t=function(i){function s(u,h,v,b,m,g){var C=i.call(this)||this;if(C._renderer=u,C._rowCount=h,C._charSizeService=m,C._isPaused=!1,C._needsFullRefresh=!1,C._isNextRenderRedrawOnly=!0,C._needsSelectionRefresh=!1,C._canvasWidth=0,C._canvasHeight=0,C._selectionState={start:void 0,end:void 0,columnSelectMode:!1},C._onDimensionsChange=new D.EventEmitter,C._onRender=new D.EventEmitter,C._onRefreshRequest=new D.EventEmitter,C.register({dispose:function(){return C._renderer.dispose()}}),C._renderDebouncer=new y.RenderDebouncer(function(w,T){return C._renderRows(w,T)}),C.register(C._renderDebouncer),C._screenDprMonitor=new a.ScreenDprMonitor,C._screenDprMonitor.setListener(function(){return C.onDevicePixelRatioChange()}),C.register(C._screenDprMonitor),C.register(g.onResize(function(w){return C._fullRefresh()})),C.register(b.onOptionChange(function(){return C._renderer.onOptionsChanged()})),C.register(C._charSizeService.onCharSizeChange(function(){return C.onCharSizeChanged()})),C._renderer.onRequestRedraw(function(w){return C.refreshRows(w.start,w.end,!0)}),C.register((0,d.addDisposableDomListener)(window,"resize",function(){return C.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var x=new IntersectionObserver(function(w){return C._onIntersectionChange(w[w.length-1])},{threshold:0});x.observe(v),C.register({dispose:function(){return x.disconnect()}})}return C}return f(s,i),Object.defineProperty(s.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),s.prototype._onIntersectionChange=function(u){this._isPaused=u.isIntersecting===void 0?u.intersectionRatio===0:!u.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},s.prototype.refreshRows=function(u,h,v){v===void 0&&(v=!1),this._isPaused?this._needsFullRefresh=!0:(v||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(u,h,this._rowCount))},s.prototype._renderRows=function(u,h){this._renderer.renderRows(u,h),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:u,end:h}),this._isNextRenderRedrawOnly=!0},s.prototype.resize=function(u,h){this._rowCount=h,this._fireOnCanvasResize()},s.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},s.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},s.prototype.dispose=function(){i.prototype.dispose.call(this)},s.prototype.setRenderer=function(u){var h=this;this._renderer.dispose(),this._renderer=u,this._renderer.onRequestRedraw(function(v){return h.refreshRows(v.start,v.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},s.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},s.prototype.clearTextureAtlas=function(){var u,h;(h=(u=this._renderer)===null||u===void 0?void 0:u.clearTextureAtlas)===null||h===void 0||h.call(u),this._fullRefresh()},s.prototype.setColors=function(u){this._renderer.setColors(u),this._fullRefresh()},s.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},s.prototype.onResize=function(u,h){this._renderer.onResize(u,h),this._fullRefresh()},s.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},s.prototype.onBlur=function(){this._renderer.onBlur()},s.prototype.onFocus=function(){this._renderer.onFocus()},s.prototype.onSelectionChanged=function(u,h,v){this._selectionState.start=u,this._selectionState.end=h,this._selectionState.columnSelectMode=v,this._renderer.onSelectionChanged(u,h,v)},s.prototype.onCursorMove=function(){this._renderer.onCursorMove()},s.prototype.clear=function(){this._renderer.clear()},_([l(3,n.IOptionsService),l(4,r.ICharSizeService),l(5,n.IBufferService)],s)}(o.Disposable);e.RenderService=t},9312:function(A,e,p){var c,f=this&&this.__extends||(c=function(b,m){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,C){g.__proto__=C}||function(g,C){for(var x in C)Object.prototype.hasOwnProperty.call(C,x)&&(g[x]=C[x])},c(b,m)},function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function g(){this.constructor=b}c(b,m),b.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}),_=this&&this.__decorate||function(b,m,g,C){var x,w=arguments.length,T=w<3?m:C===null?C=Object.getOwnPropertyDescriptor(m,g):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(b,m,g,C);else for(var L=b.length-1;L>=0;L--)(x=b[L])&&(T=(w<3?x(T):w>3?x(m,g,T):x(m,g))||T);return w>3&&T&&Object.defineProperty(m,g,T),T},l=this&&this.__param||function(b,m){return function(g,C){m(g,C,b)}};Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionService=void 0;var y=p(6114),D=p(456),o=p(511),a=p(8460),d=p(4725),n=p(2585),r=p(9806),t=p(9504),i=p(844),s=p(4841),u=String.fromCharCode(160),h=new RegExp(u,"g"),v=function(b){function m(g,C,x,w,T,L,S,F){var k=b.call(this)||this;return k._element=g,k._screenElement=C,k._linkifier=x,k._bufferService=w,k._coreService=T,k._mouseService=L,k._optionsService=S,k._renderService=F,k._dragScrollAmount=0,k._enabled=!0,k._workCell=new o.CellData,k._mouseDownTimeStamp=0,k._oldHasSelection=!1,k._oldSelectionStart=void 0,k._oldSelectionEnd=void 0,k._onLinuxMouseSelection=k.register(new a.EventEmitter),k._onRedrawRequest=k.register(new a.EventEmitter),k._onSelectionChange=k.register(new a.EventEmitter),k._onRequestScrollLines=k.register(new a.EventEmitter),k._mouseMoveListener=function(I){return k._onMouseMove(I)},k._mouseUpListener=function(I){return k._onMouseUp(I)},k._coreService.onUserInput(function(){k.hasSelection&&k.clearSelection()}),k._trimListener=k._bufferService.buffer.lines.onTrim(function(I){return k._onTrim(I)}),k.register(k._bufferService.buffers.onBufferActivate(function(I){return k._onBufferActivate(I)})),k.enable(),k._model=new D.SelectionModel(k._bufferService),k._activeSelectionMode=0,k}return f(m,b),Object.defineProperty(m.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),m.prototype.dispose=function(){this._removeMouseDownListeners()},m.prototype.reset=function(){this.clearSelection()},m.prototype.disable=function(){this.clearSelection(),this._enabled=!1},m.prototype.enable=function(){this._enabled=!0},Object.defineProperty(m.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"hasSelection",{get:function(){var g=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!g||!C||g[0]===C[0]&&g[1]===C[1])},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"selectionText",{get:function(){var g=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;if(!g||!C)return"";var x=this._bufferService.buffer,w=[];if(this._activeSelectionMode===3){if(g[0]===C[0])return"";for(var T=g[1];T<=C[1];T++){var L=x.translateBufferLineToString(T,!0,g[0],C[0]);w.push(L)}}else{var S=g[1]===C[1]?C[0]:void 0;for(w.push(x.translateBufferLineToString(g[1],!0,g[0],S)),T=g[1]+1;T<=C[1]-1;T++){var F=x.lines.get(T);L=x.translateBufferLineToString(T,!0),(F==null?void 0:F.isWrapped)?w[w.length-1]+=L:w.push(L)}g[1]!==C[1]&&(F=x.lines.get(C[1]),L=x.translateBufferLineToString(C[1],!0,0,C[0]),F&&F.isWrapped?w[w.length-1]+=L:w.push(L))}return w.map(function(k){return k.replace(h," ")}).join(y.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),m.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},m.prototype.refresh=function(g){var C=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return C._refresh()})),y.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},m.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},m.prototype._isClickInSelection=function(g){var C=this._getMouseBufferCoords(g),x=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!!(x&&w&&C)&&this._areCoordsInSelection(C,x,w)},m.prototype._areCoordsInSelection=function(g,C,x){return g[1]>C[1]&&g[1]<x[1]||C[1]===x[1]&&g[1]===C[1]&&g[0]>=C[0]&&g[0]<x[0]||C[1]<x[1]&&g[1]===x[1]&&g[0]<x[0]||C[1]<x[1]&&g[1]===C[1]&&g[0]>=C[0]},m.prototype._selectWordAtCursor=function(g,C){var x,w,T=(w=(x=this._linkifier.currentLink)===null||x===void 0?void 0:x.link)===null||w===void 0?void 0:w.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,s.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var L=this._getMouseBufferCoords(g);return!!L&&(this._selectWordAt(L,C),this._model.selectionEnd=void 0,!0)},m.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},m.prototype.selectLines=function(g,C){this._model.clearSelection(),g=Math.max(g,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()},m.prototype._onTrim=function(g){this._model.onTrim(g)&&this.refresh()},m.prototype._getMouseBufferCoords=function(g){var C=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C},m.prototype._getMouseEventScrollAmount=function(g){var C=(0,r.getCoordsRelativeToElement)(g,this._screenElement)[1],x=this._renderService.dimensions.canvasHeight;return C>=0&&C<=x?0:(C>x&&(C-=x),C=Math.min(Math.max(C,-50),50),(C/=50)/Math.abs(C)+Math.round(14*C))},m.prototype.shouldForceSelection=function(g){return y.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey},m.prototype.onMouseDown=function(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._onIncrementalClick(g):g.detail===1?this._onSingleClick(g):g.detail===2?this._onDoubleClick(g):g.detail===3&&this._onTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}},m.prototype._addMouseDownListeners=function(){var g=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return g._dragScroll()},50)},m.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},m.prototype._onIncrementalClick=function(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))},m.prototype._onSingleClick=function(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),this._model.selectionStart){this._model.selectionEnd=void 0;var C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&C.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},m.prototype._onDoubleClick=function(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)},m.prototype._onTripleClick=function(g){var C=this._getMouseBufferCoords(g);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))},m.prototype.shouldColumnSelect=function(g){return g.altKey&&!(y.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},m.prototype._onMouseMove=function(g){if(g.stopImmediatePropagation(),this._model.selectionStart){var C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var x=this._bufferService.buffer;if(this._model.selectionEnd[1]<x.lines.length){var w=x.lines.get(this._model.selectionEnd[1]);w&&w.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},m.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}},m.prototype._onMouseUp=function(g){var C=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&g.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var x=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(x&&x[0]!==void 0&&x[1]!==void 0){var w=(0,t.moveToCellSequence)(x[0]-1,x[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(w,!0)}}}else this._fireEventIfSelectionChanged()},m.prototype._fireEventIfSelectionChanged=function(){var g=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,x=!(!g||!C||g[0]===C[0]&&g[1]===C[1]);x?g&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,C,x)):this._oldHasSelection&&this._fireOnSelectionChange(g,C,x)},m.prototype._fireOnSelectionChange=function(g,C,x){this._oldSelectionStart=g,this._oldSelectionEnd=C,this._oldHasSelection=x,this._onSelectionChange.fire()},m.prototype._onBufferActivate=function(g){var C=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(function(x){return C._onTrim(x)})},m.prototype._convertViewportColToCharacterIndex=function(g,C){for(var x=C[0],w=0;C[0]>=w;w++){var T=g.loadCell(w,this._workCell).getChars().length;this._workCell.getWidth()===0?x--:T>1&&C[0]!==w&&(x+=T-1)}return x},m.prototype.setSelection=function(g,C,x){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,C],this._model.selectionStartLength=x,this.refresh()},m.prototype.rightClickSelect=function(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},m.prototype._getWordAt=function(g,C,x,w){if(x===void 0&&(x=!0),w===void 0&&(w=!0),!(g[0]>=this._bufferService.cols)){var T=this._bufferService.buffer,L=T.lines.get(g[1]);if(L){var S=T.translateBufferLineToString(g[1],!1),F=this._convertViewportColToCharacterIndex(L,g),k=F,I=g[0]-F,q=0,N=0,V=0,Y=0;if(S.charAt(F)===" "){for(;F>0&&S.charAt(F-1)===" ";)F--;for(;k<S.length&&S.charAt(k+1)===" ";)k++}else{var X=g[0],E=g[0];L.getWidth(X)===0&&(q++,X--),L.getWidth(E)===2&&(N++,E++);var B=L.getString(E).length;for(B>1&&(Y+=B-1,k+=B-1);X>0&&F>0&&!this._isCharWordSeparator(L.loadCell(X-1,this._workCell));){L.loadCell(X-1,this._workCell);var M=this._workCell.getChars().length;this._workCell.getWidth()===0?(q++,X--):M>1&&(V+=M-1,F-=M-1),F--,X--}for(;E<L.length&&k+1<S.length&&!this._isCharWordSeparator(L.loadCell(E+1,this._workCell));){L.loadCell(E+1,this._workCell);var U=this._workCell.getChars().length;this._workCell.getWidth()===2?(N++,E++):U>1&&(Y+=U-1,k+=U-1),k++,E++}}k++;var O=F+I-q+V,z=Math.min(this._bufferService.cols,k-F+q+N-V-Y);if(C||S.slice(F,k).trim()!==""){if(x&&O===0&&L.getCodePoint(0)!==32){var G=T.lines.get(g[1]-1);if(G&&L.isWrapped&&G.getCodePoint(this._bufferService.cols-1)!==32){var Z=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(Z){var $=this._bufferService.cols-Z.start;O-=$,z+=$}}}if(w&&O+z===this._bufferService.cols&&L.getCodePoint(this._bufferService.cols-1)!==32){var te=T.lines.get(g[1]+1);if((te==null?void 0:te.isWrapped)&&te.getCodePoint(0)!==32){var K=this._getWordAt([0,g[1]+1],!1,!1,!0);K&&(z+=K.length)}}return{start:O,length:z}}}}},m.prototype._selectWordAt=function(g,C){var x=this._getWordAt(g,C);if(x){for(;x.start<0;)x.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[x.start,g[1]],this._model.selectionStartLength=x.length}},m.prototype._selectToWordAt=function(g){var C=this._getWordAt(g,!0);if(C){for(var x=g[1];C.start<0;)C.start+=this._bufferService.cols,x--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,x++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,x]}},m.prototype._isCharWordSeparator=function(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0},m.prototype._selectLineAt=function(g){var C=this._bufferService.buffer.getWrappedRangeForLine(g);this._model.selectionStart=[0,C.first],this._model.selectionEnd=[this._bufferService.cols,C.last],this._model.selectionStartLength=0},_([l(3,n.IBufferService),l(4,n.ICoreService),l(5,d.IMouseService),l(6,n.IOptionsService),l(7,d.IRenderService)],m)}(i.Disposable);e.SelectionService=v},4725:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ICharacterJoinerService=e.ISoundService=e.ISelectionService=e.IRenderService=e.IMouseService=e.ICoreBrowserService=e.ICharSizeService=void 0;var c=p(8343);e.ICharSizeService=(0,c.createDecorator)("CharSizeService"),e.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),e.IMouseService=(0,c.createDecorator)("MouseService"),e.IRenderService=(0,c.createDecorator)("RenderService"),e.ISelectionService=(0,c.createDecorator)("SelectionService"),e.ISoundService=(0,c.createDecorator)("SoundService"),e.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService")},357:function(A,e,p){var c=this&&this.__decorate||function(y,D,o,a){var d,n=arguments.length,r=n<3?D:a===null?a=Object.getOwnPropertyDescriptor(D,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(y,D,o,a);else for(var t=y.length-1;t>=0;t--)(d=y[t])&&(r=(n<3?d(r):n>3?d(D,o,r):d(D,o))||r);return n>3&&r&&Object.defineProperty(D,o,r),r},f=this&&this.__param||function(y,D){return function(o,a){D(o,a,y)}};Object.defineProperty(e,"__esModule",{value:!0}),e.SoundService=void 0;var _=p(2585),l=function(){function y(D){this._optionsService=D}return Object.defineProperty(y,"audioContext",{get:function(){if(!y._audioContext){var D=window.AudioContext||window.webkitAudioContext;if(!D)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;y._audioContext=new D}return y._audioContext},enumerable:!1,configurable:!0}),y.prototype.playBellSound=function(){var D=y.audioContext;if(D){var o=D.createBufferSource();D.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),function(a){o.buffer=a,o.connect(D.destination),o.start(0)})}},y.prototype._base64ToArrayBuffer=function(D){for(var o=window.atob(D),a=o.length,d=new Uint8Array(a),n=0;n<a;n++)d[n]=o.charCodeAt(n);return d.buffer},y.prototype._removeMimeType=function(D){return D.split(",")[1]},y=c([f(0,_.IOptionsService)],y)}();e.SoundService=l},6349:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CircularList=void 0;var c=p(8460),f=function(){function _(l){this._maxLength=l,this.onDeleteEmitter=new c.EventEmitter,this.onInsertEmitter=new c.EventEmitter,this.onTrimEmitter=new c.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(_.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"maxLength",{get:function(){return this._maxLength},set:function(l){if(this._maxLength!==l){for(var y=new Array(l),D=0;D<Math.min(l,this.length);D++)y[D]=this._array[this._getCyclicIndex(D)];this._array=y,this._maxLength=l,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"length",{get:function(){return this._length},set:function(l){if(l>this._length)for(var y=this._length;y<l;y++)this._array[y]=void 0;this._length=l},enumerable:!1,configurable:!0}),_.prototype.get=function(l){return this._array[this._getCyclicIndex(l)]},_.prototype.set=function(l,y){this._array[this._getCyclicIndex(l)]=y},_.prototype.push=function(l){this._array[this._getCyclicIndex(this._length)]=l,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},_.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(_.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),_.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},_.prototype.splice=function(l,y){for(var D=[],o=2;o<arguments.length;o++)D[o-2]=arguments[o];if(y){for(var a=l;a<this._length-y;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+y)];this._length-=y,this.onDeleteEmitter.fire({index:l,amount:y})}for(a=this._length-1;a>=l;a--)this._array[this._getCyclicIndex(a+D.length)]=this._array[this._getCyclicIndex(a)];for(a=0;a<D.length;a++)this._array[this._getCyclicIndex(l+a)]=D[a];if(D.length&&this.onInsertEmitter.fire({index:l,amount:D.length}),this._length+D.length>this._maxLength){var d=this._length+D.length-this._maxLength;this._startIndex+=d,this._length=this._maxLength,this.onTrimEmitter.fire(d)}else this._length+=D.length},_.prototype.trimStart=function(l){l>this._length&&(l=this._length),this._startIndex+=l,this._length-=l,this.onTrimEmitter.fire(l)},_.prototype.shiftElements=function(l,y,D){if(!(y<=0)){if(l<0||l>=this._length)throw new Error("start argument out of range");if(l+D<0)throw new Error("Cannot shift elements in list beyond index 0");if(D>0){for(var o=y-1;o>=0;o--)this.set(l+o+D,this.get(l+o));var a=l+y+D-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(o=0;o<y;o++)this.set(l+o+D,this.get(l+o))}},_.prototype._getCyclicIndex=function(l){return(this._startIndex+l)%this._maxLength},_}();e.CircularList=f},1439:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.clone=void 0,e.clone=function p(c,f){if(f===void 0&&(f=5),typeof c!="object")return c;var _=Array.isArray(c)?[]:{};for(var l in c)_[l]=f<=1?c[l]:c[l]&&p(c[l],f-1);return _}},8969:function(A,e,p){var c,f=this&&this.__extends||(c=function(g,C){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var T in w)Object.prototype.hasOwnProperty.call(w,T)&&(x[T]=w[T])},c(g,C)},function(g,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function x(){this.constructor=g}c(g,C),g.prototype=C===null?Object.create(C):(x.prototype=C.prototype,new x)});Object.defineProperty(e,"__esModule",{value:!0}),e.CoreTerminal=void 0;var _=p(844),l=p(2585),y=p(4348),D=p(7866),o=p(744),a=p(7302),d=p(6975),n=p(8460),r=p(1753),t=p(3730),i=p(1480),s=p(7994),u=p(9282),h=p(5435),v=p(5981),b=!1,m=function(g){function C(x){var w=g.call(this)||this;return w._onBinary=new n.EventEmitter,w._onData=new n.EventEmitter,w._onLineFeed=new n.EventEmitter,w._onResize=new n.EventEmitter,w._onScroll=new n.EventEmitter,w._instantiationService=new y.InstantiationService,w.optionsService=new a.OptionsService(x),w._instantiationService.setService(l.IOptionsService,w.optionsService),w._bufferService=w.register(w._instantiationService.createInstance(o.BufferService)),w._instantiationService.setService(l.IBufferService,w._bufferService),w._logService=w._instantiationService.createInstance(D.LogService),w._instantiationService.setService(l.ILogService,w._logService),w.coreService=w.register(w._instantiationService.createInstance(d.CoreService,function(){return w.scrollToBottom()})),w._instantiationService.setService(l.ICoreService,w.coreService),w.coreMouseService=w._instantiationService.createInstance(r.CoreMouseService),w._instantiationService.setService(l.ICoreMouseService,w.coreMouseService),w._dirtyRowService=w._instantiationService.createInstance(t.DirtyRowService),w._instantiationService.setService(l.IDirtyRowService,w._dirtyRowService),w.unicodeService=w._instantiationService.createInstance(i.UnicodeService),w._instantiationService.setService(l.IUnicodeService,w.unicodeService),w._charsetService=w._instantiationService.createInstance(s.CharsetService),w._instantiationService.setService(l.ICharsetService,w._charsetService),w._inputHandler=new h.InputHandler(w._bufferService,w._charsetService,w.coreService,w._dirtyRowService,w._logService,w.optionsService,w.coreMouseService,w.unicodeService),w.register((0,n.forwardEvent)(w._inputHandler.onLineFeed,w._onLineFeed)),w.register(w._inputHandler),w.register((0,n.forwardEvent)(w._bufferService.onResize,w._onResize)),w.register((0,n.forwardEvent)(w.coreService.onData,w._onData)),w.register((0,n.forwardEvent)(w.coreService.onBinary,w._onBinary)),w.register(w.optionsService.onOptionChange(function(T){return w._updateOptions(T)})),w.register(w._bufferService.onScroll(function(T){w._onScroll.fire({position:w._bufferService.buffer.ydisp,source:0}),w._dirtyRowService.markRangeDirty(w._bufferService.buffer.scrollTop,w._bufferService.buffer.scrollBottom)})),w.register(w._inputHandler.onScroll(function(T){w._onScroll.fire({position:w._bufferService.buffer.ydisp,source:0}),w._dirtyRowService.markRangeDirty(w._bufferService.buffer.scrollTop,w._bufferService.buffer.scrollBottom)})),w._writeBuffer=new v.WriteBuffer(function(T,L){return w._inputHandler.parse(T,L)}),w}return f(C,g),Object.defineProperty(C.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onScroll",{get:function(){var x=this;return this._onScrollApi||(this._onScrollApi=new n.EventEmitter,this.register(this._onScroll.event(function(w){var T;(T=x._onScrollApi)===null||T===void 0||T.fire(w.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"options",{get:function(){return this.optionsService.options},set:function(x){for(var w in x)this.optionsService.options[w]=x[w]},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){var x;this._isDisposed||(g.prototype.dispose.call(this),(x=this._windowsMode)===null||x===void 0||x.dispose(),this._windowsMode=void 0)},C.prototype.write=function(x,w){this._writeBuffer.write(x,w)},C.prototype.writeSync=function(x,w){this._logService.logLevel<=l.LogLevelEnum.WARN&&!b&&(this._logService.warn("writeSync is unreliable and will be removed soon."),b=!0),this._writeBuffer.writeSync(x,w)},C.prototype.resize=function(x,w){isNaN(x)||isNaN(w)||(x=Math.max(x,o.MINIMUM_COLS),w=Math.max(w,o.MINIMUM_ROWS),this._bufferService.resize(x,w))},C.prototype.scroll=function(x,w){w===void 0&&(w=!1),this._bufferService.scroll(x,w)},C.prototype.scrollLines=function(x,w,T){this._bufferService.scrollLines(x,w,T)},C.prototype.scrollPages=function(x){this._bufferService.scrollPages(x)},C.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},C.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},C.prototype.scrollToLine=function(x){this._bufferService.scrollToLine(x)},C.prototype.registerEscHandler=function(x,w){return this._inputHandler.registerEscHandler(x,w)},C.prototype.registerDcsHandler=function(x,w){return this._inputHandler.registerDcsHandler(x,w)},C.prototype.registerCsiHandler=function(x,w){return this._inputHandler.registerCsiHandler(x,w)},C.prototype.registerOscHandler=function(x,w){return this._inputHandler.registerOscHandler(x,w)},C.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},C.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},C.prototype._updateOptions=function(x){var w;switch(x){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():((w=this._windowsMode)===null||w===void 0||w.dispose(),this._windowsMode=void 0)}},C.prototype._enableWindowsMode=function(){var x=this;if(!this._windowsMode){var w=[];w.push(this.onLineFeed(u.updateWindowsModeWrappedState.bind(null,this._bufferService))),w.push(this.registerCsiHandler({final:"H"},function(){return(0,u.updateWindowsModeWrappedState)(x._bufferService),!1})),this._windowsMode={dispose:function(){for(var T=0,L=w;T<L.length;T++)L[T].dispose()}}}},C}(_.Disposable);e.CoreTerminal=m},8460:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forwardEvent=e.EventEmitter=void 0;var p=function(){function c(){this._listeners=[],this._disposed=!1}return Object.defineProperty(c.prototype,"event",{get:function(){var f=this;return this._event||(this._event=function(_){return f._listeners.push(_),{dispose:function(){if(!f._disposed){for(var l=0;l<f._listeners.length;l++)if(f._listeners[l]===_)return void f._listeners.splice(l,1)}}}}),this._event},enumerable:!1,configurable:!0}),c.prototype.fire=function(f,_){for(var l=[],y=0;y<this._listeners.length;y++)l.push(this._listeners[y]);for(y=0;y<l.length;y++)l[y].call(void 0,f,_)},c.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},c}();e.EventEmitter=p,e.forwardEvent=function(c,f){return c(function(_){return f.fire(_)})}},5435:function(A,e,p){var c,f=this&&this.__extends||(c=function(T,L){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,F){S.__proto__=F}||function(S,F){for(var k in F)Object.prototype.hasOwnProperty.call(F,k)&&(S[k]=F[k])},c(T,L)},function(T,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function S(){this.constructor=T}c(T,L),T.prototype=L===null?Object.create(L):(S.prototype=L.prototype,new S)});Object.defineProperty(e,"__esModule",{value:!0}),e.InputHandler=e.WindowsOptionsReportType=void 0;var _,l=p(2584),y=p(7116),D=p(2015),o=p(844),a=p(8273),d=p(482),n=p(8437),r=p(8460),t=p(643),i=p(511),s=p(3734),u=p(2585),h=p(6242),v=p(6351),b=p(5941),m={"(":0,")":1,"*":2,"+":3,"-":1,".":2},g=131072;function C(T,L){if(T>24)return L.setWinLines||!1;switch(T){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}(function(T){T[T.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",T[T.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(_=e.WindowsOptionsReportType||(e.WindowsOptionsReportType={}));var x=function(){function T(L,S,F,k){this._bufferService=L,this._coreService=S,this._logService=F,this._optionsService=k,this._data=new Uint32Array(0)}return T.prototype.hook=function(L){this._data=new Uint32Array(0)},T.prototype.put=function(L,S,F){this._data=(0,a.concat)(this._data,L.subarray(S,F))},T.prototype.unhook=function(L){if(!L)return this._data=new Uint32Array(0),!0;var S=(0,d.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),S){case'"q':this._coreService.triggerDataEvent(l.C0.ESC+'P1$r0"q'+l.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(l.C0.ESC+'P1$r61;1"p'+l.C0.ESC+"\\");break;case"r":var F=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(l.C0.ESC+"P1$r"+F+l.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(l.C0.ESC+"P1$r0m"+l.C0.ESC+"\\");break;case" q":var k={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];k-=this._optionsService.rawOptions.cursorBlink?1:0,this._coreService.triggerDataEvent(l.C0.ESC+"P1$r"+k+" q"+l.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",S),this._coreService.triggerDataEvent(l.C0.ESC+"P0$r"+l.C0.ESC+"\\")}return!0},T}(),w=function(T){function L(S,F,k,I,q,N,V,Y,X){X===void 0&&(X=new D.EscapeSequenceParser);var E=T.call(this)||this;E._bufferService=S,E._charsetService=F,E._coreService=k,E._dirtyRowService=I,E._logService=q,E._optionsService=N,E._coreMouseService=V,E._unicodeService=Y,E._parser=X,E._parseBuffer=new Uint32Array(4096),E._stringDecoder=new d.StringToUtf32,E._utf8Decoder=new d.Utf8ToUtf32,E._workCell=new i.CellData,E._windowTitle="",E._iconName="",E._windowTitleStack=[],E._iconNameStack=[],E._curAttrData=n.DEFAULT_ATTR_DATA.clone(),E._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),E._onRequestBell=new r.EventEmitter,E._onRequestRefreshRows=new r.EventEmitter,E._onRequestReset=new r.EventEmitter,E._onRequestSendFocus=new r.EventEmitter,E._onRequestSyncScrollBar=new r.EventEmitter,E._onRequestWindowsOptionsReport=new r.EventEmitter,E._onA11yChar=new r.EventEmitter,E._onA11yTab=new r.EventEmitter,E._onCursorMove=new r.EventEmitter,E._onLineFeed=new r.EventEmitter,E._onScroll=new r.EventEmitter,E._onTitleChange=new r.EventEmitter,E._onColor=new r.EventEmitter,E._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},E._specialColors=[256,257,258],E.register(E._parser),E._activeBuffer=E._bufferService.buffer,E.register(E._bufferService.buffers.onBufferActivate(function(O){return E._activeBuffer=O.activeBuffer})),E._parser.setCsiHandlerFallback(function(O,z){E._logService.debug("Unknown CSI code: ",{identifier:E._parser.identToString(O),params:z.toArray()})}),E._parser.setEscHandlerFallback(function(O){E._logService.debug("Unknown ESC code: ",{identifier:E._parser.identToString(O)})}),E._parser.setExecuteHandlerFallback(function(O){E._logService.debug("Unknown EXECUTE code: ",{code:O})}),E._parser.setOscHandlerFallback(function(O,z,G){E._logService.debug("Unknown OSC code: ",{identifier:O,action:z,data:G})}),E._parser.setDcsHandlerFallback(function(O,z,G){z==="HOOK"&&(G=G.toArray()),E._logService.debug("Unknown DCS code: ",{identifier:E._parser.identToString(O),action:z,payload:G})}),E._parser.setPrintHandler(function(O,z,G){return E.print(O,z,G)}),E._parser.registerCsiHandler({final:"@"},function(O){return E.insertChars(O)}),E._parser.registerCsiHandler({intermediates:" ",final:"@"},function(O){return E.scrollLeft(O)}),E._parser.registerCsiHandler({final:"A"},function(O){return E.cursorUp(O)}),E._parser.registerCsiHandler({intermediates:" ",final:"A"},function(O){return E.scrollRight(O)}),E._parser.registerCsiHandler({final:"B"},function(O){return E.cursorDown(O)}),E._parser.registerCsiHandler({final:"C"},function(O){return E.cursorForward(O)}),E._parser.registerCsiHandler({final:"D"},function(O){return E.cursorBackward(O)}),E._parser.registerCsiHandler({final:"E"},function(O){return E.cursorNextLine(O)}),E._parser.registerCsiHandler({final:"F"},function(O){return E.cursorPrecedingLine(O)}),E._parser.registerCsiHandler({final:"G"},function(O){return E.cursorCharAbsolute(O)}),E._parser.registerCsiHandler({final:"H"},function(O){return E.cursorPosition(O)}),E._parser.registerCsiHandler({final:"I"},function(O){return E.cursorForwardTab(O)}),E._parser.registerCsiHandler({final:"J"},function(O){return E.eraseInDisplay(O)}),E._parser.registerCsiHandler({prefix:"?",final:"J"},function(O){return E.eraseInDisplay(O)}),E._parser.registerCsiHandler({final:"K"},function(O){return E.eraseInLine(O)}),E._parser.registerCsiHandler({prefix:"?",final:"K"},function(O){return E.eraseInLine(O)}),E._parser.registerCsiHandler({final:"L"},function(O){return E.insertLines(O)}),E._parser.registerCsiHandler({final:"M"},function(O){return E.deleteLines(O)}),E._parser.registerCsiHandler({final:"P"},function(O){return E.deleteChars(O)}),E._parser.registerCsiHandler({final:"S"},function(O){return E.scrollUp(O)}),E._parser.registerCsiHandler({final:"T"},function(O){return E.scrollDown(O)}),E._parser.registerCsiHandler({final:"X"},function(O){return E.eraseChars(O)}),E._parser.registerCsiHandler({final:"Z"},function(O){return E.cursorBackwardTab(O)}),E._parser.registerCsiHandler({final:"`"},function(O){return E.charPosAbsolute(O)}),E._parser.registerCsiHandler({final:"a"},function(O){return E.hPositionRelative(O)}),E._parser.registerCsiHandler({final:"b"},function(O){return E.repeatPrecedingCharacter(O)}),E._parser.registerCsiHandler({final:"c"},function(O){return E.sendDeviceAttributesPrimary(O)}),E._parser.registerCsiHandler({prefix:">",final:"c"},function(O){return E.sendDeviceAttributesSecondary(O)}),E._parser.registerCsiHandler({final:"d"},function(O){return E.linePosAbsolute(O)}),E._parser.registerCsiHandler({final:"e"},function(O){return E.vPositionRelative(O)}),E._parser.registerCsiHandler({final:"f"},function(O){return E.hVPosition(O)}),E._parser.registerCsiHandler({final:"g"},function(O){return E.tabClear(O)}),E._parser.registerCsiHandler({final:"h"},function(O){return E.setMode(O)}),E._parser.registerCsiHandler({prefix:"?",final:"h"},function(O){return E.setModePrivate(O)}),E._parser.registerCsiHandler({final:"l"},function(O){return E.resetMode(O)}),E._parser.registerCsiHandler({prefix:"?",final:"l"},function(O){return E.resetModePrivate(O)}),E._parser.registerCsiHandler({final:"m"},function(O){return E.charAttributes(O)}),E._parser.registerCsiHandler({final:"n"},function(O){return E.deviceStatus(O)}),E._parser.registerCsiHandler({prefix:"?",final:"n"},function(O){return E.deviceStatusPrivate(O)}),E._parser.registerCsiHandler({intermediates:"!",final:"p"},function(O){return E.softReset(O)}),E._parser.registerCsiHandler({intermediates:" ",final:"q"},function(O){return E.setCursorStyle(O)}),E._parser.registerCsiHandler({final:"r"},function(O){return E.setScrollRegion(O)}),E._parser.registerCsiHandler({final:"s"},function(O){return E.saveCursor(O)}),E._parser.registerCsiHandler({final:"t"},function(O){return E.windowOptions(O)}),E._parser.registerCsiHandler({final:"u"},function(O){return E.restoreCursor(O)}),E._parser.registerCsiHandler({intermediates:"'",final:"}"},function(O){return E.insertColumns(O)}),E._parser.registerCsiHandler({intermediates:"'",final:"~"},function(O){return E.deleteColumns(O)}),E._parser.setExecuteHandler(l.C0.BEL,function(){return E.bell()}),E._parser.setExecuteHandler(l.C0.LF,function(){return E.lineFeed()}),E._parser.setExecuteHandler(l.C0.VT,function(){return E.lineFeed()}),E._parser.setExecuteHandler(l.C0.FF,function(){return E.lineFeed()}),E._parser.setExecuteHandler(l.C0.CR,function(){return E.carriageReturn()}),E._parser.setExecuteHandler(l.C0.BS,function(){return E.backspace()}),E._parser.setExecuteHandler(l.C0.HT,function(){return E.tab()}),E._parser.setExecuteHandler(l.C0.SO,function(){return E.shiftOut()}),E._parser.setExecuteHandler(l.C0.SI,function(){return E.shiftIn()}),E._parser.setExecuteHandler(l.C1.IND,function(){return E.index()}),E._parser.setExecuteHandler(l.C1.NEL,function(){return E.nextLine()}),E._parser.setExecuteHandler(l.C1.HTS,function(){return E.tabSet()}),E._parser.registerOscHandler(0,new h.OscHandler(function(O){return E.setTitle(O),E.setIconName(O),!0})),E._parser.registerOscHandler(1,new h.OscHandler(function(O){return E.setIconName(O)})),E._parser.registerOscHandler(2,new h.OscHandler(function(O){return E.setTitle(O)})),E._parser.registerOscHandler(4,new h.OscHandler(function(O){return E.setOrReportIndexedColor(O)})),E._parser.registerOscHandler(10,new h.OscHandler(function(O){return E.setOrReportFgColor(O)})),E._parser.registerOscHandler(11,new h.OscHandler(function(O){return E.setOrReportBgColor(O)})),E._parser.registerOscHandler(12,new h.OscHandler(function(O){return E.setOrReportCursorColor(O)})),E._parser.registerOscHandler(104,new h.OscHandler(function(O){return E.restoreIndexedColor(O)})),E._parser.registerOscHandler(110,new h.OscHandler(function(O){return E.restoreFgColor(O)})),E._parser.registerOscHandler(111,new h.OscHandler(function(O){return E.restoreBgColor(O)})),E._parser.registerOscHandler(112,new h.OscHandler(function(O){return E.restoreCursorColor(O)})),E._parser.registerEscHandler({final:"7"},function(){return E.saveCursor()}),E._parser.registerEscHandler({final:"8"},function(){return E.restoreCursor()}),E._parser.registerEscHandler({final:"D"},function(){return E.index()}),E._parser.registerEscHandler({final:"E"},function(){return E.nextLine()}),E._parser.registerEscHandler({final:"H"},function(){return E.tabSet()}),E._parser.registerEscHandler({final:"M"},function(){return E.reverseIndex()}),E._parser.registerEscHandler({final:"="},function(){return E.keypadApplicationMode()}),E._parser.registerEscHandler({final:">"},function(){return E.keypadNumericMode()}),E._parser.registerEscHandler({final:"c"},function(){return E.fullReset()}),E._parser.registerEscHandler({final:"n"},function(){return E.setgLevel(2)}),E._parser.registerEscHandler({final:"o"},function(){return E.setgLevel(3)}),E._parser.registerEscHandler({final:"|"},function(){return E.setgLevel(3)}),E._parser.registerEscHandler({final:"}"},function(){return E.setgLevel(2)}),E._parser.registerEscHandler({final:"~"},function(){return E.setgLevel(1)}),E._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return E.selectDefaultCharset()}),E._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return E.selectDefaultCharset()});var B=function(O){M._parser.registerEscHandler({intermediates:"(",final:O},function(){return E.selectCharset("("+O)}),M._parser.registerEscHandler({intermediates:")",final:O},function(){return E.selectCharset(")"+O)}),M._parser.registerEscHandler({intermediates:"*",final:O},function(){return E.selectCharset("*"+O)}),M._parser.registerEscHandler({intermediates:"+",final:O},function(){return E.selectCharset("+"+O)}),M._parser.registerEscHandler({intermediates:"-",final:O},function(){return E.selectCharset("-"+O)}),M._parser.registerEscHandler({intermediates:".",final:O},function(){return E.selectCharset("."+O)}),M._parser.registerEscHandler({intermediates:"/",final:O},function(){return E.selectCharset("/"+O)})},M=this;for(var U in y.CHARSETS)B(U);return E._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return E.screenAlignmentPattern()}),E._parser.setErrorHandler(function(O){return E._logService.error("Parsing error: ",O),O}),E._parser.registerDcsHandler({intermediates:"$",final:"q"},new x(E._bufferService,E._coreService,E._logService,E._optionsService)),E}return f(L,T),Object.defineProperty(L.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),L.prototype.dispose=function(){T.prototype.dispose.call(this)},L.prototype._preserveStack=function(S,F,k,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=S,this._parseStack.cursorStartY=F,this._parseStack.decodedLength=k,this._parseStack.position=I},L.prototype._logSlowResolvingAsync=function(S){this._logService.logLevel<=u.LogLevelEnum.WARN&&Promise.race([S,new Promise(function(F,k){return setTimeout(function(){return k("#SLOW_TIMEOUT")},5e3)})]).catch(function(F){if(F!=="#SLOW_TIMEOUT")throw F;console.warn("async parser handler taking longer than 5000 ms")})},L.prototype.parse=function(S,F){var k,I=this._activeBuffer.x,q=this._activeBuffer.y,N=0,V=this._parseStack.paused;if(V){if(k=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,F))return this._logSlowResolvingAsync(k),k;I=this._parseStack.cursorStartX,q=this._parseStack.cursorStartY,this._parseStack.paused=!1,S.length>g&&(N=this._parseStack.position+g)}if(this._logService.logLevel<=u.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof S=="string"?' "'+S+'"':""),typeof S=="string"?S.split("").map(function(B){return B.charCodeAt(0)}):S),this._parseBuffer.length<S.length&&this._parseBuffer.length<g&&(this._parseBuffer=new Uint32Array(Math.min(S.length,g))),V||this._dirtyRowService.clearRange(),S.length>g)for(var Y=N;Y<S.length;Y+=g){var X=Y+g<S.length?Y+g:S.length,E=typeof S=="string"?this._stringDecoder.decode(S.substring(Y,X),this._parseBuffer):this._utf8Decoder.decode(S.subarray(Y,X),this._parseBuffer);if(k=this._parser.parse(this._parseBuffer,E))return this._preserveStack(I,q,E,Y),this._logSlowResolvingAsync(k),k}else if(!V&&(E=typeof S=="string"?this._stringDecoder.decode(S,this._parseBuffer):this._utf8Decoder.decode(S,this._parseBuffer),k=this._parser.parse(this._parseBuffer,E)))return this._preserveStack(I,q,E,0),this._logSlowResolvingAsync(k),k;this._activeBuffer.x===I&&this._activeBuffer.y===q||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},L.prototype.print=function(S,F,k){var I,q,N=this._charsetService.charset,V=this._optionsService.rawOptions.screenReaderMode,Y=this._bufferService.cols,X=this._coreService.decPrivateModes.wraparound,E=this._coreService.modes.insertMode,B=this._curAttrData,M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&k-F>0&&M.getWidth(this._activeBuffer.x-1)===2&&M.setCellFromCodePoint(this._activeBuffer.x-1,0,1,B.fg,B.bg,B.extended);for(var U=F;U<k;++U){if(I=S[U],q=this._unicodeService.wcwidth(I),I<127&&N){var O=N[String.fromCharCode(I)];O&&(I=O.charCodeAt(0))}if(V&&this._onA11yChar.fire((0,d.stringFromCodePoint)(I)),q||!this._activeBuffer.x){if(this._activeBuffer.x+q-1>=Y){if(X){for(;this._activeBuffer.x<Y;)M.setCellFromCodePoint(this._activeBuffer.x++,0,1,B.fg,B.bg,B.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Y-1,q===2)continue}if(E&&(M.insertCells(this._activeBuffer.x,q,this._activeBuffer.getNullCell(B),B),M.getWidth(Y-1)===2&&M.setCellFromCodePoint(Y-1,t.NULL_CELL_CODE,t.NULL_CELL_WIDTH,B.fg,B.bg,B.extended)),M.setCellFromCodePoint(this._activeBuffer.x++,I,q,B.fg,B.bg,B.extended),q>0)for(;--q;)M.setCellFromCodePoint(this._activeBuffer.x++,0,0,B.fg,B.bg,B.extended)}else M.getWidth(this._activeBuffer.x-1)?M.addCodepointToCell(this._activeBuffer.x-1,I):M.addCodepointToCell(this._activeBuffer.x-2,I)}k-F>0&&(M.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<Y&&k-F>0&&M.getWidth(this._activeBuffer.x)===0&&!M.hasContent(this._activeBuffer.x)&&M.setCellFromCodePoint(this._activeBuffer.x,0,1,B.fg,B.bg,B.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},L.prototype.registerCsiHandler=function(S,F){var k=this;return S.final!=="t"||S.prefix||S.intermediates?this._parser.registerCsiHandler(S,F):this._parser.registerCsiHandler(S,function(I){return!C(I.params[0],k._optionsService.rawOptions.windowOptions)||F(I)})},L.prototype.registerDcsHandler=function(S,F){return this._parser.registerDcsHandler(S,new v.DcsHandler(F))},L.prototype.registerEscHandler=function(S,F){return this._parser.registerEscHandler(S,F)},L.prototype.registerOscHandler=function(S,F){return this._parser.registerOscHandler(S,new h.OscHandler(F))},L.prototype.bell=function(){return this._onRequestBell.fire(),!0},L.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},L.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},L.prototype.backspace=function(){var S;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((S=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||S===void 0?void 0:S.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);F.hasWidth(this._activeBuffer.x)&&!F.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},L.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var S=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-S),!0},L.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},L.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},L.prototype._restrictCursor=function(S){S===void 0&&(S=this._bufferService.cols-1),this._activeBuffer.x=Math.min(S,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},L.prototype._setCursor=function(S,F){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=S,this._activeBuffer.y=this._activeBuffer.scrollTop+F):(this._activeBuffer.x=S,this._activeBuffer.y=F),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},L.prototype._moveCursor=function(S,F){this._restrictCursor(),this._setCursor(this._activeBuffer.x+S,this._activeBuffer.y+F)},L.prototype.cursorUp=function(S){var F=this._activeBuffer.y-this._activeBuffer.scrollTop;return F>=0?this._moveCursor(0,-Math.min(F,S.params[0]||1)):this._moveCursor(0,-(S.params[0]||1)),!0},L.prototype.cursorDown=function(S){var F=this._activeBuffer.scrollBottom-this._activeBuffer.y;return F>=0?this._moveCursor(0,Math.min(F,S.params[0]||1)):this._moveCursor(0,S.params[0]||1),!0},L.prototype.cursorForward=function(S){return this._moveCursor(S.params[0]||1,0),!0},L.prototype.cursorBackward=function(S){return this._moveCursor(-(S.params[0]||1),0),!0},L.prototype.cursorNextLine=function(S){return this.cursorDown(S),this._activeBuffer.x=0,!0},L.prototype.cursorPrecedingLine=function(S){return this.cursorUp(S),this._activeBuffer.x=0,!0},L.prototype.cursorCharAbsolute=function(S){return this._setCursor((S.params[0]||1)-1,this._activeBuffer.y),!0},L.prototype.cursorPosition=function(S){return this._setCursor(S.length>=2?(S.params[1]||1)-1:0,(S.params[0]||1)-1),!0},L.prototype.charPosAbsolute=function(S){return this._setCursor((S.params[0]||1)-1,this._activeBuffer.y),!0},L.prototype.hPositionRelative=function(S){return this._moveCursor(S.params[0]||1,0),!0},L.prototype.linePosAbsolute=function(S){return this._setCursor(this._activeBuffer.x,(S.params[0]||1)-1),!0},L.prototype.vPositionRelative=function(S){return this._moveCursor(0,S.params[0]||1),!0},L.prototype.hVPosition=function(S){return this.cursorPosition(S),!0},L.prototype.tabClear=function(S){var F=S.params[0];return F===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:F===3&&(this._activeBuffer.tabs={}),!0},L.prototype.cursorForwardTab=function(S){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var F=S.params[0]||1;F--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},L.prototype.cursorBackwardTab=function(S){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var F=S.params[0]||1;F--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},L.prototype._eraseInBufferLine=function(S,F,k,I){I===void 0&&(I=!1);var q=this._activeBuffer.lines.get(this._activeBuffer.ybase+S);q.replaceCells(F,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I&&(q.isWrapped=!1)},L.prototype._resetBufferLine=function(S){var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+S);F.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1},L.prototype.eraseInDisplay=function(S){var F;switch(this._restrictCursor(this._bufferService.cols),S.params[0]){case 0:for(F=this._activeBuffer.y,this._dirtyRowService.markDirty(F),this._eraseInBufferLine(F++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);F<this._bufferService.rows;F++)this._resetBufferLine(F);this._dirtyRowService.markDirty(F);break;case 1:for(F=this._activeBuffer.y,this._dirtyRowService.markDirty(F),this._eraseInBufferLine(F,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(F+1).isWrapped=!1);F--;)this._resetBufferLine(F);this._dirtyRowService.markDirty(0);break;case 2:for(F=this._bufferService.rows,this._dirtyRowService.markDirty(F-1);F--;)this._resetBufferLine(F);this._dirtyRowService.markDirty(0);break;case 3:var k=this._activeBuffer.lines.length-this._bufferService.rows;k>0&&(this._activeBuffer.lines.trimStart(k),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-k,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-k,0),this._onScroll.fire(0))}return!0},L.prototype.eraseInLine=function(S){switch(this._restrictCursor(this._bufferService.cols),S.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},L.prototype.insertLines=function(S){this._restrictCursor();var F=S.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var k=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,q=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;F--;)this._activeBuffer.lines.splice(q-1,1),this._activeBuffer.lines.splice(k,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},L.prototype.deleteLines=function(S){this._restrictCursor();var F=S.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var k,I=this._activeBuffer.ybase+this._activeBuffer.y;for(k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,k=this._bufferService.rows-1+this._activeBuffer.ybase-k;F--;)this._activeBuffer.lines.splice(I,1),this._activeBuffer.lines.splice(k,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},L.prototype.insertChars=function(S){this._restrictCursor();var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.insertCells(this._activeBuffer.x,S.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},L.prototype.deleteChars=function(S){this._restrictCursor();var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.deleteCells(this._activeBuffer.x,S.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},L.prototype.scrollUp=function(S){for(var F=S.params[0]||1;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},L.prototype.scrollDown=function(S){for(var F=S.params[0]||1;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},L.prototype.scrollLeft=function(S){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var F=S.params[0]||1,k=this._activeBuffer.scrollTop;k<=this._activeBuffer.scrollBottom;++k){var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);I.deleteCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},L.prototype.scrollRight=function(S){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var F=S.params[0]||1,k=this._activeBuffer.scrollTop;k<=this._activeBuffer.scrollBottom;++k){var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);I.insertCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},L.prototype.insertColumns=function(S){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var F=S.params[0]||1,k=this._activeBuffer.scrollTop;k<=this._activeBuffer.scrollBottom;++k){var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);I.insertCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},L.prototype.deleteColumns=function(S){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var F=S.params[0]||1,k=this._activeBuffer.scrollTop;k<=this._activeBuffer.scrollBottom;++k){var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);I.deleteCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},L.prototype.eraseChars=function(S){this._restrictCursor();var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(S.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},L.prototype.repeatPrecedingCharacter=function(S){if(!this._parser.precedingCodepoint)return!0;for(var F=S.params[0]||1,k=new Uint32Array(F),I=0;I<F;++I)k[I]=this._parser.precedingCodepoint;return this.print(k,0,k.length),!0},L.prototype.sendDeviceAttributesPrimary=function(S){return S.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0},L.prototype.sendDeviceAttributesSecondary=function(S){return S.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(S.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0},L.prototype._is=function(S){return(this._optionsService.rawOptions.termName+"").indexOf(S)===0},L.prototype.setMode=function(S){for(var F=0;F<S.length;F++)S.params[F]===4&&(this._coreService.modes.insertMode=!0);return!0},L.prototype.setModePrivate=function(S){for(var F=0;F<S.length;F++)switch(S.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),this._charsetService.setgCharset(1,y.DEFAULT_CHARSET),this._charsetService.setgCharset(2,y.DEFAULT_CHARSET),this._charsetService.setgCharset(3,y.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},L.prototype.resetMode=function(S){for(var F=0;F<S.length;F++)S.params[F]===4&&(this._coreService.modes.insertMode=!1);return!0},L.prototype.resetModePrivate=function(S){for(var F=0;F<S.length;F++)switch(S.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),S.params[F]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},L.prototype._updateAttrColor=function(S,F,k,I,q){return F===2?(S|=50331648,S&=-16777216,S|=s.AttributeData.fromColorRGB([k,I,q])):F===5&&(S&=-50331904,S|=33554432|255&k),S},L.prototype._extractColor=function(S,F,k){var I=[0,0,-1,0,0,0],q=0,N=0;do{if(I[N+q]=S.params[F+N],S.hasSubParams(F+N)){var V=S.getSubParams(F+N),Y=0;do I[1]===5&&(q=1),I[N+Y+1+q]=V[Y];while(++Y<V.length&&Y+N+1+q<I.length);break}if(I[1]===5&&N+q>=2||I[1]===2&&N+q>=5)break;I[1]&&(q=1)}while(++N+F<S.length&&N+q<I.length);for(Y=2;Y<I.length;++Y)I[Y]===-1&&(I[Y]=0);switch(I[0]){case 38:k.fg=this._updateAttrColor(k.fg,I[1],I[3],I[4],I[5]);break;case 48:k.bg=this._updateAttrColor(k.bg,I[1],I[3],I[4],I[5]);break;case 58:k.extended=k.extended.clone(),k.extended.underlineColor=this._updateAttrColor(k.extended.underlineColor,I[1],I[3],I[4],I[5])}return N},L.prototype._processUnderline=function(S,F){F.extended=F.extended.clone(),(!~S||S>5)&&(S=1),F.extended.underlineStyle=S,F.fg|=268435456,S===0&&(F.fg&=-268435457),F.updateExtended()},L.prototype.charAttributes=function(S){if(S.length===1&&S.params[0]===0)return this._curAttrData.fg=n.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=n.DEFAULT_ATTR_DATA.bg,!0;for(var F,k=S.length,I=this._curAttrData,q=0;q<k;q++)(F=S.params[q])>=30&&F<=37?(I.fg&=-50331904,I.fg|=16777216|F-30):F>=40&&F<=47?(I.bg&=-50331904,I.bg|=16777216|F-40):F>=90&&F<=97?(I.fg&=-50331904,I.fg|=16777224|F-90):F>=100&&F<=107?(I.bg&=-50331904,I.bg|=16777224|F-100):F===0?(I.fg=n.DEFAULT_ATTR_DATA.fg,I.bg=n.DEFAULT_ATTR_DATA.bg):F===1?I.fg|=134217728:F===3?I.bg|=67108864:F===4?(I.fg|=268435456,this._processUnderline(S.hasSubParams(q)?S.getSubParams(q)[0]:1,I)):F===5?I.fg|=536870912:F===7?I.fg|=67108864:F===8?I.fg|=1073741824:F===9?I.fg|=2147483648:F===2?I.bg|=134217728:F===21?this._processUnderline(2,I):F===22?(I.fg&=-134217729,I.bg&=-134217729):F===23?I.bg&=-67108865:F===24?I.fg&=-268435457:F===25?I.fg&=-536870913:F===27?I.fg&=-67108865:F===28?I.fg&=-1073741825:F===29?I.fg&=2147483647:F===39?(I.fg&=-67108864,I.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):F===49?(I.bg&=-67108864,I.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):F===38||F===48||F===58?q+=this._extractColor(S,q,I):F===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):F===100?(I.fg&=-67108864,I.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",F);return!0},L.prototype.deviceStatus=function(S){switch(S.params[0]){case 5:this._coreService.triggerDataEvent(l.C0.ESC+"[0n");break;case 6:var F=this._activeBuffer.y+1,k=this._activeBuffer.x+1;this._coreService.triggerDataEvent(l.C0.ESC+"["+F+";"+k+"R")}return!0},L.prototype.deviceStatusPrivate=function(S){if(S.params[0]===6){var F=this._activeBuffer.y+1,k=this._activeBuffer.x+1;this._coreService.triggerDataEvent(l.C0.ESC+"[?"+F+";"+k+"R")}return!0},L.prototype.softReset=function(S){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},L.prototype.setCursorStyle=function(S){var F=S.params[0]||1;switch(F){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var k=F%2==1;return this._optionsService.options.cursorBlink=k,!0},L.prototype.setScrollRegion=function(S){var F,k=S.params[0]||1;return(S.length<2||(F=S.params[1])>this._bufferService.rows||F===0)&&(F=this._bufferService.rows),F>k&&(this._activeBuffer.scrollTop=k-1,this._activeBuffer.scrollBottom=F-1,this._setCursor(0,0)),!0},L.prototype.windowOptions=function(S){if(!C(S.params[0],this._optionsService.rawOptions.windowOptions))return!0;var F=S.length>1?S.params[1]:0;switch(S.params[0]){case 14:F!==2&&this._onRequestWindowsOptionsReport.fire(_.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(_.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(l.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:F!==0&&F!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),F!==0&&F!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:F!==0&&F!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),F!==0&&F!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},L.prototype.saveCursor=function(S){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},L.prototype.restoreCursor=function(S){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},L.prototype.setTitle=function(S){return this._windowTitle=S,this._onTitleChange.fire(S),!0},L.prototype.setIconName=function(S){return this._iconName=S,!0},L.prototype.setOrReportIndexedColor=function(S){for(var F=[],k=S.split(";");k.length>1;){var I=k.shift(),q=k.shift();if(/^\d+$/.exec(I)){var N=parseInt(I);if(0<=N&&N<256)if(q==="?")F.push({type:0,index:N});else{var V=(0,b.parseColor)(q);V&&F.push({type:1,index:N,color:V})}}}return F.length&&this._onColor.fire(F),!0},L.prototype._setOrReportSpecialColor=function(S,F){for(var k=S.split(";"),I=0;I<k.length&&!(F>=this._specialColors.length);++I,++F)if(k[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[F]}]);else{var q=(0,b.parseColor)(k[I]);q&&this._onColor.fire([{type:1,index:this._specialColors[F],color:q}])}return!0},L.prototype.setOrReportFgColor=function(S){return this._setOrReportSpecialColor(S,0)},L.prototype.setOrReportBgColor=function(S){return this._setOrReportSpecialColor(S,1)},L.prototype.setOrReportCursorColor=function(S){return this._setOrReportSpecialColor(S,2)},L.prototype.restoreIndexedColor=function(S){if(!S)return this._onColor.fire([{type:2}]),!0;for(var F=[],k=S.split(";"),I=0;I<k.length;++I)if(/^\d+$/.exec(k[I])){var q=parseInt(k[I]);0<=q&&q<256&&F.push({type:2,index:q})}return F.length&&this._onColor.fire(F),!0},L.prototype.restoreFgColor=function(S){return this._onColor.fire([{type:2,index:256}]),!0},L.prototype.restoreBgColor=function(S){return this._onColor.fire([{type:2,index:257}]),!0},L.prototype.restoreCursorColor=function(S){return this._onColor.fire([{type:2,index:258}]),!0},L.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},L.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},L.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},L.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),!0},L.prototype.selectCharset=function(S){return S.length!==2?(this.selectDefaultCharset(),!0):(S[0]==="/"||this._charsetService.setgCharset(m[S[0]],y.CHARSETS[S[1]]||y.DEFAULT_CHARSET),!0)},L.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},L.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},L.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var S=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,S,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},L.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},L.prototype.reset=function(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()},L.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},L.prototype.setgLevel=function(S){return this._charsetService.setgLevel(S),!0},L.prototype.screenAlignmentPattern=function(){var S=new i.CellData;S.content=1<<22|"E".charCodeAt(0),S.fg=this._curAttrData.fg,S.bg=this._curAttrData.bg,this._setCursor(0,0);for(var F=0;F<this._bufferService.rows;++F){var k=this._activeBuffer.ybase+this._activeBuffer.y+F,I=this._activeBuffer.lines.get(k);I&&(I.fill(S),I.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},L}(o.Disposable);e.InputHandler=w},844:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDisposeArrayDisposable=e.disposeArray=e.Disposable=void 0;var p=function(){function f(){this._disposables=[],this._isDisposed=!1}return f.prototype.dispose=function(){this._isDisposed=!0;for(var _=0,l=this._disposables;_<l.length;_++)l[_].dispose();this._disposables.length=0},f.prototype.register=function(_){return this._disposables.push(_),_},f.prototype.unregister=function(_){var l=this._disposables.indexOf(_);l!==-1&&this._disposables.splice(l,1)},f}();function c(f){for(var _=0,l=f;_<l.length;_++)l[_].dispose();f.length=0}e.Disposable=p,e.disposeArray=c,e.getDisposeArrayDisposable=function(f){return{dispose:function(){return c(f)}}}},6114:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isLinux=e.isWindows=e.isIphone=e.isIpad=e.isMac=e.isSafari=e.isLegacyEdge=e.isFirefox=void 0;var p=typeof navigator>"u",c=p?"node":navigator.userAgent,f=p?"node":navigator.platform;e.isFirefox=c.includes("Firefox"),e.isLegacyEdge=c.includes("Edge"),e.isSafari=/^((?!chrome|android).)*safari/i.test(c),e.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),e.isIpad=f==="iPad",e.isIphone=f==="iPhone",e.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),e.isLinux=f.indexOf("Linux")>=0},8273:(A,e)=>{function p(c,f,_,l){if(_===void 0&&(_=0),l===void 0&&(l=c.length),_>=c.length)return c;_=(c.length+_)%c.length,l=l>=c.length?c.length:(c.length+l)%c.length;for(var y=_;y<l;++y)c[y]=f;return c}Object.defineProperty(e,"__esModule",{value:!0}),e.concat=e.fillFallback=e.fill=void 0,e.fill=function(c,f,_,l){return c.fill?c.fill(f,_,l):p(c,f,_,l)},e.fillFallback=p,e.concat=function(c,f){var _=new c.constructor(c.length+f.length);return _.set(c),_.set(f,c.length),_}},9282:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.updateWindowsModeWrappedState=void 0;var c=p(643);e.updateWindowsModeWrappedState=function(f){var _=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),l=_==null?void 0:_.get(f.cols-1),y=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);y&&l&&(y.isWrapped=l[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&l[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendedAttrs=e.AttributeData=void 0;var p=function(){function f(){this.fg=0,this.bg=0,this.extended=new c}return f.toColorRGB=function(_){return[_>>>16&255,_>>>8&255,255&_]},f.fromColorRGB=function(_){return(255&_[0])<<16|(255&_[1])<<8|255&_[2]},f.prototype.clone=function(){var _=new f;return _.fg=this.fg,_.bg=this.bg,_.extended=this.extended.clone(),_},f.prototype.isInverse=function(){return 67108864&this.fg},f.prototype.isBold=function(){return 134217728&this.fg},f.prototype.isUnderline=function(){return 268435456&this.fg},f.prototype.isBlink=function(){return 536870912&this.fg},f.prototype.isInvisible=function(){return 1073741824&this.fg},f.prototype.isItalic=function(){return 67108864&this.bg},f.prototype.isDim=function(){return 134217728&this.bg},f.prototype.isStrikethrough=function(){return 2147483648&this.fg},f.prototype.getFgColorMode=function(){return 50331648&this.fg},f.prototype.getBgColorMode=function(){return 50331648&this.bg},f.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},f.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},f.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},f.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},f.prototype.isFgDefault=function(){return(50331648&this.fg)==0},f.prototype.isBgDefault=function(){return(50331648&this.bg)==0},f.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},f.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},f.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},f.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},f.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},f.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},f.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},f.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},f.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},f.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},f.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},f}();e.AttributeData=p;var c=function(){function f(_,l){_===void 0&&(_=0),l===void 0&&(l=-1),this.underlineStyle=_,this.underlineColor=l}return f.prototype.clone=function(){return new f(this.underlineStyle,this.underlineColor)},f.prototype.isEmpty=function(){return this.underlineStyle===0},f}();e.ExtendedAttrs=c},9092:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferStringIterator=e.Buffer=e.MAX_BUFFER_SIZE=void 0;var c=p(6349),f=p(8437),_=p(511),l=p(643),y=p(4634),D=p(4863),o=p(7116),a=p(3734);e.MAX_BUFFER_SIZE=4294967295;var d=function(){function r(t,i,s){this._hasScrollback=t,this._optionsService=i,this._bufferService=s,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=f.DEFAULT_ATTR_DATA.clone(),this.savedCharset=o.DEFAULT_CHARSET,this.markers=[],this._nullCell=_.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]),this._whitespaceCell=_.CellData.fromCharData([0,l.WHITESPACE_CELL_CHAR,l.WHITESPACE_CELL_WIDTH,l.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return r.prototype.getNullCell=function(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new a.ExtendedAttrs),this._nullCell},r.prototype.getWhitespaceCell=function(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new a.ExtendedAttrs),this._whitespaceCell},r.prototype.getBlankLine=function(t,i){return new f.BufferLine(this._bufferService.cols,this.getNullCell(t),i)},Object.defineProperty(r.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isCursorInViewport",{get:function(){var t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows},enumerable:!1,configurable:!0}),r.prototype._getCorrectBufferLength=function(t){if(!this._hasScrollback)return t;var i=t+this._optionsService.rawOptions.scrollback;return i>e.MAX_BUFFER_SIZE?e.MAX_BUFFER_SIZE:i},r.prototype.fillViewportRows=function(t){if(this.lines.length===0){t===void 0&&(t=f.DEFAULT_ATTR_DATA);for(var i=this._rows;i--;)this.lines.push(this.getBlankLine(t))}},r.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},r.prototype.resize=function(t,i){var s=this.getNullCell(f.DEFAULT_ATTR_DATA),u=this._getCorrectBufferLength(i);if(u>this.lines.maxLength&&(this.lines.maxLength=u),this.lines.length>0){if(this._cols<t)for(var h=0;h<this.lines.length;h++)this.lines.get(h).resize(t,s);var v=0;if(this._rows<i)for(var b=this._rows;b<i;b++)this.lines.length<i+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new f.BufferLine(t,s)):this.ybase>0&&this.lines.length<=this.ybase+this.y+v+1?(this.ybase--,v++,this.ydisp>0&&this.ydisp--):this.lines.push(new f.BufferLine(t,s)));else for(b=this._rows;b>i;b--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(u<this.lines.maxLength){var m=this.lines.length-u;m>0&&(this.lines.trimStart(m),this.ybase=Math.max(this.ybase-m,0),this.ydisp=Math.max(this.ydisp-m,0),this.savedY=Math.max(this.savedY-m,0)),this.lines.maxLength=u}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,i-1),v&&(this.y+=v),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(t,i),this._cols>t))for(h=0;h<this.lines.length;h++)this.lines.get(h).resize(t,s);this._cols=t,this._rows=i},Object.defineProperty(r.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),r.prototype._reflow=function(t,i){this._cols!==t&&(t>this._cols?this._reflowLarger(t,i):this._reflowSmaller(t,i))},r.prototype._reflowLarger=function(t,i){var s=(0,y.reflowLargerGetLinesToRemove)(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(f.DEFAULT_ATTR_DATA));if(s.length>0){var u=(0,y.reflowLargerCreateNewLayout)(this.lines,s);(0,y.reflowLargerApplyNewLayout)(this.lines,u.layout),this._reflowLargerAdjustViewport(t,i,u.countRemoved)}},r.prototype._reflowLargerAdjustViewport=function(t,i,s){for(var u=this.getNullCell(f.DEFAULT_ATTR_DATA),h=s;h-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new f.BufferLine(t,u))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-s,0)},r.prototype._reflowSmaller=function(t,i){for(var s=this.getNullCell(f.DEFAULT_ATTR_DATA),u=[],h=0,v=this.lines.length-1;v>=0;v--){var b=this.lines.get(v);if(!(!b||!b.isWrapped&&b.getTrimmedLength()<=t)){for(var m=[b];b.isWrapped&&v>0;)b=this.lines.get(--v),m.unshift(b);var g=this.ybase+this.y;if(!(g>=v&&g<v+m.length)){var C,x=m[m.length-1].getTrimmedLength(),w=(0,y.reflowSmallerGetNewLineLengths)(m,this._cols,t),T=w.length-m.length;C=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+T):Math.max(0,this.lines.length-this.lines.maxLength+T);for(var L=[],S=0;S<T;S++){var F=this.getBlankLine(f.DEFAULT_ATTR_DATA,!0);L.push(F)}L.length>0&&(u.push({start:v+m.length+h,newLines:L}),h+=L.length),m.push.apply(m,L);var k=w.length-1,I=w[k];I===0&&(I=w[--k]);for(var q=m.length-T-1,N=x;q>=0;){var V=Math.min(N,I);if(m[k]===void 0)break;if(m[k].copyCellsFrom(m[q],N-V,I-V,V,!0),(I-=V)==0&&(I=w[--k]),(N-=V)==0){q--;var Y=Math.max(q,0);N=(0,y.getWrappedLineTrimmedLength)(m,Y,this._cols)}}for(S=0;S<m.length;S++)w[S]<t&&m[S].setCell(w[S],s);for(var X=T-C;X-- >0;)this.ybase===0?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+h)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+T,this.ybase+i-1)}}}if(u.length>0){var E=[],B=[];for(S=0;S<this.lines.length;S++)B.push(this.lines.get(S));var M=this.lines.length,U=M-1,O=0,z=u[O];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+h);var G=0;for(S=Math.min(this.lines.maxLength-1,M+h-1);S>=0;S--)if(z&&z.start>U+G){for(var Z=z.newLines.length-1;Z>=0;Z--)this.lines.set(S--,z.newLines[Z]);S++,E.push({index:U+1,amount:z.newLines.length}),G+=z.newLines.length,z=u[++O]}else this.lines.set(S,B[U--]);var $=0;for(S=E.length-1;S>=0;S--)E[S].index+=$,this.lines.onInsertEmitter.fire(E[S]),$+=E[S].amount;var te=Math.max(0,M+h-this.lines.maxLength);te>0&&this.lines.onTrimEmitter.fire(te)}},r.prototype.stringIndexToBufferIndex=function(t,i,s){for(s===void 0&&(s=!1);i;){var u=this.lines.get(t);if(!u)return[-1,-1];for(var h=s?u.getTrimmedLength():u.length,v=0;v<h;++v)if(u.get(v)[l.CHAR_DATA_WIDTH_INDEX]&&(i-=u.get(v)[l.CHAR_DATA_CHAR_INDEX].length||1),i<0)return[t,v];t++}return[t,0]},r.prototype.translateBufferLineToString=function(t,i,s,u){s===void 0&&(s=0);var h=this.lines.get(t);return h?h.translateToString(i,s,u):""},r.prototype.getWrappedRangeForLine=function(t){for(var i=t,s=t;i>0&&this.lines.get(i).isWrapped;)i--;for(;s+1<this.lines.length&&this.lines.get(s+1).isWrapped;)s++;return{first:i,last:s}},r.prototype.setupTabStops=function(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0},r.prototype.prevStop=function(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t},r.prototype.nextStop=function(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t},r.prototype.addMarker=function(t){var i=this,s=new D.Marker(t);return this.markers.push(s),s.register(this.lines.onTrim(function(u){s.line-=u,s.line<0&&s.dispose()})),s.register(this.lines.onInsert(function(u){s.line>=u.index&&(s.line+=u.amount)})),s.register(this.lines.onDelete(function(u){s.line>=u.index&&s.line<u.index+u.amount&&s.dispose(),s.line>u.index&&(s.line-=u.amount)})),s.register(s.onDispose(function(){return i._removeMarker(s)})),s},r.prototype._removeMarker=function(t){this.markers.splice(this.markers.indexOf(t),1)},r.prototype.iterator=function(t,i,s,u,h){return new n(this,t,i,s,u,h)},r}();e.Buffer=d;var n=function(){function r(t,i,s,u,h,v){s===void 0&&(s=0),u===void 0&&(u=t.lines.length),h===void 0&&(h=0),v===void 0&&(v=0),this._buffer=t,this._trimRight=i,this._startIndex=s,this._endIndex=u,this._startOverscan=h,this._endOverscan=v,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return r.prototype.hasNext=function(){return this._current<this._endIndex},r.prototype.next=function(){var t=this._buffer.getWrappedRangeForLine(this._current);t.first<this._startIndex-this._startOverscan&&(t.first=this._startIndex-this._startOverscan),t.last>this._endIndex+this._endOverscan&&(t.last=this._endIndex+this._endOverscan),t.first=Math.max(t.first,0),t.last=Math.min(t.last,this._buffer.lines.length);for(var i="",s=t.first;s<=t.last;++s)i+=this._buffer.translateBufferLineToString(s,this._trimRight);return this._current=t.last+1,{range:t,content:i}},r}();e.BufferStringIterator=n},8437:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferLine=e.DEFAULT_ATTR_DATA=void 0;var c=p(482),f=p(643),_=p(511),l=p(3734);e.DEFAULT_ATTR_DATA=Object.freeze(new l.AttributeData);var y=function(){function D(o,a,d){d===void 0&&(d=!1),this.isWrapped=d,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);for(var n=a||_.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]),r=0;r<o;++r)this.setCell(r,n);this.length=o}return D.prototype.get=function(o){var a=this._data[3*o+0],d=2097151&a;return[this._data[3*o+1],2097152&a?this._combined[o]:d?(0,c.stringFromCodePoint)(d):"",a>>22,2097152&a?this._combined[o].charCodeAt(this._combined[o].length-1):d]},D.prototype.set=function(o,a){this._data[3*o+1]=a[f.CHAR_DATA_ATTR_INDEX],a[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=a[1],this._data[3*o+0]=2097152|o|a[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=a[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[f.CHAR_DATA_WIDTH_INDEX]<<22},D.prototype.getWidth=function(o){return this._data[3*o+0]>>22},D.prototype.hasWidth=function(o){return 12582912&this._data[3*o+0]},D.prototype.getFg=function(o){return this._data[3*o+1]},D.prototype.getBg=function(o){return this._data[3*o+2]},D.prototype.hasContent=function(o){return 4194303&this._data[3*o+0]},D.prototype.getCodePoint=function(o){var a=this._data[3*o+0];return 2097152&a?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&a},D.prototype.isCombined=function(o){return 2097152&this._data[3*o+0]},D.prototype.getString=function(o){var a=this._data[3*o+0];return 2097152&a?this._combined[o]:2097151&a?(0,c.stringFromCodePoint)(2097151&a):""},D.prototype.loadCell=function(o,a){var d=3*o;return a.content=this._data[d+0],a.fg=this._data[d+1],a.bg=this._data[d+2],2097152&a.content&&(a.combinedData=this._combined[o]),268435456&a.bg&&(a.extended=this._extendedAttrs[o]),a},D.prototype.setCell=function(o,a){2097152&a.content&&(this._combined[o]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[o]=a.extended),this._data[3*o+0]=a.content,this._data[3*o+1]=a.fg,this._data[3*o+2]=a.bg},D.prototype.setCellFromCodePoint=function(o,a,d,n,r,t){268435456&r&&(this._extendedAttrs[o]=t),this._data[3*o+0]=a|d<<22,this._data[3*o+1]=n,this._data[3*o+2]=r},D.prototype.addCodepointToCell=function(o,a){var d=this._data[3*o+0];2097152&d?this._combined[o]+=(0,c.stringFromCodePoint)(a):(2097151&d?(this._combined[o]=(0,c.stringFromCodePoint)(2097151&d)+(0,c.stringFromCodePoint)(a),d&=-2097152,d|=2097152):d=a|1<<22,this._data[3*o+0]=d)},D.prototype.insertCells=function(o,a,d,n){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new l.ExtendedAttrs),a<this.length-o){for(var r=new _.CellData,t=this.length-o-a-1;t>=0;--t)this.setCell(o+a+t,this.loadCell(o+t,r));for(t=0;t<a;++t)this.setCell(o+t,d)}else for(t=o;t<this.length;++t)this.setCell(t,d);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new l.ExtendedAttrs)},D.prototype.deleteCells=function(o,a,d,n){if(o%=this.length,a<this.length-o){for(var r=new _.CellData,t=0;t<this.length-o-a;++t)this.setCell(o+t,this.loadCell(o+a+t,r));for(t=this.length-a;t<this.length;++t)this.setCell(t,d)}else for(t=o;t<this.length;++t)this.setCell(t,d);o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new l.ExtendedAttrs),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodePoint(o,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new l.ExtendedAttrs)},D.prototype.replaceCells=function(o,a,d,n){for(o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new l.ExtendedAttrs),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new l.ExtendedAttrs);o<a&&o<this.length;)this.setCell(o++,d)},D.prototype.resize=function(o,a){if(o!==this.length){if(o>this.length){var d=new Uint32Array(3*o);this.length&&(3*o<this._data.length?d.set(this._data.subarray(0,3*o)):d.set(this._data)),this._data=d;for(var n=this.length;n<o;++n)this.setCell(n,a)}else if(o){(d=new Uint32Array(3*o)).set(this._data.subarray(0,3*o)),this._data=d;var r=Object.keys(this._combined);for(n=0;n<r.length;n++){var t=parseInt(r[n],10);t>=o&&delete this._combined[t]}}else this._data=new Uint32Array(0),this._combined={};this.length=o}},D.prototype.fill=function(o){this._combined={},this._extendedAttrs={};for(var a=0;a<this.length;++a)this.setCell(a,o)},D.prototype.copyFrom=function(o){for(var a in this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={},o._combined)this._combined[a]=o._combined[a];for(var a in this._extendedAttrs={},o._extendedAttrs)this._extendedAttrs[a]=o._extendedAttrs[a];this.isWrapped=o.isWrapped},D.prototype.clone=function(){var o=new D(0);for(var a in o._data=new Uint32Array(this._data),o.length=this.length,this._combined)o._combined[a]=this._combined[a];for(var a in this._extendedAttrs)o._extendedAttrs[a]=this._extendedAttrs[a];return o.isWrapped=this.isWrapped,o},D.prototype.getTrimmedLength=function(){for(var o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0},D.prototype.copyCellsFrom=function(o,a,d,n,r){var t=o._data;if(r)for(var i=n-1;i>=0;i--)for(var s=0;s<3;s++)this._data[3*(d+i)+s]=t[3*(a+i)+s];else for(i=0;i<n;i++)for(s=0;s<3;s++)this._data[3*(d+i)+s]=t[3*(a+i)+s];var u=Object.keys(o._combined);for(s=0;s<u.length;s++){var h=parseInt(u[s],10);h>=a&&(this._combined[h-a+d]=o._combined[h])}},D.prototype.translateToString=function(o,a,d){o===void 0&&(o=!1),a===void 0&&(a=0),d===void 0&&(d=this.length),o&&(d=Math.min(d,this.getTrimmedLength()));for(var n="";a<d;){var r=this._data[3*a+0],t=2097151&r;n+=2097152&r?this._combined[a]:t?(0,c.stringFromCodePoint)(t):f.WHITESPACE_CELL_CHAR,a+=r>>22||1}return n},D}();e.BufferLine=y},4841:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRangeLength=void 0,e.getRangeLength=function(p,c){if(p.start.y>p.end.y)throw new Error("Buffer range end ("+p.end.x+", "+p.end.y+") cannot be before start ("+p.start.x+", "+p.start.y+")");return c*(p.end.y-p.start.y)+(p.end.x-p.start.x+1)}},4634:(A,e)=>{function p(c,f,_){if(f===c.length-1)return c[f].getTrimmedLength();var l=!c[f].hasContent(_-1)&&c[f].getWidth(_-1)===1,y=c[f+1].getWidth(0)===2;return l&&y?_-1:_}Object.defineProperty(e,"__esModule",{value:!0}),e.getWrappedLineTrimmedLength=e.reflowSmallerGetNewLineLengths=e.reflowLargerApplyNewLayout=e.reflowLargerCreateNewLayout=e.reflowLargerGetLinesToRemove=void 0,e.reflowLargerGetLinesToRemove=function(c,f,_,l,y){for(var D=[],o=0;o<c.length-1;o++){var a=o,d=c.get(++a);if(d.isWrapped){for(var n=[c.get(o)];a<c.length&&d.isWrapped;)n.push(d),d=c.get(++a);if(l>=o&&l<a)o+=n.length-1;else{for(var r=0,t=p(n,r,f),i=1,s=0;i<n.length;){var u=p(n,i,f),h=u-s,v=_-t,b=Math.min(h,v);n[r].copyCellsFrom(n[i],s,t,b,!1),(t+=b)===_&&(r++,t=0),(s+=b)===u&&(i++,s=0),t===0&&r!==0&&n[r-1].getWidth(_-1)===2&&(n[r].copyCellsFrom(n[r-1],_-1,t++,1,!1),n[r-1].setCell(_-1,y))}n[r].replaceCells(t,_,y);for(var m=0,g=n.length-1;g>0&&(g>r||n[g].getTrimmedLength()===0);g--)m++;m>0&&(D.push(o+n.length-m),D.push(m)),o+=n.length-1}}}return D},e.reflowLargerCreateNewLayout=function(c,f){for(var _=[],l=0,y=f[l],D=0,o=0;o<c.length;o++)if(y===o){var a=f[++l];c.onDeleteEmitter.fire({index:o-D,amount:a}),o+=a-1,D+=a,y=f[++l]}else _.push(o);return{layout:_,countRemoved:D}},e.reflowLargerApplyNewLayout=function(c,f){for(var _=[],l=0;l<f.length;l++)_.push(c.get(f[l]));for(l=0;l<_.length;l++)c.set(l,_[l]);c.length=f.length},e.reflowSmallerGetNewLineLengths=function(c,f,_){for(var l=[],y=c.map(function(t,i){return p(c,i,f)}).reduce(function(t,i){return t+i}),D=0,o=0,a=0;a<y;){if(y-a<_){l.push(y-a);break}D+=_;var d=p(c,o,f);D>d&&(D-=d,o++);var n=c[o].getWidth(D-1)===2;n&&D--;var r=n?_-1:_;l.push(r),a+=r}return l},e.getWrappedLineTrimmedLength=p},5295:function(A,e,p){var c,f=this&&this.__extends||(c=function(D,o){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var n in d)Object.prototype.hasOwnProperty.call(d,n)&&(a[n]=d[n])},c(D,o)},function(D,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function a(){this.constructor=D}c(D,o),D.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)});Object.defineProperty(e,"__esModule",{value:!0}),e.BufferSet=void 0;var _=p(9092),l=p(8460),y=function(D){function o(a,d){var n=D.call(this)||this;return n._optionsService=a,n._bufferService=d,n._onBufferActivate=n.register(new l.EventEmitter),n.reset(),n}return f(o,D),Object.defineProperty(o.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),o.prototype.reset=function(){this._normal=new _.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new _.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(o.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),o.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},o.prototype.activateAltBuffer=function(a){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(a),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},o.prototype.resize=function(a,d){this._normal.resize(a,d),this._alt.resize(a,d)},o.prototype.setupTabStops=function(a){this._normal.setupTabStops(a),this._alt.setupTabStops(a)},o}(p(844).Disposable);e.BufferSet=y},511:function(A,e,p){var c,f=this&&this.__extends||(c=function(o,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,n){d.__proto__=n}||function(d,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(d[r]=n[r])},c(o,a)},function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function d(){this.constructor=o}c(o,a),o.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)});Object.defineProperty(e,"__esModule",{value:!0}),e.CellData=void 0;var _=p(482),l=p(643),y=p(3734),D=function(o){function a(){var d=o!==null&&o.apply(this,arguments)||this;return d.content=0,d.fg=0,d.bg=0,d.extended=new y.ExtendedAttrs,d.combinedData="",d}return f(a,o),a.fromCharData=function(d){var n=new a;return n.setFromCharData(d),n},a.prototype.isCombined=function(){return 2097152&this.content},a.prototype.getWidth=function(){return this.content>>22},a.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,_.stringFromCodePoint)(2097151&this.content):""},a.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},a.prototype.setFromCharData=function(d){this.fg=d[l.CHAR_DATA_ATTR_INDEX],this.bg=0;var n=!1;if(d[l.CHAR_DATA_CHAR_INDEX].length>2)n=!0;else if(d[l.CHAR_DATA_CHAR_INDEX].length===2){var r=d[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){var t=d[l.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=t&&t<=57343?this.content=1024*(r-55296)+t-56320+65536|d[l.CHAR_DATA_WIDTH_INDEX]<<22:n=!0}else n=!0}else this.content=d[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[l.CHAR_DATA_WIDTH_INDEX]<<22;n&&(this.combinedData=d[l.CHAR_DATA_CHAR_INDEX],this.content=2097152|d[l.CHAR_DATA_WIDTH_INDEX]<<22)},a.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},a}(y.AttributeData);e.CellData=D},643:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WHITESPACE_CELL_CODE=e.WHITESPACE_CELL_WIDTH=e.WHITESPACE_CELL_CHAR=e.NULL_CELL_CODE=e.NULL_CELL_WIDTH=e.NULL_CELL_CHAR=e.CHAR_DATA_CODE_INDEX=e.CHAR_DATA_WIDTH_INDEX=e.CHAR_DATA_CHAR_INDEX=e.CHAR_DATA_ATTR_INDEX=e.DEFAULT_ATTR=e.DEFAULT_COLOR=void 0,e.DEFAULT_COLOR=256,e.DEFAULT_ATTR=256|e.DEFAULT_COLOR<<9,e.CHAR_DATA_ATTR_INDEX=0,e.CHAR_DATA_CHAR_INDEX=1,e.CHAR_DATA_WIDTH_INDEX=2,e.CHAR_DATA_CODE_INDEX=3,e.NULL_CELL_CHAR="",e.NULL_CELL_WIDTH=1,e.NULL_CELL_CODE=0,e.WHITESPACE_CELL_CHAR=" ",e.WHITESPACE_CELL_WIDTH=1,e.WHITESPACE_CELL_CODE=32},4863:function(A,e,p){var c,f=this&&this.__extends||(c=function(y,D){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(o[d]=a[d])},c(y,D)},function(y,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function o(){this.constructor=y}c(y,D),y.prototype=D===null?Object.create(D):(o.prototype=D.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.Marker=void 0;var _=p(8460),l=function(y){function D(o){var a=y.call(this)||this;return a.line=o,a._id=D._nextId++,a.isDisposed=!1,a._onDispose=new _.EventEmitter,a}return f(D,y),Object.defineProperty(D.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),D.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),y.prototype.dispose.call(this))},D._nextId=1,D}(p(844).Disposable);e.Marker=l},7116:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CHARSET=e.CHARSETS=void 0,e.CHARSETS={},e.DEFAULT_CHARSET=e.CHARSETS.B,e.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},e.CHARSETS.A={"#":"\xA3"},e.CHARSETS.B=void 0,e.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},e.CHARSETS.C=e.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},e.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},e.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},e.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},e.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},e.CHARSETS.E=e.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},e.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},e.CHARSETS.H=e.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},e.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(A,e)=>{var p,c;Object.defineProperty(e,"__esModule",{value:!0}),e.C1=e.C0=void 0,(c=e.C0||(e.C0={})).NUL="\0",c.SOH="",c.STX="",c.ETX="",c.EOT="",c.ENQ="",c.ACK="",c.BEL="\x07",c.BS="\b",c.HT="	",c.LF=`
`,c.VT="\v",c.FF="\f",c.CR="\r",c.SO="",c.SI="",c.DLE="",c.DC1="",c.DC2="",c.DC3="",c.DC4="",c.NAK="",c.SYN="",c.ETB="",c.CAN="",c.EM="",c.SUB="",c.ESC="\x1B",c.FS="",c.GS="",c.RS="",c.US="",c.SP=" ",c.DEL="\x7F",(p=e.C1||(e.C1={})).PAD="\x80",p.HOP="\x81",p.BPH="\x82",p.NBH="\x83",p.IND="\x84",p.NEL="\x85",p.SSA="\x86",p.ESA="\x87",p.HTS="\x88",p.HTJ="\x89",p.VTS="\x8A",p.PLD="\x8B",p.PLU="\x8C",p.RI="\x8D",p.SS2="\x8E",p.SS3="\x8F",p.DCS="\x90",p.PU1="\x91",p.PU2="\x92",p.STS="\x93",p.CCH="\x94",p.MW="\x95",p.SPA="\x96",p.EPA="\x97",p.SOS="\x98",p.SGCI="\x99",p.SCI="\x9A",p.CSI="\x9B",p.ST="\x9C",p.OSC="\x9D",p.PM="\x9E",p.APC="\x9F"},7399:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.evaluateKeyboardEvent=void 0;var c=p(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};e.evaluateKeyboardEvent=function(_,l,y,D){var o={type:0,cancel:!1,key:void 0},a=(_.shiftKey?1:0)|(_.altKey?2:0)|(_.ctrlKey?4:0)|(_.metaKey?8:0);switch(_.keyCode){case 0:_.key==="UIKeyInputUpArrow"?o.key=l?c.C0.ESC+"OA":c.C0.ESC+"[A":_.key==="UIKeyInputLeftArrow"?o.key=l?c.C0.ESC+"OD":c.C0.ESC+"[D":_.key==="UIKeyInputRightArrow"?o.key=l?c.C0.ESC+"OC":c.C0.ESC+"[C":_.key==="UIKeyInputDownArrow"&&(o.key=l?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:if(_.shiftKey){o.key=c.C0.BS;break}if(_.altKey){o.key=c.C0.ESC+c.C0.DEL;break}o.key=c.C0.DEL;break;case 9:if(_.shiftKey){o.key=c.C0.ESC+"[Z";break}o.key=c.C0.HT,o.cancel=!0;break;case 13:o.key=_.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,o.cancel=!0;break;case 27:o.key=c.C0.ESC,_.altKey&&(o.key=c.C0.ESC+c.C0.ESC),o.cancel=!0;break;case 37:if(_.metaKey)break;a?(o.key=c.C0.ESC+"[1;"+(a+1)+"D",o.key===c.C0.ESC+"[1;3D"&&(o.key=c.C0.ESC+(y?"b":"[1;5D"))):o.key=l?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(_.metaKey)break;a?(o.key=c.C0.ESC+"[1;"+(a+1)+"C",o.key===c.C0.ESC+"[1;3C"&&(o.key=c.C0.ESC+(y?"f":"[1;5C"))):o.key=l?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(_.metaKey)break;a?(o.key=c.C0.ESC+"[1;"+(a+1)+"A",y||o.key!==c.C0.ESC+"[1;3A"||(o.key=c.C0.ESC+"[1;5A")):o.key=l?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(_.metaKey)break;a?(o.key=c.C0.ESC+"[1;"+(a+1)+"B",y||o.key!==c.C0.ESC+"[1;3B"||(o.key=c.C0.ESC+"[1;5B")):o.key=l?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:_.shiftKey||_.ctrlKey||(o.key=c.C0.ESC+"[2~");break;case 46:o.key=a?c.C0.ESC+"[3;"+(a+1)+"~":c.C0.ESC+"[3~";break;case 36:o.key=a?c.C0.ESC+"[1;"+(a+1)+"H":l?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:o.key=a?c.C0.ESC+"[1;"+(a+1)+"F":l?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:_.shiftKey?o.type=2:o.key=c.C0.ESC+"[5~";break;case 34:_.shiftKey?o.type=3:o.key=c.C0.ESC+"[6~";break;case 112:o.key=a?c.C0.ESC+"[1;"+(a+1)+"P":c.C0.ESC+"OP";break;case 113:o.key=a?c.C0.ESC+"[1;"+(a+1)+"Q":c.C0.ESC+"OQ";break;case 114:o.key=a?c.C0.ESC+"[1;"+(a+1)+"R":c.C0.ESC+"OR";break;case 115:o.key=a?c.C0.ESC+"[1;"+(a+1)+"S":c.C0.ESC+"OS";break;case 116:o.key=a?c.C0.ESC+"[15;"+(a+1)+"~":c.C0.ESC+"[15~";break;case 117:o.key=a?c.C0.ESC+"[17;"+(a+1)+"~":c.C0.ESC+"[17~";break;case 118:o.key=a?c.C0.ESC+"[18;"+(a+1)+"~":c.C0.ESC+"[18~";break;case 119:o.key=a?c.C0.ESC+"[19;"+(a+1)+"~":c.C0.ESC+"[19~";break;case 120:o.key=a?c.C0.ESC+"[20;"+(a+1)+"~":c.C0.ESC+"[20~";break;case 121:o.key=a?c.C0.ESC+"[21;"+(a+1)+"~":c.C0.ESC+"[21~";break;case 122:o.key=a?c.C0.ESC+"[23;"+(a+1)+"~":c.C0.ESC+"[23~";break;case 123:o.key=a?c.C0.ESC+"[24;"+(a+1)+"~":c.C0.ESC+"[24~";break;default:if(!_.ctrlKey||_.shiftKey||_.altKey||_.metaKey)if(y&&!D||!_.altKey||_.metaKey)!y||_.altKey||_.ctrlKey||_.shiftKey||!_.metaKey?_.key&&!_.ctrlKey&&!_.altKey&&!_.metaKey&&_.keyCode>=48&&_.key.length===1?o.key=_.key:_.key&&_.ctrlKey&&_.key==="_"&&(o.key=c.C0.US):_.keyCode===65&&(o.type=1);else{var d=f[_.keyCode],n=d==null?void 0:d[_.shiftKey?1:0];if(n)o.key=c.C0.ESC+n;else if(_.keyCode>=65&&_.keyCode<=90){var r=_.ctrlKey?_.keyCode-64:_.keyCode+32;o.key=c.C0.ESC+String.fromCharCode(r)}}else _.keyCode>=65&&_.keyCode<=90?o.key=String.fromCharCode(_.keyCode-64):_.keyCode===32?o.key=c.C0.NUL:_.keyCode>=51&&_.keyCode<=55?o.key=String.fromCharCode(_.keyCode-51+27):_.keyCode===56?o.key=c.C0.DEL:_.keyCode===219?o.key=c.C0.ESC:_.keyCode===220?o.key=c.C0.FS:_.keyCode===221&&(o.key=c.C0.GS)}return o}},482:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Utf8ToUtf32=e.StringToUtf32=e.utf32ToString=e.stringFromCodePoint=void 0,e.stringFromCodePoint=function(f){return f>65535?(f-=65536,String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):String.fromCharCode(f)},e.utf32ToString=function(f,_,l){_===void 0&&(_=0),l===void 0&&(l=f.length);for(var y="",D=_;D<l;++D){var o=f[D];o>65535?(o-=65536,y+=String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):y+=String.fromCharCode(o)}return y};var p=function(){function f(){this._interim=0}return f.prototype.clear=function(){this._interim=0},f.prototype.decode=function(_,l){var y=_.length;if(!y)return 0;var D=0,o=0;this._interim&&(56320<=(n=_.charCodeAt(o++))&&n<=57343?l[D++]=1024*(this._interim-55296)+n-56320+65536:(l[D++]=this._interim,l[D++]=n),this._interim=0);for(var a=o;a<y;++a){var d=_.charCodeAt(a);if(55296<=d&&d<=56319){if(++a>=y)return this._interim=d,D;var n;56320<=(n=_.charCodeAt(a))&&n<=57343?l[D++]=1024*(d-55296)+n-56320+65536:(l[D++]=d,l[D++]=n)}else d!==65279&&(l[D++]=d)}return D},f}();e.StringToUtf32=p;var c=function(){function f(){this.interim=new Uint8Array(3)}return f.prototype.clear=function(){this.interim.fill(0)},f.prototype.decode=function(_,l){var y=_.length;if(!y)return 0;var D,o,a,d,n=0,r=0,t=0;if(this.interim[0]){var i=!1,s=this.interim[0];s&=(224&s)==192?31:(240&s)==224?15:7;for(var u=0,h=void 0;(h=63&this.interim[++u])&&u<4;)s<<=6,s|=h;for(var v=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=v-u;t<b;){if(t>=y)return 0;if((192&(h=_[t++]))!=128){t--,i=!0;break}this.interim[u++]=h,s<<=6,s|=63&h}i||(v===2?s<128?t--:l[n++]=s:v===3?s<2048||s>=55296&&s<=57343||s===65279||(l[n++]=s):s<65536||s>1114111||(l[n++]=s)),this.interim.fill(0)}for(var m=y-4,g=t;g<y;){for(;!(!(g<m)||128&(D=_[g])||128&(o=_[g+1])||128&(a=_[g+2])||128&(d=_[g+3]));)l[n++]=D,l[n++]=o,l[n++]=a,l[n++]=d,g+=4;if((D=_[g++])<128)l[n++]=D;else if((224&D)==192){if(g>=y)return this.interim[0]=D,n;if((192&(o=_[g++]))!=128){g--;continue}if((r=(31&D)<<6|63&o)<128){g--;continue}l[n++]=r}else if((240&D)==224){if(g>=y)return this.interim[0]=D,n;if((192&(o=_[g++]))!=128){g--;continue}if(g>=y)return this.interim[0]=D,this.interim[1]=o,n;if((192&(a=_[g++]))!=128){g--;continue}if((r=(15&D)<<12|(63&o)<<6|63&a)<2048||r>=55296&&r<=57343||r===65279)continue;l[n++]=r}else if((248&D)==240){if(g>=y)return this.interim[0]=D,n;if((192&(o=_[g++]))!=128){g--;continue}if(g>=y)return this.interim[0]=D,this.interim[1]=o,n;if((192&(a=_[g++]))!=128){g--;continue}if(g>=y)return this.interim[0]=D,this.interim[1]=o,this.interim[2]=a,n;if((192&(d=_[g++]))!=128){g--;continue}if((r=(7&D)<<18|(63&o)<<12|(63&a)<<6|63&d)<65536||r>1114111)continue;l[n++]=r}}return n},f}();e.Utf8ToUtf32=c},225:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeV6=void 0;var c,f=p(8273),_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],y=function(){function D(){if(this.version="6",!c){c=new Uint8Array(65536),(0,f.fill)(c,1),c[0]=0,(0,f.fill)(c,0,1,32),(0,f.fill)(c,0,127,160),(0,f.fill)(c,2,4352,4448),c[9001]=2,c[9002]=2,(0,f.fill)(c,2,11904,42192),c[12351]=1,(0,f.fill)(c,2,44032,55204),(0,f.fill)(c,2,63744,64256),(0,f.fill)(c,2,65040,65050),(0,f.fill)(c,2,65072,65136),(0,f.fill)(c,2,65280,65377),(0,f.fill)(c,2,65504,65511);for(var o=0;o<_.length;++o)(0,f.fill)(c,0,_[o][0],_[o][1]+1)}}return D.prototype.wcwidth=function(o){return o<32?0:o<127?1:o<65536?c[o]:function(a,d){var n,r=0,t=d.length-1;if(a<d[0][0]||a>d[t][1])return!1;for(;t>=r;)if(a>d[n=r+t>>1][1])r=n+1;else{if(!(a<d[n][0]))return!0;t=n-1}return!1}(o,l)?0:o>=131072&&o<=196605||o>=196608&&o<=262141?2:1},D}();e.UnicodeV6=y},5981:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WriteBuffer=void 0;var p=typeof queueMicrotask>"u"?function(f){Promise.resolve().then(f)}:queueMicrotask,c=function(){function f(_){this._action=_,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return f.prototype.writeSync=function(_,l){if(l!==void 0&&this._syncCalls>l)this._syncCalls=0;else if(this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);var D=this._callbacks.shift();D&&D()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},f.prototype.write=function(_,l){var y=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return y._innerWrite()})),this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(l)},f.prototype._innerWrite=function(_,l){var y=this;_===void 0&&(_=0),l===void 0&&(l=!0);for(var D=_||Date.now();this._writeBuffer.length>this._bufferOffset;){var o=this._writeBuffer[this._bufferOffset],a=this._action(o,l);if(a)return void a.catch(function(n){return p(function(){throw n}),Promise.resolve(!1)}).then(function(n){return Date.now()-D>=12?setTimeout(function(){return y._innerWrite(0,n)}):y._innerWrite(D,n)});var d=this._callbacks[this._bufferOffset];if(d&&d(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-D>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return y._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},f}();e.WriteBuffer=c},5941:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toRgbString=e.parseColor=void 0;var p=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function f(_,l){var y=_.toString(16),D=y.length<2?"0"+y:y;switch(l){case 4:return y[0];case 8:return D;case 12:return(D+D).slice(0,3);default:return D+D}}e.parseColor=function(_){if(_){var l=_.toLowerCase();if(l.indexOf("rgb:")===0){l=l.slice(4);var y=p.exec(l);if(y){var D=y[1]?15:y[4]?255:y[7]?4095:65535;return[Math.round(parseInt(y[1]||y[4]||y[7]||y[10],16)/D*255),Math.round(parseInt(y[2]||y[5]||y[8]||y[11],16)/D*255),Math.round(parseInt(y[3]||y[6]||y[9]||y[12],16)/D*255)]}}else if(l.indexOf("#")===0&&(l=l.slice(1),c.exec(l)&&[3,6,9,12].includes(l.length))){for(var o=l.length/3,a=[0,0,0],d=0;d<3;++d){var n=parseInt(l.slice(o*d,o*d+o),16);a[d]=o===1?n<<4:o===2?n:o===3?n>>4:n>>8}return a}}},e.toRgbString=function(_,l){l===void 0&&(l=16);var y=_[0],D=_[1],o=_[2];return"rgb:"+f(y,l)+"/"+f(D,l)+"/"+f(o,l)}},5770:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PAYLOAD_LIMIT=void 0,e.PAYLOAD_LIMIT=1e7},6351:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DcsHandler=e.DcsParser=void 0;var c=p(482),f=p(8742),_=p(5770),l=[],y=function(){function a(){this._handlers=Object.create(null),this._active=l,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return a.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=l},a.prototype.registerHandler=function(d,n){this._handlers[d]===void 0&&(this._handlers[d]=[]);var r=this._handlers[d];return r.push(n),{dispose:function(){var t=r.indexOf(n);t!==-1&&r.splice(t,1)}}},a.prototype.clearHandler=function(d){this._handlers[d]&&delete this._handlers[d]},a.prototype.setHandlerFallback=function(d){this._handlerFb=d},a.prototype.reset=function(){if(this._active.length)for(var d=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;d>=0;--d)this._active[d].unhook(!1);this._stack.paused=!1,this._active=l,this._ident=0},a.prototype.hook=function(d,n){if(this.reset(),this._ident=d,this._active=this._handlers[d]||l,this._active.length)for(var r=this._active.length-1;r>=0;r--)this._active[r].hook(n);else this._handlerFb(this._ident,"HOOK",n)},a.prototype.put=function(d,n,r){if(this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].put(d,n,r);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(d,n,r))},a.prototype.unhook=function(d,n){if(n===void 0&&(n=!0),this._active.length){var r=!1,t=this._active.length-1,i=!1;if(this._stack.paused&&(t=this._stack.loopPosition-1,r=n,i=this._stack.fallThrough,this._stack.paused=!1),!i&&r===!1){for(;t>=0&&(r=this._active[t].unhook(d))!==!0;t--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=t,this._stack.fallThrough=!1,r;t--}for(;t>=0;t--)if((r=this._active[t].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=t,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",d);this._active=l,this._ident=0},a}();e.DcsParser=y;var D=new f.Params;D.addParam(0);var o=function(){function a(d){this._handler=d,this._data="",this._params=D,this._hitLimit=!1}return a.prototype.hook=function(d){this._params=d.length>1||d.params[0]?d.clone():D,this._data="",this._hitLimit=!1},a.prototype.put=function(d,n,r){this._hitLimit||(this._data+=(0,c.utf32ToString)(d,n,r),this._data.length>_.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},a.prototype.unhook=function(d){var n=this,r=!1;if(this._hitLimit)r=!1;else if(d&&(r=this._handler(this._data,this._params))instanceof Promise)return r.then(function(t){return n._params=D,n._data="",n._hitLimit=!1,t});return this._params=D,this._data="",this._hitLimit=!1,r},a}();e.DcsHandler=o},2015:function(A,e,p){var c,f=this&&this.__extends||(c=function(r,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(i[u]=s[u])},c(r,t)},function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=r}c(r,t),r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.EscapeSequenceParser=e.VT500_TRANSITION_TABLE=e.TransitionTable=void 0;var _=p(844),l=p(8273),y=p(8742),D=p(6242),o=p(6351),a=function(){function r(t){this.table=new Uint8Array(t)}return r.prototype.setDefault=function(t,i){(0,l.fill)(this.table,t<<4|i)},r.prototype.add=function(t,i,s,u){this.table[i<<8|t]=s<<4|u},r.prototype.addMany=function(t,i,s,u){for(var h=0;h<t.length;h++)this.table[i<<8|t[h]]=s<<4|u},r}();e.TransitionTable=a;var d=160;e.VT500_TRANSITION_TABLE=function(){var r=new a(4095),t=Array.apply(null,Array(256)).map(function(b,m){return m}),i=function(b,m){return t.slice(b,m)},s=i(32,127),u=i(0,24);u.push(25),u.push.apply(u,i(28,32));var h,v=i(0,14);for(h in r.setDefault(1,0),r.addMany(s,0,2,0),v)r.addMany([24,26,153,154],h,3,0),r.addMany(i(128,144),h,3,0),r.addMany(i(144,152),h,3,0),r.add(156,h,0,0),r.add(27,h,11,1),r.add(157,h,4,8),r.addMany([152,158,159],h,0,7),r.add(155,h,11,3),r.add(144,h,11,9);return r.addMany(u,0,3,0),r.addMany(u,1,3,1),r.add(127,1,0,1),r.addMany(u,8,0,8),r.addMany(u,3,3,3),r.add(127,3,0,3),r.addMany(u,4,3,4),r.add(127,4,0,4),r.addMany(u,6,3,6),r.addMany(u,5,3,5),r.add(127,5,0,5),r.addMany(u,2,3,2),r.add(127,2,0,2),r.add(93,1,4,8),r.addMany(s,8,5,8),r.add(127,8,5,8),r.addMany([156,27,24,26,7],8,6,0),r.addMany(i(28,32),8,0,8),r.addMany([88,94,95],1,0,7),r.addMany(s,7,0,7),r.addMany(u,7,0,7),r.add(156,7,0,0),r.add(127,7,0,7),r.add(91,1,11,3),r.addMany(i(64,127),3,7,0),r.addMany(i(48,60),3,8,4),r.addMany([60,61,62,63],3,9,4),r.addMany(i(48,60),4,8,4),r.addMany(i(64,127),4,7,0),r.addMany([60,61,62,63],4,0,6),r.addMany(i(32,64),6,0,6),r.add(127,6,0,6),r.addMany(i(64,127),6,0,0),r.addMany(i(32,48),3,9,5),r.addMany(i(32,48),5,9,5),r.addMany(i(48,64),5,0,6),r.addMany(i(64,127),5,7,0),r.addMany(i(32,48),4,9,5),r.addMany(i(32,48),1,9,2),r.addMany(i(32,48),2,9,2),r.addMany(i(48,127),2,10,0),r.addMany(i(48,80),1,10,0),r.addMany(i(81,88),1,10,0),r.addMany([89,90,92],1,10,0),r.addMany(i(96,127),1,10,0),r.add(80,1,11,9),r.addMany(u,9,0,9),r.add(127,9,0,9),r.addMany(i(28,32),9,0,9),r.addMany(i(32,48),9,9,12),r.addMany(i(48,60),9,8,10),r.addMany([60,61,62,63],9,9,10),r.addMany(u,11,0,11),r.addMany(i(32,128),11,0,11),r.addMany(i(28,32),11,0,11),r.addMany(u,10,0,10),r.add(127,10,0,10),r.addMany(i(28,32),10,0,10),r.addMany(i(48,60),10,8,10),r.addMany([60,61,62,63],10,0,11),r.addMany(i(32,48),10,9,12),r.addMany(u,12,0,12),r.add(127,12,0,12),r.addMany(i(28,32),12,0,12),r.addMany(i(32,48),12,9,12),r.addMany(i(48,64),12,0,11),r.addMany(i(64,127),12,12,13),r.addMany(i(64,127),10,12,13),r.addMany(i(64,127),9,12,13),r.addMany(u,13,13,13),r.addMany(s,13,13,13),r.add(127,13,0,13),r.addMany([27,156,24,26],13,14,0),r.add(d,0,2,0),r.add(d,8,5,8),r.add(d,6,0,6),r.add(d,11,0,11),r.add(d,13,13,13),r}();var n=function(r){function t(i){i===void 0&&(i=e.VT500_TRANSITION_TABLE);var s=r.call(this)||this;return s._transitions=i,s._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},s.initialState=0,s.currentState=s.initialState,s._params=new y.Params,s._params.addParam(0),s._collect=0,s.precedingCodepoint=0,s._printHandlerFb=function(u,h,v){},s._executeHandlerFb=function(u){},s._csiHandlerFb=function(u,h){},s._escHandlerFb=function(u){},s._errorHandlerFb=function(u){return u},s._printHandler=s._printHandlerFb,s._executeHandlers=Object.create(null),s._csiHandlers=Object.create(null),s._escHandlers=Object.create(null),s._oscParser=new D.OscParser,s._dcsParser=new o.DcsParser,s._errorHandler=s._errorHandlerFb,s.registerEscHandler({final:"\\"},function(){return!0}),s}return f(t,r),t.prototype._identifier=function(i,s){s===void 0&&(s=[64,126]);var u=0;if(i.prefix){if(i.prefix.length>1)throw new Error("only one byte as prefix supported");if((u=i.prefix.charCodeAt(0))&&60>u||u>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(i.intermediates){if(i.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var h=0;h<i.intermediates.length;++h){var v=i.intermediates.charCodeAt(h);if(32>v||v>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");u<<=8,u|=v}}if(i.final.length!==1)throw new Error("final must be a single byte");var b=i.final.charCodeAt(0);if(s[0]>b||b>s[1])throw new Error("final must be in range "+s[0]+" .. "+s[1]);return(u<<=8)|b},t.prototype.identToString=function(i){for(var s=[];i;)s.push(String.fromCharCode(255&i)),i>>=8;return s.reverse().join("")},t.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},t.prototype.setPrintHandler=function(i){this._printHandler=i},t.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},t.prototype.registerEscHandler=function(i,s){var u=this._identifier(i,[48,126]);this._escHandlers[u]===void 0&&(this._escHandlers[u]=[]);var h=this._escHandlers[u];return h.push(s),{dispose:function(){var v=h.indexOf(s);v!==-1&&h.splice(v,1)}}},t.prototype.clearEscHandler=function(i){this._escHandlers[this._identifier(i,[48,126])]&&delete this._escHandlers[this._identifier(i,[48,126])]},t.prototype.setEscHandlerFallback=function(i){this._escHandlerFb=i},t.prototype.setExecuteHandler=function(i,s){this._executeHandlers[i.charCodeAt(0)]=s},t.prototype.clearExecuteHandler=function(i){this._executeHandlers[i.charCodeAt(0)]&&delete this._executeHandlers[i.charCodeAt(0)]},t.prototype.setExecuteHandlerFallback=function(i){this._executeHandlerFb=i},t.prototype.registerCsiHandler=function(i,s){var u=this._identifier(i);this._csiHandlers[u]===void 0&&(this._csiHandlers[u]=[]);var h=this._csiHandlers[u];return h.push(s),{dispose:function(){var v=h.indexOf(s);v!==-1&&h.splice(v,1)}}},t.prototype.clearCsiHandler=function(i){this._csiHandlers[this._identifier(i)]&&delete this._csiHandlers[this._identifier(i)]},t.prototype.setCsiHandlerFallback=function(i){this._csiHandlerFb=i},t.prototype.registerDcsHandler=function(i,s){return this._dcsParser.registerHandler(this._identifier(i),s)},t.prototype.clearDcsHandler=function(i){this._dcsParser.clearHandler(this._identifier(i))},t.prototype.setDcsHandlerFallback=function(i){this._dcsParser.setHandlerFallback(i)},t.prototype.registerOscHandler=function(i,s){return this._oscParser.registerHandler(i,s)},t.prototype.clearOscHandler=function(i){this._oscParser.clearHandler(i)},t.prototype.setOscHandlerFallback=function(i){this._oscParser.setHandlerFallback(i)},t.prototype.setErrorHandler=function(i){this._errorHandler=i},t.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},t.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},t.prototype._preserveStack=function(i,s,u,h,v){this._parseStack.state=i,this._parseStack.handlers=s,this._parseStack.handlerPos=u,this._parseStack.transition=h,this._parseStack.chunkPos=v},t.prototype.parse=function(i,s,u){var h,v=0,b=0,m=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,m=this._parseStack.chunkPos+1;else{if(u===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var g=this._parseStack.handlers,C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(u===!1&&C>-1){for(;C>=0&&(h=g[C](this._params))!==!0;C--)if(h instanceof Promise)return this._parseStack.handlerPos=C,h}this._parseStack.handlers=[];break;case 4:if(u===!1&&C>-1){for(;C>=0&&(h=g[C]())!==!0;C--)if(h instanceof Promise)return this._parseStack.handlerPos=C,h}this._parseStack.handlers=[];break;case 6:if(v=i[this._parseStack.chunkPos],h=this._dcsParser.unhook(v!==24&&v!==26,u))return h;v===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(v=i[this._parseStack.chunkPos],h=this._oscParser.end(v!==24&&v!==26,u))return h;v===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,m=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var x=m;x<s;++x){switch(v=i[x],(b=this._transitions.table[this.currentState<<8|(v<160?v:d)])>>4){case 2:for(var w=x+1;;++w){if(w>=s||(v=i[w])<32||v>126&&v<d){this._printHandler(i,x,w),x=w-1;break}if(++w>=s||(v=i[w])<32||v>126&&v<d){this._printHandler(i,x,w),x=w-1;break}if(++w>=s||(v=i[w])<32||v>126&&v<d){this._printHandler(i,x,w),x=w-1;break}if(++w>=s||(v=i[w])<32||v>126&&v<d){this._printHandler(i,x,w),x=w-1;break}}break;case 3:this._executeHandlers[v]?this._executeHandlers[v]():this._executeHandlerFb(v),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:x,code:v,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var T=(g=this._csiHandlers[this._collect<<8|v])?g.length-1:-1;T>=0&&(h=g[T](this._params))!==!0;T--)if(h instanceof Promise)return this._preserveStack(3,g,T,b,x),h;T<0&&this._csiHandlerFb(this._collect<<8|v,this._params),this.precedingCodepoint=0;break;case 8:do switch(v){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(v-48)}while(++x<s&&(v=i[x])>47&&v<60);x--;break;case 9:this._collect<<=8,this._collect|=v;break;case 10:for(var L=this._escHandlers[this._collect<<8|v],S=L?L.length-1:-1;S>=0&&(h=L[S]())!==!0;S--)if(h instanceof Promise)return this._preserveStack(4,L,S,b,x),h;S<0&&this._escHandlerFb(this._collect<<8|v),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|v,this._params);break;case 13:for(var F=x+1;;++F)if(F>=s||(v=i[F])===24||v===26||v===27||v>127&&v<d){this._dcsParser.put(i,x,F),x=F-1;break}break;case 14:if(h=this._dcsParser.unhook(v!==24&&v!==26))return this._preserveStack(6,[],0,b,x),h;v===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var k=x+1;;k++)if(k>=s||(v=i[k])<32||v>127&&v<d){this._oscParser.put(i,x,k),x=k-1;break}break;case 6:if(h=this._oscParser.end(v!==24&&v!==26))return this._preserveStack(5,[],0,b,x),h;v===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&b}},t}(_.Disposable);e.EscapeSequenceParser=n},6242:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OscHandler=e.OscParser=void 0;var c=p(5770),f=p(482),_=[],l=function(){function D(){this._state=0,this._active=_,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return D.prototype.registerHandler=function(o,a){this._handlers[o]===void 0&&(this._handlers[o]=[]);var d=this._handlers[o];return d.push(a),{dispose:function(){var n=d.indexOf(a);n!==-1&&d.splice(n,1)}}},D.prototype.clearHandler=function(o){this._handlers[o]&&delete this._handlers[o]},D.prototype.setHandlerFallback=function(o){this._handlerFb=o},D.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=_},D.prototype.reset=function(){if(this._state===2)for(var o=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;o>=0;--o)this._active[o].end(!1);this._stack.paused=!1,this._active=_,this._id=-1,this._state=0},D.prototype._start=function(){if(this._active=this._handlers[this._id]||_,this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].start();else this._handlerFb(this._id,"START")},D.prototype._put=function(o,a,d){if(this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].put(o,a,d);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(o,a,d))},D.prototype.start=function(){this.reset(),this._state=1},D.prototype.put=function(o,a,d){if(this._state!==3){if(this._state===1)for(;a<d;){var n=o[a++];if(n===59){this._state=2,this._start();break}if(n<48||57<n)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+n-48}this._state===2&&d-a>0&&this._put(o,a,d)}},D.prototype.end=function(o,a){if(a===void 0&&(a=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var d=!1,n=this._active.length-1,r=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,d=a,r=this._stack.fallThrough,this._stack.paused=!1),!r&&d===!1){for(;n>=0&&(d=this._active[n].end(o))!==!0;n--)if(d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,d;n--}for(;n>=0;n--)if((d=this._active[n].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,d}else this._handlerFb(this._id,"END",o);this._active=_,this._id=-1,this._state=0}},D}();e.OscParser=l;var y=function(){function D(o){this._handler=o,this._data="",this._hitLimit=!1}return D.prototype.start=function(){this._data="",this._hitLimit=!1},D.prototype.put=function(o,a,d){this._hitLimit||(this._data+=(0,f.utf32ToString)(o,a,d),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},D.prototype.end=function(o){var a=this,d=!1;if(this._hitLimit)d=!1;else if(o&&(d=this._handler(this._data))instanceof Promise)return d.then(function(n){return a._data="",a._hitLimit=!1,n});return this._data="",this._hitLimit=!1,d},D}();e.OscHandler=y},8742:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Params=void 0;var p=2147483647,c=function(){function f(_,l){if(_===void 0&&(_=32),l===void 0&&(l=32),this.maxLength=_,this.maxSubParamsLength=l,l>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(_),this.length=0,this._subParams=new Int32Array(l),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(_),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return f.fromArray=function(_){var l=new f;if(!_.length)return l;for(var y=Array.isArray(_[0])?1:0;y<_.length;++y){var D=_[y];if(Array.isArray(D))for(var o=0;o<D.length;++o)l.addSubParam(D[o]);else l.addParam(D)}return l},f.prototype.clone=function(){var _=new f(this.maxLength,this.maxSubParamsLength);return _.params.set(this.params),_.length=this.length,_._subParams.set(this._subParams),_._subParamsLength=this._subParamsLength,_._subParamsIdx.set(this._subParamsIdx),_._rejectDigits=this._rejectDigits,_._rejectSubDigits=this._rejectSubDigits,_._digitIsSub=this._digitIsSub,_},f.prototype.toArray=function(){for(var _=[],l=0;l<this.length;++l){_.push(this.params[l]);var y=this._subParamsIdx[l]>>8,D=255&this._subParamsIdx[l];D-y>0&&_.push(Array.prototype.slice.call(this._subParams,y,D))}return _},f.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},f.prototype.addParam=function(_){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(_<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=_>p?p:_}},f.prototype.addSubParam=function(_){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(_<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=_>p?p:_,this._subParamsIdx[this.length-1]++}},f.prototype.hasSubParams=function(_){return(255&this._subParamsIdx[_])-(this._subParamsIdx[_]>>8)>0},f.prototype.getSubParams=function(_){var l=this._subParamsIdx[_]>>8,y=255&this._subParamsIdx[_];return y-l>0?this._subParams.subarray(l,y):null},f.prototype.getSubParamsAll=function(){for(var _={},l=0;l<this.length;++l){var y=this._subParamsIdx[l]>>8,D=255&this._subParamsIdx[l];D-y>0&&(_[l]=this._subParams.slice(y,D))}return _},f.prototype.addDigit=function(_){var l;if(!(this._rejectDigits||!(l=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var y=this._digitIsSub?this._subParams:this.params,D=y[l-1];y[l-1]=~D?Math.min(10*D+_,p):_}},f}();e.Params=c},5741:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AddonManager=void 0;var p=function(){function c(){this._addons=[]}return c.prototype.dispose=function(){for(var f=this._addons.length-1;f>=0;f--)this._addons[f].instance.dispose()},c.prototype.loadAddon=function(f,_){var l=this,y={instance:_,dispose:_.dispose,isDisposed:!1};this._addons.push(y),_.dispose=function(){return l._wrappedAddonDispose(y)},_.activate(f)},c.prototype._wrappedAddonDispose=function(f){if(!f.isDisposed){for(var _=-1,l=0;l<this._addons.length;l++)if(this._addons[l]===f){_=l;break}if(_===-1)throw new Error("Could not dispose an addon that has not been loaded");f.isDisposed=!0,f.dispose.apply(f.instance),this._addons.splice(_,1)}},c}();e.AddonManager=p},8771:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferApiView=void 0;var c=p(3785),f=p(511),_=function(){function l(y,D){this._buffer=y,this.type=D}return l.prototype.init=function(y){return this._buffer=y,this},Object.defineProperty(l.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),l.prototype.getLine=function(y){var D=this._buffer.lines.get(y);if(D)return new c.BufferLineApiView(D)},l.prototype.getNullCell=function(){return new f.CellData},l}();e.BufferApiView=_},3785:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferLineApiView=void 0;var c=p(511),f=function(){function _(l){this._line=l}return Object.defineProperty(_.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),_.prototype.getCell=function(l,y){if(!(l<0||l>=this._line.length))return y?(this._line.loadCell(l,y),y):this._line.loadCell(l,new c.CellData)},_.prototype.translateToString=function(l,y,D){return this._line.translateToString(l,y,D)},_}();e.BufferLineApiView=f},8285:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferNamespaceApi=void 0;var c=p(8771),f=p(8460),_=function(){function l(y){var D=this;this._core=y,this._onBufferChange=new f.EventEmitter,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return D._onBufferChange.fire(D.active)})}return Object.defineProperty(l.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),l}();e.BufferNamespaceApi=_},7975:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ParserApi=void 0;var p=function(){function c(f){this._core=f}return c.prototype.registerCsiHandler=function(f,_){return this._core.registerCsiHandler(f,function(l){return _(l.toArray())})},c.prototype.addCsiHandler=function(f,_){return this.registerCsiHandler(f,_)},c.prototype.registerDcsHandler=function(f,_){return this._core.registerDcsHandler(f,function(l,y){return _(l,y.toArray())})},c.prototype.addDcsHandler=function(f,_){return this.registerDcsHandler(f,_)},c.prototype.registerEscHandler=function(f,_){return this._core.registerEscHandler(f,_)},c.prototype.addEscHandler=function(f,_){return this.registerEscHandler(f,_)},c.prototype.registerOscHandler=function(f,_){return this._core.registerOscHandler(f,_)},c.prototype.addOscHandler=function(f,_){return this.registerOscHandler(f,_)},c}();e.ParserApi=p},7090:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeApi=void 0;var p=function(){function c(f){this._core=f}return c.prototype.register=function(f){this._core.unicodeService.register(f)},Object.defineProperty(c.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(f){this._core.unicodeService.activeVersion=f},enumerable:!1,configurable:!0}),c}();e.UnicodeApi=p},744:function(A,e,p){var c,f=this&&this.__extends||(c=function(n,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},c(n,r)},function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=n}c(n,r),n.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),_=this&&this.__decorate||function(n,r,t,i){var s,u=arguments.length,h=u<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(n,r,t,i);else for(var v=n.length-1;v>=0;v--)(s=n[v])&&(h=(u<3?s(h):u>3?s(r,t,h):s(r,t))||h);return u>3&&h&&Object.defineProperty(r,t,h),h},l=this&&this.__param||function(n,r){return function(t,i){r(t,i,n)}};Object.defineProperty(e,"__esModule",{value:!0}),e.BufferService=e.MINIMUM_ROWS=e.MINIMUM_COLS=void 0;var y=p(2585),D=p(5295),o=p(8460),a=p(844);e.MINIMUM_COLS=2,e.MINIMUM_ROWS=1;var d=function(n){function r(t){var i=n.call(this)||this;return i._optionsService=t,i.isUserScrolling=!1,i._onResize=new o.EventEmitter,i._onScroll=new o.EventEmitter,i.cols=Math.max(t.rawOptions.cols||0,e.MINIMUM_COLS),i.rows=Math.max(t.rawOptions.rows||0,e.MINIMUM_ROWS),i.buffers=new D.BufferSet(t,i),i}return f(r,n),Object.defineProperty(r.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){n.prototype.dispose.call(this),this.buffers.dispose()},r.prototype.resize=function(t,i){this.cols=t,this.rows=i,this.buffers.resize(t,i),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:t,rows:i})},r.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},r.prototype.scroll=function(t,i){i===void 0&&(i=!1);var s,u=this.buffer;(s=this._cachedBlankLine)&&s.length===this.cols&&s.getFg(0)===t.fg&&s.getBg(0)===t.bg||(s=u.getBlankLine(t,i),this._cachedBlankLine=s),s.isWrapped=i;var h=u.ybase+u.scrollTop,v=u.ybase+u.scrollBottom;if(u.scrollTop===0){var b=u.lines.isFull;v===u.lines.length-1?b?u.lines.recycle().copyFrom(s):u.lines.push(s.clone()):u.lines.splice(v+1,0,s.clone()),b?this.isUserScrolling&&(u.ydisp=Math.max(u.ydisp-1,0)):(u.ybase++,this.isUserScrolling||u.ydisp++)}else{var m=v-h+1;u.lines.shiftElements(h+1,m-1,-1),u.lines.set(v,s.clone())}this.isUserScrolling||(u.ydisp=u.ybase),this._onScroll.fire(u.ydisp)},r.prototype.scrollLines=function(t,i,s){var u=this.buffer;if(t<0){if(u.ydisp===0)return;this.isUserScrolling=!0}else t+u.ydisp>=u.ybase&&(this.isUserScrolling=!1);var h=u.ydisp;u.ydisp=Math.max(Math.min(u.ydisp+t,u.ybase),0),h!==u.ydisp&&(i||this._onScroll.fire(u.ydisp))},r.prototype.scrollPages=function(t){this.scrollLines(t*(this.rows-1))},r.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},r.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},r.prototype.scrollToLine=function(t){var i=t-this.buffer.ydisp;i!==0&&this.scrollLines(i)},_([l(0,y.IOptionsService)],r)}(a.Disposable);e.BufferService=d},7994:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CharsetService=void 0;var p=function(){function c(){this.glevel=0,this._charsets=[]}return c.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},c.prototype.setgLevel=function(f){this.glevel=f,this.charset=this._charsets[f]},c.prototype.setgCharset=function(f,_){this._charsets[f]=_,this.glevel===f&&(this.charset=_)},c}();e.CharsetService=p},1753:function(A,e,p){var c=this&&this.__decorate||function(n,r,t,i){var s,u=arguments.length,h=u<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(n,r,t,i);else for(var v=n.length-1;v>=0;v--)(s=n[v])&&(h=(u<3?s(h):u>3?s(r,t,h):s(r,t))||h);return u>3&&h&&Object.defineProperty(r,t,h),h},f=this&&this.__param||function(n,r){return function(t,i){r(t,i,n)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CoreMouseService=void 0;var _=p(2585),l=p(8460),y={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(n){return n.button!==4&&n.action===1&&(n.ctrl=!1,n.alt=!1,n.shift=!1,!0)}},VT200:{events:19,restrict:function(n){return n.action!==32}},DRAG:{events:23,restrict:function(n){return n.action!==32||n.button!==3}},ANY:{events:31,restrict:function(n){return!0}}};function D(n,r){var t=(n.ctrl?16:0)|(n.shift?4:0)|(n.alt?8:0);return n.button===4?(t|=64,t|=n.action):(t|=3&n.button,4&n.button&&(t|=64),8&n.button&&(t|=128),n.action===32?t|=32:n.action!==0||r||(t|=3)),t}var o=String.fromCharCode,a={DEFAULT:function(n){var r=[D(n,!1)+32,n.col+32,n.row+32];return r[0]>255||r[1]>255||r[2]>255?"":"\x1B[M"+o(r[0])+o(r[1])+o(r[2])},SGR:function(n){var r=n.action===0&&n.button!==4?"m":"M";return"\x1B[<"+D(n,!0)+";"+n.col+";"+n.row+r}},d=function(){function n(r,t){this._bufferService=r,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new l.EventEmitter,this._lastEvent=null;for(var i=0,s=Object.keys(y);i<s.length;i++){var u=s[i];this.addProtocol(u,y[u])}for(var h=0,v=Object.keys(a);h<v.length;h++){var b=v[h];this.addEncoding(b,a[b])}this.reset()}return n.prototype.addProtocol=function(r,t){this._protocols[r]=t},n.prototype.addEncoding=function(r,t){this._encodings[r]=t},Object.defineProperty(n.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(r){if(!this._protocols[r])throw new Error('unknown protocol "'+r+'"');this._activeProtocol=r,this._onProtocolChange.fire(this._protocols[r].events)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(r){if(!this._encodings[r])throw new Error('unknown encoding "'+r+'"');this._activeEncoding=r},enumerable:!1,configurable:!0}),n.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(n.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),n.prototype.triggerMouseEvent=function(r){if(r.col<0||r.col>=this._bufferService.cols||r.row<0||r.row>=this._bufferService.rows||r.button===4&&r.action===32||r.button===3&&r.action!==32||r.button!==4&&(r.action===2||r.action===3)||(r.col++,r.row++,r.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,r))||!this._protocols[this._activeProtocol].restrict(r))return!1;var t=this._encodings[this._activeEncoding](r);return t&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=r,!0},n.prototype.explainEvents=function(r){return{down:!!(1&r),up:!!(2&r),drag:!!(4&r),move:!!(8&r),wheel:!!(16&r)}},n.prototype._compareEvents=function(r,t){return r.col===t.col&&r.row===t.row&&r.button===t.button&&r.action===t.action&&r.ctrl===t.ctrl&&r.alt===t.alt&&r.shift===t.shift},c([f(0,_.IBufferService),f(1,_.ICoreService)],n)}();e.CoreMouseService=d},6975:function(A,e,p){var c,f=this&&this.__extends||(c=function(t,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(s[h]=u[h])},c(t,i)},function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=t}c(t,i),t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}),_=this&&this.__decorate||function(t,i,s,u){var h,v=arguments.length,b=v<3?i:u===null?u=Object.getOwnPropertyDescriptor(i,s):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(t,i,s,u);else for(var m=t.length-1;m>=0;m--)(h=t[m])&&(b=(v<3?h(b):v>3?h(i,s,b):h(i,s))||b);return v>3&&b&&Object.defineProperty(i,s,b),b},l=this&&this.__param||function(t,i){return function(s,u){i(s,u,t)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CoreService=void 0;var y=p(2585),D=p(8460),o=p(1439),a=p(844),d=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),r=function(t){function i(s,u,h,v){var b=t.call(this)||this;return b._bufferService=u,b._logService=h,b._optionsService=v,b.isCursorInitialized=!1,b.isCursorHidden=!1,b._onData=b.register(new D.EventEmitter),b._onUserInput=b.register(new D.EventEmitter),b._onBinary=b.register(new D.EventEmitter),b._scrollToBottom=s,b.register({dispose:function(){return b._scrollToBottom=void 0}}),b.modes=(0,o.clone)(d),b.decPrivateModes=(0,o.clone)(n),b}return f(i,t),Object.defineProperty(i.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.modes=(0,o.clone)(d),this.decPrivateModes=(0,o.clone)(n)},i.prototype.triggerDataEvent=function(s,u){if(u===void 0&&(u=!1),!this._optionsService.rawOptions.disableStdin){var h=this._bufferService.buffer;h.ybase!==h.ydisp&&this._scrollToBottom(),u&&this._onUserInput.fire(),this._logService.debug('sending data "'+s+'"',function(){return s.split("").map(function(v){return v.charCodeAt(0)})}),this._onData.fire(s)}},i.prototype.triggerBinaryEvent=function(s){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+s+'"',function(){return s.split("").map(function(u){return u.charCodeAt(0)})}),this._onBinary.fire(s))},_([l(1,y.IBufferService),l(2,y.ILogService),l(3,y.IOptionsService)],i)}(a.Disposable);e.CoreService=r},3730:function(A,e,p){var c=this&&this.__decorate||function(y,D,o,a){var d,n=arguments.length,r=n<3?D:a===null?a=Object.getOwnPropertyDescriptor(D,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(y,D,o,a);else for(var t=y.length-1;t>=0;t--)(d=y[t])&&(r=(n<3?d(r):n>3?d(D,o,r):d(D,o))||r);return n>3&&r&&Object.defineProperty(D,o,r),r},f=this&&this.__param||function(y,D){return function(o,a){D(o,a,y)}};Object.defineProperty(e,"__esModule",{value:!0}),e.DirtyRowService=void 0;var _=p(2585),l=function(){function y(D){this._bufferService=D,this.clearRange()}return Object.defineProperty(y.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),y.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},y.prototype.markDirty=function(D){D<this._start?this._start=D:D>this._end&&(this._end=D)},y.prototype.markRangeDirty=function(D,o){if(D>o){var a=D;D=o,o=a}D<this._start&&(this._start=D),o>this._end&&(this._end=o)},y.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},c([f(0,_.IBufferService)],y)}();e.DirtyRowService=l},4348:function(A,e,p){var c=this&&this.__spreadArray||function(D,o,a){if(a||arguments.length===2)for(var d,n=0,r=o.length;n<r;n++)!d&&n in o||(d||(d=Array.prototype.slice.call(o,0,n)),d[n]=o[n]);return D.concat(d||Array.prototype.slice.call(o))};Object.defineProperty(e,"__esModule",{value:!0}),e.InstantiationService=e.ServiceCollection=void 0;var f=p(2585),_=p(8343),l=function(){function D(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];this._entries=new Map;for(var d=0,n=o;d<n.length;d++){var r=n[d],t=r[0],i=r[1];this.set(t,i)}}return D.prototype.set=function(o,a){var d=this._entries.get(o);return this._entries.set(o,a),d},D.prototype.forEach=function(o){this._entries.forEach(function(a,d){return o(d,a)})},D.prototype.has=function(o){return this._entries.has(o)},D.prototype.get=function(o){return this._entries.get(o)},D}();e.ServiceCollection=l;var y=function(){function D(){this._services=new l,this._services.set(f.IInstantiationService,this)}return D.prototype.setService=function(o,a){this._services.set(o,a)},D.prototype.getService=function(o){return this._services.get(o)},D.prototype.createInstance=function(o){for(var a=[],d=1;d<arguments.length;d++)a[d-1]=arguments[d];for(var n=(0,_.getServiceDependencies)(o).sort(function(v,b){return v.index-b.index}),r=[],t=0,i=n;t<i.length;t++){var s=i[t],u=this._services.get(s.id);if(!u)throw new Error("[createInstance] "+o.name+" depends on UNKNOWN service "+s.id+".");r.push(u)}var h=n.length>0?n[0].index:a.length;if(a.length!==h)throw new Error("[createInstance] First service dependency of "+o.name+" at position "+(h+1)+" conflicts with "+a.length+" static arguments");return new(o.bind.apply(o,c([void 0],c(c([],a,!0),r,!0),!1)))},D}();e.InstantiationService=y},7866:function(A,e,p){var c=this&&this.__decorate||function(o,a,d,n){var r,t=arguments.length,i=t<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,d):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,a,d,n);else for(var s=o.length-1;s>=0;s--)(r=o[s])&&(i=(t<3?r(i):t>3?r(a,d,i):r(a,d))||i);return t>3&&i&&Object.defineProperty(a,d,i),i},f=this&&this.__param||function(o,a){return function(d,n){a(d,n,o)}},_=this&&this.__spreadArray||function(o,a,d){if(d||arguments.length===2)for(var n,r=0,t=a.length;r<t;r++)!n&&r in a||(n||(n=Array.prototype.slice.call(a,0,r)),n[r]=a[r]);return o.concat(n||Array.prototype.slice.call(a))};Object.defineProperty(e,"__esModule",{value:!0}),e.LogService=void 0;var l=p(2585),y={debug:l.LogLevelEnum.DEBUG,info:l.LogLevelEnum.INFO,warn:l.LogLevelEnum.WARN,error:l.LogLevelEnum.ERROR,off:l.LogLevelEnum.OFF},D=function(){function o(a){var d=this;this._optionsService=a,this.logLevel=l.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(n){n==="logLevel"&&d._updateLogLevel()})}return o.prototype._updateLogLevel=function(){this.logLevel=y[this._optionsService.rawOptions.logLevel]},o.prototype._evalLazyOptionalParams=function(a){for(var d=0;d<a.length;d++)typeof a[d]=="function"&&(a[d]=a[d]())},o.prototype._log=function(a,d,n){this._evalLazyOptionalParams(n),a.call.apply(a,_([console,"xterm.js: "+d],n,!1))},o.prototype.debug=function(a){for(var d=[],n=1;n<arguments.length;n++)d[n-1]=arguments[n];this.logLevel<=l.LogLevelEnum.DEBUG&&this._log(console.log,a,d)},o.prototype.info=function(a){for(var d=[],n=1;n<arguments.length;n++)d[n-1]=arguments[n];this.logLevel<=l.LogLevelEnum.INFO&&this._log(console.info,a,d)},o.prototype.warn=function(a){for(var d=[],n=1;n<arguments.length;n++)d[n-1]=arguments[n];this.logLevel<=l.LogLevelEnum.WARN&&this._log(console.warn,a,d)},o.prototype.error=function(a){for(var d=[],n=1;n<arguments.length;n++)d[n-1]=arguments[n];this.logLevel<=l.LogLevelEnum.ERROR&&this._log(console.error,a,d)},c([f(0,l.IOptionsService)],o)}();e.LogService=D},7302:function(A,e,p){var c=this&&this.__assign||function(){return c=Object.assign||function(D){for(var o,a=1,d=arguments.length;a<d;a++)for(var n in o=arguments[a])Object.prototype.hasOwnProperty.call(o,n)&&(D[n]=o[n]);return D},c.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.OptionsService=e.DEFAULT_OPTIONS=e.DEFAULT_BELL_SOUND=void 0;var f=p(8460),_=p(6114);e.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",e.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:e.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:_.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var l=["normal","bold","100","200","300","400","500","600","700","800","900"],y=function(){function D(o){this._onOptionChange=new f.EventEmitter;var a=c({},e.DEFAULT_OPTIONS);for(var d in o)if(d in a)try{var n=o[d];a[d]=this._sanitizeAndValidateOption(d,n)}catch(r){console.error(r)}this.rawOptions=a,this.options=c({},a),this._setupOptions()}return Object.defineProperty(D.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),D.prototype._setupOptions=function(){var o=this,a=function(t){if(!(t in e.DEFAULT_OPTIONS))throw new Error('No option with key "'+t+'"');return o.rawOptions[t]},d=function(t,i){if(!(t in e.DEFAULT_OPTIONS))throw new Error('No option with key "'+t+'"');i=o._sanitizeAndValidateOption(t,i),o.rawOptions[t]!==i&&(o.rawOptions[t]=i,o._onOptionChange.fire(t))};for(var n in this.rawOptions){var r={get:a.bind(this,n),set:d.bind(this,n)};Object.defineProperty(this.options,n,r)}},D.prototype.setOption=function(o,a){this.options[o]=a},D.prototype._sanitizeAndValidateOption=function(o,a){switch(o){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":a||(a=e.DEFAULT_OPTIONS[o]);break;case"fontWeight":case"fontWeightBold":if(typeof a=="number"&&1<=a&&a<=1e3)break;a=l.includes(a)?a:e.DEFAULT_OPTIONS[o];break;case"cursorWidth":a=Math.floor(a);case"lineHeight":case"tabStopWidth":if(a<1)throw new Error(o+" cannot be less than 1, value: "+a);break;case"minimumContrastRatio":a=Math.max(1,Math.min(21,Math.round(10*a)/10));break;case"scrollback":if((a=Math.min(a,4294967295))<0)throw new Error(o+" cannot be less than 0, value: "+a);break;case"fastScrollSensitivity":case"scrollSensitivity":if(a<=0)throw new Error(o+" cannot be less than or equal to 0, value: "+a);case"rows":case"cols":if(!a&&a!==0)throw new Error(o+" must be numeric, value: "+a)}return a},D.prototype.getOption=function(o){return this.options[o]},D}();e.OptionsService=y},8343:(A,e)=>{function p(c,f,_){f.di$target===f?f.di$dependencies.push({id:c,index:_}):(f.di$dependencies=[{id:c,index:_}],f.di$target=f)}Object.defineProperty(e,"__esModule",{value:!0}),e.createDecorator=e.getServiceDependencies=e.serviceRegistry=void 0,e.serviceRegistry=new Map,e.getServiceDependencies=function(c){return c.di$dependencies||[]},e.createDecorator=function(c){if(e.serviceRegistry.has(c))return e.serviceRegistry.get(c);var f=function(_,l,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");p(f,_,y)};return f.toString=function(){return c},e.serviceRegistry.set(c,f),f}},2585:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IUnicodeService=e.IOptionsService=e.ILogService=e.LogLevelEnum=e.IInstantiationService=e.IDirtyRowService=e.ICharsetService=e.ICoreService=e.ICoreMouseService=e.IBufferService=void 0;var c,f=p(8343);e.IBufferService=(0,f.createDecorator)("BufferService"),e.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),e.ICoreService=(0,f.createDecorator)("CoreService"),e.ICharsetService=(0,f.createDecorator)("CharsetService"),e.IDirtyRowService=(0,f.createDecorator)("DirtyRowService"),e.IInstantiationService=(0,f.createDecorator)("InstantiationService"),(c=e.LogLevelEnum||(e.LogLevelEnum={}))[c.DEBUG=0]="DEBUG",c[c.INFO=1]="INFO",c[c.WARN=2]="WARN",c[c.ERROR=3]="ERROR",c[c.OFF=4]="OFF",e.ILogService=(0,f.createDecorator)("LogService"),e.IOptionsService=(0,f.createDecorator)("OptionsService"),e.IUnicodeService=(0,f.createDecorator)("UnicodeService")},1480:(A,e,p)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeService=void 0;var c=p(8460),f=p(225),_=function(){function l(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter;var y=new f.UnicodeV6;this.register(y),this._active=y.version,this._activeProvider=y}return Object.defineProperty(l.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"activeVersion",{get:function(){return this._active},set:function(y){if(!this._providers[y])throw new Error('unknown Unicode version "'+y+'"');this._active=y,this._activeProvider=this._providers[y],this._onChange.fire(y)},enumerable:!1,configurable:!0}),l.prototype.register=function(y){this._providers[y.version]=y},l.prototype.wcwidth=function(y){return this._activeProvider.wcwidth(y)},l.prototype.getStringCellWidth=function(y){for(var D=0,o=y.length,a=0;a<o;++a){var d=y.charCodeAt(a);if(55296<=d&&d<=56319){if(++a>=o)return D+this.wcwidth(d);var n=y.charCodeAt(a);56320<=n&&n<=57343?d=1024*(d-55296)+n-56320+65536:D+=this.wcwidth(n)}D+=this.wcwidth(d)}return D},l}();e.UnicodeService=_}},P={};return function A(e){var p=P[e];if(p!==void 0)return p.exports;var c=P[e]={exports:{}};return R[e].call(c.exports,c,c.exports,A),c.exports}(4389)})()})});var zr=Ht((Zi,Fr)=>{var De={};typeof Fr>"u"?window.eastasianwidth=De:Fr.exports=De;De.eastAsianWidth=function(R){var P=R.charCodeAt(0),A=R.length==2?R.charCodeAt(1):0,e=P;return 55296<=P&&P<=56319&&56320<=A&&A<=57343&&(P&=1023,A&=1023,e=P<<10|A,e+=65536),e==12288||65281<=e&&e<=65376||65504<=e&&e<=65510?"F":e==8361||65377<=e&&e<=65470||65474<=e&&e<=65479||65482<=e&&e<=65487||65490<=e&&e<=65495||65498<=e&&e<=65500||65512<=e&&e<=65518?"H":4352<=e&&e<=4447||4515<=e&&e<=4519||4602<=e&&e<=4607||9001<=e&&e<=9002||11904<=e&&e<=11929||11931<=e&&e<=12019||12032<=e&&e<=12245||12272<=e&&e<=12283||12289<=e&&e<=12350||12353<=e&&e<=12438||12441<=e&&e<=12543||12549<=e&&e<=12589||12593<=e&&e<=12686||12688<=e&&e<=12730||12736<=e&&e<=12771||12784<=e&&e<=12830||12832<=e&&e<=12871||12880<=e&&e<=13054||13056<=e&&e<=19903||19968<=e&&e<=42124||42128<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||55216<=e&&e<=55238||55243<=e&&e<=55291||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65106||65108<=e&&e<=65126||65128<=e&&e<=65131||110592<=e&&e<=110593||127488<=e&&e<=127490||127504<=e&&e<=127546||127552<=e&&e<=127560||127568<=e&&e<=127569||131072<=e&&e<=194367||177984<=e&&e<=196605||196608<=e&&e<=262141?"W":32<=e&&e<=126||162<=e&&e<=163||165<=e&&e<=166||e==172||e==175||10214<=e&&e<=10221||10629<=e&&e<=10630?"Na":e==161||e==164||167<=e&&e<=168||e==170||173<=e&&e<=174||176<=e&&e<=180||182<=e&&e<=186||188<=e&&e<=191||e==198||e==208||215<=e&&e<=216||222<=e&&e<=225||e==230||232<=e&&e<=234||236<=e&&e<=237||e==240||242<=e&&e<=243||247<=e&&e<=250||e==252||e==254||e==257||e==273||e==275||e==283||294<=e&&e<=295||e==299||305<=e&&e<=307||e==312||319<=e&&e<=322||e==324||328<=e&&e<=331||e==333||338<=e&&e<=339||358<=e&&e<=359||e==363||e==462||e==464||e==466||e==468||e==470||e==472||e==474||e==476||e==593||e==609||e==708||e==711||713<=e&&e<=715||e==717||e==720||728<=e&&e<=731||e==733||e==735||768<=e&&e<=879||913<=e&&e<=929||931<=e&&e<=937||945<=e&&e<=961||963<=e&&e<=969||e==1025||1040<=e&&e<=1103||e==1105||e==8208||8211<=e&&e<=8214||8216<=e&&e<=8217||8220<=e&&e<=8221||8224<=e&&e<=8226||8228<=e&&e<=8231||e==8240||8242<=e&&e<=8243||e==8245||e==8251||e==8254||e==8308||e==8319||8321<=e&&e<=8324||e==8364||e==8451||e==8453||e==8457||e==8467||e==8470||8481<=e&&e<=8482||e==8486||e==8491||8531<=e&&e<=8532||8539<=e&&e<=8542||8544<=e&&e<=8555||8560<=e&&e<=8569||e==8585||8592<=e&&e<=8601||8632<=e&&e<=8633||e==8658||e==8660||e==8679||e==8704||8706<=e&&e<=8707||8711<=e&&e<=8712||e==8715||e==8719||e==8721||e==8725||e==8730||8733<=e&&e<=8736||e==8739||e==8741||8743<=e&&e<=8748||e==8750||8756<=e&&e<=8759||8764<=e&&e<=8765||e==8776||e==8780||e==8786||8800<=e&&e<=8801||8804<=e&&e<=8807||8810<=e&&e<=8811||8814<=e&&e<=8815||8834<=e&&e<=8835||8838<=e&&e<=8839||e==8853||e==8857||e==8869||e==8895||e==8978||9312<=e&&e<=9449||9451<=e&&e<=9547||9552<=e&&e<=9587||9600<=e&&e<=9615||9618<=e&&e<=9621||9632<=e&&e<=9633||9635<=e&&e<=9641||9650<=e&&e<=9651||9654<=e&&e<=9655||9660<=e&&e<=9661||9664<=e&&e<=9665||9670<=e&&e<=9672||e==9675||9678<=e&&e<=9681||9698<=e&&e<=9701||e==9711||9733<=e&&e<=9734||e==9737||9742<=e&&e<=9743||9748<=e&&e<=9749||e==9756||e==9758||e==9792||e==9794||9824<=e&&e<=9825||9827<=e&&e<=9829||9831<=e&&e<=9834||9836<=e&&e<=9837||e==9839||9886<=e&&e<=9887||9918<=e&&e<=9919||9924<=e&&e<=9933||9935<=e&&e<=9953||e==9955||9960<=e&&e<=9983||e==10045||e==10071||10102<=e&&e<=10111||11093<=e&&e<=11097||12872<=e&&e<=12879||57344<=e&&e<=63743||65024<=e&&e<=65039||e==65533||127232<=e&&e<=127242||127248<=e&&e<=127277||127280<=e&&e<=127337||127344<=e&&e<=127386||917760<=e&&e<=917999||983040<=e&&e<=1048573||1048576<=e&&e<=1114109?"A":"N"};De.characterLength=function(R){var P=this.eastAsianWidth(R);return P=="F"||P=="W"||P=="A"?2:1};function Nr(R){return R.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}De.length=function(R){for(var P=Nr(R),A=0,e=0;e<P.length;e++)A=A+this.characterLength(P[e]);return A};De.slice=function(R,P,A){textLen=De.length(R),P=P||0,A=A||1,P<0&&(P=textLen+P),A<0&&(A=textLen+A);for(var e="",p=0,c=Nr(R),f=0;f<c.length;f++){var _=c[f],l=De.length(_);if(p>=P-(l==2?1:0))if(p+l<=A)e+=_;else break;p+=l}return e}});var Gr=Ht((Ji,Kr)=>{"use strict";Kr.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});var $r=Ht((rn,Jr)=>{Jr.exports=function(R,P){P||(P={});var A={bools:{},strings:{},unknownFn:null};typeof P.unknown=="function"&&(A.unknownFn=P.unknown),typeof P.boolean=="boolean"&&P.boolean?A.allBools=!0:[].concat(P.boolean).filter(Boolean).forEach(function(h){A.bools[h]=!0});var e={};Object.keys(P.alias||{}).forEach(function(h){e[h]=[].concat(P.alias[h]),e[h].forEach(function(v){e[v]=[h].concat(e[h].filter(function(b){return v!==b}))})}),[].concat(P.string).filter(Boolean).forEach(function(h){A.strings[h]=!0,e[h]&&(A.strings[e[h]]=!0)});var p=P.default||{},c={_:[]};Object.keys(A.bools).forEach(function(h){l(h,p[h]===void 0?!1:p[h])});var f=[];R.indexOf("--")!==-1&&(f=R.slice(R.indexOf("--")+1),R=R.slice(0,R.indexOf("--")));function _(h,v){return A.allBools&&/^--[^=]+$/.test(v)||A.strings[h]||A.bools[h]||e[h]}function l(h,v,b){if(!(b&&A.unknownFn&&!_(h,b)&&A.unknownFn(b)===!1)){var m=!A.strings[h]&&Zr(v)?Number(v):v;y(c,h.split("."),m),(e[h]||[]).forEach(function(g){y(c,g.split("."),m)})}}function y(h,v,b){for(var m=h,g=0;g<v.length-1;g++){var C=v[g];if(C==="__proto__")return;m[C]===void 0&&(m[C]={}),(m[C]===Object.prototype||m[C]===Number.prototype||m[C]===String.prototype)&&(m[C]={}),m[C]===Array.prototype&&(m[C]=[]),m=m[C]}var C=v[v.length-1];C!=="__proto__"&&((m===Object.prototype||m===Number.prototype||m===String.prototype)&&(m={}),m===Array.prototype&&(m=[]),m[C]===void 0||A.bools[C]||typeof m[C]=="boolean"?m[C]=b:Array.isArray(m[C])?m[C].push(b):m[C]=[m[C],b])}function D(h){return e[h].some(function(v){return A.bools[v]})}for(var o=0;o<R.length;o++){var a=R[o];if(/^--.+=/.test(a)){var d=a.match(/^--([^=]+)=([\s\S]*)$/),n=d[1],r=d[2];A.bools[n]&&(r=r!=="false"),l(n,r,a)}else if(/^--no-.+/.test(a)){var n=a.match(/^--no-(.+)/)[1];l(n,!1,a)}else if(/^--.+/.test(a)){var n=a.match(/^--(.+)/)[1],t=R[o+1];t!==void 0&&!/^-/.test(t)&&!A.bools[n]&&!A.allBools&&(e[n]?!D(n):!0)?(l(n,t,a),o++):/^(true|false)$/.test(t)?(l(n,t==="true",a),o++):l(n,A.strings[n]?"":!0,a)}else if(/^-[^-]+/.test(a)){for(var i=a.slice(1,-1).split(""),s=!1,u=0;u<i.length;u++){var t=a.slice(u+2);if(t==="-"){l(i[u],t,a);continue}if(/[A-Za-z]/.test(i[u])&&/=/.test(t)){l(i[u],t.split("=")[1],a),s=!0;break}if(/[A-Za-z]/.test(i[u])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(t)){l(i[u],t,a),s=!0;break}if(i[u+1]&&i[u+1].match(/\W/)){l(i[u],a.slice(u+2),a),s=!0;break}else l(i[u],A.strings[i[u]]?"":!0,a)}var n=a.slice(-1)[0];!s&&n!=="-"&&(R[o+1]&&!/^(-|--)[^-]/.test(R[o+1])&&!A.bools[n]&&(e[n]?!D(n):!0)?(l(n,R[o+1],a),o++):R[o+1]&&/^(true|false)$/.test(R[o+1])?(l(n,R[o+1]==="true",a),o++):l(n,A.strings[n]?"":!0,a))}else if((!A.unknownFn||A.unknownFn(a)!==!1)&&c._.push(A.strings._||!Zr(a)?a:Number(a)),P.stopEarly){c._.push.apply(c._,R.slice(o+1));break}}return Object.keys(p).forEach(function(h){Ti(c,h.split("."))||(y(c,h.split("."),p[h]),(e[h]||[]).forEach(function(v){y(c,v.split("."),p[h])}))}),P["--"]?(c["--"]=new Array,f.forEach(function(h){c["--"].push(h)})):f.forEach(function(h){c._.push(h)}),c};function Ti(R,P){var A=R;P.slice(0,-1).forEach(function(p){A=A[p]||{}});var e=P[P.length-1];return e in A}function Zr(R){return typeof R=="number"||/^0x[0-9a-f]+$/i.test(R)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(R)}});var ri=jt(kr(),1);var Rr=(R=0)=>P=>`\x1B[${P+R}m`,Or=(R=0)=>P=>`\x1B[${38+R};5;${P}m`,Tr=(R=0)=>(P,A,e)=>`\x1B[${38+R};2;${P};${A};${e}m`;function _i(){let R=new Map,P={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};P.color.gray=P.color.blackBright,P.bgColor.bgGray=P.bgColor.bgBlackBright,P.color.grey=P.color.blackBright,P.bgColor.bgGrey=P.bgColor.bgBlackBright;for(let[A,e]of Object.entries(P)){for(let[p,c]of Object.entries(e))P[p]={open:`\x1B[${c[0]}m`,close:`\x1B[${c[1]}m`},e[p]=P[p],R.set(c[0],c[1]);Object.defineProperty(P,A,{value:e,enumerable:!1})}return Object.defineProperty(P,"codes",{value:R,enumerable:!1}),P.color.close="\x1B[39m",P.bgColor.close="\x1B[49m",P.color.ansi=Rr(),P.color.ansi256=Or(),P.color.ansi16m=Tr(),P.bgColor.ansi=Rr(10),P.bgColor.ansi256=Or(10),P.bgColor.ansi16m=Tr(10),Object.defineProperties(P,{rgbToAnsi256:{value:(A,e,p)=>A===e&&e===p?A<8?16:A>248?231:Math.round((A-8)/247*24)+232:16+36*Math.round(A/255*5)+6*Math.round(e/255*5)+Math.round(p/255*5),enumerable:!1},hexToRgb:{value:A=>{let e=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(A.toString(16));if(!e)return[0,0,0];let{colorString:p}=e.groups;p.length===3&&(p=[...p].map(f=>f+f).join(""));let c=Number.parseInt(p,16);return[c>>16&255,c>>8&255,c&255]},enumerable:!1},hexToAnsi256:{value:A=>P.rgbToAnsi256(...P.hexToRgb(A)),enumerable:!1},ansi256ToAnsi:{value:A=>{if(A<8)return 30+A;if(A<16)return 90+(A-8);let e,p,c;if(A>=232)e=((A-232)*10+8)/255,p=e,c=e;else{A-=16;let l=A%36;e=Math.floor(A/36)/5,p=Math.floor(l/6)/5,c=l%6/5}let f=Math.max(e,p,c)*2;if(f===0)return 30;let _=30+(Math.round(c)<<2|Math.round(p)<<1|Math.round(e));return f===2&&(_+=60),_},enumerable:!1},rgbToAnsi:{value:(A,e,p)=>P.ansi256ToAnsi(P.rgbToAnsi256(A,e,p)),enumerable:!1},hexToAnsi:{value:A=>P.ansi256ToAnsi(P.hexToAnsi256(A)),enumerable:!1}}),P}var pi=_i(),ae=pi;var vi=/\b(Chrome|Chromium)\//.test(navigator.userAgent),Pr=vi?{level:1,hasBasic:!0,has256:!1,has16m:!1}:!1,Di={stdout:Pr,stderr:Pr},Ir=Di;function Hr(R,P,A){let e=R.indexOf(P);if(e===-1)return R;let p=P.length,c=0,f="";do f+=R.substr(c,e-c)+P+A,c=e+p,e=R.indexOf(P,c);while(e!==-1);return f+=R.slice(c),f}function jr(R,P,A,e){let p=0,c="";do{let f=R[e-1]==="\r";c+=R.substr(p,(f?e-1:e)-p)+P+(f?`\r
`:`
`)+A,p=e+1,e=R.indexOf(`
`,p)}while(e!==-1);return c+=R.slice(p),c}var{stdout:Wr,stderr:Ur}=Ir,br=Symbol("GENERATOR"),Ae=Symbol("STYLER"),Pe=Symbol("IS_EMPTY"),qr=["ansi","ansi","ansi256","ansi16m"],Be=Object.create(null),gi=(R,P={})=>{if(P.level&&!(Number.isInteger(P.level)&&P.level>=0&&P.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let A=Wr?Wr.level:0;R.level=P.level===void 0?A:P.level};var Ci=R=>{let P=(...A)=>A.join(" ");return gi(P,R),Object.setPrototypeOf(P,Ie.prototype),P};function Ie(R){return Ci(R)}Object.setPrototypeOf(Ie.prototype,Function.prototype);for(let[R,P]of Object.entries(ae))Be[R]={get(){let A=Ut(this,Er(P.open,P.close,this[Ae]),this[Pe]);return Object.defineProperty(this,R,{value:A}),A}};Be.visible={get(){let R=Ut(this,this[Ae],!0);return Object.defineProperty(this,"visible",{value:R}),R}};var Sr=(R,P,A,...e)=>R==="rgb"?P==="ansi16m"?ae[A].ansi16m(...e):P==="ansi256"?ae[A].ansi256(ae.rgbToAnsi256(...e)):ae[A].ansi(ae.rgbToAnsi(...e)):R==="hex"?Sr("rgb",P,A,...ae.hexToRgb(...e)):ae[A][R](...e),yi=["rgb","hex","ansi256"];for(let R of yi){Be[R]={get(){let{level:A}=this;return function(...e){let p=Er(Sr(R,qr[A],"color",...e),ae.color.close,this[Ae]);return Ut(this,p,this[Pe])}}};let P="bg"+R[0].toUpperCase()+R.slice(1);Be[P]={get(){let{level:A}=this;return function(...e){let p=Er(Sr(R,qr[A],"bgColor",...e),ae.bgColor.close,this[Ae]);return Ut(this,p,this[Pe])}}}}var mi=Object.defineProperties(()=>{},{...Be,level:{enumerable:!0,get(){return this[br].level},set(R){this[br].level=R}}}),Er=(R,P,A)=>{let e,p;return A===void 0?(e=R,p=P):(e=A.openAll+R,p=P+A.closeAll),{open:R,close:P,openAll:e,closeAll:p,parent:A}},Ut=(R,P,A)=>{let e=(...p)=>bi(e,p.length===1?""+p[0]:p.join(" "));return Object.setPrototypeOf(e,mi),e[br]=R,e[Ae]=P,e[Pe]=A,e},bi=(R,P)=>{if(R.level<=0||!P)return R[Pe]?"":P;let A=R[Ae];if(A===void 0)return P;let{openAll:e,closeAll:p}=A;if(P.includes("\x1B"))for(;A!==void 0;)P=Hr(P,A.close,A.open),A=A.parent;let c=P.indexOf(`
`);return c!==-1&&(P=jr(P,p,e,c)),e+P+p};Object.defineProperties(Ie.prototype,Be);var Si=Ie(),zi=Ie({level:Ur?Ur.level:0});var Ee=Si;var Ei=R=>new Promise(P=>setTimeout(P,R)),He=Ei;function wr({onlyFirst:R=!1}={}){let P=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(P,R?void 0:"g")}function xr(R){if(typeof R!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof R}\``);return R.replace(wr(),"")}var Vr=jt(zr(),1),Yr=jt(Gr(),1);function ue(R,P={}){if(typeof R!="string"||R.length===0||(R=xr(R),R.length===0))return 0;R=R.replace((0,Yr.default)(),"  ");let A=P.ambiguousIsNarrow?1:2,e=0;for(let p=0;p<R.length;p++){let c=R.codePointAt(p);if(c<=31||c>=127&&c<=159||c>=768&&c<=879)continue;switch(Vr.default.eastAsianWidth(R.charAt(p))){case"F":case"W":e+=2;break;case"A":e+=A;break;default:e+=1}}return e}var Xr=({term:R,perm:P,chalk:A})=>[async()=>{R.writeln("Welcome to HumanOS. Type `help` for help."),P.enable("cmds.help"),R.listenOnce("command-run",async e=>{if(e==="help")return await R.nextLevel()}),R.startReading()},async()=>{R.endReading(),await R.echo(A.bold("HELPLESS\uFF1F\u600E\u4E48\u56DE\u4E8B\uFF1F\uFF1F")+"\u4ECA\u5929\u4E5F\u4E0D\u662F\u2026\u2026\u4E3A\u4EC0\u4E48\u7EC8\u7AEF\u4E0A\u6709\u6211\u7684\u60F3\u6CD5\uFF1F\uFF01",{t:60}),await R.echo(["\u867D\u7136\u597D\u50CF\u5B9E\u65F6\u8BB0\u5F55\u601D\u7EF4\u6D41\u4E5F\u662F HumanOS \u63D0\u4F9B\u7684\u670D\u52A1\uFF0C\u4F46\u5E94\u8BE5\u662F\u989D\u5916\u4ED8\u8D39\u7684\u624D\u5BF9\u2026\u2026","\u554A\u554A\uFF0C\u770B\u7740\u81EA\u5DF1\u7684\u60F3\u6CD5\u59D4\u5B9E\u5F88\u5947\u602A\u5462","\u4E0D\u77E5\u9053 `help` \u547D\u4EE4\u4EC0\u4E48\u60C5\u51B5\uFF0C\u767B\u51FA\u4E0A\u7F51\u67E5\u67E5\u597D\u4E86"]),R.startReading(),R.listenOnce("command-not-found",async e=>{if(["logout","exit"].includes(e))return await R.nextLevel()})},async()=>{R.endReading(),await R.echo(A.bold("\u4E0D\u80FD\u767B\u51FA\uFF1F\uFF01"),{t:60}),await R.echo(["User\uFF0C\u4F60\u597D\u50CF\u9047\u5230\u4E86\u9EBB\u70E6\uFF1F","\u6211\u662F\u5177\u6709\u4EBA\u5DE5\u667A\u80FD\u7684\u3001\u7CFB\u7EDF\u53C2\u8003\u624B\u518C\u7684\u63A5\u53E3 `human`","\u8981\u662F\u4F60\u95EE\u6211\u548C `man` \u4EC0\u4E48\u5173\u7CFB\u2026\u2026\u53EF\u80FD\u6211\u662F\u4ED6\u7684\u65E0\u6027\u522B HumanOS \u7279\u4F9B\u7248\uFF1F","\u5662\u8BF4\u56DE\u6B63\u9898\uFF0C\u4E0D\u80FD\u767B\u51FA\u5C31\u8BF4\u660E\uFF0C\u4F60\u53EF\u80FD\u4E0D\u5E78\u5730\uFF0C\u5443\uFF0C\u5DF2\u7ECF\u53D8\u6210\u690D\u7269\u4EBA\u4E86","\u7136\u540E\u4F60\u7684\u4E00\u7F15\u610F\u8BC6\u88AB\u4FDD\u5B58\u5728\u4E86\u7EC8\u7AEF\u4E2D","\u2026\u2026\u4ECE\u8FD9\u4E2A\u89D2\u5EA6\u6765\u770B\u4F60\u8FD8\u662F\u5F88\u5E78\u8FD0\u7684","\u6709\u4EC0\u4E48\u95EE\u9898\u4F7F\u7528 `human` \u547D\u4EE4\u6211\u5C31\u4F1A\u51FA\u73B0\u54E6"],{c:"cyan",t:80}),await R.echo(["\u690D\u7269\u4EBA\u2026\u2026\u6211\u4E4B\u524D\u5728\u5BB6\u2026\u2026\u5728\u5BB6\u2026\u2026\u5728\u5BB6\u2026\u2026\u597D\u75DB\uFF01",A.bold("\u4EC0\u4E48\u4E5F\u60F3\u4E0D\u8D77\u6765\u4E86"),"\u5BC4\uFF01","\u81F3\u5C11\u53EF\u4EE5\u80AF\u5B9A\u7684\u662F\u6211\u6B7B\u5728\u5BB6\u91CC\uFF0C\u8FD9\u6BD4\u5728\u5927\u8857\u4E0A\u88AB\u4EBA\u6345\u6B7B\u5B89\u5168\u591A\u4E86"]),P.enable("cmds.human","human.","human.human"),R.listenOnce("command-run",async(e,[p])=>{if(e==="human"&&p==="human")return await R.nextLevel()}),R.startReading()},async()=>{R.endReading(),await R.echo(["User\uFF0C\u5F88\u9AD8\u5174\u6211\u4EEC\u80FD\u7528\u547D\u4EE4\u884C\u7684\u65B9\u5F0F\u4EA4\u6D41\u4E86\u3002","\u8FD9\u5F88\u9177\uFF01\u5F53\u7136\uFF0C\u4F5C\u4E3A `human`\uFF0C\u6211\u4E5F\u80FD\u50CF\u4EBA\u7C7B\u90A3\u6837\u8C08\u8BDD\u3002","\u800C\u6211\u7684\u4F18\u70B9\u5728\u4E8E\u53EA\u8981\u4F60\u6309\u4E0B `Ctrl + Z` \u6211\u5C31\u4F1A\u52A0\u5FEB\u8BED\u901F\u3002","\u6BD5\u7ADF\u8C01\u4F1A\u559C\u6B22\u4E00\u4E2A\u78E8\u78E8\u5527\u5527\u7684\u547D\u4EE4\u884C\u5DE5\u5177\u5462\uFF1F","\u8BF4\u56DE\u6B63\u9898\uFF0C\u4F60\u7684\u5927\u8111\u53D7\u4E86\u635F\u4F24\uFF0C\u5BFC\u81F4\u6211\u7684\u7B97\u529B\u5F88\u53D7\u9650\u3002","\u2026\u2026\u4E0D\u592A\u597D\u610F\u601D\u5730\u8BF4\uFF0C\u6211\u73B0\u5728\u548C\u4EBA\u5DE5\u667A\u969C\u6CA1\u4EC0\u4E48\u4E24\u6837\u3002","\u4F46\u4F60\u8FD8\u662F\u53EF\u4EE5\u901A\u8FC7 `echo` \u548C\u6211\u5BF9\u8BDD\u7684\uFF01"],{c:"cyan",t:80}),P.enable("cmds.echo","human.echo","ff");let e=0;R.listenOnce("echo",async(p,{angrily:c})=>{if(console.log(p),await R.echo([p.replace(/[!?]/g,f=>({"!":"\uFF01","?":"\uFF1F"})[f]).replace(/[]/g,f=>({\u4F60:"\u6211",\u6211:"\u4F60"})[f]).replace(//g,"\u3002").replace(/$/,"\uFF1F\u6211\u4E5F\u4E0D\u77E5\u9053\u3002")+(c?"\u2026\u2026\u600E\u4E48\u4E86 User\uFF0C\u4E0D\u8981\u751F\u6C14\u5462~":"")||"User\uFF0C\u4F60\u600E\u4E48\u4E0D\u8BF4\u8BDD\u5566"],{c:"cyan",t:80}),++e===4)return await R.nextLevel()}),R.startReading()},async()=>{R.endReading(),await R.echo(["\u6211\u662F\u4E0D\u662F\u5F88\u806A\u660E\u5462\uFF01\uFF01","\u597D\u5427\uFF0C\u6211\u627F\u8BA4\u6211\u53EA\u662F\u4E34\u65F6\u627E\u4E86\u4E00\u4E2A\u6C99\u96D5\u5B57\u7B26\u4E32\u66FF\u6362\u7684\u5305\u3002","\u56E0\u4E3A\u4F60\u7684\u5927\u8111\u60C5\u51B5\u5B9E\u5728\u592A\u7CDF\u7CD5\u4E86\u2026\u2026","\u6211\u4EEC\u5E94\u8BE5\u8BD5\u7740\u4FEE\u590D\u4E00\u4E0B\uFF0C\u626B\u63CF\u626B\u63CF\u6587\u4EF6\u5565\u7684"],{c:"cyan",t:80}),R.writeln("WIP"),R.startReading()}];var wi="sudoer-of-myself-workspace",xi="0.0.4",Fi="module",Li={type:"git",url:"https://github.com/ForkKILLET/SudoerOfMyself.git"},Ai="./src/index.js",Bi={node:"^12.20.0 || ^14.13.1 || >=16.0.0"},Mi="Fork\u03A8KILLET <fork_killet@qq.com>",ki="MIT",Ri={chalk:"^5.0.0",esbuild:"^0.14.20",minimist:"^1.2.5","simple-async-sleep":"^1.0.3","string-width":"^5.1.0",xterm:"^4.17.0"},Oi={"http-server":"^14.1.0"},qt={name:wi,version:xi,type:Fi,repository:Li,exports:Ai,engines:Bi,author:Mi,license:ki,dependencies:Ri,devDependencies:Oi};var Qr=jt($r(),1),Pi={"":["\u60A8\u9700\u8981\u4EC0\u4E48\u624B\u518C\u9875\uFF1F","\u4F8B\u5982\uFF0C\u5C1D\u8BD5\u4F7F\u7528 `human human`\u3002"],human:["\u5177\u6709\u4EBA\u5DE5\u667A\u80FD\u7684\u3001\u7CFB\u7EDF\u53C2\u8003\u624B\u518C\u7684\u63A5\u53E3\u3002"],echo:["\u663E\u793A\u4E00\u884C\u601D\u60F3\u3002","`echo --angrily | -a`		\u751F\u6C14\u5730\u60F3","`echo --tremulously | -t`	\u53D1\u6296\u5730\u60F3","`echo --seriously | -S`	\u4E25\u8083\u5730\u60F3","`echo --sadly | -s`		\u4F24\u5FC3\u5730\u60F3"]},ei=({term:R,perm:P,chalk:A})=>(P.enable("cmds.version","cmds.logo"),{version:()=>R.writeln(`v${qt.version}, by ${qt.author}, at ${qt.repository.url}`),logo:async()=>{let e=document.getElementById("logo");e.style.display="block",await He(2e3),e.style.display=""},help:()=>R.writeln("You are HELPLESS. No one will help you. jaja."),human:async(e="")=>{P.find(`human.${e}`)?await R.echo(Pi[e].map(p=>p.replace(/`(.+?)`/g,c=>A.underline(c.slice(1,-1)))),{t:0,c:"cyan"}):await R.writeln(`human: ${e}: page not found.`)},echo:async(...e)=>{let p=(0,Qr.default)(e,{stopEarly:!0,boolean:["angrily","tremulously","seriously","excitedly"],alias:{a:"angrily",t:"tremulously",S:"seriously",s:"sadly"}}),c=p._.join(" "),f=c;p.angrily&&(f=A.bold(f)),p.tremulously&&(f=A.italic(f)),p.seriously&&(f=A.underline(f)),p.sadly&&(f=A.dim(f)),await R.echo([f],{t:p.angrily?60:void 0}),await R.trigger("echo",c,p)}});var j=new ri.Terminal({rows:30,cols:97,cursorBlink:!0,fontFamily:"'Fira Code', consolas, monospace"});j.open(document.getElementById("xterm"));j.writePrompt=()=>j.write(j.prompt);j.history=[];j.delete=(R,P=!0)=>j.write("\b".repeat(R)+(P?" ".repeat(R)+"\b".repeat(R):""));j.historyLn=()=>{j.delete(ue(j.ln)),j.write(j.ln=j.historyIndex?j.history.at(-j.historyIndex):""),j.cursorIndex=j.ln.length};Object.defineProperties(j,{lnPre:{get:()=>j.ln.slice(0,j.cursorIndex)},lnPost:{get:()=>j.ln.slice(j.cursorIndex)},lnPostN:{get:()=>j.ln.slice(j.cursorIndex+1)},lnCur:{get:()=>j.ln[j.cursorIndex-1]},lnCurN:{get:()=>j.ln[j.cursorIndex]}});j.readln=async()=>{if(j.lnComplete)throw'"lnComplete" listener already exists.';return j.writePrompt(),j.history.at(-1)!==j.ln&&j.ln&&j.history.push(j.ln),j.historyIndex=0,j.cursorIndex=0,j.ln="",await new Promise(R=>j.lnComplete=R),delete j.lnComplete,j.ln=j.ln.trim()};j.onData(R=>{switch(R[0]){case"\x7F":if(!j.enableRead)return;if(j.cursorIndex>0){let P=ue(j.lnCur);j.delete(P,!1),j.cursorIndex--,j.ln=j.lnPre+j.lnPostN,j.write(j.lnPost+" ".repeat(P)),j.delete(ue(j.lnPost)+P,!1)}break;case"\r":if(!j.enableRead)return;j.writeln(""),j.lnComplete();break;case"\f":if(!j.enableRead)return;j.clear();break;case"":j.write("\x1B[D".repeat(ue(j.lnPre))),j.cursorIndex=0;break;case"":j.write("\x1B[C".repeat(ue(j.lnPost))),j.cursorIndex=j.ln.length;break;case"":je.find("ff")&&(j.fastForward=!0);break;case"\x1B":switch(R.slice(1)){case"[A":if(!j.enableRead)return;j.historyIndex<j.history.length&&(j.historyIndex++,j.historyLn());break;case"[B":if(!j.enableRead)return;j.historyIndex>0&&(j.historyIndex--,j.historyLn());break;case"[D":if(!j.enableRead)return;j.cursorIndex>0&&(j.write(R.repeat(ue(j.lnCur))),j.cursorIndex--);break;case"[C":if(!j.enableRead)return;j.cursorIndex<j.ln.length&&(j.write(R.repeat(ue(j.lnCurN))),j.cursorIndex++);break;case"":j.blur();break;default:console.log("Key ESC: %s",R.slice(1))}break;default:if(R<" "||R>"{"&&R<"\xA0"){console.log("Key code: %d",R.charCodeAt());return}if(!j.enableRead)return;j.write(R+j.lnPost),j.write("\b".repeat(ue(j.lnPost))),j.ln=j.lnPre+R+j.lnPost,j.cursorIndex+=R.length}});j.listeners={};j.listen=(R,P)=>{let A=j.listeners[R]??=[];return A.push(P),{dispose:()=>A.splice(A.findIndex(e=>e===P),1)}};j.listenOnce=(R,P)=>{let{dispose:A}=j.listen(R,async(...e)=>{await P(...e)&&A()});return{dispose:A}};j.trigger=async(R,...P)=>{for(let A of j.listeners[R]??[])await A(...P)};var ge=new Proxy(localStorage,{get:(R,P)=>JSON.parse(localStorage.getItem(P)),set:(R,P,A)=>localStorage.setItem(P,JSON.stringify(A)),deleteProperty:(R,P)=>localStorage.removeItem(P)});Ee.level=1;j.prompt=Ee.green("$ ");ge.perms??={};var ti=R=>(...P)=>{let{perms:A}=ge;P.forEach(e=>A[e]=R),ge.perms=A},je={enable:ti(!0),disable:ti(!1),find:R=>ge.perms[R]},We=ei({term:j,perm:je,chalk:Ee}),Lr=Xr({term:j,perm:je,cmds:We,chalk:Ee});j.startReading=async()=>{for(j.enableRead=!0;j.enableRead;){let R=await j.readln();if(!R)continue;let[P,...A]=R.split(" ");je.find(`cmds.${P}`)?(j.enableRead=!1,await We[P](...A),await j.trigger("command-run",P,A),j.enableRead=!0):(j.writeln(`${P}: command not found.`),await j.trigger("command-not-found",P))}};j.endReading=()=>j.enableRead=!1;ge.level??=0;j.currLevel=()=>Lr[ge.level]?.(j,We);j.nextLevel=async()=>(await Lr[++ge.level]?.(j,We),!0);j.echo=async(R,{t:P,c:A}={})=>{R=(Array.isArray(R)?R:[R]).map(e=>`* ${e}
\r`).join("");for(let e=0;e<R.length;e++){let p=R[e];if(p==="\x1B")for(;R[e]!=="m";)p+=R[++e];j.write(Ee[A??"yellow"](p)),await He(j.fastForward?10:P??120)}j.fastForward=!1};Object.assign(window,{term:j,perm:je,levels:Lr,cmds:We,sto:ge,ex:{chalk:Ee,sleep:He,stringWidth:ue}});j.currLevel();})();
//# sourceMappingURL=bundle.js.map
