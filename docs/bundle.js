(()=>{var Di=Object.create;var Sr=Object.defineProperty;var gi=Object.getOwnPropertyDescriptor;var yi=Object.getOwnPropertyNames;var Ci=Object.getPrototypeOf,mi=Object.prototype.hasOwnProperty;var bi=M=>Sr(M,"__esModule",{value:!0});var We=(M,P)=>()=>(P||M((P={exports:{}}).exports,P),P.exports);var Si=(M,P,A,e)=>{if(P&&typeof P=="object"||typeof P=="function")for(let D of yi(P))!mi.call(M,D)&&(A||D!=="default")&&Sr(M,D,{get:()=>P[D],enumerable:!(e=gi(P,D))||e.enumerable});return M},Ue=(M,P)=>Si(bi(Sr(M!=null?Di(Ci(M)):{},"default",!P&&M&&M.__esModule?{get:()=>M.default,enumerable:!0}:{value:M,enumerable:!0})),M);var Pr=We((zt,Er)=>{(function(M,P){if(typeof zt=="object"&&typeof Er=="object")Er.exports=P();else if(typeof define=="function"&&define.amd)define([],P);else{var A=P();for(var e in A)(typeof zt=="object"?zt:M)[e]=A[e]}})(self,function(){return(()=>{"use strict";var M={4567:function(A,e,D){var l,_=this&&this.__extends||(l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},l(r,t)},function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=r}l(r,t),r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.AccessibilityManager=void 0;var f=D(9042),h=D(6114),y=D(9924),v=D(3656),s=D(844),u=D(5596),p=D(9631),o=function(r){function t(i,a){var c=r.call(this)||this;c._terminal=i,c._renderService=a,c._liveRegionLineCount=0,c._charsToConsume=[],c._charsToAnnounce="",c._accessibilityTreeRoot=document.createElement("div"),c._accessibilityTreeRoot.classList.add("xterm-accessibility"),c._accessibilityTreeRoot.tabIndex=0,c._rowContainer=document.createElement("div"),c._rowContainer.setAttribute("role","list"),c._rowContainer.classList.add("xterm-accessibility-tree"),c._rowElements=[];for(var d=0;d<c._terminal.rows;d++)c._rowElements[d]=c._createAccessibilityTreeNode(),c._rowContainer.appendChild(c._rowElements[d]);if(c._topBoundaryFocusListener=function(g){return c._onBoundaryFocus(g,0)},c._bottomBoundaryFocusListener=function(g){return c._onBoundaryFocus(g,1)},c._rowElements[0].addEventListener("focus",c._topBoundaryFocusListener),c._rowElements[c._rowElements.length-1].addEventListener("focus",c._bottomBoundaryFocusListener),c._refreshRowsDimensions(),c._accessibilityTreeRoot.appendChild(c._rowContainer),c._renderRowsDebouncer=new y.TimeBasedDebouncer(c._renderRows.bind(c)),c._refreshRows(),c._liveRegion=document.createElement("div"),c._liveRegion.classList.add("live-region"),c._liveRegion.setAttribute("aria-live","assertive"),c._accessibilityTreeRoot.appendChild(c._liveRegion),!c._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return c._terminal.element.insertAdjacentElement("afterbegin",c._accessibilityTreeRoot),c.register(c._renderRowsDebouncer),c.register(c._terminal.onResize(function(g){return c._onResize(g.rows)})),c.register(c._terminal.onRender(function(g){return c._refreshRows(g.start,g.end)})),c.register(c._terminal.onScroll(function(){return c._refreshRows()})),c.register(c._terminal.onA11yChar(function(g){return c._onChar(g)})),c.register(c._terminal.onLineFeed(function(){return c._onChar(`
`)})),c.register(c._terminal.onA11yTab(function(g){return c._onTab(g)})),c.register(c._terminal.onKey(function(g){return c._onKey(g.key)})),c.register(c._terminal.onBlur(function(){return c._clearLiveRegion()})),c.register(c._renderService.onDimensionsChange(function(){return c._refreshRowsDimensions()})),c._screenDprMonitor=new u.ScreenDprMonitor,c.register(c._screenDprMonitor),c._screenDprMonitor.setListener(function(){return c._refreshRowsDimensions()}),c.register((0,v.addDisposableDomListener)(window,"resize",function(){return c._refreshRowsDimensions()})),c}return _(t,r),t.prototype.dispose=function(){r.prototype.dispose.call(this),(0,p.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},t.prototype._onBoundaryFocus=function(i,a){var c=i.target,d=this._rowElements[a===0?1:this._rowElements.length-2];if(c.getAttribute("aria-posinset")!==(a===0?"1":""+this._terminal.buffer.lines.length)&&i.relatedTarget===d){var g,S;if(a===0?(g=c,S=this._rowElements.pop(),this._rowContainer.removeChild(S)):(g=this._rowElements.shift(),S=c,this._rowContainer.removeChild(g)),g.removeEventListener("focus",this._topBoundaryFocusListener),S.removeEventListener("focus",this._bottomBoundaryFocusListener),a===0){var b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else b=this._createAccessibilityTreeNode(),this._rowElements.push(b),this._rowContainer.appendChild(b);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(a===0?-1:1),this._rowElements[a===0?1:this._rowElements.length-2].focus(),i.preventDefault(),i.stopImmediatePropagation()}},t.prototype._onResize=function(i){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var a=this._rowContainer.children.length;a<this._terminal.rows;a++)this._rowElements[a]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[a]);for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},t.prototype._createAccessibilityTreeNode=function(){var i=document.createElement("div");return i.setAttribute("role","listitem"),i.tabIndex=-1,this._refreshRowDimensions(i),i},t.prototype._onTab=function(i){for(var a=0;a<i;a++)this._onChar(" ")},t.prototype._onChar=function(i){var a=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==i&&(this._charsToAnnounce+=i):this._charsToAnnounce+=i,i===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),h.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){a._accessibilityTreeRoot.appendChild(a._liveRegion)},0))},t.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,h.isMac&&(0,p.removeElementFromParent)(this._liveRegion)},t.prototype._onKey=function(i){this._clearLiveRegion(),this._charsToConsume.push(i)},t.prototype._refreshRows=function(i,a){this._renderRowsDebouncer.refresh(i,a,this._terminal.rows)},t.prototype._renderRows=function(i,a){for(var c=this._terminal.buffer,d=c.lines.length.toString(),g=i;g<=a;g++){var S=c.translateBufferLineToString(c.ydisp+g,!0),b=(c.ydisp+g+1).toString(),C=this._rowElements[g];C&&(S.length===0?C.innerText="\xA0":C.textContent=S,C.setAttribute("aria-posinset",b),C.setAttribute("aria-setsize",d))}this._announceCharacters()},t.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var i=0;i<this._terminal.rows;i++)this._refreshRowDimensions(this._rowElements[i])}},t.prototype._refreshRowDimensions=function(i){i.style.height=this._renderService.dimensions.actualCellHeight+"px"},t.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},t}(s.Disposable);e.AccessibilityManager=o},3614:(A,e)=>{function D(h){return h.replace(/\r?\n/g,"\r")}function l(h,y){return y?"\x1B[200~"+h+"\x1B[201~":h}function _(h,y,v){h=l(h=D(h),v.decPrivateModes.bracketedPasteMode),v.triggerDataEvent(h,!0),y.value=""}function f(h,y,v){var s=v.getBoundingClientRect(),u=h.clientX-s.left-10,p=h.clientY-s.top-10;y.style.width="20px",y.style.height="20px",y.style.left=u+"px",y.style.top=p+"px",y.style.zIndex="1000",y.focus()}Object.defineProperty(e,"__esModule",{value:!0}),e.rightClickHandler=e.moveTextAreaUnderMouseCursor=e.paste=e.handlePasteEvent=e.copyHandler=e.bracketTextForPaste=e.prepareTextForTerminal=void 0,e.prepareTextForTerminal=D,e.bracketTextForPaste=l,e.copyHandler=function(h,y){h.clipboardData&&h.clipboardData.setData("text/plain",y.selectionText),h.preventDefault()},e.handlePasteEvent=function(h,y,v){h.stopPropagation(),h.clipboardData&&_(h.clipboardData.getData("text/plain"),y,v)},e.paste=_,e.moveTextAreaUnderMouseCursor=f,e.rightClickHandler=function(h,y,v,s,u){f(h,y,v),u&&s.rightClickSelect(h),y.value=s.selectionText,y.select()}},4774:(A,e)=>{var D,l,_,f;function h(v){var s=v.toString(16);return s.length<2?"0"+s:s}function y(v,s){return v<s?(s+.05)/(v+.05):(v+.05)/(s+.05)}Object.defineProperty(e,"__esModule",{value:!0}),e.contrastRatio=e.toPaddedHex=e.rgba=e.rgb=e.css=e.color=e.channels=void 0,function(v){v.toCss=function(s,u,p,o){return o!==void 0?"#"+h(s)+h(u)+h(p)+h(o):"#"+h(s)+h(u)+h(p)},v.toRgba=function(s,u,p,o){return o===void 0&&(o=255),(s<<24|u<<16|p<<8|o)>>>0}}(D=e.channels||(e.channels={})),(l=e.color||(e.color={})).blend=function(v,s){var u=(255&s.rgba)/255;if(u===1)return{css:s.css,rgba:s.rgba};var p=s.rgba>>24&255,o=s.rgba>>16&255,r=s.rgba>>8&255,t=v.rgba>>24&255,i=v.rgba>>16&255,a=v.rgba>>8&255,c=t+Math.round((p-t)*u),d=i+Math.round((o-i)*u),g=a+Math.round((r-a)*u);return{css:D.toCss(c,d,g),rgba:D.toRgba(c,d,g)}},l.isOpaque=function(v){return(255&v.rgba)==255},l.ensureContrastRatio=function(v,s,u){var p=f.ensureContrastRatio(v.rgba,s.rgba,u);if(p)return f.toColor(p>>24&255,p>>16&255,p>>8&255)},l.opaque=function(v){var s=(255|v.rgba)>>>0,u=f.toChannels(s),p=u[0],o=u[1],r=u[2];return{css:D.toCss(p,o,r),rgba:s}},l.opacity=function(v,s){var u=Math.round(255*s),p=f.toChannels(v.rgba),o=p[0],r=p[1],t=p[2];return{css:D.toCss(o,r,t,u),rgba:D.toRgba(o,r,t,u)}},l.toColorRGB=function(v){return[v.rgba>>24&255,v.rgba>>16&255,v.rgba>>8&255]},(e.css||(e.css={})).toColor=function(v){switch(v.length){case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(v){function s(u,p,o){var r=u/255,t=p/255,i=o/255;return .2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}v.relativeLuminance=function(u){return s(u>>16&255,u>>8&255,255&u)},v.relativeLuminance2=s}(_=e.rgb||(e.rgb={})),function(v){function s(p,o,r){for(var t=p>>24&255,i=p>>16&255,a=p>>8&255,c=o>>24&255,d=o>>16&255,g=o>>8&255,S=y(_.relativeLuminance2(c,g,d),_.relativeLuminance2(t,i,a));S<r&&(c>0||d>0||g>0);)c-=Math.max(0,Math.ceil(.1*c)),d-=Math.max(0,Math.ceil(.1*d)),g-=Math.max(0,Math.ceil(.1*g)),S=y(_.relativeLuminance2(c,g,d),_.relativeLuminance2(t,i,a));return(c<<24|d<<16|g<<8|255)>>>0}function u(p,o,r){for(var t=p>>24&255,i=p>>16&255,a=p>>8&255,c=o>>24&255,d=o>>16&255,g=o>>8&255,S=y(_.relativeLuminance2(c,g,d),_.relativeLuminance2(t,i,a));S<r&&(c<255||d<255||g<255);)c=Math.min(255,c+Math.ceil(.1*(255-c))),d=Math.min(255,d+Math.ceil(.1*(255-d))),g=Math.min(255,g+Math.ceil(.1*(255-g))),S=y(_.relativeLuminance2(c,g,d),_.relativeLuminance2(t,i,a));return(c<<24|d<<16|g<<8|255)>>>0}v.ensureContrastRatio=function(p,o,r){var t=_.relativeLuminance(p>>8),i=_.relativeLuminance(o>>8);if(y(t,i)<r)return i<t?s(p,o,r):u(p,o,r)},v.reduceLuminance=s,v.increaseLuminance=u,v.toChannels=function(p){return[p>>24&255,p>>16&255,p>>8&255,255&p]},v.toColor=function(p,o,r){return{css:D.toCss(p,o,r),rgba:D.toRgba(p,o,r)}}}(f=e.rgba||(e.rgba={})),e.toPaddedHex=h,e.contrastRatio=y},7239:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorContrastCache=void 0;var D=function(){function l(){this._color={},this._rgba={}}return l.prototype.clear=function(){this._color={},this._rgba={}},l.prototype.setCss=function(_,f,h){this._rgba[_]||(this._rgba[_]={}),this._rgba[_][f]=h},l.prototype.getCss=function(_,f){return this._rgba[_]?this._rgba[_][f]:void 0},l.prototype.setColor=function(_,f,h){this._color[_]||(this._color[_]={}),this._color[_][f]=h},l.prototype.getColor=function(_,f){return this._color[_]?this._color[_][f]:void 0},l}();e.ColorContrastCache=D},5680:function(A,e,D){var l=this&&this.__spreadArray||function(o,r,t){if(t||arguments.length===2)for(var i,a=0,c=r.length;a<c;a++)!i&&a in r||(i||(i=Array.prototype.slice.call(r,0,a)),i[a]=r[a]);return o.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(e,"__esModule",{value:!0}),e.ColorManager=e.DEFAULT_ANSI_COLORS=void 0;var _=D(4774),f=D(7239),h=_.css.toColor("#ffffff"),y=_.css.toColor("#000000"),v=_.css.toColor("#ffffff"),s=_.css.toColor("#000000"),u={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};e.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var o=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],r=[0,95,135,175,215,255],t=0;t<216;t++){var i=r[t/36%6|0],a=r[t/6%6|0],c=r[t%6];o.push({css:_.channels.toCss(i,a,c),rgba:_.channels.toRgba(i,a,c)})}for(t=0;t<24;t++){var d=8+10*t;o.push({css:_.channels.toCss(d,d,d),rgba:_.channels.toRgba(d,d,d)})}return o}());var p=function(){function o(r,t){this.allowTransparency=t;var i=r.createElement("canvas");i.width=1,i.height=1;var a=i.getContext("2d");if(!a)throw new Error("Could not get rendering context");this._ctx=a,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new f.ColorContrastCache,this.colors={foreground:h,background:y,cursor:v,cursorAccent:s,selectionTransparent:u,selectionOpaque:_.color.blend(y,u),ansi:e.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return o.prototype.onOptionsChange=function(r){r==="minimumContrastRatio"&&this._contrastCache.clear()},o.prototype.setTheme=function(r){r===void 0&&(r={}),this.colors.foreground=this._parseColor(r.foreground,h),this.colors.background=this._parseColor(r.background,y),this.colors.cursor=this._parseColor(r.cursor,v,!0),this.colors.cursorAccent=this._parseColor(r.cursorAccent,s,!0),this.colors.selectionTransparent=this._parseColor(r.selection,u,!0),this.colors.selectionOpaque=_.color.blend(this.colors.background,this.colors.selectionTransparent),_.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=_.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(r.black,e.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(r.red,e.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(r.green,e.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(r.yellow,e.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(r.blue,e.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(r.magenta,e.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(r.cyan,e.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(r.white,e.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(r.brightBlack,e.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(r.brightRed,e.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(r.brightGreen,e.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(r.brightYellow,e.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(r.brightBlue,e.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(r.brightMagenta,e.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(r.brightCyan,e.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(r.brightWhite,e.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},o.prototype.restoreColor=function(r){if(r!==void 0)switch(r){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[r]=this._restoreColors.ansi[r]}else for(var t=0;t<this._restoreColors.ansi.length;++t)this.colors.ansi[t]=this._restoreColors.ansi[t]},o.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:l([],this.colors.ansi,!0)}},o.prototype._parseColor=function(r,t,i){if(i===void 0&&(i=this.allowTransparency),r===void 0)return t;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=r,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+r+" is invalid using fallback "+t.css),t;this._ctx.fillRect(0,0,1,1);var a=this._ctx.getImageData(0,0,1,1).data;if(a[3]!==255){if(!i)return console.warn("Color: "+r+" is using transparency, but allowTransparency is false. Using fallback "+t.css+"."),t;var c=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(m){return Number(m)}),d=c[0],g=c[1],S=c[2],b=c[3],C=Math.round(255*b);return{rgba:_.channels.toRgba(d,g,S,C),css:r}}return{css:this._ctx.fillStyle,rgba:_.channels.toRgba(a[0],a[1],a[2],a[3])}},o}();e.ColorManager=p},9631:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeElementFromParent=void 0,e.removeElementFromParent=function(){for(var D,l=[],_=0;_<arguments.length;_++)l[_]=arguments[_];for(var f=0,h=l;f<h.length;f++){var y=h[f];(D=y?.parentElement)===null||D===void 0||D.removeChild(y)}}},3656:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.addDisposableDomListener=void 0,e.addDisposableDomListener=function(D,l,_,f){D.addEventListener(l,_,f);var h=!1;return{dispose:function(){h||(h=!0,D.removeEventListener(l,_,f))}}}},3551:function(A,e,D){var l=this&&this.__decorate||function(s,u,p,o){var r,t=arguments.length,i=t<3?u:o===null?o=Object.getOwnPropertyDescriptor(u,p):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(s,u,p,o);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(i=(t<3?r(i):t>3?r(u,p,i):r(u,p))||i);return t>3&&i&&Object.defineProperty(u,p,i),i},_=this&&this.__param||function(s,u){return function(p,o){u(p,o,s)}};Object.defineProperty(e,"__esModule",{value:!0}),e.MouseZone=e.Linkifier=void 0;var f=D(8460),h=D(2585),y=function(){function s(u,p,o){this._bufferService=u,this._logService=p,this._unicodeService=o,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new f.EventEmitter,this._onHideLinkUnderline=new f.EventEmitter,this._onLinkTooltip=new f.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(s.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),s.prototype.attachToDom=function(u,p){this._element=u,this._mouseZoneManager=p},s.prototype.linkifyRows=function(u,p){var o=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=u,this._rowsToLinkify.end=p):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,u),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,p)),this._mouseZoneManager.clearAll(u,p),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return o._linkifyRows()},s._timeBeforeLatency))},s.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var u=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var p=u.ydisp+this._rowsToLinkify.start;if(!(p>=u.lines.length)){for(var o=u.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,r=Math.ceil(2e3/this._bufferService.cols),t=this._bufferService.buffer.iterator(!1,p,o,r,r);t.hasNext();)for(var i=t.next(),a=0;a<this._linkMatchers.length;a++)this._doLinkifyRow(i.range.first,i.content,this._linkMatchers[a]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},s.prototype.registerLinkMatcher=function(u,p,o){if(o===void 0&&(o={}),!p)throw new Error("handler must be defined");var r={id:this._nextLinkMatcherId++,regex:u,handler:p,matchIndex:o.matchIndex,validationCallback:o.validationCallback,hoverTooltipCallback:o.tooltipCallback,hoverLeaveCallback:o.leaveCallback,willLinkActivate:o.willLinkActivate,priority:o.priority||0};return this._addLinkMatcherToList(r),r.id},s.prototype._addLinkMatcherToList=function(u){if(this._linkMatchers.length!==0){for(var p=this._linkMatchers.length-1;p>=0;p--)if(u.priority<=this._linkMatchers[p].priority)return void this._linkMatchers.splice(p+1,0,u);this._linkMatchers.splice(0,0,u)}else this._linkMatchers.push(u)},s.prototype.deregisterLinkMatcher=function(u){for(var p=0;p<this._linkMatchers.length;p++)if(this._linkMatchers[p].id===u)return this._linkMatchers.splice(p,1),!0;return!1},s.prototype._doLinkifyRow=function(u,p,o){for(var r,t=this,i=new RegExp(o.regex.source,(o.regex.flags||"")+"g"),a=-1,c=function(){var g=r[typeof o.matchIndex!="number"?0:o.matchIndex];if(!g)return d._logService.debug("match found without corresponding matchIndex",r,o),"break";if(a=p.indexOf(g,a+1),i.lastIndex=a+g.length,a<0)return"break";var S=d._bufferService.buffer.stringIndexToBufferIndex(u,a);if(S[0]<0)return"break";var b=d._bufferService.buffer.lines.get(S[0]);if(!b)return"break";var C=b.getFg(S[1]),m=C?C>>9&511:void 0;o.validationCallback?o.validationCallback(g,function(x){t._rowsTimeoutId||x&&t._addLink(S[1],S[0]-t._bufferService.buffer.ydisp,g,o,m)}):d._addLink(S[1],S[0]-d._bufferService.buffer.ydisp,g,o,m)},d=this;(r=i.exec(p))!==null&&c()!=="break";);},s.prototype._addLink=function(u,p,o,r,t){var i=this;if(this._mouseZoneManager&&this._element){var a=this._unicodeService.getStringCellWidth(o),c=u%this._bufferService.cols,d=p+Math.floor(u/this._bufferService.cols),g=(c+a)%this._bufferService.cols,S=d+Math.floor((c+a)/this._bufferService.cols);g===0&&(g=this._bufferService.cols,S--),this._mouseZoneManager.add(new v(c+1,d+1,g+1,S+1,function(b){if(r.handler)return r.handler(b,o);var C=window.open();C?(C.opener=null,C.location.href=o):console.warn("Opening link blocked as opener could not be cleared")},function(){i._onShowLinkUnderline.fire(i._createLinkHoverEvent(c,d,g,S,t)),i._element.classList.add("xterm-cursor-pointer")},function(b){i._onLinkTooltip.fire(i._createLinkHoverEvent(c,d,g,S,t)),r.hoverTooltipCallback&&r.hoverTooltipCallback(b,o,{start:{x:c,y:d},end:{x:g,y:S}})},function(){i._onHideLinkUnderline.fire(i._createLinkHoverEvent(c,d,g,S,t)),i._element.classList.remove("xterm-cursor-pointer"),r.hoverLeaveCallback&&r.hoverLeaveCallback()},function(b){return!r.willLinkActivate||r.willLinkActivate(b,o)}))}},s.prototype._createLinkHoverEvent=function(u,p,o,r,t){return{x1:u,y1:p,x2:o,y2:r,cols:this._bufferService.cols,fg:t}},s._timeBeforeLatency=200,s=l([_(0,h.IBufferService),_(1,h.ILogService),_(2,h.IUnicodeService)],s)}();e.Linkifier=y;var v=function(s,u,p,o,r,t,i,a,c){this.x1=s,this.y1=u,this.x2=p,this.y2=o,this.clickCallback=r,this.hoverCallback=t,this.tooltipCallback=i,this.leaveCallback=a,this.willLinkActivate=c};e.MouseZone=v},6465:function(A,e,D){var l,_=this&&this.__extends||(l=function(o,r){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])},l(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=o}l(o,r),o.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),f=this&&this.__decorate||function(o,r,t,i){var a,c=arguments.length,d=c<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,r,t,i);else for(var g=o.length-1;g>=0;g--)(a=o[g])&&(d=(c<3?a(d):c>3?a(r,t,d):a(r,t))||d);return c>3&&d&&Object.defineProperty(r,t,d),d},h=this&&this.__param||function(o,r){return function(t,i){r(t,i,o)}};Object.defineProperty(e,"__esModule",{value:!0}),e.Linkifier2=void 0;var y=D(2585),v=D(8460),s=D(844),u=D(3656),p=function(o){function r(t){var i=o.call(this)||this;return i._bufferService=t,i._linkProviders=[],i._linkCacheDisposables=[],i._isMouseOut=!0,i._activeLine=-1,i._onShowLinkUnderline=i.register(new v.EventEmitter),i._onHideLinkUnderline=i.register(new v.EventEmitter),i.register((0,s.getDisposeArrayDisposable)(i._linkCacheDisposables)),i}return _(r,o),Object.defineProperty(r.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),r.prototype.registerLinkProvider=function(t){var i=this;return this._linkProviders.push(t),{dispose:function(){var a=i._linkProviders.indexOf(t);a!==-1&&i._linkProviders.splice(a,1)}}},r.prototype.attachToDom=function(t,i,a){var c=this;this._element=t,this._mouseService=i,this._renderService=a,this.register((0,u.addDisposableDomListener)(this._element,"mouseleave",function(){c._isMouseOut=!0,c._clearCurrentLink()})),this.register((0,u.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},r.prototype._onMouseMove=function(t){if(this._lastMouseEvent=t,this._element&&this._mouseService){var i=this._positionFromMouseEvent(t,this._element,this._mouseService);if(i){this._isMouseOut=!1;for(var a=t.composedPath(),c=0;c<a.length;c++){var d=a[c];if(d.classList.contains("xterm"))break;if(d.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._onHover(i),this._lastBufferCell=i)}}},r.prototype._onHover=function(t){if(this._activeLine!==t.y)return this._clearCurrentLink(),void this._askForLink(t,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))},r.prototype._askForLink=function(t,i){var a,c=this;this._activeProviderReplies&&i||((a=this._activeProviderReplies)===null||a===void 0||a.forEach(function(g){g?.forEach(function(S){S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);var d=!1;this._linkProviders.forEach(function(g,S){var b;i?!((b=c._activeProviderReplies)===null||b===void 0)&&b.get(S)&&(d=c._checkLinkProviderResult(S,t,d)):g.provideLinks(t.y,function(C){var m,x;if(!c._isMouseOut){var w=C?.map(function(I){return{link:I}});(m=c._activeProviderReplies)===null||m===void 0||m.set(S,w),d=c._checkLinkProviderResult(S,t,d),((x=c._activeProviderReplies)===null||x===void 0?void 0:x.size)===c._linkProviders.length&&c._removeIntersectingLinks(t.y,c._activeProviderReplies)}})})},r.prototype._removeIntersectingLinks=function(t,i){for(var a=new Set,c=0;c<i.size;c++){var d=i.get(c);if(d)for(var g=0;g<d.length;g++)for(var S=d[g],b=S.link.range.start.y<t?0:S.link.range.start.x,C=S.link.range.end.y>t?this._bufferService.cols:S.link.range.end.x,m=b;m<=C;m++){if(a.has(m)){d.splice(g--,1);break}a.add(m)}}},r.prototype._checkLinkProviderResult=function(t,i,a){var c,d=this;if(!this._activeProviderReplies)return a;for(var g=this._activeProviderReplies.get(t),S=!1,b=0;b<t;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(S=!0);if(!S&&g){var C=g.find(function(x){return d._linkAtPosition(x.link,i)});C&&(a=!0,this._handleNewLink(C))}if(this._activeProviderReplies.size===this._linkProviders.length&&!a)for(b=0;b<this._activeProviderReplies.size;b++){var m=(c=this._activeProviderReplies.get(b))===null||c===void 0?void 0:c.find(function(x){return d._linkAtPosition(x.link,i)});if(m){a=!0,this._handleNewLink(m);break}}return a},r.prototype._onClick=function(t){if(this._element&&this._mouseService&&this._currentLink){var i=this._positionFromMouseEvent(t,this._element,this._mouseService);i&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(t,this._currentLink.link.text)}},r.prototype._clearCurrentLink=function(t,i){this._element&&this._currentLink&&this._lastMouseEvent&&(!t||!i||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,s.disposeArray)(this._linkCacheDisposables))},r.prototype._handleNewLink=function(t){var i=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._linkAtPosition(t.link,a)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:t.link.decorations===void 0||t.link.decorations.underline,pointerCursor:t.link.decorations===void 0||t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:function(){var c,d;return(d=(c=i._currentLink)===null||c===void 0?void 0:c.state)===null||d===void 0?void 0:d.decorations.pointerCursor},set:function(c){var d,g;((d=i._currentLink)===null||d===void 0?void 0:d.state)&&i._currentLink.state.decorations.pointerCursor!==c&&(i._currentLink.state.decorations.pointerCursor=c,i._currentLink.state.isHovered&&((g=i._element)===null||g===void 0||g.classList.toggle("xterm-cursor-pointer",c)))}},underline:{get:function(){var c,d;return(d=(c=i._currentLink)===null||c===void 0?void 0:c.state)===null||d===void 0?void 0:d.decorations.underline},set:function(c){var d,g,S;((d=i._currentLink)===null||d===void 0?void 0:d.state)&&((S=(g=i._currentLink)===null||g===void 0?void 0:g.state)===null||S===void 0?void 0:S.decorations.underline)!==c&&(i._currentLink.state.decorations.underline=c,i._currentLink.state.isHovered&&i._fireUnderlineEvent(t.link,c))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(c){var d=c.start===0?0:c.start+1+i._bufferService.buffer.ydisp;i._clearCurrentLink(d,c.end+1+i._bufferService.buffer.ydisp)})))}},r.prototype._linkHover=function(t,i,a){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(a,i.text)},r.prototype._fireUnderlineEvent=function(t,i){var a=t.range,c=this._bufferService.buffer.ydisp,d=this._createLinkUnderlineEvent(a.start.x-1,a.start.y-c-1,a.end.x,a.end.y-c-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(d)},r.prototype._linkLeave=function(t,i,a){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(a,i.text)},r.prototype._linkAtPosition=function(t,i){var a=t.range.start.y===t.range.end.y,c=t.range.start.y<i.y,d=t.range.end.y>i.y;return(a&&t.range.start.x<=i.x&&t.range.end.x>=i.x||c&&t.range.end.x>=i.x||d&&t.range.start.x<=i.x||c&&d)&&t.range.start.y<=i.y&&t.range.end.y>=i.y},r.prototype._positionFromMouseEvent=function(t,i,a){var c=a.getCoords(t,i,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}},r.prototype._createLinkUnderlineEvent=function(t,i,a,c,d){return{x1:t,y1:i,x2:a,y2:c,cols:this._bufferService.cols,fg:d}},f([h(0,y.IBufferService)],r)}(s.Disposable);e.Linkifier2=p},9042:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tooMuchOutput=e.promptLabel=void 0,e.promptLabel="Terminal input",e.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(A,e,D){var l,_=this&&this.__extends||(l=function(o,r){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])},l(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=o}l(o,r),o.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),f=this&&this.__decorate||function(o,r,t,i){var a,c=arguments.length,d=c<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,r,t,i);else for(var g=o.length-1;g>=0;g--)(a=o[g])&&(d=(c<3?a(d):c>3?a(r,t,d):a(r,t))||d);return c>3&&d&&Object.defineProperty(r,t,d),d},h=this&&this.__param||function(o,r){return function(t,i){r(t,i,o)}};Object.defineProperty(e,"__esModule",{value:!0}),e.MouseZoneManager=void 0;var y=D(844),v=D(3656),s=D(4725),u=D(2585),p=function(o){function r(t,i,a,c,d,g){var S=o.call(this)||this;return S._element=t,S._screenElement=i,S._bufferService=a,S._mouseService=c,S._selectionService=d,S._optionsService=g,S._zones=[],S._areZonesActive=!1,S._lastHoverCoords=[void 0,void 0],S._initialSelectionLength=0,S.register((0,v.addDisposableDomListener)(S._element,"mousedown",function(b){return S._onMouseDown(b)})),S._mouseMoveListener=function(b){return S._onMouseMove(b)},S._mouseLeaveListener=function(b){return S._onMouseLeave(b)},S._clickListener=function(b){return S._onClick(b)},S}return _(r,o),r.prototype.dispose=function(){o.prototype.dispose.call(this),this._deactivate()},r.prototype.add=function(t){this._zones.push(t),this._zones.length===1&&this._activate()},r.prototype.clearAll=function(t,i){if(this._zones.length!==0){t&&i||(t=0,i=this._bufferService.rows-1);for(var a=0;a<this._zones.length;a++){var c=this._zones[a];(c.y1>t&&c.y1<=i+1||c.y2>t&&c.y2<=i+1||c.y1<t&&c.y2>i+1)&&(this._currentZone&&this._currentZone===c&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(a--,1))}this._zones.length===0&&this._deactivate()}},r.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},r.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},r.prototype._onMouseMove=function(t){this._lastHoverCoords[0]===t.pageX&&this._lastHoverCoords[1]===t.pageY||(this._onHover(t),this._lastHoverCoords=[t.pageX,t.pageY])},r.prototype._onHover=function(t){var i=this,a=this._findZoneEventAt(t);a!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),a&&(this._currentZone=a,a.hoverCallback&&a.hoverCallback(t),this._tooltipTimeout=window.setTimeout(function(){return i._onTooltip(t)},this._optionsService.rawOptions.linkTooltipHoverDuration)))},r.prototype._onTooltip=function(t){this._tooltipTimeout=void 0;var i=this._findZoneEventAt(t);i?.tooltipCallback(t)},r.prototype._onMouseDown=function(t){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var i=this._findZoneEventAt(t);i?.willLinkActivate(t)&&(t.preventDefault(),t.stopImmediatePropagation())}},r.prototype._onMouseLeave=function(t){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},r.prototype._onClick=function(t){var i=this._findZoneEventAt(t),a=this._getSelectionLength();i&&a===this._initialSelectionLength&&(i.clickCallback(t),t.preventDefault(),t.stopImmediatePropagation())},r.prototype._getSelectionLength=function(){var t=this._selectionService.selectionText;return t?t.length:0},r.prototype._findZoneEventAt=function(t){var i=this._mouseService.getCoords(t,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(i)for(var a=i[0],c=i[1],d=0;d<this._zones.length;d++){var g=this._zones[d];if(g.y1===g.y2){if(c===g.y1&&a>=g.x1&&a<g.x2)return g}else if(c===g.y1&&a>=g.x1||c===g.y2&&a<g.x2||c>g.y1&&c<g.y2)return g}},f([h(2,u.IBufferService),h(3,s.IMouseService),h(4,s.ISelectionService),h(5,u.IOptionsService)],r)}(y.Disposable);e.MouseZoneManager=p},6193:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RenderDebouncer=void 0;var D=function(){function l(_){this._renderCallback=_}return l.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},l.prototype.refresh=function(_,f,h){var y=this;this._rowCount=h,_=_!==void 0?_:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,_):_,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return y._innerRefresh()}))},l.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var _=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(_,f)}},l}();e.RenderDebouncer=D},5596:function(A,e,D){var l,_=this&&this.__extends||(l=function(h,y){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,s){v.__proto__=s}||function(v,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(v[u]=s[u])},l(h,y)},function(h,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function v(){this.constructor=h}l(h,y),h.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)});Object.defineProperty(e,"__esModule",{value:!0}),e.ScreenDprMonitor=void 0;var f=function(h){function y(){var v=h!==null&&h.apply(this,arguments)||this;return v._currentDevicePixelRatio=window.devicePixelRatio,v}return _(y,h),y.prototype.setListener=function(v){var s=this;this._listener&&this.clearListener(),this._listener=v,this._outerListener=function(){s._listener&&(s._listener(window.devicePixelRatio,s._currentDevicePixelRatio),s._updateDpr())},this._updateDpr()},y.prototype.dispose=function(){h.prototype.dispose.call(this),this.clearListener()},y.prototype._updateDpr=function(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},y.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},y}(D(844).Disposable);e.ScreenDprMonitor=f},3236:function(A,e,D){var l,_=this&&this.__extends||(l=function(L,q){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,R){O.__proto__=R}||function(O,R){for(var k in R)Object.prototype.hasOwnProperty.call(R,k)&&(O[k]=R[k])},l(L,q)},function(L,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function O(){this.constructor=L}l(L,q),L.prototype=q===null?Object.create(q):(O.prototype=q.prototype,new O)});Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;var f=D(2950),h=D(1680),y=D(3614),v=D(2584),s=D(5435),u=D(3525),p=D(3551),o=D(9312),r=D(6114),t=D(3656),i=D(9042),a=D(357),c=D(6954),d=D(4567),g=D(1296),S=D(7399),b=D(8460),C=D(8437),m=D(5680),x=D(3230),w=D(4725),I=D(428),B=D(8934),E=D(6465),F=D(5114),T=D(8969),H=D(4774),N=D(4269),z=D(5941),Z=D(7641),X=typeof window<"u"?window.document:null,J=function(L){function q(O){O===void 0&&(O={});var R=L.call(this,O)||this;return R.browser=r,R._keyDownHandled=!1,R._keyPressHandled=!1,R._unprocessedDeadKey=!1,R._onCursorMove=new b.EventEmitter,R._onKey=new b.EventEmitter,R._onRender=new b.EventEmitter,R._onSelectionChange=new b.EventEmitter,R._onTitleChange=new b.EventEmitter,R._onBell=new b.EventEmitter,R._onFocus=new b.EventEmitter,R._onBlur=new b.EventEmitter,R._onA11yCharEmitter=new b.EventEmitter,R._onA11yTabEmitter=new b.EventEmitter,R._setup(),R.linkifier=R._instantiationService.createInstance(p.Linkifier),R.linkifier2=R.register(R._instantiationService.createInstance(E.Linkifier2)),R.decorationService=R.register(R._instantiationService.createInstance(Z.DecorationService)),R.register(R._inputHandler.onRequestBell(function(){return R.bell()})),R.register(R._inputHandler.onRequestRefreshRows(function(k,G){return R.refresh(k,G)})),R.register(R._inputHandler.onRequestSendFocus(function(){return R._reportFocus()})),R.register(R._inputHandler.onRequestReset(function(){return R.reset()})),R.register(R._inputHandler.onRequestWindowsOptionsReport(function(k){return R._reportWindowsOptions(k)})),R.register(R._inputHandler.onColor(function(k){return R._handleColorEvent(k)})),R.register((0,b.forwardEvent)(R._inputHandler.onCursorMove,R._onCursorMove)),R.register((0,b.forwardEvent)(R._inputHandler.onTitleChange,R._onTitleChange)),R.register((0,b.forwardEvent)(R._inputHandler.onA11yChar,R._onA11yCharEmitter)),R.register((0,b.forwardEvent)(R._inputHandler.onA11yTab,R._onA11yTabEmitter)),R.register(R._bufferService.onResize(function(k){return R._afterResize(k.cols,k.rows)})),R}return _(q,L),Object.defineProperty(q.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),q.prototype._handleColorEvent=function(O){var R,k;if(this._colorManager){for(var G=0,V=O;G<V.length;G++){var Y=V[G],$=void 0,Q="";switch(Y.index){case 256:$="foreground",Q="10";break;case 257:$="background",Q="11";break;case 258:$="cursor",Q="12";break;default:$="ansi",Q="4;"+Y.index}if($)switch(Y.type){case 0:var ce=H.color.toColorRGB($==="ansi"?this._colorManager.colors.ansi[Y.index]:this._colorManager.colors[$]);this.coreService.triggerDataEvent(v.C0.ESC+"]"+Q+";"+(0,z.toRgbString)(ce)+v.C0.BEL);break;case 1:$==="ansi"?this._colorManager.colors.ansi[Y.index]=H.rgba.toColor.apply(H.rgba,Y.color):this._colorManager.colors[$]=H.rgba.toColor.apply(H.rgba,Y.color);break;case 2:this._colorManager.restoreColor(Y.index)}}(R=this._renderService)===null||R===void 0||R.setColors(this._colorManager.colors),(k=this.viewport)===null||k===void 0||k.onThemeChange(this._colorManager.colors)}},q.prototype.dispose=function(){var O,R,k;this._isDisposed||(L.prototype.dispose.call(this),(O=this._renderService)===null||O===void 0||O.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(k=(R=this.element)===null||R===void 0?void 0:R.parentNode)===null||k===void 0||k.removeChild(this.element))},q.prototype._setup=function(){L.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(q.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),q.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},q.prototype._updateOptions=function(O){var R,k,G,V;switch(L.prototype._updateOptions.call(this,O),O){case"fontFamily":case"fontSize":(R=this._renderService)===null||R===void 0||R.clear(),(k=this._charSizeService)===null||k===void 0||k.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(G=this.viewport)===null||G===void 0||G.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new d.AccessibilityManager(this,this._renderService)):((V=this._accessibilityManager)===null||V===void 0||V.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},q.prototype._onTextAreaFocus=function(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(v.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},q.prototype.blur=function(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()},q.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(v.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},q.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var O=this.buffer.ybase+this.buffer.y,R=this.buffer.lines.get(O);if(R){var k=Math.min(this.buffer.x,this.cols-1),G=this._renderService.dimensions.actualCellHeight,V=R.getWidth(k),Y=this._renderService.dimensions.actualCellWidth*V,$=this.buffer.y*this._renderService.dimensions.actualCellHeight,Q=k*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=Q+"px",this.textarea.style.top=$+"px",this.textarea.style.width=Y+"px",this.textarea.style.height=G+"px",this.textarea.style.lineHeight=G+"px",this.textarea.style.zIndex="-5"}}},q.prototype._initGlobal=function(){var O=this;this._bindKeys(),this.register((0,t.addDisposableDomListener)(this.element,"copy",function(k){O.hasSelection()&&(0,y.copyHandler)(k,O._selectionService)}));var R=function(k){return(0,y.handlePasteEvent)(k,O.textarea,O.coreService)};this.register((0,t.addDisposableDomListener)(this.textarea,"paste",R)),this.register((0,t.addDisposableDomListener)(this.element,"paste",R)),r.isFirefox?this.register((0,t.addDisposableDomListener)(this.element,"mousedown",function(k){k.button===2&&(0,y.rightClickHandler)(k,O.textarea,O.screenElement,O._selectionService,O.options.rightClickSelectsWord)})):this.register((0,t.addDisposableDomListener)(this.element,"contextmenu",function(k){(0,y.rightClickHandler)(k,O.textarea,O.screenElement,O._selectionService,O.options.rightClickSelectsWord)})),r.isLinux&&this.register((0,t.addDisposableDomListener)(this.element,"auxclick",function(k){k.button===1&&(0,y.moveTextAreaUnderMouseCursor)(k,O.textarea,O.screenElement)}))},q.prototype._bindKeys=function(){var O=this;this.register((0,t.addDisposableDomListener)(this.textarea,"keyup",function(R){return O._keyUp(R)},!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"keydown",function(R){return O._keyDown(R)},!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"keypress",function(R){return O._keyPress(R)},!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionstart",function(){return O._compositionHelper.compositionstart()})),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionupdate",function(R){return O._compositionHelper.compositionupdate(R)})),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionend",function(){return O._compositionHelper.compositionend()})),this.register((0,t.addDisposableDomListener)(this.textarea,"input",function(R){return O._inputEvent(R)},!0)),this.register(this.onRender(function(){return O._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(R){return O._queueLinkification(R.start,R.end)}))},q.prototype.open=function(O){var R=this;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),O.appendChild(this.element);var k=X.createDocumentFragment();this._viewportElement=X.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),k.appendChild(this._viewportElement),this._viewportScrollArea=X.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=X.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=X.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),k.appendChild(this.screenElement),this.textarea=X.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",i.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,t.addDisposableDomListener)(this.textarea,"focus",function(Y){return R._onTextAreaFocus(Y)})),this.register((0,t.addDisposableDomListener)(this.textarea,"blur",function(){return R._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var G=this._instantiationService.createInstance(F.CoreBrowserService,this.textarea);this._instantiationService.setService(w.ICoreBrowserService,G),this._charSizeService=this._instantiationService.createInstance(I.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new m.ColorManager(X,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(Y){return R._colorManager.onOptionsChange(Y)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(N.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService);var V=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,V,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(Y){return R._onRender.fire(Y)})),this.onResize(function(Y){return R._renderService.resize(Y.cols,Y.rows)}),this._compositionView=X.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(f.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(k),this._soundService=this._instantiationService.createInstance(a.SoundService),this._instantiationService.setService(w.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(B.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(h.Viewport,function(Y){return R.scrollLines(Y,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return R.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){R._renderService.onCursorMove(),R._syncTextArea()})),this.register(this.onResize(function(){return R._renderService.onResize(R.cols,R.rows)})),this.register(this.onBlur(function(){return R._renderService.onBlur()})),this.register(this.onFocus(function(){return R._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return R.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(o.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(Y){return R.scrollLines(Y.amount,Y.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return R._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(Y){return R._renderService.onSelectionChanged(Y.start,Y.end,Y.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(Y){R.textarea.value=Y,R.textarea.focus(),R.textarea.select()})),this.register(this._onScroll.event(function(Y){R.viewport.syncScrollArea(),R._selectionService.refresh()})),this.register((0,t.addDisposableDomListener)(this._viewportElement,"scroll",function(){return R._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(c.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return R._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.decorationService.attachToDom(this.screenElement,this._renderService,this._bufferService),this.register((0,t.addDisposableDomListener)(this.element,"mousedown",function(Y){return R._selectionService.onMouseDown(Y)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new d.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},q.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(u.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(g.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},q.prototype._setTheme=function(O){var R,k,G;this._theme=O,(R=this._colorManager)===null||R===void 0||R.setTheme(O),(k=this._renderService)===null||k===void 0||k.setColors(this._colorManager.colors),(G=this.viewport)===null||G===void 0||G.onThemeChange(this._colorManager.colors)},q.prototype.bindMouse=function(){var O=this,R=this,k=this.element;function G(K){var ie,ae,_e=R._mouseService.getRawByteCoords(K,R.screenElement,R.cols,R.rows);if(!_e)return!1;switch(K.overrideType||K.type){case"mousemove":ae=32,K.buttons===void 0?(ie=3,K.button!==void 0&&(ie=K.button<3?K.button:3)):ie=1&K.buttons?0:4&K.buttons?1:2&K.buttons?2:3;break;case"mouseup":ae=0,ie=K.button<3?K.button:3;break;case"mousedown":ae=1,ie=K.button<3?K.button:3;break;case"wheel":K.deltaY!==0&&(ae=K.deltaY<0?0:1),ie=4;break;default:return!1}return!(ae===void 0||ie===void 0||ie>4)&&R.coreMouseService.triggerMouseEvent({col:_e.x-33,row:_e.y-33,button:ie,action:ae,ctrl:K.ctrlKey,alt:K.altKey,shift:K.shiftKey})}var V={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Y=function(K){return G(K),K.buttons||(O._document.removeEventListener("mouseup",V.mouseup),V.mousedrag&&O._document.removeEventListener("mousemove",V.mousedrag)),O.cancel(K)},$=function(K){return G(K),O.cancel(K,!0)},Q=function(K){K.buttons&&G(K)},ce=function(K){K.buttons||G(K)};this.register(this.coreMouseService.onProtocolChange(function(K){K?(O.optionsService.rawOptions.logLevel==="debug"&&O._logService.debug("Binding to mouse events:",O.coreMouseService.explainEvents(K)),O.element.classList.add("enable-mouse-events"),O._selectionService.disable()):(O._logService.debug("Unbinding from mouse events."),O.element.classList.remove("enable-mouse-events"),O._selectionService.enable()),8&K?V.mousemove||(k.addEventListener("mousemove",ce),V.mousemove=ce):(k.removeEventListener("mousemove",V.mousemove),V.mousemove=null),16&K?V.wheel||(k.addEventListener("wheel",$,{passive:!1}),V.wheel=$):(k.removeEventListener("wheel",V.wheel),V.wheel=null),2&K?V.mouseup||(V.mouseup=Y):(O._document.removeEventListener("mouseup",V.mouseup),V.mouseup=null),4&K?V.mousedrag||(V.mousedrag=Q):(O._document.removeEventListener("mousemove",V.mousedrag),V.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,t.addDisposableDomListener)(k,"mousedown",function(K){if(K.preventDefault(),O.focus(),O.coreMouseService.areMouseEventsActive&&!O._selectionService.shouldForceSelection(K))return G(K),V.mouseup&&O._document.addEventListener("mouseup",V.mouseup),V.mousedrag&&O._document.addEventListener("mousemove",V.mousedrag),O.cancel(K)})),this.register((0,t.addDisposableDomListener)(k,"wheel",function(K){if(!V.wheel){if(!O.buffer.hasScrollback){var ie=O.viewport.getLinesScrolled(K);if(ie===0)return;for(var ae=v.C0.ESC+(O.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(K.deltaY<0?"A":"B"),_e="",Le=0;Le<Math.abs(ie);Le++)_e+=ae;return O.coreService.triggerDataEvent(_e,!0),O.cancel(K,!0)}return O.viewport.onWheel(K)?O.cancel(K):void 0}},{passive:!1})),this.register((0,t.addDisposableDomListener)(k,"touchstart",function(K){if(!O.coreMouseService.areMouseEventsActive)return O.viewport.onTouchStart(K),O.cancel(K)},{passive:!0})),this.register((0,t.addDisposableDomListener)(k,"touchmove",function(K){if(!O.coreMouseService.areMouseEventsActive)return O.viewport.onTouchMove(K)?void 0:O.cancel(K)},{passive:!1}))},q.prototype.refresh=function(O,R){var k;(k=this._renderService)===null||k===void 0||k.refreshRows(O,R)},q.prototype._queueLinkification=function(O,R){var k;(k=this.linkifier)===null||k===void 0||k.linkifyRows(O,R)},q.prototype.updateCursorStyle=function(O){var R;!((R=this._selectionService)===null||R===void 0)&&R.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},q.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},q.prototype.scrollLines=function(O,R,k){k===void 0&&(k=0),L.prototype.scrollLines.call(this,O,R,k),this.refresh(0,this.rows-1)},q.prototype.paste=function(O){(0,y.paste)(O,this.textarea,this.coreService)},q.prototype.attachCustomKeyEventHandler=function(O){this._customKeyEventHandler=O},q.prototype.registerLinkMatcher=function(O,R,k){var G=this.linkifier.registerLinkMatcher(O,R,k);return this.refresh(0,this.rows-1),G},q.prototype.deregisterLinkMatcher=function(O){this.linkifier.deregisterLinkMatcher(O)&&this.refresh(0,this.rows-1)},q.prototype.registerLinkProvider=function(O){return this.linkifier2.registerLinkProvider(O)},q.prototype.registerCharacterJoiner=function(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var R=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),R},q.prototype.deregisterCharacterJoiner=function(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)},Object.defineProperty(q.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),q.prototype.addMarker=function(O){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)},q.prototype.registerDecoration=function(O){return this.decorationService.registerDecoration(O)},q.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},q.prototype.select=function(O,R,k){this._selectionService.setSelection(O,R,k)},q.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},q.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},q.prototype.clearSelection=function(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()},q.prototype.selectAll=function(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()},q.prototype.selectLines=function(O,R){var k;(k=this._selectionService)===null||k===void 0||k.selectLines(O,R)},q.prototype._keyDown=function(O){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(!this._compositionHelper.keydown(O))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var R=(0,S.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),R.type===3||R.type===2){var k=this.rows-1;return this.scrollLines(R.type===2?-k:k),this.cancel(O,!0)}return R.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(R.cancel&&this.cancel(O,!0),!R.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(R.key!==v.C0.ETX&&R.key!==v.C0.CR||(this.textarea.value=""),this._onKey.fire({key:R.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(R.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(O,!0))))},q.prototype._isThirdLevelShift=function(O,R){var k=O.isMac&&!this.options.macOptionIsMeta&&R.altKey&&!R.ctrlKey&&!R.metaKey||O.isWindows&&R.altKey&&R.ctrlKey&&!R.metaKey||O.isWindows&&R.getModifierState("AltGraph");return R.type==="keypress"?k:k&&(!R.keyCode||R.keyCode>47)},q.prototype._keyUp=function(O){this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(R){return R.keyCode===16||R.keyCode===17||R.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)},q.prototype._keyPress=function(O){var R;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)R=O.charCode;else if(O.which===null||O.which===void 0)R=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;R=O.which}return!(!R||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(R=String.fromCharCode(R),this._onKey.fire({key:R,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(R,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},q.prototype._inputEvent=function(O){if(O.data&&O.inputType==="insertText"&&!O.composed&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var R=O.data;return this.coreService.triggerDataEvent(R,!0),this.cancel(O),!0}return!1},q.prototype.bell=function(){var O;this._soundBell()&&((O=this._soundService)===null||O===void 0||O.playBellSound()),this._onBell.fire()},q.prototype.resize=function(O,R){O!==this.cols||R!==this.rows?L.prototype.resize.call(this,O,R):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},q.prototype._afterResize=function(O,R){var k,G;(k=this._charSizeService)===null||k===void 0||k.measure(),(G=this.viewport)===null||G===void 0||G.syncScrollArea(!0)},q.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var O=1;O<this.rows;O++)this.buffer.lines.push(this.buffer.getBlankLine(C.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},q.prototype.reset=function(){var O,R;this.options.rows=this.rows,this.options.cols=this.cols;var k=this._customKeyEventHandler;this._setup(),L.prototype.reset.call(this),(O=this._selectionService)===null||O===void 0||O.reset(),this._customKeyEventHandler=k,this.refresh(0,this.rows-1),(R=this.viewport)===null||R===void 0||R.syncScrollArea()},q.prototype.clearTextureAtlas=function(){var O;(O=this._renderService)===null||O===void 0||O.clearTextureAtlas()},q.prototype._reportFocus=function(){var O;!((O=this.element)===null||O===void 0)&&O.classList.contains("focus")?this.coreService.triggerDataEvent(v.C0.ESC+"[I"):this.coreService.triggerDataEvent(v.C0.ESC+"[O")},q.prototype._reportWindowsOptions=function(O){if(this._renderService)switch(O){case s.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var R=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),k=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(v.C0.ESC+"[4;"+k+";"+R+"t");break;case s.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var G=this._renderService.dimensions.scaledCellWidth.toFixed(0),V=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(v.C0.ESC+"[6;"+V+";"+G+"t")}},q.prototype.cancel=function(O,R){if(this.options.cancelEvents||R)return O.preventDefault(),O.stopPropagation(),!1},q.prototype._visualBell=function(){return!1},q.prototype._soundBell=function(){return this.options.bellStyle==="sound"},q}(T.CoreTerminal);e.Terminal=J},9924:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TimeBasedDebouncer=void 0;var D=function(){function l(_,f){f===void 0&&(f=1e3),this._renderCallback=_,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return l.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},l.prototype.refresh=function(_,f,h){var y=this;this._rowCount=h,_=_!==void 0?_:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,_):_,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;var v=Date.now();if(v-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=v,this._innerRefresh();else if(!this._additionalRefreshRequested){var s=v-this._lastRefreshMs,u=this._debounceThresholdMS-s;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){y._lastRefreshMs=Date.now(),y._innerRefresh(),y._additionalRefreshRequested=!1,y._refreshTimeoutID=void 0},u)}},l.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var _=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(_,f)}},l}();e.TimeBasedDebouncer=D},1680:function(A,e,D){var l,_=this&&this.__extends||(l=function(o,r){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])},l(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=o}l(o,r),o.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),f=this&&this.__decorate||function(o,r,t,i){var a,c=arguments.length,d=c<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,r,t,i);else for(var g=o.length-1;g>=0;g--)(a=o[g])&&(d=(c<3?a(d):c>3?a(r,t,d):a(r,t))||d);return c>3&&d&&Object.defineProperty(r,t,d),d},h=this&&this.__param||function(o,r){return function(t,i){r(t,i,o)}};Object.defineProperty(e,"__esModule",{value:!0}),e.Viewport=void 0;var y=D(844),v=D(3656),s=D(4725),u=D(2585),p=function(o){function r(t,i,a,c,d,g,S,b){var C=o.call(this)||this;return C._scrollLines=t,C._viewportElement=i,C._scrollArea=a,C._element=c,C._bufferService=d,C._optionsService=g,C._charSizeService=S,C._renderService=b,C.scrollBarWidth=0,C._currentRowHeight=0,C._currentScaledCellHeight=0,C._lastRecordedBufferLength=0,C._lastRecordedViewportHeight=0,C._lastRecordedBufferHeight=0,C._lastTouchY=0,C._lastScrollTop=0,C._lastHadScrollBar=!1,C._wheelPartialScroll=0,C._refreshAnimationFrame=null,C._ignoreNextScrollEvent=!1,C.scrollBarWidth=C._viewportElement.offsetWidth-C._scrollArea.offsetWidth||15,C._lastHadScrollBar=!0,C.register((0,v.addDisposableDomListener)(C._viewportElement,"scroll",C._onScroll.bind(C))),C._activeBuffer=C._bufferService.buffer,C.register(C._bufferService.buffers.onBufferActivate(function(m){return C._activeBuffer=m.activeBuffer})),C._renderDimensions=C._renderService.dimensions,C.register(C._renderService.onDimensionsChange(function(m){return C._renderDimensions=m})),setTimeout(function(){return C.syncScrollArea()},0),C}return _(r,o),r.prototype.onThemeChange=function(t){this._viewportElement.style.backgroundColor=t.background.css},r.prototype._refresh=function(t){var i=this;if(t)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return i._innerRefresh()}))},r.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var t=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==t&&(this._lastRecordedBufferHeight=t,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==i&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=i),this._optionsService.rawOptions.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var a=window.getComputedStyle(this._element),c=parseInt(a.paddingLeft)+parseInt(a.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?c:0)).toString()+"px",this._refreshAnimationFrame=null},r.prototype.syncScrollArea=function(t){if(t===void 0&&(t=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(t);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.rawOptions.scrollback>0&&this._refresh(t):this._refresh(t)},r.prototype._onScroll=function(t){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var i=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(i)}},r.prototype._bubbleScroll=function(t,i){var a=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(i<0&&this._viewportElement.scrollTop!==0||i>0&&a<this._lastRecordedBufferHeight)||(t.cancelable&&t.preventDefault(),!1)},r.prototype.onWheel=function(t){var i=this._getPixelsScrolled(t);return i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(t,i))},r.prototype._getPixelsScrolled=function(t){if(t.deltaY===0||t.shiftKey)return 0;var i=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._currentRowHeight:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._currentRowHeight*this._bufferService.rows),i},r.prototype.getLinesScrolled=function(t){if(t.deltaY===0||t.shiftKey)return 0;var i=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(i/=this._currentRowHeight+0,this._wheelPartialScroll+=i,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i},r.prototype._applyScrollModifier=function(t,i){var a=this._optionsService.rawOptions.fastScrollModifier;return a==="alt"&&i.altKey||a==="ctrl"&&i.ctrlKey||a==="shift"&&i.shiftKey?t*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:t*this._optionsService.rawOptions.scrollSensitivity},r.prototype.onTouchStart=function(t){this._lastTouchY=t.touches[0].pageY},r.prototype.onTouchMove=function(t){var i=this._lastTouchY-t.touches[0].pageY;return this._lastTouchY=t.touches[0].pageY,i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(t,i))},f([h(4,u.IBufferService),h(5,u.IOptionsService),h(6,s.ICharSizeService),h(7,s.IRenderService)],r)}(y.Disposable);e.Viewport=p},2950:function(A,e,D){var l=this&&this.__decorate||function(v,s,u,p){var o,r=arguments.length,t=r<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,u):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(v,s,u,p);else for(var i=v.length-1;i>=0;i--)(o=v[i])&&(t=(r<3?o(t):r>3?o(s,u,t):o(s,u))||t);return r>3&&t&&Object.defineProperty(s,u,t),t},_=this&&this.__param||function(v,s){return function(u,p){s(u,p,v)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CompositionHelper=void 0;var f=D(4725),h=D(2585),y=function(){function v(s,u,p,o,r,t){this._textarea=s,this._compositionView=u,this._bufferService=p,this._optionsService=o,this._coreService=r,this._renderService=t,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(v.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),v.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},v.prototype.compositionupdate=function(s){var u=this;this._compositionView.textContent=s.data,this.updateCompositionElements(),setTimeout(function(){u._compositionPosition.end=u._textarea.value.length},0)},v.prototype.compositionend=function(){this._finalizeComposition(!0)},v.prototype.keydown=function(s){if(this._isComposing||this._isSendingComposition){if(s.keyCode===229||s.keyCode===16||s.keyCode===17||s.keyCode===18)return!1;this._finalizeComposition(!1)}return s.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},v.prototype._finalizeComposition=function(s){var u=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,s){var p={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(u._isSendingComposition){u._isSendingComposition=!1;var r;p.start+=u._dataAlreadySent.length,(r=u._isComposing?u._textarea.value.substring(p.start,p.end):u._textarea.value.substring(p.start)).length>0&&u._coreService.triggerDataEvent(r,!0)}},0)}else{this._isSendingComposition=!1;var o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}},v.prototype._handleAnyTextareaChanges=function(){var s=this,u=this._textarea.value;setTimeout(function(){if(!s._isComposing){var p=s._textarea.value.replace(u,"");p.length>0&&(s._dataAlreadySent=p,s._coreService.triggerDataEvent(p,!0))}},0)},v.prototype.updateCompositionElements=function(s){var u=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var p=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.actualCellHeight,r=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,t=p*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=t+"px",this._compositionView.style.top=r+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var i=this._compositionView.getBoundingClientRect();this._textarea.style.left=t+"px",this._textarea.style.top=r+"px",this._textarea.style.width=Math.max(i.width,1)+"px",this._textarea.style.height=Math.max(i.height,1)+"px",this._textarea.style.lineHeight=i.height+"px"}s||setTimeout(function(){return u.updateCompositionElements(!0)},0)}},l([_(2,h.IBufferService),_(3,h.IOptionsService),_(4,h.ICoreService),_(5,f.IRenderService)],v)}();e.CompositionHelper=y},9806:(A,e)=>{function D(l,_){var f=_.getBoundingClientRect();return[l.clientX-f.left,l.clientY-f.top]}Object.defineProperty(e,"__esModule",{value:!0}),e.getRawByteCoords=e.getCoords=e.getCoordsRelativeToElement=void 0,e.getCoordsRelativeToElement=D,e.getCoords=function(l,_,f,h,y,v,s,u){if(y){var p=D(l,_);if(p)return p[0]=Math.ceil((p[0]+(u?v/2:0))/v),p[1]=Math.ceil(p[1]/s),p[0]=Math.min(Math.max(p[0],1),f+(u?1:0)),p[1]=Math.min(Math.max(p[1],1),h),p}},e.getRawByteCoords=function(l){if(l)return{x:l[0]+32,y:l[1]+32}}},9504:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.moveToCellSequence=void 0;var l=D(2584);function _(u,p,o,r){var t=u-f(o,u),i=p-f(o,p),a=Math.abs(t-i)-function(c,d,g){for(var S=0,b=c-f(g,c),C=d-f(g,d),m=0;m<Math.abs(b-C);m++){var x=h(c,d)==="A"?-1:1,w=g.buffer.lines.get(b+x*m);w?.isWrapped&&S++}return S}(u,p,o);return s(a,v(h(u,p),r))}function f(u,p){for(var o=0,r=u.buffer.lines.get(p),t=r?.isWrapped;t&&p>=0&&p<u.rows;)o++,t=(r=u.buffer.lines.get(--p))==null?void 0:r.isWrapped;return o}function h(u,p){return u>p?"A":"B"}function y(u,p,o,r,t,i){for(var a=u,c=p,d="";a!==o||c!==r;)a+=t?1:-1,t&&a>i.cols-1?(d+=i.buffer.translateBufferLineToString(c,!1,u,a),a=0,u=0,c++):!t&&a<0&&(d+=i.buffer.translateBufferLineToString(c,!1,0,u+1),u=a=i.cols-1,c--);return d+i.buffer.translateBufferLineToString(c,!1,u,a)}function v(u,p){var o=p?"O":"[";return l.C0.ESC+o+u}function s(u,p){u=Math.floor(u);for(var o="",r=0;r<u;r++)o+=p;return o}e.moveToCellSequence=function(u,p,o,r){var t,i=o.buffer.x,a=o.buffer.y;if(!o.buffer.hasScrollback)return function(d,g,S,b,C,m){return _(g,b,C,m).length===0?"":s(y(d,g,d,g-f(C,g),!1,C).length,v("D",m))}(i,a,0,p,o,r)+_(a,p,o,r)+function(d,g,S,b,C,m){var x;x=_(g,b,C,m).length>0?b-f(C,b):g;var w=b,I=function(B,E,F,T,H,N){var z;return z=_(F,T,H,N).length>0?T-f(H,T):E,B<F&&z<=T||B>=F&&z<T?"C":"D"}(d,g,S,b,C,m);return s(y(d,x,S,w,I==="C",C).length,v(I,m))}(i,a,u,p,o,r);if(a===p)return t=i>u?"D":"C",s(Math.abs(i-u),v(t,r));t=a>p?"D":"C";var c=Math.abs(a-p);return s(function(d,g){return g.cols-d}(a>p?u:i,o)+(c-1)*o.cols+1+((a>p?i:u)-1),v(t,r))}},4389:function(A,e,D){var l=this&&this.__assign||function(){return l=Object.assign||function(o){for(var r,t=1,i=arguments.length;t<i;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(o[a]=r[a]);return o},l.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;var _=D(3236),f=D(9042),h=D(7975),y=D(7090),v=D(5741),s=D(8285),u=["cols","rows"],p=function(){function o(r){var t=this;this._core=new _.Terminal(r),this._addonManager=new v.AddonManager,this._publicOptions=l({},this._core.options);var i=function(g){return t._core.options[g]},a=function(g,S){t._checkReadonlyOptions(g),t._core.options[g]=S};for(var c in this._core.options){var d={get:i.bind(this,c),set:a.bind(this,c)};Object.defineProperty(this._publicOptions,c,d)}}return o.prototype._checkReadonlyOptions=function(r){if(u.includes(r))throw new Error('Option "'+r+'" can only be set in the constructor')},o.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(o.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new h.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"unicode",{get:function(){return this._checkProposedApi(),new y.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new s.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"modes",{get:function(){var r=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:r.applicationCursorKeys,applicationKeypadMode:r.applicationKeypad,bracketedPasteMode:r.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:r.origin,reverseWraparoundMode:r.reverseWraparound,sendFocusMode:r.sendFocus,wraparoundMode:r.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"options",{get:function(){return this._publicOptions},set:function(r){for(var t in r)this._publicOptions[t]=r[t]},enumerable:!1,configurable:!0}),o.prototype.blur=function(){this._core.blur()},o.prototype.focus=function(){this._core.focus()},o.prototype.resize=function(r,t){this._verifyIntegers(r,t),this._core.resize(r,t)},o.prototype.open=function(r){this._core.open(r)},o.prototype.attachCustomKeyEventHandler=function(r){this._core.attachCustomKeyEventHandler(r)},o.prototype.registerLinkMatcher=function(r,t,i){return this._checkProposedApi(),this._core.registerLinkMatcher(r,t,i)},o.prototype.deregisterLinkMatcher=function(r){this._checkProposedApi(),this._core.deregisterLinkMatcher(r)},o.prototype.registerLinkProvider=function(r){return this._checkProposedApi(),this._core.registerLinkProvider(r)},o.prototype.registerCharacterJoiner=function(r){return this._checkProposedApi(),this._core.registerCharacterJoiner(r)},o.prototype.deregisterCharacterJoiner=function(r){this._checkProposedApi(),this._core.deregisterCharacterJoiner(r)},o.prototype.registerMarker=function(r){return r===void 0&&(r=0),this._checkProposedApi(),this._verifyIntegers(r),this._core.addMarker(r)},o.prototype.registerDecoration=function(r){var t,i,a;return this._checkProposedApi(),this._verifyPositiveIntegers((t=r.x)!==null&&t!==void 0?t:0,(i=r.width)!==null&&i!==void 0?i:0,(a=r.height)!==null&&a!==void 0?a:0),this._core.registerDecoration(r)},o.prototype.addMarker=function(r){return this.registerMarker(r)},o.prototype.hasSelection=function(){return this._core.hasSelection()},o.prototype.select=function(r,t,i){this._verifyIntegers(r,t,i),this._core.select(r,t,i)},o.prototype.getSelection=function(){return this._core.getSelection()},o.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},o.prototype.clearSelection=function(){this._core.clearSelection()},o.prototype.selectAll=function(){this._core.selectAll()},o.prototype.selectLines=function(r,t){this._verifyIntegers(r,t),this._core.selectLines(r,t)},o.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},o.prototype.scrollLines=function(r){this._verifyIntegers(r),this._core.scrollLines(r)},o.prototype.scrollPages=function(r){this._verifyIntegers(r),this._core.scrollPages(r)},o.prototype.scrollToTop=function(){this._core.scrollToTop()},o.prototype.scrollToBottom=function(){this._core.scrollToBottom()},o.prototype.scrollToLine=function(r){this._verifyIntegers(r),this._core.scrollToLine(r)},o.prototype.clear=function(){this._core.clear()},o.prototype.write=function(r,t){this._core.write(r,t)},o.prototype.writeUtf8=function(r,t){this._core.write(r,t)},o.prototype.writeln=function(r,t){this._core.write(r),this._core.write(`\r
`,t)},o.prototype.paste=function(r){this._core.paste(r)},o.prototype.getOption=function(r){return this._core.optionsService.getOption(r)},o.prototype.setOption=function(r,t){this._checkReadonlyOptions(r),this._core.optionsService.setOption(r,t)},o.prototype.refresh=function(r,t){this._verifyIntegers(r,t),this._core.refresh(r,t)},o.prototype.reset=function(){this._core.reset()},o.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},o.prototype.loadAddon=function(r){return this._addonManager.loadAddon(this,r)},Object.defineProperty(o,"strings",{get:function(){return f},enumerable:!1,configurable:!0}),o.prototype._verifyIntegers=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var i=0,a=r;i<a.length;i++){var c=a[i];if(c===1/0||isNaN(c)||c%1!=0)throw new Error("This API only accepts integers")}},o.prototype._verifyPositiveIntegers=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var i=0,a=r;i<a.length;i++){var c=a[i];if(c&&(c===1/0||isNaN(c)||c%1!=0||c<0))throw new Error("This API only accepts positive integers")}},o}();e.Terminal=p},1546:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseRenderLayer=void 0;var l=D(643),_=D(8803),f=D(1420),h=D(3734),y=D(1752),v=D(4774),s=D(9631),u=D(8978),p=function(){function o(r,t,i,a,c,d,g,S){this._container=r,this._alpha=a,this._colors=c,this._rendererId=d,this._bufferService=g,this._optionsService=S,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+t+"-layer"),this._canvas.style.zIndex=i.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return o.prototype.dispose=function(){var r;(0,s.removeElementFromParent)(this._canvas),(r=this._charAtlas)===null||r===void 0||r.dispose()},o.prototype._initCanvas=function(){this._ctx=(0,y.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},o.prototype.onOptionsChanged=function(){},o.prototype.onBlur=function(){},o.prototype.onFocus=function(){},o.prototype.onCursorMove=function(){},o.prototype.onGridChanged=function(r,t){},o.prototype.onSelectionChanged=function(r,t,i){i===void 0&&(i=!1)},o.prototype.setColors=function(r){this._refreshCharAtlas(r)},o.prototype._setTransparency=function(r){if(r!==this._alpha){var t=this._canvas;this._alpha=r,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,t),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},o.prototype._refreshCharAtlas=function(r){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,f.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,r,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},o.prototype.resize=function(r){this._scaledCellWidth=r.scaledCellWidth,this._scaledCellHeight=r.scaledCellHeight,this._scaledCharWidth=r.scaledCharWidth,this._scaledCharHeight=r.scaledCharHeight,this._scaledCharLeft=r.scaledCharLeft,this._scaledCharTop=r.scaledCharTop,this._canvas.width=r.scaledCanvasWidth,this._canvas.height=r.scaledCanvasHeight,this._canvas.style.width=r.canvasWidth+"px",this._canvas.style.height=r.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},o.prototype.clearTextureAtlas=function(){var r;(r=this._charAtlas)===null||r===void 0||r.clear()},o.prototype._fillCells=function(r,t,i,a){this._ctx.fillRect(r*this._scaledCellWidth,t*this._scaledCellHeight,i*this._scaledCellWidth,a*this._scaledCellHeight)},o.prototype._fillMiddleLineAtCells=function(r,t,i){i===void 0&&(i=1);var a=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(r*this._scaledCellWidth,(t+1)*this._scaledCellHeight-a-window.devicePixelRatio,i*this._scaledCellWidth,window.devicePixelRatio)},o.prototype._fillBottomLineAtCells=function(r,t,i){i===void 0&&(i=1),this._ctx.fillRect(r*this._scaledCellWidth,(t+1)*this._scaledCellHeight-window.devicePixelRatio-1,i*this._scaledCellWidth,window.devicePixelRatio)},o.prototype._fillLeftLineAtCell=function(r,t,i){this._ctx.fillRect(r*this._scaledCellWidth,t*this._scaledCellHeight,window.devicePixelRatio*i,this._scaledCellHeight)},o.prototype._strokeRectAtCell=function(r,t,i,a){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(r*this._scaledCellWidth+window.devicePixelRatio/2,t*this._scaledCellHeight+window.devicePixelRatio/2,i*this._scaledCellWidth-window.devicePixelRatio,a*this._scaledCellHeight-window.devicePixelRatio)},o.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},o.prototype._clearCells=function(r,t,i,a){this._alpha?this._ctx.clearRect(r*this._scaledCellWidth,t*this._scaledCellHeight,i*this._scaledCellWidth,a*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(r*this._scaledCellWidth,t*this._scaledCellHeight,i*this._scaledCellWidth,a*this._scaledCellHeight))},o.prototype._fillCharTrueColor=function(r,t,i){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=_.TEXT_BASELINE,this._clipRow(i);var a=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(a=(0,u.tryDrawCustomChar)(this._ctx,r.getChars(),t*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),a||this._ctx.fillText(r.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},o.prototype._drawChars=function(r,t,i){var a,c,d,g=this._getContrastColor(r);g||r.isFgRGB()||r.isBgRGB()?this._drawUncachedChars(r,t,i,g):(r.isInverse()?(c=r.isBgDefault()?_.INVERTED_DEFAULT_COLOR:r.getBgColor(),d=r.isFgDefault()?_.INVERTED_DEFAULT_COLOR:r.getFgColor()):(d=r.isBgDefault()?l.DEFAULT_COLOR:r.getBgColor(),c=r.isFgDefault()?l.DEFAULT_COLOR:r.getFgColor()),c+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&r.isBold()&&c<8?8:0,this._currentGlyphIdentifier.chars=r.getChars()||l.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=r.getCode()||l.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=d,this._currentGlyphIdentifier.fg=c,this._currentGlyphIdentifier.bold=!!r.isBold(),this._currentGlyphIdentifier.dim=!!r.isDim(),this._currentGlyphIdentifier.italic=!!r.isItalic(),!((a=this._charAtlas)===null||a===void 0)&&a.draw(this._ctx,this._currentGlyphIdentifier,t*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(r,t,i))},o.prototype._drawUncachedChars=function(r,t,i,a){if(this._ctx.save(),this._ctx.font=this._getFont(!!r.isBold(),!!r.isItalic()),this._ctx.textBaseline=_.TEXT_BASELINE,r.isInverse())if(a)this._ctx.fillStyle=a.css;else if(r.isBgDefault())this._ctx.fillStyle=v.color.opaque(this._colors.background).css;else if(r.isBgRGB())this._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(r.getBgColor()).join(",")+")";else{var c=r.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&r.isBold()&&c<8&&(c+=8),this._ctx.fillStyle=this._colors.ansi[c].css}else if(a)this._ctx.fillStyle=a.css;else if(r.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(r.isFgRGB())this._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(r.getFgColor()).join(",")+")";else{var d=r.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&r.isBold()&&d<8&&(d+=8),this._ctx.fillStyle=this._colors.ansi[d].css}this._clipRow(i),r.isDim()&&(this._ctx.globalAlpha=_.DIM_OPACITY);var g=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(g=(0,u.tryDrawCustomChar)(this._ctx,r.getChars(),t*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),g||this._ctx.fillText(r.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},o.prototype._clipRow=function(r){this._ctx.beginPath(),this._ctx.rect(0,r*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},o.prototype._getFont=function(r,t){return(t?"italic":"")+" "+(r?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},o.prototype._getContrastColor=function(r){if(this._optionsService.rawOptions.minimumContrastRatio!==1){var t=this._colors.contrastCache.getColor(r.bg,r.fg);if(t!==void 0)return t||void 0;var i=r.getFgColor(),a=r.getFgColorMode(),c=r.getBgColor(),d=r.getBgColorMode(),g=!!r.isInverse(),S=!!r.isInverse();if(g){var b=i;i=c,c=b;var C=a;a=d,d=C}var m=this._resolveBackgroundRgba(d,c,g),x=this._resolveForegroundRgba(a,i,g,S),w=v.rgba.ensureContrastRatio(m,x,this._optionsService.rawOptions.minimumContrastRatio);if(w){var I={css:v.channels.toCss(w>>24&255,w>>16&255,w>>8&255),rgba:w};return this._colors.contrastCache.setColor(r.bg,r.fg,I),I}this._colors.contrastCache.setColor(r.bg,r.fg,null)}},o.prototype._resolveBackgroundRgba=function(r,t,i){switch(r){case 16777216:case 33554432:return this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return i?this._colors.foreground.rgba:this._colors.background.rgba}},o.prototype._resolveForegroundRgba=function(r,t,i,a){switch(r){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&a&&t<8&&(t+=8),this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return i?this._colors.background.rgba:this._colors.foreground.rgba}},o}();e.BaseRenderLayer=p},2512:function(A,e,D){var l,_=this&&this.__extends||(l=function(t,i){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])},l(t,i)},function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function a(){this.constructor=t}l(t,i),t.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}),f=this&&this.__decorate||function(t,i,a,c){var d,g=arguments.length,S=g<3?i:c===null?c=Object.getOwnPropertyDescriptor(i,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(t,i,a,c);else for(var b=t.length-1;b>=0;b--)(d=t[b])&&(S=(g<3?d(S):g>3?d(i,a,S):d(i,a))||S);return g>3&&S&&Object.defineProperty(i,a,S),S},h=this&&this.__param||function(t,i){return function(a,c){i(a,c,t)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CursorRenderLayer=void 0;var y=D(1546),v=D(511),s=D(2585),u=D(4725),p=600,o=function(t){function i(a,c,d,g,S,b,C,m,x){var w=t.call(this,a,"cursor",c,!0,d,g,b,C)||this;return w._onRequestRedraw=S,w._coreService=m,w._coreBrowserService=x,w._cell=new v.CellData,w._state={x:0,y:0,isFocused:!1,style:"",width:0},w._cursorRenderers={bar:w._renderBarCursor.bind(w),block:w._renderBlockCursor.bind(w),underline:w._renderUnderlineCursor.bind(w)},w}return _(i,t),i.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),t.prototype.dispose.call(this)},i.prototype.resize=function(a){t.prototype.resize.call(this,a),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},i.prototype.reset=function(){var a;this._clearCursor(),(a=this._cursorBlinkStateManager)===null||a===void 0||a.restartBlinkAnimation(),this.onOptionsChanged()},i.prototype.onBlur=function(){var a;(a=this._cursorBlinkStateManager)===null||a===void 0||a.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onFocus=function(){var a;(a=this._cursorBlinkStateManager)===null||a===void 0||a.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onOptionsChanged=function(){var a,c=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new r(this._coreBrowserService.isFocused,function(){c._render(!0)})):((a=this._cursorBlinkStateManager)===null||a===void 0||a.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onCursorMove=function(){var a;(a=this._cursorBlinkStateManager)===null||a===void 0||a.restartBlinkAnimation()},i.prototype.onGridChanged=function(a,c){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},i.prototype._render=function(a){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var c=this._bufferService.buffer.ybase+this._bufferService.buffer.y,d=c-this._bufferService.buffer.ydisp;if(d<0||d>=this._bufferService.rows)this._clearCursor();else{var g=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(c).loadCell(g,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var S=this._optionsService.rawOptions.cursorStyle;return S&&S!=="block"?this._cursorRenderers[S](g,d,this._cell):this._renderBlurCursor(g,d,this._cell),this._ctx.restore(),this._state.x=g,this._state.y=d,this._state.isFocused=!1,this._state.style=S,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===g&&this._state.y===d&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](g,d,this._cell),this._ctx.restore(),this._state.x=g,this._state.y=d,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},i.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},i.prototype._renderBarCursor=function(a,c,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(a,c,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},i.prototype._renderBlockCursor=function(a,c,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(a,c,d.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(d,a,c),this._ctx.restore()},i.prototype._renderUnderlineCursor=function(a,c,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(a,c),this._ctx.restore()},i.prototype._renderBlurCursor=function(a,c,d){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(a,c,d.getWidth(),1),this._ctx.restore()},f([h(5,s.IBufferService),h(6,s.IOptionsService),h(7,s.ICoreService),h(8,u.ICoreBrowserService)],i)}(y.BaseRenderLayer);e.CursorRenderLayer=o;var r=function(){function t(i,a){this._renderCallback=a,this.isCursorVisible=!0,i&&this._restartInterval()}return Object.defineProperty(t.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.restartBlinkAnimation=function(){var i=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){i._renderCallback(),i._animationFrame=void 0})))},t.prototype._restartInterval=function(i){var a=this;i===void 0&&(i=p),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(a._animationTimeRestarted){var c=p-(Date.now()-a._animationTimeRestarted);if(a._animationTimeRestarted=void 0,c>0)return void a._restartInterval(c)}a.isCursorVisible=!1,a._animationFrame=window.requestAnimationFrame(function(){a._renderCallback(),a._animationFrame=void 0}),a._blinkInterval=window.setInterval(function(){if(a._animationTimeRestarted){var d=p-(Date.now()-a._animationTimeRestarted);return a._animationTimeRestarted=void 0,void a._restartInterval(d)}a.isCursorVisible=!a.isCursorVisible,a._animationFrame=window.requestAnimationFrame(function(){a._renderCallback(),a._animationFrame=void 0})},p)},i)},t.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},t}()},8978:(A,e,D)=>{var l,_,f,h,y,v,s,u,p,o,r,t,i,a,c,d,g,S,b,C,m,x,w,I,B,E,F,T,H,N,z,Z,X,J,L,q,O,R,k,G,V,Y,$,Q,ce,K,ie,ae,_e,Le,Vt,Xt,Yt,Zt,Jt,$t,Qt,er,tr,rr,ir,nr,Ve,Xe,Ye,Ze,Je,$e,Qe,et,tt,rt,it,nt,ot,st,at,ut,ct,lt,ht,ft,_t,dt,pt,vt,Dt,gt,yt,Ct,mt,bt,St,Et,wt,xt,Ft,Lt,At,Bt,kt,Mt,Ot,Rt,Tt,Pt,It,Ht,jt,Wt,Ut,qt,or,sr,ar,ur,cr,lr,hr,fr,_r,dr,pr,vr,Dr,gr,yr,Cr;Object.defineProperty(e,"__esModule",{value:!0}),e.tryDrawCustomChar=e.boxDrawingDefinitions=e.blockElementDefinitions=void 0;var Or=D(1752);e.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var _i={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};e.boxDrawingDefinitions={"\u2500":(l={},l[1]="M0,.5 L1,.5",l),"\u2501":(_={},_[3]="M0,.5 L1,.5",_),"\u2502":(f={},f[1]="M.5,0 L.5,1",f),"\u2503":(h={},h[3]="M.5,0 L.5,1",h),"\u250C":(y={},y[1]="M0.5,1 L.5,.5 L1,.5",y),"\u250F":(v={},v[3]="M0.5,1 L.5,.5 L1,.5",v),"\u2510":(s={},s[1]="M0,.5 L.5,.5 L.5,1",s),"\u2513":(u={},u[3]="M0,.5 L.5,.5 L.5,1",u),"\u2514":(p={},p[1]="M.5,0 L.5,.5 L1,.5",p),"\u2517":(o={},o[3]="M.5,0 L.5,.5 L1,.5",o),"\u2518":(r={},r[1]="M.5,0 L.5,.5 L0,.5",r),"\u251B":(t={},t[3]="M.5,0 L.5,.5 L0,.5",t),"\u251C":(i={},i[1]="M.5,0 L.5,1 M.5,.5 L1,.5",i),"\u2523":(a={},a[3]="M.5,0 L.5,1 M.5,.5 L1,.5",a),"\u2524":(c={},c[1]="M.5,0 L.5,1 M.5,.5 L0,.5",c),"\u252B":(d={},d[3]="M.5,0 L.5,1 M.5,.5 L0,.5",d),"\u252C":(g={},g[1]="M0,.5 L1,.5 M.5,.5 L.5,1",g),"\u2533":(S={},S[3]="M0,.5 L1,.5 M.5,.5 L.5,1",S),"\u2534":(b={},b[1]="M0,.5 L1,.5 M.5,.5 L.5,0",b),"\u253B":(C={},C[3]="M0,.5 L1,.5 M.5,.5 L.5,0",C),"\u253C":(m={},m[1]="M0,.5 L1,.5 M.5,0 L.5,1",m),"\u254B":(x={},x[3]="M0,.5 L1,.5 M.5,0 L.5,1",x),"\u2574":(w={},w[1]="M.5,.5 L0,.5",w),"\u2578":(I={},I[3]="M.5,.5 L0,.5",I),"\u2575":(B={},B[1]="M.5,.5 L.5,0",B),"\u2579":(E={},E[3]="M.5,.5 L.5,0",E),"\u2576":(F={},F[1]="M.5,.5 L1,.5",F),"\u257A":(T={},T[3]="M.5,.5 L1,.5",T),"\u2577":(H={},H[1]="M.5,.5 L.5,1",H),"\u257B":(N={},N[3]="M.5,.5 L.5,1",N),"\u2550":(z={},z[1]=function(U,j){return"M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)},z),"\u2551":(Z={},Z[1]=function(U,j){return"M"+(.5-U)+",0 L"+(.5-U)+",1 M"+(.5+U)+",0 L"+(.5+U)+",1"},Z),"\u2552":(X={},X[1]=function(U,j){return"M.5,1 L.5,"+(.5-j)+" L1,"+(.5-j)+" M.5,"+(.5+j)+" L1,"+(.5+j)},X),"\u2553":(J={},J[1]=function(U,j){return"M"+(.5-U)+",1 L"+(.5-U)+",.5 L1,.5 M"+(.5+U)+",.5 L"+(.5+U)+",1"},J),"\u2554":(L={},L[1]=function(U,j){return"M1,"+(.5-j)+" L"+(.5-U)+","+(.5-j)+" L"+(.5-U)+",1 M1,"+(.5+j)+" L"+(.5+U)+","+(.5+j)+" L"+(.5+U)+",1"},L),"\u2555":(q={},q[1]=function(U,j){return"M0,"+(.5-j)+" L.5,"+(.5-j)+" L.5,1 M0,"+(.5+j)+" L.5,"+(.5+j)},q),"\u2556":(O={},O[1]=function(U,j){return"M"+(.5+U)+",1 L"+(.5+U)+",.5 L0,.5 M"+(.5-U)+",.5 L"+(.5-U)+",1"},O),"\u2557":(R={},R[1]=function(U,j){return"M0,"+(.5+j)+" L"+(.5-U)+","+(.5+j)+" L"+(.5-U)+",1 M0,"+(.5-j)+" L"+(.5+U)+","+(.5-j)+" L"+(.5+U)+",1"},R),"\u2558":(k={},k[1]=function(U,j){return"M.5,0 L.5,"+(.5+j)+" L1,"+(.5+j)+" M.5,"+(.5-j)+" L1,"+(.5-j)},k),"\u2559":(G={},G[1]=function(U,j){return"M1,.5 L"+(.5-U)+",.5 L"+(.5-U)+",0 M"+(.5+U)+",.5 L"+(.5+U)+",0"},G),"\u255A":(V={},V[1]=function(U,j){return"M1,"+(.5-j)+" L"+(.5+U)+","+(.5-j)+" L"+(.5+U)+",0 M1,"+(.5+j)+" L"+(.5-U)+","+(.5+j)+" L"+(.5-U)+",0"},V),"\u255B":(Y={},Y[1]=function(U,j){return"M0,"+(.5+j)+" L.5,"+(.5+j)+" L.5,0 M0,"+(.5-j)+" L.5,"+(.5-j)},Y),"\u255C":($={},$[1]=function(U,j){return"M0,.5 L"+(.5+U)+",.5 L"+(.5+U)+",0 M"+(.5-U)+",.5 L"+(.5-U)+",0"},$),"\u255D":(Q={},Q[1]=function(U,j){return"M0,"+(.5-j)+" L"+(.5-U)+","+(.5-j)+" L"+(.5-U)+",0 M0,"+(.5+j)+" L"+(.5+U)+","+(.5+j)+" L"+(.5+U)+",0"},Q),"\u255E":(ce={},ce[1]=function(U,j){return"M.5,0 L.5,1 M.5,"+(.5-j)+" L1,"+(.5-j)+" M.5,"+(.5+j)+" L1,"+(.5+j)},ce),"\u255F":(K={},K[1]=function(U,j){return"M"+(.5-U)+",0 L"+(.5-U)+",1 M"+(.5+U)+",0 L"+(.5+U)+",1 M"+(.5+U)+",.5 L1,.5"},K),"\u2560":(ie={},ie[1]=function(U,j){return"M"+(.5-U)+",0 L"+(.5-U)+",1 M1,"+(.5+j)+" L"+(.5+U)+","+(.5+j)+" L"+(.5+U)+",1 M1,"+(.5-j)+" L"+(.5+U)+","+(.5-j)+" L"+(.5+U)+",0"},ie),"\u2561":(ae={},ae[1]=function(U,j){return"M.5,0 L.5,1 M0,"+(.5-j)+" L.5,"+(.5-j)+" M0,"+(.5+j)+" L.5,"+(.5+j)},ae),"\u2562":(_e={},_e[1]=function(U,j){return"M0,.5 L"+(.5-U)+",.5 M"+(.5-U)+",0 L"+(.5-U)+",1 M"+(.5+U)+",0 L"+(.5+U)+",1"},_e),"\u2563":(Le={},Le[1]=function(U,j){return"M"+(.5+U)+",0 L"+(.5+U)+",1 M0,"+(.5+j)+" L"+(.5-U)+","+(.5+j)+" L"+(.5-U)+",1 M0,"+(.5-j)+" L"+(.5-U)+","+(.5-j)+" L"+(.5-U)+",0"},Le),"\u2564":(Vt={},Vt[1]=function(U,j){return"M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)+" M.5,"+(.5+j)+" L.5,1"},Vt),"\u2565":(Xt={},Xt[1]=function(U,j){return"M0,.5 L1,.5 M"+(.5-U)+",.5 L"+(.5-U)+",1 M"+(.5+U)+",.5 L"+(.5+U)+",1"},Xt),"\u2566":(Yt={},Yt[1]=function(U,j){return"M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L"+(.5-U)+","+(.5+j)+" L"+(.5-U)+",1 M1,"+(.5+j)+" L"+(.5+U)+","+(.5+j)+" L"+(.5+U)+",1"},Yt),"\u2567":(Zt={},Zt[1]=function(U,j){return"M.5,0 L.5,"+(.5-j)+" M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)},Zt),"\u2568":(Jt={},Jt[1]=function(U,j){return"M0,.5 L1,.5 M"+(.5-U)+",.5 L"+(.5-U)+",0 M"+(.5+U)+",.5 L"+(.5+U)+",0"},Jt),"\u2569":($t={},$t[1]=function(U,j){return"M0,"+(.5+j)+" L1,"+(.5+j)+" M0,"+(.5-j)+" L"+(.5-U)+","+(.5-j)+" L"+(.5-U)+",0 M1,"+(.5-j)+" L"+(.5+U)+","+(.5-j)+" L"+(.5+U)+",0"},$t),"\u256A":(Qt={},Qt[1]=function(U,j){return"M.5,0 L.5,1 M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)},Qt),"\u256B":(er={},er[1]=function(U,j){return"M0,.5 L1,.5 M"+(.5-U)+",0 L"+(.5-U)+",1 M"+(.5+U)+",0 L"+(.5+U)+",1"},er),"\u256C":(tr={},tr[1]=function(U,j){return"M0,"+(.5+j)+" L"+(.5-U)+","+(.5+j)+" L"+(.5-U)+",1 M1,"+(.5+j)+" L"+(.5+U)+","+(.5+j)+" L"+(.5+U)+",1 M0,"+(.5-j)+" L"+(.5-U)+","+(.5-j)+" L"+(.5-U)+",0 M1,"+(.5-j)+" L"+(.5+U)+","+(.5-j)+" L"+(.5+U)+",0"},tr),"\u2571":(rr={},rr[1]="M1,0 L0,1",rr),"\u2572":(ir={},ir[1]="M0,0 L1,1",ir),"\u2573":(nr={},nr[1]="M1,0 L0,1 M0,0 L1,1",nr),"\u257C":(Ve={},Ve[1]="M.5,.5 L0,.5",Ve[3]="M.5,.5 L1,.5",Ve),"\u257D":(Xe={},Xe[1]="M.5,.5 L.5,0",Xe[3]="M.5,.5 L.5,1",Xe),"\u257E":(Ye={},Ye[1]="M.5,.5 L1,.5",Ye[3]="M.5,.5 L0,.5",Ye),"\u257F":(Ze={},Ze[1]="M.5,.5 L.5,1",Ze[3]="M.5,.5 L.5,0",Ze),"\u250D":(Je={},Je[1]="M.5,.5 L.5,1",Je[3]="M.5,.5 L1,.5",Je),"\u250E":($e={},$e[1]="M.5,.5 L1,.5",$e[3]="M.5,.5 L.5,1",$e),"\u2511":(Qe={},Qe[1]="M.5,.5 L.5,1",Qe[3]="M.5,.5 L0,.5",Qe),"\u2512":(et={},et[1]="M.5,.5 L0,.5",et[3]="M.5,.5 L.5,1",et),"\u2515":(tt={},tt[1]="M.5,.5 L.5,0",tt[3]="M.5,.5 L1,.5",tt),"\u2516":(rt={},rt[1]="M.5,.5 L1,.5",rt[3]="M.5,.5 L.5,0",rt),"\u2519":(it={},it[1]="M.5,.5 L.5,0",it[3]="M.5,.5 L0,.5",it),"\u251A":(nt={},nt[1]="M.5,.5 L0,.5",nt[3]="M.5,.5 L.5,0",nt),"\u251D":(ot={},ot[1]="M.5,0 L.5,1",ot[3]="M.5,.5 L1,.5",ot),"\u251E":(st={},st[1]="M0.5,1 L.5,.5 L1,.5",st[3]="M.5,.5 L.5,0",st),"\u251F":(at={},at[1]="M.5,0 L.5,.5 L1,.5",at[3]="M.5,.5 L.5,1",at),"\u2520":(ut={},ut[1]="M.5,.5 L1,.5",ut[3]="M.5,0 L.5,1",ut),"\u2521":(ct={},ct[1]="M.5,.5 L.5,1",ct[3]="M.5,0 L.5,.5 L1,.5",ct),"\u2522":(lt={},lt[1]="M.5,.5 L.5,0",lt[3]="M0.5,1 L.5,.5 L1,.5",lt),"\u2525":(ht={},ht[1]="M.5,0 L.5,1",ht[3]="M.5,.5 L0,.5",ht),"\u2526":(ft={},ft[1]="M0,.5 L.5,.5 L.5,1",ft[3]="M.5,.5 L.5,0",ft),"\u2527":(_t={},_t[1]="M.5,0 L.5,.5 L0,.5",_t[3]="M.5,.5 L.5,1",_t),"\u2528":(dt={},dt[1]="M.5,.5 L0,.5",dt[3]="M.5,0 L.5,1",dt),"\u2529":(pt={},pt[1]="M.5,.5 L.5,1",pt[3]="M.5,0 L.5,.5 L0,.5",pt),"\u252A":(vt={},vt[1]="M.5,.5 L.5,0",vt[3]="M0,.5 L.5,.5 L.5,1",vt),"\u252D":(Dt={},Dt[1]="M0.5,1 L.5,.5 L1,.5",Dt[3]="M.5,.5 L0,.5",Dt),"\u252E":(gt={},gt[1]="M0,.5 L.5,.5 L.5,1",gt[3]="M.5,.5 L1,.5",gt),"\u252F":(yt={},yt[1]="M.5,.5 L.5,1",yt[3]="M0,.5 L1,.5",yt),"\u2530":(Ct={},Ct[1]="M0,.5 L1,.5",Ct[3]="M.5,.5 L.5,1",Ct),"\u2531":(mt={},mt[1]="M.5,.5 L1,.5",mt[3]="M0,.5 L.5,.5 L.5,1",mt),"\u2532":(bt={},bt[1]="M.5,.5 L0,.5",bt[3]="M0.5,1 L.5,.5 L1,.5",bt),"\u2535":(St={},St[1]="M.5,0 L.5,.5 L1,.5",St[3]="M.5,.5 L0,.5",St),"\u2536":(Et={},Et[1]="M.5,0 L.5,.5 L0,.5",Et[3]="M.5,.5 L1,.5",Et),"\u2537":(wt={},wt[1]="M.5,.5 L.5,0",wt[3]="M0,.5 L1,.5",wt),"\u2538":(xt={},xt[1]="M0,.5 L1,.5",xt[3]="M.5,.5 L.5,0",xt),"\u2539":(Ft={},Ft[1]="M.5,.5 L1,.5",Ft[3]="M.5,0 L.5,.5 L0,.5",Ft),"\u253A":(Lt={},Lt[1]="M.5,.5 L0,.5",Lt[3]="M.5,0 L.5,.5 L1,.5",Lt),"\u253D":(At={},At[1]="M.5,0 L.5,1 M.5,.5 L1,.5",At[3]="M.5,.5 L0,.5",At),"\u253E":(Bt={},Bt[1]="M.5,0 L.5,1 M.5,.5 L0,.5",Bt[3]="M.5,.5 L1,.5",Bt),"\u253F":(kt={},kt[1]="M.5,0 L.5,1",kt[3]="M0,.5 L1,.5",kt),"\u2540":(Mt={},Mt[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Mt[3]="M.5,.5 L.5,0",Mt),"\u2541":(Ot={},Ot[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Ot[3]="M.5,.5 L.5,1",Ot),"\u2542":(Rt={},Rt[1]="M0,.5 L1,.5",Rt[3]="M.5,0 L.5,1",Rt),"\u2543":(Tt={},Tt[1]="M0.5,1 L.5,.5 L1,.5",Tt[3]="M.5,0 L.5,.5 L0,.5",Tt),"\u2544":(Pt={},Pt[1]="M0,.5 L.5,.5 L.5,1",Pt[3]="M.5,0 L.5,.5 L1,.5",Pt),"\u2545":(It={},It[1]="M.5,0 L.5,.5 L1,.5",It[3]="M0,.5 L.5,.5 L.5,1",It),"\u2546":(Ht={},Ht[1]="M.5,0 L.5,.5 L0,.5",Ht[3]="M0.5,1 L.5,.5 L1,.5",Ht),"\u2547":(jt={},jt[1]="M.5,.5 L.5,1",jt[3]="M.5,.5 L.5,0 M0,.5 L1,.5",jt),"\u2548":(Wt={},Wt[1]="M.5,.5 L.5,0",Wt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",Wt),"\u2549":(Ut={},Ut[1]="M.5,.5 L1,.5",Ut[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Ut),"\u254A":(qt={},qt[1]="M.5,.5 L0,.5",qt[3]="M.5,0 L.5,1 M.5,.5 L1,.5",qt),"\u254C":(or={},or[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",or),"\u254D":(sr={},sr[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",sr),"\u2504":(ar={},ar[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",ar),"\u2505":(ur={},ur[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",ur),"\u2508":(cr={},cr[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",cr),"\u2509":(lr={},lr[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",lr),"\u254E":(hr={},hr[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",hr),"\u254F":(fr={},fr[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",fr),"\u2506":(_r={},_r[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",_r),"\u2507":(dr={},dr[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",dr),"\u250A":(pr={},pr[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",pr),"\u250B":(vr={},vr[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",vr),"\u256D":(Dr={},Dr[1]="C.5,1,.5,.5,1,.5",Dr),"\u256E":(gr={},gr[1]="C.5,1,.5,.5,0,.5",gr),"\u256F":(yr={},yr[1]="C.5,0,.5,.5,0,.5",yr),"\u2570":(Cr={},Cr[1]="C.5,0,.5,.5,1,.5",Cr)},e.tryDrawCustomChar=function(U,j,de,Te,Pe,re){var pe=e.blockElementDefinitions[j];if(pe)return function(ne,De,He,je,Ae,Be){for(var ue=0;ue<De.length;ue++){var oe=De[ue],ee=Ae/8,ge=Be/8;ne.fillRect(He+oe.x*ee,je+oe.y*ge,oe.w*ee,oe.h*ge)}}(U,pe,de,Te,Pe,re),!0;var ve=_i[j];if(ve)return function(ne,De,He,je,Ae,Be){var ue,oe=Rr.get(De);oe||(oe=new Map,Rr.set(De,oe));var ee=ne.fillStyle;if(typeof ee!="string")throw new Error('Unexpected fillStyle type "'+ee+'"');var ge=oe.get(ee);if(!ge){var le=De[0].length,be=De.length,Se=document.createElement("canvas");Se.width=le,Se.height=be;var Nt=(0,Or.throwIfFalsy)(Se.getContext("2d")),ye=new ImageData(le,be),ke=void 0,Ee=void 0,mr=void 0,br=void 0;if(ee.startsWith("#"))ke=parseInt(ee.substr(1,2),16),Ee=parseInt(ee.substr(3,2),16),mr=parseInt(ee.substr(5,2),16),br=ee.length>7&&parseInt(ee.substr(7,2),16)||1;else{if(!ee.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+ee+'" when drawing pattern glyph');ke=(ue=ee.substring(5,ee.length-1).split(",").map(function(vi){return parseFloat(vi)}))[0],Ee=ue[1],mr=ue[2],br=ue[3]}for(var we=0;we<be;we++)for(var xe=0;xe<le;xe++)ye.data[4*(we*le+xe)]=ke,ye.data[4*(we*le+xe)+1]=Ee,ye.data[4*(we*le+xe)+2]=mr,ye.data[4*(we*le+xe)+3]=De[we][xe]*(255*br);Nt.putImageData(ye,0,0),ge=(0,Or.throwIfFalsy)(ne.createPattern(Se,null)),oe.set(ee,ge)}ne.fillStyle=ge,ne.fillRect(He,je,Ae,Be)}(U,ve,de,Te,Pe,re),!0;var Ie=e.boxDrawingDefinitions[j];return!!Ie&&(function(ne,De,He,je,Ae,Be){ne.strokeStyle=ne.fillStyle;for(var ue=0,oe=Object.entries(De);ue<oe.length;ue++){var ee=oe[ue],ge=ee[0],le=ee[1];ne.beginPath(),ne.lineWidth=window.devicePixelRatio*Number.parseInt(ge);for(var be=0,Se=(typeof le=="function"?le(.15,.15/Be*Ae):le).split(" ");be<Se.length;be++){var Nt=Se[be],ye=Nt[0],ke=di[ye];if(ke){var Ee=Nt.substring(1).split(",");Ee[0]&&Ee[1]&&ke(ne,pi(Ee,Ae,Be,He,je))}else console.error('Could not find drawing instructions for "'+ye+'"')}ne.stroke(),ne.closePath()}}(U,Ie,de,Te,Pe,re),!0)};var Rr=new Map;function Tr(U,j,de){return de===void 0&&(de=0),Math.max(Math.min(U,j),de)}var di={C:function(U,j){return U.bezierCurveTo(j[0],j[1],j[2],j[3],j[4],j[5])},L:function(U,j){return U.lineTo(j[0],j[1])},M:function(U,j){return U.moveTo(j[0],j[1])}};function pi(U,j,de,Te,Pe){var re=U.map(function(Ie){return parseFloat(Ie)||parseInt(Ie)});if(re.length<2)throw new Error("Too few arguments for instruction");for(var pe=0;pe<re.length;pe+=2)re[pe]*=j,re[pe]!==0&&(re[pe]=Tr(Math.round(re[pe]+.5)-.5,j,0)),re[pe]+=Te;for(var ve=1;ve<re.length;ve+=2)re[ve]*=de,re[ve]!==0&&(re[ve]=Tr(Math.round(re[ve]+.5)-.5,de,0)),re[ve]+=Pe;return re}},3700:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GridCache=void 0;var D=function(){function l(){this.cache=[]}return l.prototype.resize=function(_,f){for(var h=0;h<_;h++){this.cache.length<=h&&this.cache.push([]);for(var y=this.cache[h].length;y<f;y++)this.cache[h].push(void 0);this.cache[h].length=f}this.cache.length=_},l.prototype.clear=function(){for(var _=0;_<this.cache.length;_++)for(var f=0;f<this.cache[_].length;f++)this.cache[_][f]=void 0},l}();e.GridCache=D},5098:function(A,e,D){var l,_=this&&this.__extends||(l=function(o,r){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])},l(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=o}l(o,r),o.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),f=this&&this.__decorate||function(o,r,t,i){var a,c=arguments.length,d=c<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,r,t,i);else for(var g=o.length-1;g>=0;g--)(a=o[g])&&(d=(c<3?a(d):c>3?a(r,t,d):a(r,t))||d);return c>3&&d&&Object.defineProperty(r,t,d),d},h=this&&this.__param||function(o,r){return function(t,i){r(t,i,o)}};Object.defineProperty(e,"__esModule",{value:!0}),e.LinkRenderLayer=void 0;var y=D(1546),v=D(8803),s=D(2040),u=D(2585),p=function(o){function r(t,i,a,c,d,g,S,b){var C=o.call(this,t,"link",i,!0,a,c,S,b)||this;return d.onShowLinkUnderline(function(m){return C._onShowLinkUnderline(m)}),d.onHideLinkUnderline(function(m){return C._onHideLinkUnderline(m)}),g.onShowLinkUnderline(function(m){return C._onShowLinkUnderline(m)}),g.onHideLinkUnderline(function(m){return C._onHideLinkUnderline(m)}),C}return _(r,o),r.prototype.resize=function(t){o.prototype.resize.call(this,t),this._state=void 0},r.prototype.reset=function(){this._clearCurrentLink()},r.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var t=this._state.y2-this._state.y1-1;t>0&&this._clearCells(0,this._state.y1+1,this._state.cols,t),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},r.prototype._onShowLinkUnderline=function(t){if(t.fg===v.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:t.fg&&(0,s.is256Color)(t.fg)?this._ctx.fillStyle=this._colors.ansi[t.fg].css:this._ctx.fillStyle=this._colors.foreground.css,t.y1===t.y2)this._fillBottomLineAtCells(t.x1,t.y1,t.x2-t.x1);else{this._fillBottomLineAtCells(t.x1,t.y1,t.cols-t.x1);for(var i=t.y1+1;i<t.y2;i++)this._fillBottomLineAtCells(0,i,t.cols);this._fillBottomLineAtCells(0,t.y2,t.x2)}this._state=t},r.prototype._onHideLinkUnderline=function(t){this._clearCurrentLink()},f([h(6,u.IBufferService),h(7,u.IOptionsService)],r)}(y.BaseRenderLayer);e.LinkRenderLayer=p},3525:function(A,e,D){var l,_=this&&this.__extends||(l=function(d,g){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,b){S.__proto__=b}||function(S,b){for(var C in b)Object.prototype.hasOwnProperty.call(b,C)&&(S[C]=b[C])},l(d,g)},function(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function S(){this.constructor=d}l(d,g),d.prototype=g===null?Object.create(g):(S.prototype=g.prototype,new S)}),f=this&&this.__decorate||function(d,g,S,b){var C,m=arguments.length,x=m<3?g:b===null?b=Object.getOwnPropertyDescriptor(g,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(d,g,S,b);else for(var w=d.length-1;w>=0;w--)(C=d[w])&&(x=(m<3?C(x):m>3?C(g,S,x):C(g,S))||x);return m>3&&x&&Object.defineProperty(g,S,x),x},h=this&&this.__param||function(d,g){return function(S,b){g(S,b,d)}};Object.defineProperty(e,"__esModule",{value:!0}),e.Renderer=void 0;var y=D(9596),v=D(4149),s=D(2512),u=D(5098),p=D(844),o=D(4725),r=D(2585),t=D(1420),i=D(8460),a=1,c=function(d){function g(S,b,C,m,x,w,I,B){var E=d.call(this)||this;E._colors=S,E._screenElement=b,E._bufferService=w,E._charSizeService=I,E._optionsService=B,E._id=a++,E._onRequestRedraw=new i.EventEmitter;var F=E._optionsService.rawOptions.allowTransparency;return E._renderLayers=[x.createInstance(y.TextRenderLayer,E._screenElement,0,E._colors,F,E._id),x.createInstance(v.SelectionRenderLayer,E._screenElement,1,E._colors,E._id),x.createInstance(u.LinkRenderLayer,E._screenElement,2,E._colors,E._id,C,m),x.createInstance(s.CursorRenderLayer,E._screenElement,3,E._colors,E._id,E._onRequestRedraw)],E.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},E._devicePixelRatio=window.devicePixelRatio,E._updateDimensions(),E.onOptionsChanged(),E}return _(g,d),Object.defineProperty(g.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),g.prototype.dispose=function(){for(var S=0,b=this._renderLayers;S<b.length;S++)b[S].dispose();d.prototype.dispose.call(this),(0,t.removeTerminalFromCache)(this._id)},g.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},g.prototype.setColors=function(S){this._colors=S;for(var b=0,C=this._renderLayers;b<C.length;b++){var m=C[b];m.setColors(this._colors),m.reset()}},g.prototype.onResize=function(S,b){this._updateDimensions();for(var C=0,m=this._renderLayers;C<m.length;C++)m[C].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},g.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},g.prototype.onBlur=function(){this._runOperation(function(S){return S.onBlur()})},g.prototype.onFocus=function(){this._runOperation(function(S){return S.onFocus()})},g.prototype.onSelectionChanged=function(S,b,C){C===void 0&&(C=!1),this._runOperation(function(m){return m.onSelectionChanged(S,b,C)})},g.prototype.onCursorMove=function(){this._runOperation(function(S){return S.onCursorMove()})},g.prototype.onOptionsChanged=function(){this._runOperation(function(S){return S.onOptionsChanged()})},g.prototype.clear=function(){this._runOperation(function(S){return S.reset()})},g.prototype._runOperation=function(S){for(var b=0,C=this._renderLayers;b<C.length;b++)S(C[b])},g.prototype.renderRows=function(S,b){for(var C=0,m=this._renderLayers;C<m.length;C++)m[C].onGridChanged(S,b)},g.prototype.clearTextureAtlas=function(){for(var S=0,b=this._renderLayers;S<b.length;S++)b[S].clearTextureAtlas()},g.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},f([h(4,r.IInstantiationService),h(5,r.IBufferService),h(6,o.ICharSizeService),h(7,r.IOptionsService)],g)}(p.Disposable);e.Renderer=c},1752:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throwIfFalsy=void 0,e.throwIfFalsy=function(D){if(!D)throw new Error("value must not be falsy");return D}},4149:function(A,e,D){var l,_=this&&this.__extends||(l=function(u,p){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(o[t]=r[t])},l(u,p)},function(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function o(){this.constructor=u}l(u,p),u.prototype=p===null?Object.create(p):(o.prototype=p.prototype,new o)}),f=this&&this.__decorate||function(u,p,o,r){var t,i=arguments.length,a=i<3?p:r===null?r=Object.getOwnPropertyDescriptor(p,o):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(u,p,o,r);else for(var c=u.length-1;c>=0;c--)(t=u[c])&&(a=(i<3?t(a):i>3?t(p,o,a):t(p,o))||a);return i>3&&a&&Object.defineProperty(p,o,a),a},h=this&&this.__param||function(u,p){return function(o,r){p(o,r,u)}};Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionRenderLayer=void 0;var y=D(1546),v=D(2585),s=function(u){function p(o,r,t,i,a,c){var d=u.call(this,o,"selection",r,!0,t,i,a,c)||this;return d._clearState(),d}return _(p,u),p.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},p.prototype.resize=function(o){u.prototype.resize.call(this,o),this._clearState()},p.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},p.prototype.onSelectionChanged=function(o,r,t){if(this._didStateChange(o,r,t,this._bufferService.buffer.ydisp))if(this._clearAll(),o&&r){var i=o[1]-this._bufferService.buffer.ydisp,a=r[1]-this._bufferService.buffer.ydisp,c=Math.max(i,0),d=Math.min(a,this._bufferService.rows-1);if(c>=this._bufferService.rows||d<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,t){var g=o[0],S=r[0]-g,b=d-c+1;this._fillCells(g,c,S,b)}else{g=i===c?o[0]:0;var C=c===a?r[0]:this._bufferService.cols;this._fillCells(g,c,C-g,1);var m=Math.max(d-c-1,0);if(this._fillCells(0,c+1,this._bufferService.cols,m),c!==d){var x=a===d?r[0]:this._bufferService.cols;this._fillCells(0,d,x,1)}}this._state.start=[o[0],o[1]],this._state.end=[r[0],r[1]],this._state.columnSelectMode=t,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},p.prototype._didStateChange=function(o,r,t,i){return!this._areCoordinatesEqual(o,this._state.start)||!this._areCoordinatesEqual(r,this._state.end)||t!==this._state.columnSelectMode||i!==this._state.ydisp},p.prototype._areCoordinatesEqual=function(o,r){return!(!o||!r)&&o[0]===r[0]&&o[1]===r[1]},f([h(4,v.IBufferService),h(5,v.IOptionsService)],p)}(y.BaseRenderLayer);e.SelectionRenderLayer=s},9596:function(A,e,D){var l,_=this&&this.__extends||(l=function(a,c){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var S in g)Object.prototype.hasOwnProperty.call(g,S)&&(d[S]=g[S])},l(a,c)},function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=a}l(a,c),a.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}),f=this&&this.__decorate||function(a,c,d,g){var S,b=arguments.length,C=b<3?c:g===null?g=Object.getOwnPropertyDescriptor(c,d):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(a,c,d,g);else for(var m=a.length-1;m>=0;m--)(S=a[m])&&(C=(b<3?S(C):b>3?S(c,d,C):S(c,d))||C);return b>3&&C&&Object.defineProperty(c,d,C),C},h=this&&this.__param||function(a,c){return function(d,g){c(d,g,a)}};Object.defineProperty(e,"__esModule",{value:!0}),e.TextRenderLayer=void 0;var y=D(3700),v=D(1546),s=D(3734),u=D(643),p=D(511),o=D(2585),r=D(4725),t=D(4269),i=function(a){function c(d,g,S,b,C,m,x,w){var I=a.call(this,d,"text",g,b,S,C,m,x)||this;return I._characterJoinerService=w,I._characterWidth=0,I._characterFont="",I._characterOverlapCache={},I._workCell=new p.CellData,I._state=new y.GridCache,I}return _(c,a),c.prototype.resize=function(d){a.prototype.resize.call(this,d);var g=this._getFont(!1,!1);this._characterWidth===d.scaledCharWidth&&this._characterFont===g||(this._characterWidth=d.scaledCharWidth,this._characterFont=g,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},c.prototype.reset=function(){this._state.clear(),this._clearAll()},c.prototype._forEachCell=function(d,g,S){for(var b=d;b<=g;b++)for(var C=b+this._bufferService.buffer.ydisp,m=this._bufferService.buffer.lines.get(C),x=this._characterJoinerService.getJoinedCharacters(C),w=0;w<this._bufferService.cols;w++){m.loadCell(w,this._workCell);var I=this._workCell,B=!1,E=w;if(I.getWidth()!==0){if(x.length>0&&w===x[0][0]){B=!0;var F=x.shift();I=new t.JoinedCellData(this._workCell,m.translateToString(!0,F[0],F[1]),F[1]-F[0]),E=F[1]-1}!B&&this._isOverlapping(I)&&E<m.length-1&&m.getCodePoint(E+1)===u.NULL_CELL_CODE&&(I.content&=-12582913,I.content|=2<<22),S(I,w,b),w=E}}},c.prototype._drawBackground=function(d,g){var S=this,b=this._ctx,C=this._bufferService.cols,m=0,x=0,w=null;b.save(),this._forEachCell(d,g,function(I,B,E){var F=null;I.isInverse()?F=I.isFgDefault()?S._colors.foreground.css:I.isFgRGB()?"rgb("+s.AttributeData.toColorRGB(I.getFgColor()).join(",")+")":S._colors.ansi[I.getFgColor()].css:I.isBgRGB()?F="rgb("+s.AttributeData.toColorRGB(I.getBgColor()).join(",")+")":I.isBgPalette()&&(F=S._colors.ansi[I.getBgColor()].css),w===null&&(m=B,x=E),E!==x?(b.fillStyle=w||"",S._fillCells(m,x,C-m,1),m=B,x=E):w!==F&&(b.fillStyle=w||"",S._fillCells(m,x,B-m,1),m=B,x=E),w=F}),w!==null&&(b.fillStyle=w,this._fillCells(m,x,C-m,1)),b.restore()},c.prototype._drawForeground=function(d,g){var S=this;this._forEachCell(d,g,function(b,C,m){if(!b.isInvisible()&&(S._drawChars(b,C,m),b.isUnderline()||b.isStrikethrough())){if(S._ctx.save(),b.isInverse())if(b.isBgDefault())S._ctx.fillStyle=S._colors.background.css;else if(b.isBgRGB())S._ctx.fillStyle="rgb("+s.AttributeData.toColorRGB(b.getBgColor()).join(",")+")";else{var x=b.getBgColor();S._optionsService.rawOptions.drawBoldTextInBrightColors&&b.isBold()&&x<8&&(x+=8),S._ctx.fillStyle=S._colors.ansi[x].css}else if(b.isFgDefault())S._ctx.fillStyle=S._colors.foreground.css;else if(b.isFgRGB())S._ctx.fillStyle="rgb("+s.AttributeData.toColorRGB(b.getFgColor()).join(",")+")";else{var w=b.getFgColor();S._optionsService.rawOptions.drawBoldTextInBrightColors&&b.isBold()&&w<8&&(w+=8),S._ctx.fillStyle=S._colors.ansi[w].css}b.isStrikethrough()&&S._fillMiddleLineAtCells(C,m,b.getWidth()),b.isUnderline()&&S._fillBottomLineAtCells(C,m,b.getWidth()),S._ctx.restore()}})},c.prototype.onGridChanged=function(d,g){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,d,this._bufferService.cols,g-d+1),this._drawBackground(d,g),this._drawForeground(d,g))},c.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},c.prototype._isOverlapping=function(d){if(d.getWidth()!==1||d.getCode()<256)return!1;var g=d.getChars();if(this._characterOverlapCache.hasOwnProperty(g))return this._characterOverlapCache[g];this._ctx.save(),this._ctx.font=this._characterFont;var S=Math.floor(this._ctx.measureText(g).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[g]=S,S},f([h(5,o.IBufferService),h(6,o.IOptionsService),h(7,r.ICharacterJoinerService)],c)}(v.BaseRenderLayer);e.TextRenderLayer=i},9616:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseCharAtlas=void 0;var D=function(){function l(){this._didWarmUp=!1}return l.prototype.dispose=function(){},l.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},l.prototype._doWarmUp=function(){},l.prototype.clear=function(){},l.prototype.beginFrame=function(){},l}();e.BaseCharAtlas=D},1420:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeTerminalFromCache=e.acquireCharAtlas=void 0;var l=D(2040),_=D(1906),f=[];e.acquireCharAtlas=function(h,y,v,s,u){for(var p=(0,l.generateConfig)(s,u,h,v),o=0;o<f.length;o++){var r=(t=f[o]).ownedBy.indexOf(y);if(r>=0){if((0,l.configEquals)(t.config,p))return t.atlas;t.ownedBy.length===1?(t.atlas.dispose(),f.splice(o,1)):t.ownedBy.splice(r,1);break}}for(o=0;o<f.length;o++){var t=f[o];if((0,l.configEquals)(t.config,p))return t.ownedBy.push(y),t.atlas}var i={atlas:new _.DynamicCharAtlas(document,p),config:p,ownedBy:[y]};return f.push(i),i.atlas},e.removeTerminalFromCache=function(h){for(var y=0;y<f.length;y++){var v=f[y].ownedBy.indexOf(h);if(v!==-1){f[y].ownedBy.length===1?(f[y].atlas.dispose(),f.splice(y,1)):f[y].ownedBy.splice(v,1);break}}}},2040:function(A,e,D){var l=this&&this.__spreadArray||function(f,h,y){if(y||arguments.length===2)for(var v,s=0,u=h.length;s<u;s++)!v&&s in h||(v||(v=Array.prototype.slice.call(h,0,s)),v[s]=h[s]);return f.concat(v||Array.prototype.slice.call(h))};Object.defineProperty(e,"__esModule",{value:!0}),e.is256Color=e.configEquals=e.generateConfig=void 0;var _=D(643);e.generateConfig=function(f,h,y,v){var s={foreground:v.foreground,background:v.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:l([],v.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:f,scaledCharHeight:h,fontFamily:y.fontFamily,fontSize:y.fontSize,fontWeight:y.fontWeight,fontWeightBold:y.fontWeightBold,allowTransparency:y.allowTransparency,colors:s}},e.configEquals=function(f,h){for(var y=0;y<f.colors.ansi.length;y++)if(f.colors.ansi[y].rgba!==h.colors.ansi[y].rgba)return!1;return f.devicePixelRatio===h.devicePixelRatio&&f.fontFamily===h.fontFamily&&f.fontSize===h.fontSize&&f.fontWeight===h.fontWeight&&f.fontWeightBold===h.fontWeightBold&&f.allowTransparency===h.allowTransparency&&f.scaledCharWidth===h.scaledCharWidth&&f.scaledCharHeight===h.scaledCharHeight&&f.colors.foreground===h.colors.foreground&&f.colors.background===h.colors.background},e.is256Color=function(f){return f<_.DEFAULT_COLOR}},8803:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CHAR_ATLAS_CELL_SPACING=e.TEXT_BASELINE=e.DIM_OPACITY=e.INVERTED_DEFAULT_COLOR=void 0;var l=D(6114);e.INVERTED_DEFAULT_COLOR=257,e.DIM_OPACITY=.5,e.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic",e.CHAR_ATLAS_CELL_SPACING=1},1906:function(A,e,D){var l,_=this&&this.__extends||(l=function(g,S){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,C){b.__proto__=C}||function(b,C){for(var m in C)Object.prototype.hasOwnProperty.call(C,m)&&(b[m]=C[m])},l(g,S)},function(g,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function b(){this.constructor=g}l(g,S),g.prototype=S===null?Object.create(S):(b.prototype=S.prototype,new b)});Object.defineProperty(e,"__esModule",{value:!0}),e.NoneCharAtlas=e.DynamicCharAtlas=e.getGlyphCacheKey=void 0;var f=D(8803),h=D(9616),y=D(5680),v=D(7001),s=D(6114),u=D(1752),p=D(4774),o=1024,r=1024,t={css:"rgba(0, 0, 0, 0)",rgba:0};function i(g){return g.code<<21|g.bg<<12|g.fg<<3|(g.bold?0:4)+(g.dim?0:2)+(g.italic?0:1)}e.getGlyphCacheKey=i;var a=function(g){function S(b,C){var m=g.call(this)||this;m._config=C,m._drawToCacheCount=0,m._glyphsWaitingOnBitmap=[],m._bitmapCommitTimeout=null,m._bitmap=null,m._cacheCanvas=b.createElement("canvas"),m._cacheCanvas.width=o,m._cacheCanvas.height=r,m._cacheCtx=(0,u.throwIfFalsy)(m._cacheCanvas.getContext("2d",{alpha:!0}));var x=b.createElement("canvas");x.width=m._config.scaledCharWidth,x.height=m._config.scaledCharHeight,m._tmpCtx=(0,u.throwIfFalsy)(x.getContext("2d",{alpha:m._config.allowTransparency})),m._width=Math.floor(o/m._config.scaledCharWidth),m._height=Math.floor(r/m._config.scaledCharHeight);var w=m._width*m._height;return m._cacheMap=new v.LRUMap(w),m._cacheMap.prealloc(w),m}return _(S,g),S.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},S.prototype.beginFrame=function(){this._drawToCacheCount=0},S.prototype.clear=function(){if(this._cacheMap.size>0){var b=this._width*this._height;this._cacheMap=new v.LRUMap(b),this._cacheMap.prealloc(b)}this._cacheCtx.clearRect(0,0,o,r),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},S.prototype.draw=function(b,C,m,x){if(C.code===32)return!0;if(!this._canCache(C))return!1;var w=i(C),I=this._cacheMap.get(w);if(I!=null)return this._drawFromCache(b,I,m,x),!0;if(this._drawToCacheCount<100){var B;B=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var E=this._drawToCache(C,B);return this._cacheMap.set(w,E),this._drawFromCache(b,E,m,x),!0}return!1},S.prototype._canCache=function(b){return b.code<256},S.prototype._toCoordinateX=function(b){return b%this._width*this._config.scaledCharWidth},S.prototype._toCoordinateY=function(b){return Math.floor(b/this._width)*this._config.scaledCharHeight},S.prototype._drawFromCache=function(b,C,m,x){if(!C.isEmpty){var w=this._toCoordinateX(C.index),I=this._toCoordinateY(C.index);b.drawImage(C.inBitmap?this._bitmap:this._cacheCanvas,w,I,this._config.scaledCharWidth,this._config.scaledCharHeight,m,x,this._config.scaledCharWidth,this._config.scaledCharHeight)}},S.prototype._getColorFromAnsiIndex=function(b){return b<this._config.colors.ansi.length?this._config.colors.ansi[b]:y.DEFAULT_ANSI_COLORS[b]},S.prototype._getBackgroundColor=function(b){return this._config.allowTransparency?t:b.bg===f.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:b.bg<256?this._getColorFromAnsiIndex(b.bg):this._config.colors.background},S.prototype._getForegroundColor=function(b){return b.fg===f.INVERTED_DEFAULT_COLOR?p.color.opaque(this._config.colors.background):b.fg<256?this._getColorFromAnsiIndex(b.fg):this._config.colors.foreground},S.prototype._drawToCache=function(b,C){this._drawToCacheCount++,this._tmpCtx.save();var m=this._getBackgroundColor(b);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=m.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var x=b.bold?this._config.fontWeightBold:this._config.fontWeight,w=b.italic?"italic":"";this._tmpCtx.font=w+" "+x+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=f.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(b).css,b.dim&&(this._tmpCtx.globalAlpha=f.DIM_OPACITY),this._tmpCtx.fillText(b.chars,0,this._config.scaledCharHeight);var I=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),B=!1;if(this._config.allowTransparency||(B=d(I,m)),B&&b.chars==="_"&&!this._config.allowTransparency)for(var E=1;E<=5&&(this._tmpCtx.fillText(b.chars,0,this._config.scaledCharHeight-E),B=d(I=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),m));E++);this._tmpCtx.restore();var F=this._toCoordinateX(C),T=this._toCoordinateY(C);this._cacheCtx.putImageData(I,F,T);var H={index:C,isEmpty:B,inBitmap:!1};return this._addGlyphToBitmap(H),H},S.prototype._addGlyphToBitmap=function(b){var C=this;!("createImageBitmap"in window)||s.isFirefox||s.isSafari||(this._glyphsWaitingOnBitmap.push(b),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return C._generateBitmap()},100)))},S.prototype._generateBitmap=function(){var b=this,C=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(m){b._bitmap=m;for(var x=0;x<C.length;x++)C[x].inBitmap=!0}),this._bitmapCommitTimeout=null},S}(h.BaseCharAtlas);e.DynamicCharAtlas=a;var c=function(g){function S(b,C){return g.call(this)||this}return _(S,g),S.prototype.draw=function(b,C,m,x){return!1},S}(h.BaseCharAtlas);function d(g,S){for(var b=!0,C=S.rgba>>>24,m=S.rgba>>>16&255,x=S.rgba>>>8&255,w=0;w<g.data.length;w+=4)g.data[w]===C&&g.data[w+1]===m&&g.data[w+2]===x?g.data[w+3]=0:b=!1;return b}e.NoneCharAtlas=c},7001:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LRUMap=void 0;var D=function(){function l(_){this.capacity=_,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return l.prototype._unlinkNode=function(_){var f=_.prev,h=_.next;_===this._head&&(this._head=h),_===this._tail&&(this._tail=f),f!==null&&(f.next=h),h!==null&&(h.prev=f)},l.prototype._appendNode=function(_){var f=this._tail;f!==null&&(f.next=_),_.prev=f,_.next=null,this._tail=_,this._head===null&&(this._head=_)},l.prototype.prealloc=function(_){for(var f=this._nodePool,h=0;h<_;h++)f.push({prev:null,next:null,key:null,value:null})},l.prototype.get=function(_){var f=this._map[_];return f!==void 0?(this._unlinkNode(f),this._appendNode(f),f.value):null},l.prototype.peekValue=function(_){var f=this._map[_];return f!==void 0?f.value:null},l.prototype.peek=function(){var _=this._head;return _===null?null:_.value},l.prototype.set=function(_,f){var h=this._map[_];if(h!==void 0)h=this._map[_],this._unlinkNode(h),h.value=f;else if(this.size>=this.capacity)h=this._head,this._unlinkNode(h),delete this._map[h.key],h.key=_,h.value=f,this._map[_]=h;else{var y=this._nodePool;y.length>0?((h=y.pop()).key=_,h.value=f):h={prev:null,next:null,key:_,value:f},this._map[_]=h,this.size++}this._appendNode(h)},l}();e.LRUMap=D},1296:function(A,e,D){var l,_=this&&this.__extends||(l=function(b,C){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,x){m.__proto__=x}||function(m,x){for(var w in x)Object.prototype.hasOwnProperty.call(x,w)&&(m[w]=x[w])},l(b,C)},function(b,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function m(){this.constructor=b}l(b,C),b.prototype=C===null?Object.create(C):(m.prototype=C.prototype,new m)}),f=this&&this.__decorate||function(b,C,m,x){var w,I=arguments.length,B=I<3?C:x===null?x=Object.getOwnPropertyDescriptor(C,m):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(b,C,m,x);else for(var E=b.length-1;E>=0;E--)(w=b[E])&&(B=(I<3?w(B):I>3?w(C,m,B):w(C,m))||B);return I>3&&B&&Object.defineProperty(C,m,B),B},h=this&&this.__param||function(b,C){return function(m,x){C(m,x,b)}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomRenderer=void 0;var y=D(3787),v=D(8803),s=D(844),u=D(4725),p=D(2585),o=D(8460),r=D(4774),t=D(9631),i="xterm-dom-renderer-owner-",a="xterm-fg-",c="xterm-bg-",d="xterm-focus",g=1,S=function(b){function C(m,x,w,I,B,E,F,T,H,N){var z=b.call(this)||this;return z._colors=m,z._element=x,z._screenElement=w,z._viewportElement=I,z._linkifier=B,z._linkifier2=E,z._charSizeService=T,z._optionsService=H,z._bufferService=N,z._terminalClass=g++,z._rowElements=[],z._rowContainer=document.createElement("div"),z._rowContainer.classList.add("xterm-rows"),z._rowContainer.style.lineHeight="normal",z._rowContainer.setAttribute("aria-hidden","true"),z._refreshRowElements(z._bufferService.cols,z._bufferService.rows),z._selectionContainer=document.createElement("div"),z._selectionContainer.classList.add("xterm-selection"),z._selectionContainer.setAttribute("aria-hidden","true"),z.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},z._updateDimensions(),z._injectCss(),z._rowFactory=F.createInstance(y.DomRendererRowFactory,document,z._colors),z._element.classList.add(i+z._terminalClass),z._screenElement.appendChild(z._rowContainer),z._screenElement.appendChild(z._selectionContainer),z._linkifier.onShowLinkUnderline(function(Z){return z._onLinkHover(Z)}),z._linkifier.onHideLinkUnderline(function(Z){return z._onLinkLeave(Z)}),z._linkifier2.onShowLinkUnderline(function(Z){return z._onLinkHover(Z)}),z._linkifier2.onHideLinkUnderline(function(Z){return z._onLinkLeave(Z)}),z}return _(C,b),Object.defineProperty(C.prototype,"onRequestRedraw",{get:function(){return new o.EventEmitter().event},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){this._element.classList.remove(i+this._terminalClass),(0,t.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),b.prototype.dispose.call(this)},C.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var m=0,x=this._rowElements;m<x.length;m++){var w=x[m];w.style.width=this.dimensions.canvasWidth+"px",w.style.height=this.dimensions.actualCellHeight+"px",w.style.lineHeight=this.dimensions.actualCellHeight+"px",w.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var I=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=I,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},C.prototype.setColors=function(m){this._colors=m,this._injectCss()},C.prototype._injectCss=function(){var m=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var x=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";x+=this._terminalSelector+" span:not(."+y.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+y.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+y.ITALIC_CLASS+" { font-style: italic;}",x+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",x+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",x+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_BLINK_CLASS+":not(."+y.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_BLINK_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",x+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(w,I){x+=m._terminalSelector+" ."+a+I+" { color: "+w.css+"; }"+m._terminalSelector+" ."+c+I+" { background-color: "+w.css+"; }"}),x+=this._terminalSelector+" ."+a+v.INVERTED_DEFAULT_COLOR+" { color: "+r.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+c+v.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=x},C.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},C.prototype._refreshRowElements=function(m,x){for(var w=this._rowElements.length;w<=x;w++){var I=document.createElement("div");this._rowContainer.appendChild(I),this._rowElements.push(I)}for(;this._rowElements.length>x;)this._rowContainer.removeChild(this._rowElements.pop())},C.prototype.onResize=function(m,x){this._refreshRowElements(m,x),this._updateDimensions()},C.prototype.onCharSizeChanged=function(){this._updateDimensions()},C.prototype.onBlur=function(){this._rowContainer.classList.remove(d)},C.prototype.onFocus=function(){this._rowContainer.classList.add(d)},C.prototype.onSelectionChanged=function(m,x,w){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(m&&x){var I=m[1]-this._bufferService.buffer.ydisp,B=x[1]-this._bufferService.buffer.ydisp,E=Math.max(I,0),F=Math.min(B,this._bufferService.rows-1);if(!(E>=this._bufferService.rows||F<0)){var T=document.createDocumentFragment();if(w)T.appendChild(this._createSelectionElement(E,m[0],x[0],F-E+1));else{var H=I===E?m[0]:0,N=E===B?x[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(E,H,N));var z=F-E-1;if(T.appendChild(this._createSelectionElement(E+1,0,this._bufferService.cols,z)),E!==F){var Z=B===F?x[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(F,0,Z))}}this._selectionContainer.appendChild(T)}}},C.prototype._createSelectionElement=function(m,x,w,I){I===void 0&&(I=1);var B=document.createElement("div");return B.style.height=I*this.dimensions.actualCellHeight+"px",B.style.top=m*this.dimensions.actualCellHeight+"px",B.style.left=x*this.dimensions.actualCellWidth+"px",B.style.width=this.dimensions.actualCellWidth*(w-x)+"px",B},C.prototype.onCursorMove=function(){},C.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},C.prototype.clear=function(){for(var m=0,x=this._rowElements;m<x.length;m++)x[m].innerText=""},C.prototype.renderRows=function(m,x){for(var w=this._bufferService.buffer.ybase+this._bufferService.buffer.y,I=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),B=this._optionsService.rawOptions.cursorBlink,E=m;E<=x;E++){var F=this._rowElements[E];F.innerText="";var T=E+this._bufferService.buffer.ydisp,H=this._bufferService.buffer.lines.get(T),N=this._optionsService.rawOptions.cursorStyle;F.appendChild(this._rowFactory.createRow(H,T,T===w,N,I,B,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(C.prototype,"_terminalSelector",{get:function(){return"."+i+this._terminalClass},enumerable:!1,configurable:!0}),C.prototype._onLinkHover=function(m){this._setCellUnderline(m.x1,m.x2,m.y1,m.y2,m.cols,!0)},C.prototype._onLinkLeave=function(m){this._setCellUnderline(m.x1,m.x2,m.y1,m.y2,m.cols,!1)},C.prototype._setCellUnderline=function(m,x,w,I,B,E){for(;m!==x||w!==I;){var F=this._rowElements[w];if(!F)return;var T=F.children[m];T&&(T.style.textDecoration=E?"underline":"none"),++m>=B&&(m=0,w++)}},f([h(6,p.IInstantiationService),h(7,u.ICharSizeService),h(8,p.IOptionsService),h(9,p.IBufferService)],C)}(s.Disposable);e.DomRenderer=S},3787:function(A,e,D){var l=this&&this.__decorate||function(t,i,a,c){var d,g=arguments.length,S=g<3?i:c===null?c=Object.getOwnPropertyDescriptor(i,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(t,i,a,c);else for(var b=t.length-1;b>=0;b--)(d=t[b])&&(S=(g<3?d(S):g>3?d(i,a,S):d(i,a))||S);return g>3&&S&&Object.defineProperty(i,a,S),S},_=this&&this.__param||function(t,i){return function(a,c){i(a,c,t)}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomRendererRowFactory=e.CURSOR_STYLE_UNDERLINE_CLASS=e.CURSOR_STYLE_BAR_CLASS=e.CURSOR_STYLE_BLOCK_CLASS=e.CURSOR_BLINK_CLASS=e.CURSOR_CLASS=e.STRIKETHROUGH_CLASS=e.UNDERLINE_CLASS=e.ITALIC_CLASS=e.DIM_CLASS=e.BOLD_CLASS=void 0;var f=D(8803),h=D(643),y=D(511),v=D(2585),s=D(4774),u=D(4725),p=D(4269);e.BOLD_CLASS="xterm-bold",e.DIM_CLASS="xterm-dim",e.ITALIC_CLASS="xterm-italic",e.UNDERLINE_CLASS="xterm-underline",e.STRIKETHROUGH_CLASS="xterm-strikethrough",e.CURSOR_CLASS="xterm-cursor",e.CURSOR_BLINK_CLASS="xterm-cursor-blink",e.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",e.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",e.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var o=function(){function t(i,a,c,d,g){this._document=i,this._colors=a,this._characterJoinerService=c,this._optionsService=d,this._coreService=g,this._workCell=new y.CellData}return t.prototype.setColors=function(i){this._colors=i},t.prototype.createRow=function(i,a,c,d,g,S,b,C){for(var m=this._document.createDocumentFragment(),x=this._characterJoinerService.getJoinedCharacters(a),w=0,I=Math.min(i.length,C)-1;I>=0;I--)if(i.loadCell(I,this._workCell).getCode()!==h.NULL_CELL_CODE||c&&I===g){w=I+1;break}for(I=0;I<w;I++){i.loadCell(I,this._workCell);var B=this._workCell.getWidth();if(B!==0){var E=!1,F=I,T=this._workCell;if(x.length>0&&I===x[0][0]){E=!0;var H=x.shift();T=new p.JoinedCellData(this._workCell,i.translateToString(!0,H[0],H[1]),H[1]-H[0]),F=H[1]-1,B=T.getWidth()}var N=this._document.createElement("span");if(B>1&&(N.style.width=b*B+"px"),E&&(N.style.display="inline",g>=I&&g<=F&&(g=I)),!this._coreService.isCursorHidden&&c&&I===g)switch(N.classList.add(e.CURSOR_CLASS),S&&N.classList.add(e.CURSOR_BLINK_CLASS),d){case"bar":N.classList.add(e.CURSOR_STYLE_BAR_CLASS);break;case"underline":N.classList.add(e.CURSOR_STYLE_UNDERLINE_CLASS);break;default:N.classList.add(e.CURSOR_STYLE_BLOCK_CLASS)}T.isBold()&&N.classList.add(e.BOLD_CLASS),T.isItalic()&&N.classList.add(e.ITALIC_CLASS),T.isDim()&&N.classList.add(e.DIM_CLASS),T.isUnderline()&&N.classList.add(e.UNDERLINE_CLASS),T.isInvisible()?N.textContent=h.WHITESPACE_CELL_CHAR:N.textContent=T.getChars()||h.WHITESPACE_CELL_CHAR,T.isStrikethrough()&&N.classList.add(e.STRIKETHROUGH_CLASS);var z=T.getFgColor(),Z=T.getFgColorMode(),X=T.getBgColor(),J=T.getBgColorMode(),L=!!T.isInverse();if(L){var q=z;z=X,X=q;var O=Z;Z=J,J=O}switch(Z){case 16777216:case 33554432:T.isBold()&&z<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(z+=8),this._applyMinimumContrast(N,this._colors.background,this._colors.ansi[z])||N.classList.add("xterm-fg-"+z);break;case 50331648:var R=s.rgba.toColor(z>>16&255,z>>8&255,255&z);this._applyMinimumContrast(N,this._colors.background,R)||this._addStyle(N,"color:#"+r(z.toString(16),"0",6));break;default:this._applyMinimumContrast(N,this._colors.background,this._colors.foreground)||L&&N.classList.add("xterm-fg-"+f.INVERTED_DEFAULT_COLOR)}switch(J){case 16777216:case 33554432:N.classList.add("xterm-bg-"+X);break;case 50331648:this._addStyle(N,"background-color:#"+r(X.toString(16),"0",6));break;default:L&&N.classList.add("xterm-bg-"+f.INVERTED_DEFAULT_COLOR)}m.appendChild(N),I=F}}return m},t.prototype._applyMinimumContrast=function(i,a,c){if(this._optionsService.rawOptions.minimumContrastRatio===1)return!1;var d=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return d===void 0&&(d=s.color.ensureContrastRatio(a,c,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,d??null)),!!d&&(this._addStyle(i,"color:"+d.css),!0)},t.prototype._addStyle=function(i,a){i.setAttribute("style",""+(i.getAttribute("style")||"")+a+";")},l([_(2,u.ICharacterJoinerService),_(3,v.IOptionsService),_(4,v.ICoreService)],t)}();function r(t,i,a){for(;t.length<a;)t=i+t;return t}e.DomRendererRowFactory=o},456:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionModel=void 0;var D=function(){function l(_){this._bufferService=_,this.isSelectAllActive=!1,this.selectionStartLength=0}return l.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(l.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var _=this.selectionStart[0]+this.selectionStartLength;return _>this._bufferService.cols?_%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)-1]:[_%this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)]:[_,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),l.prototype.areSelectionValuesReversed=function(){var _=this.selectionStart,f=this.selectionEnd;return!(!_||!f)&&(_[1]>f[1]||_[1]===f[1]&&_[0]>f[0])},l.prototype.onTrim=function(_){return this.selectionStart&&(this.selectionStart[1]-=_),this.selectionEnd&&(this.selectionEnd[1]-=_),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},l}();e.SelectionModel=D},428:function(A,e,D){var l=this&&this.__decorate||function(s,u,p,o){var r,t=arguments.length,i=t<3?u:o===null?o=Object.getOwnPropertyDescriptor(u,p):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(s,u,p,o);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(i=(t<3?r(i):t>3?r(u,p,i):r(u,p))||i);return t>3&&i&&Object.defineProperty(u,p,i),i},_=this&&this.__param||function(s,u){return function(p,o){u(p,o,s)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CharSizeService=void 0;var f=D(2585),h=D(8460),y=function(){function s(u,p,o){this._optionsService=o,this.width=0,this.height=0,this._onCharSizeChange=new h.EventEmitter,this._measureStrategy=new v(u,p,this._optionsService)}return Object.defineProperty(s.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),s.prototype.measure=function(){var u=this._measureStrategy.measure();u.width===this.width&&u.height===this.height||(this.width=u.width,this.height=u.height,this._onCharSizeChange.fire())},l([_(2,f.IOptionsService)],s)}();e.CharSizeService=y;var v=function(){function s(u,p,o){this._document=u,this._parentElement=p,this._optionsService=o,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return s.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var u=this._measureElement.getBoundingClientRect();return u.width!==0&&u.height!==0&&(this._result.width=u.width,this._result.height=Math.ceil(u.height)),this._result},s}()},4269:function(A,e,D){var l,_=this&&this.__extends||(l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},l(r,t)},function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=r}l(r,t),r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}),f=this&&this.__decorate||function(r,t,i,a){var c,d=arguments.length,g=d<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,i):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(r,t,i,a);else for(var S=r.length-1;S>=0;S--)(c=r[S])&&(g=(d<3?c(g):d>3?c(t,i,g):c(t,i))||g);return d>3&&g&&Object.defineProperty(t,i,g),g},h=this&&this.__param||function(r,t){return function(i,a){t(i,a,r)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterJoinerService=e.JoinedCellData=void 0;var y=D(3734),v=D(643),s=D(511),u=D(2585),p=function(r){function t(i,a,c){var d=r.call(this)||this;return d.content=0,d.combinedData="",d.fg=i.fg,d.bg=i.bg,d.combinedData=a,d._width=c,d}return _(t,r),t.prototype.isCombined=function(){return 2097152},t.prototype.getWidth=function(){return this._width},t.prototype.getChars=function(){return this.combinedData},t.prototype.getCode=function(){return 2097151},t.prototype.setFromCharData=function(i){throw new Error("not implemented")},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(y.AttributeData);e.JoinedCellData=p;var o=function(){function r(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new s.CellData}return r.prototype.register=function(t){var i={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(i),i.id},r.prototype.deregister=function(t){for(var i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===t)return this._characterJoiners.splice(i,1),!0;return!1},r.prototype.getJoinedCharacters=function(t){if(this._characterJoiners.length===0)return[];var i=this._bufferService.buffer.lines.get(t);if(!i||i.length===0)return[];for(var a=[],c=i.translateToString(!0),d=0,g=0,S=0,b=i.getFg(0),C=i.getBg(0),m=0;m<i.getTrimmedLength();m++)if(i.loadCell(m,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==C){if(m-d>1)for(var x=this._getJoinedRanges(c,S,g,i,d),w=0;w<x.length;w++)a.push(x[w]);d=m,S=g,b=this._workCell.fg,C=this._workCell.bg}g+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-d>1)for(x=this._getJoinedRanges(c,S,g,i,d),w=0;w<x.length;w++)a.push(x[w]);return a},r.prototype._getJoinedRanges=function(t,i,a,c,d){var g=t.substring(i,a),S=[];try{S=this._characterJoiners[0].handler(g)}catch(x){console.error(x)}for(var b=1;b<this._characterJoiners.length;b++)try{for(var C=this._characterJoiners[b].handler(g),m=0;m<C.length;m++)r._mergeRanges(S,C[m])}catch(x){console.error(x)}return this._stringRangesToCellRanges(S,c,d),S},r.prototype._stringRangesToCellRanges=function(t,i,a){var c=0,d=!1,g=0,S=t[c];if(S){for(var b=a;b<this._bufferService.cols;b++){var C=i.getWidth(b),m=i.getString(b).length||v.WHITESPACE_CELL_CHAR.length;if(C!==0){if(!d&&S[0]<=g&&(S[0]=b,d=!0),S[1]<=g){if(S[1]=b,!(S=t[++c]))break;S[0]<=g?(S[0]=b,d=!0):d=!1}g+=m}}S&&(S[1]=this._bufferService.cols)}},r._mergeRanges=function(t,i){for(var a=!1,c=0;c<t.length;c++){var d=t[c];if(a){if(i[1]<=d[0])return t[c-1][1]=i[1],t;if(i[1]<=d[1])return t[c-1][1]=Math.max(i[1],d[1]),t.splice(c,1),t;t.splice(c,1),c--}else{if(i[1]<=d[0])return t.splice(c,0,i),t;if(i[1]<=d[1])return d[0]=Math.min(i[0],d[0]),t;i[0]<d[1]&&(d[0]=Math.min(i[0],d[0]),a=!0)}}return a?t[t.length-1][1]=i[1]:t.push(i),t},r=f([h(0,u.IBufferService)],r)}();e.CharacterJoinerService=o},5114:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoreBrowserService=void 0;var D=function(){function l(_){this._textarea=_}return Object.defineProperty(l.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),l}();e.CoreBrowserService=D},7641:function(A,e,D){var l,_=this&&this.__extends||(l=function(o,r){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])},l(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=o}l(o,r),o.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),f=this&&this.__decorate||function(o,r,t,i){var a,c=arguments.length,d=c<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,r,t,i);else for(var g=o.length-1;g>=0;g--)(a=o[g])&&(d=(c<3?a(d):c>3?a(r,t,d):a(r,t))||d);return c>3&&d&&Object.defineProperty(r,t,d),d},h=this&&this.__param||function(o,r){return function(t,i){r(t,i,o)}};Object.defineProperty(e,"__esModule",{value:!0}),e.Decoration=e.DecorationService=void 0;var y=D(8460),v=D(844),s=D(2585),u=function(o){function r(t){var i=o.call(this)||this;return i._instantiationService=t,i._decorations=[],i}return _(r,o),r.prototype.attachToDom=function(t,i){var a=this;this._renderService=i,this._screenElement=t,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),t.appendChild(this._container),this.register(this._renderService.onRenderedBufferChange(function(){return a.refresh()})),this.register(this._renderService.onDimensionsChange(function(){return a.refresh(!0)}))},r.prototype.registerDecoration=function(t){var i=this;if(!t.marker.isDisposed&&this._container){var a=this._instantiationService.createInstance(p,t,this._container);return this._decorations.push(a),a.onDispose(function(){return i._decorations.splice(i._decorations.indexOf(a),1)}),this._queueRefresh(),a}},r.prototype._queueRefresh=function(){var t=this;this._animationFrame===void 0&&(this._animationFrame=window.requestAnimationFrame(function(){t.refresh(),t._animationFrame=void 0}))},r.prototype.refresh=function(t){if(this._renderService)for(var i=0,a=this._decorations;i<a.length;i++)a[i].render(this._renderService,t)},r.prototype.dispose=function(){for(var t=0,i=this._decorations;t<i.length;t++)i[t].dispose();this._screenElement&&this._container&&this._screenElement.contains(this._container)&&this._screenElement.removeChild(this._container)},f([h(0,s.IInstantiationService)],r)}(v.Disposable);e.DecorationService=u;var p=function(o){function r(t,i,a){var c,d=o.call(this)||this;return d._container=i,d._bufferService=a,d.isDisposed=!1,d._onDispose=new y.EventEmitter,d._onRender=new y.EventEmitter,d.x=(c=t.x)!==null&&c!==void 0?c:0,d._marker=t.marker,d._marker.onDispose(function(){return d.dispose()}),d.anchor=t.anchor||"left",d.width=t.width||1,d.height=t.height||1,d}return _(r,o),Object.defineProperty(r.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"marker",{get:function(){return this._marker},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),r.prototype.render=function(t,i){this._element&&!i||this._createElement(t,i),this._container&&this._element&&!this._container.contains(this._element)&&this._container.append(this._element),this._refreshStyle(t),this._element&&this._onRender.fire(this._element)},r.prototype._createElement=function(t,i){i&&this._element&&this._container.contains(this._element)&&this._container.removeChild(this._element),this._element=document.createElement("div"),this._element.classList.add("xterm-decoration"),this._element.style.width=this.width*t.dimensions.actualCellWidth+"px",this._element.style.height=this.height*t.dimensions.actualCellHeight+"px",this._element.style.top=(this.marker.line-this._bufferService.buffers.active.ydisp)*t.dimensions.actualCellHeight+"px",this._element.style.lineHeight=t.dimensions.actualCellHeight+"px",this.x&&this.x>this._bufferService.cols&&(this._element.style.display="none"),this.anchor==="right"?this._element.style.right=this.x?this.x*t.dimensions.actualCellWidth+"px":"":this._element.style.left=this.x?this.x*t.dimensions.actualCellWidth+"px":""},r.prototype._refreshStyle=function(t){if(this._element){var i=this.marker.line-this._bufferService.buffers.active.ydisp;i<0||i>this._bufferService.rows?this._element.style.display="none":(this._element.style.top=i*t.dimensions.actualCellHeight+"px",this._element.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block")}},r.prototype.dispose=function(){this.isDisposed||(this._element&&this._container.contains(this._element)&&this._container.removeChild(this._element),this.isDisposed=!0,this._onDispose.fire())},f([h(2,s.IBufferService)],r)}(v.Disposable);e.Decoration=p},8934:function(A,e,D){var l=this&&this.__decorate||function(v,s,u,p){var o,r=arguments.length,t=r<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,u):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(v,s,u,p);else for(var i=v.length-1;i>=0;i--)(o=v[i])&&(t=(r<3?o(t):r>3?o(s,u,t):o(s,u))||t);return r>3&&t&&Object.defineProperty(s,u,t),t},_=this&&this.__param||function(v,s){return function(u,p){s(u,p,v)}};Object.defineProperty(e,"__esModule",{value:!0}),e.MouseService=void 0;var f=D(4725),h=D(9806),y=function(){function v(s,u){this._renderService=s,this._charSizeService=u}return v.prototype.getCoords=function(s,u,p,o,r){return(0,h.getCoords)(s,u,p,o,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,r)},v.prototype.getRawByteCoords=function(s,u,p,o){var r=this.getCoords(s,u,p,o);return(0,h.getRawByteCoords)(r)},l([_(0,f.IRenderService),_(1,f.ICharSizeService)],v)}();e.MouseService=y},3230:function(A,e,D){var l,_=this&&this.__extends||(l=function(i,a){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(c[g]=d[g])},l(i,a)},function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function c(){this.constructor=i}l(i,a),i.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}),f=this&&this.__decorate||function(i,a,c,d){var g,S=arguments.length,b=S<3?a:d===null?d=Object.getOwnPropertyDescriptor(a,c):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(i,a,c,d);else for(var C=i.length-1;C>=0;C--)(g=i[C])&&(b=(S<3?g(b):S>3?g(a,c,b):g(a,c))||b);return S>3&&b&&Object.defineProperty(a,c,b),b},h=this&&this.__param||function(i,a){return function(c,d){a(c,d,i)}};Object.defineProperty(e,"__esModule",{value:!0}),e.RenderService=void 0;var y=D(6193),v=D(8460),s=D(844),u=D(5596),p=D(3656),o=D(2585),r=D(4725),t=function(i){function a(c,d,g,S,b,C){var m=i.call(this)||this;if(m._renderer=c,m._rowCount=d,m._charSizeService=b,m._isPaused=!1,m._needsFullRefresh=!1,m._isNextRenderRedrawOnly=!0,m._needsSelectionRefresh=!1,m._canvasWidth=0,m._canvasHeight=0,m._selectionState={start:void 0,end:void 0,columnSelectMode:!1},m._onDimensionsChange=new v.EventEmitter,m._onRender=new v.EventEmitter,m._onRefreshRequest=new v.EventEmitter,m.register({dispose:function(){return m._renderer.dispose()}}),m._renderDebouncer=new y.RenderDebouncer(function(w,I){return m._renderRows(w,I)}),m.register(m._renderDebouncer),m._screenDprMonitor=new u.ScreenDprMonitor,m._screenDprMonitor.setListener(function(){return m.onDevicePixelRatioChange()}),m.register(m._screenDprMonitor),m.register(C.onResize(function(){return m._fullRefresh()})),m.register(C.buffers.onBufferActivate(function(){var w;return(w=m._renderer)===null||w===void 0?void 0:w.clear()})),m.register(S.onOptionChange(function(){return m._renderer.onOptionsChanged()})),m.register(m._charSizeService.onCharSizeChange(function(){return m.onCharSizeChanged()})),m._renderer.onRequestRedraw(function(w){return m.refreshRows(w.start,w.end,!0)}),m.register((0,p.addDisposableDomListener)(window,"resize",function(){return m.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var x=new IntersectionObserver(function(w){return m._onIntersectionChange(w[w.length-1])},{threshold:0});x.observe(g),m.register({dispose:function(){return x.disconnect()}})}return m}return _(a,i),Object.defineProperty(a.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),a.prototype._onIntersectionChange=function(c){this._isPaused=c.isIntersecting===void 0?c.intersectionRatio===0:!c.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},a.prototype.refreshRows=function(c,d,g){g===void 0&&(g=!1),this._isPaused?this._needsFullRefresh=!0:(g||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(c,d,this._rowCount))},a.prototype._renderRows=function(c,d){this._renderer.renderRows(c,d),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:c,end:d}),this._isNextRenderRedrawOnly=!0},a.prototype.resize=function(c,d){this._rowCount=d,this._fireOnCanvasResize()},a.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},a.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},a.prototype.dispose=function(){i.prototype.dispose.call(this)},a.prototype.setRenderer=function(c){var d=this;this._renderer.dispose(),this._renderer=c,this._renderer.onRequestRedraw(function(g){return d.refreshRows(g.start,g.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},a.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},a.prototype.clearTextureAtlas=function(){var c,d;(d=(c=this._renderer)===null||c===void 0?void 0:c.clearTextureAtlas)===null||d===void 0||d.call(c),this._fullRefresh()},a.prototype.setColors=function(c){this._renderer.setColors(c),this._fullRefresh()},a.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},a.prototype.onResize=function(c,d){this._renderer.onResize(c,d),this._fullRefresh()},a.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},a.prototype.onBlur=function(){this._renderer.onBlur()},a.prototype.onFocus=function(){this._renderer.onFocus()},a.prototype.onSelectionChanged=function(c,d,g){this._selectionState.start=c,this._selectionState.end=d,this._selectionState.columnSelectMode=g,this._renderer.onSelectionChanged(c,d,g)},a.prototype.onCursorMove=function(){this._renderer.onCursorMove()},a.prototype.clear=function(){this._renderer.clear()},f([h(3,o.IOptionsService),h(4,r.ICharSizeService),h(5,o.IBufferService)],a)}(s.Disposable);e.RenderService=t},9312:function(A,e,D){var l,_=this&&this.__extends||(l=function(S,b){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,m){C.__proto__=m}||function(C,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(C[x]=m[x])},l(S,b)},function(S,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function C(){this.constructor=S}l(S,b),S.prototype=b===null?Object.create(b):(C.prototype=b.prototype,new C)}),f=this&&this.__decorate||function(S,b,C,m){var x,w=arguments.length,I=w<3?b:m===null?m=Object.getOwnPropertyDescriptor(b,C):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(S,b,C,m);else for(var B=S.length-1;B>=0;B--)(x=S[B])&&(I=(w<3?x(I):w>3?x(b,C,I):x(b,C))||I);return w>3&&I&&Object.defineProperty(b,C,I),I},h=this&&this.__param||function(S,b){return function(C,m){b(C,m,S)}};Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionService=void 0;var y=D(6114),v=D(456),s=D(511),u=D(8460),p=D(4725),o=D(2585),r=D(9806),t=D(9504),i=D(844),a=D(4841),c=String.fromCharCode(160),d=new RegExp(c,"g"),g=function(S){function b(C,m,x,w,I,B,E,F){var T=S.call(this)||this;return T._element=C,T._screenElement=m,T._linkifier=x,T._bufferService=w,T._coreService=I,T._mouseService=B,T._optionsService=E,T._renderService=F,T._dragScrollAmount=0,T._enabled=!0,T._workCell=new s.CellData,T._mouseDownTimeStamp=0,T._oldHasSelection=!1,T._oldSelectionStart=void 0,T._oldSelectionEnd=void 0,T._onLinuxMouseSelection=T.register(new u.EventEmitter),T._onRedrawRequest=T.register(new u.EventEmitter),T._onSelectionChange=T.register(new u.EventEmitter),T._onRequestScrollLines=T.register(new u.EventEmitter),T._mouseMoveListener=function(H){return T._onMouseMove(H)},T._mouseUpListener=function(H){return T._onMouseUp(H)},T._coreService.onUserInput(function(){T.hasSelection&&T.clearSelection()}),T._trimListener=T._bufferService.buffer.lines.onTrim(function(H){return T._onTrim(H)}),T.register(T._bufferService.buffers.onBufferActivate(function(H){return T._onBufferActivate(H)})),T.enable(),T._model=new v.SelectionModel(T._bufferService),T._activeSelectionMode=0,T}return _(b,S),Object.defineProperty(b.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),b.prototype.dispose=function(){this._removeMouseDownListeners()},b.prototype.reset=function(){this.clearSelection()},b.prototype.disable=function(){this.clearSelection(),this._enabled=!1},b.prototype.enable=function(){this._enabled=!0},Object.defineProperty(b.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"hasSelection",{get:function(){var C=this._model.finalSelectionStart,m=this._model.finalSelectionEnd;return!(!C||!m||C[0]===m[0]&&C[1]===m[1])},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"selectionText",{get:function(){var C=this._model.finalSelectionStart,m=this._model.finalSelectionEnd;if(!C||!m)return"";var x=this._bufferService.buffer,w=[];if(this._activeSelectionMode===3){if(C[0]===m[0])return"";for(var I=C[1];I<=m[1];I++){var B=x.translateBufferLineToString(I,!0,C[0],m[0]);w.push(B)}}else{var E=C[1]===m[1]?m[0]:void 0;for(w.push(x.translateBufferLineToString(C[1],!0,C[0],E)),I=C[1]+1;I<=m[1]-1;I++){var F=x.lines.get(I);B=x.translateBufferLineToString(I,!0),F?.isWrapped?w[w.length-1]+=B:w.push(B)}C[1]!==m[1]&&(F=x.lines.get(m[1]),B=x.translateBufferLineToString(m[1],!0,0,m[0]),F&&F.isWrapped?w[w.length-1]+=B:w.push(B))}return w.map(function(T){return T.replace(d," ")}).join(y.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),b.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},b.prototype.refresh=function(C){var m=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return m._refresh()})),y.isLinux&&C&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},b.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},b.prototype._isClickInSelection=function(C){var m=this._getMouseBufferCoords(C),x=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!!(x&&w&&m)&&this._areCoordsInSelection(m,x,w)},b.prototype._areCoordsInSelection=function(C,m,x){return C[1]>m[1]&&C[1]<x[1]||m[1]===x[1]&&C[1]===m[1]&&C[0]>=m[0]&&C[0]<x[0]||m[1]<x[1]&&C[1]===x[1]&&C[0]<x[0]||m[1]<x[1]&&C[1]===m[1]&&C[0]>=m[0]},b.prototype._selectWordAtCursor=function(C,m){var x,w,I=(w=(x=this._linkifier.currentLink)===null||x===void 0?void 0:x.link)===null||w===void 0?void 0:w.range;if(I)return this._model.selectionStart=[I.start.x-1,I.start.y-1],this._model.selectionStartLength=(0,a.getRangeLength)(I,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var B=this._getMouseBufferCoords(C);return!!B&&(this._selectWordAt(B,m),this._model.selectionEnd=void 0,!0)},b.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},b.prototype.selectLines=function(C,m){this._model.clearSelection(),C=Math.max(C,0),m=Math.min(m,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,C],this._model.selectionEnd=[this._bufferService.cols,m],this.refresh(),this._onSelectionChange.fire()},b.prototype._onTrim=function(C){this._model.onTrim(C)&&this.refresh()},b.prototype._getMouseBufferCoords=function(C){var m=this._mouseService.getCoords(C,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(m)return m[0]--,m[1]--,m[1]+=this._bufferService.buffer.ydisp,m},b.prototype._getMouseEventScrollAmount=function(C){var m=(0,r.getCoordsRelativeToElement)(C,this._screenElement)[1],x=this._renderService.dimensions.canvasHeight;return m>=0&&m<=x?0:(m>x&&(m-=x),m=Math.min(Math.max(m,-50),50),(m/=50)/Math.abs(m)+Math.round(14*m))},b.prototype.shouldForceSelection=function(C){return y.isMac?C.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:C.shiftKey},b.prototype.onMouseDown=function(C){if(this._mouseDownTimeStamp=C.timeStamp,(C.button!==2||!this.hasSelection)&&C.button===0){if(!this._enabled){if(!this.shouldForceSelection(C))return;C.stopPropagation()}C.preventDefault(),this._dragScrollAmount=0,this._enabled&&C.shiftKey?this._onIncrementalClick(C):C.detail===1?this._onSingleClick(C):C.detail===2?this._onDoubleClick(C):C.detail===3&&this._onTripleClick(C),this._addMouseDownListeners(),this.refresh(!0)}},b.prototype._addMouseDownListeners=function(){var C=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return C._dragScroll()},50)},b.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},b.prototype._onIncrementalClick=function(C){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(C))},b.prototype._onSingleClick=function(C){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(C)?3:0,this._model.selectionStart=this._getMouseBufferCoords(C),this._model.selectionStart){this._model.selectionEnd=void 0;var m=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);m&&m.length!==this._model.selectionStart[0]&&m.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},b.prototype._onDoubleClick=function(C){this._selectWordAtCursor(C,!0)&&(this._activeSelectionMode=1)},b.prototype._onTripleClick=function(C){var m=this._getMouseBufferCoords(C);m&&(this._activeSelectionMode=2,this._selectLineAt(m[1]))},b.prototype.shouldColumnSelect=function(C){return C.altKey&&!(y.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},b.prototype._onMouseMove=function(C){if(C.stopImmediatePropagation(),this._model.selectionStart){var m=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(C),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(C),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var x=this._bufferService.buffer;if(this._model.selectionEnd[1]<x.lines.length){var w=x.lines.get(this._model.selectionEnd[1]);w&&w.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}m&&m[0]===this._model.selectionEnd[0]&&m[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},b.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var C=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(C.ydisp+this._bufferService.rows,C.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=C.ydisp),this.refresh()}},b.prototype._onMouseUp=function(C){var m=C.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&m<500&&C.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var x=this._mouseService.getCoords(C,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(x&&x[0]!==void 0&&x[1]!==void 0){var w=(0,t.moveToCellSequence)(x[0]-1,x[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(w,!0)}}}else this._fireEventIfSelectionChanged()},b.prototype._fireEventIfSelectionChanged=function(){var C=this._model.finalSelectionStart,m=this._model.finalSelectionEnd,x=!(!C||!m||C[0]===m[0]&&C[1]===m[1]);x?C&&m&&(this._oldSelectionStart&&this._oldSelectionEnd&&C[0]===this._oldSelectionStart[0]&&C[1]===this._oldSelectionStart[1]&&m[0]===this._oldSelectionEnd[0]&&m[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(C,m,x)):this._oldHasSelection&&this._fireOnSelectionChange(C,m,x)},b.prototype._fireOnSelectionChange=function(C,m,x){this._oldSelectionStart=C,this._oldSelectionEnd=m,this._oldHasSelection=x,this._onSelectionChange.fire()},b.prototype._onBufferActivate=function(C){var m=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=C.activeBuffer.lines.onTrim(function(x){return m._onTrim(x)})},b.prototype._convertViewportColToCharacterIndex=function(C,m){for(var x=m[0],w=0;m[0]>=w;w++){var I=C.loadCell(w,this._workCell).getChars().length;this._workCell.getWidth()===0?x--:I>1&&m[0]!==w&&(x+=I-1)}return x},b.prototype.setSelection=function(C,m,x){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[C,m],this._model.selectionStartLength=x,this.refresh()},b.prototype.rightClickSelect=function(C){this._isClickInSelection(C)||(this._selectWordAtCursor(C,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},b.prototype._getWordAt=function(C,m,x,w){if(x===void 0&&(x=!0),w===void 0&&(w=!0),!(C[0]>=this._bufferService.cols)){var I=this._bufferService.buffer,B=I.lines.get(C[1]);if(B){var E=I.translateBufferLineToString(C[1],!1),F=this._convertViewportColToCharacterIndex(B,C),T=F,H=C[0]-F,N=0,z=0,Z=0,X=0;if(E.charAt(F)===" "){for(;F>0&&E.charAt(F-1)===" ";)F--;for(;T<E.length&&E.charAt(T+1)===" ";)T++}else{var J=C[0],L=C[0];B.getWidth(J)===0&&(N++,J--),B.getWidth(L)===2&&(z++,L++);var q=B.getString(L).length;for(q>1&&(X+=q-1,T+=q-1);J>0&&F>0&&!this._isCharWordSeparator(B.loadCell(J-1,this._workCell));){B.loadCell(J-1,this._workCell);var O=this._workCell.getChars().length;this._workCell.getWidth()===0?(N++,J--):O>1&&(Z+=O-1,F-=O-1),F--,J--}for(;L<B.length&&T+1<E.length&&!this._isCharWordSeparator(B.loadCell(L+1,this._workCell));){B.loadCell(L+1,this._workCell);var R=this._workCell.getChars().length;this._workCell.getWidth()===2?(z++,L++):R>1&&(X+=R-1,T+=R-1),T++,L++}}T++;var k=F+H-N+Z,G=Math.min(this._bufferService.cols,T-F+N+z-Z-X);if(m||E.slice(F,T).trim()!==""){if(x&&k===0&&B.getCodePoint(0)!==32){var V=I.lines.get(C[1]-1);if(V&&B.isWrapped&&V.getCodePoint(this._bufferService.cols-1)!==32){var Y=this._getWordAt([this._bufferService.cols-1,C[1]-1],!1,!0,!1);if(Y){var $=this._bufferService.cols-Y.start;k-=$,G+=$}}}if(w&&k+G===this._bufferService.cols&&B.getCodePoint(this._bufferService.cols-1)!==32){var Q=I.lines.get(C[1]+1);if(Q?.isWrapped&&Q.getCodePoint(0)!==32){var ce=this._getWordAt([0,C[1]+1],!1,!1,!0);ce&&(G+=ce.length)}}return{start:k,length:G}}}}},b.prototype._selectWordAt=function(C,m){var x=this._getWordAt(C,m);if(x){for(;x.start<0;)x.start+=this._bufferService.cols,C[1]--;this._model.selectionStart=[x.start,C[1]],this._model.selectionStartLength=x.length}},b.prototype._selectToWordAt=function(C){var m=this._getWordAt(C,!0);if(m){for(var x=C[1];m.start<0;)m.start+=this._bufferService.cols,x--;if(!this._model.areSelectionValuesReversed())for(;m.start+m.length>this._bufferService.cols;)m.length-=this._bufferService.cols,x++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?m.start:m.start+m.length,x]}},b.prototype._isCharWordSeparator=function(C){return C.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(C.getChars())>=0},b.prototype._selectLineAt=function(C){var m=this._bufferService.buffer.getWrappedRangeForLine(C);this._model.selectionStart=[0,m.first],this._model.selectionEnd=[this._bufferService.cols,m.last],this._model.selectionStartLength=0},f([h(3,o.IBufferService),h(4,o.ICoreService),h(5,p.IMouseService),h(6,o.IOptionsService),h(7,p.IRenderService)],b)}(i.Disposable);e.SelectionService=g},4725:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IDecorationService=e.ICharacterJoinerService=e.ISoundService=e.ISelectionService=e.IRenderService=e.IMouseService=e.ICoreBrowserService=e.ICharSizeService=void 0;var l=D(8343);e.ICharSizeService=(0,l.createDecorator)("CharSizeService"),e.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),e.IMouseService=(0,l.createDecorator)("MouseService"),e.IRenderService=(0,l.createDecorator)("RenderService"),e.ISelectionService=(0,l.createDecorator)("SelectionService"),e.ISoundService=(0,l.createDecorator)("SoundService"),e.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService"),e.IDecorationService=(0,l.createDecorator)("DecorationService")},357:function(A,e,D){var l=this&&this.__decorate||function(y,v,s,u){var p,o=arguments.length,r=o<3?v:u===null?u=Object.getOwnPropertyDescriptor(v,s):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(y,v,s,u);else for(var t=y.length-1;t>=0;t--)(p=y[t])&&(r=(o<3?p(r):o>3?p(v,s,r):p(v,s))||r);return o>3&&r&&Object.defineProperty(v,s,r),r},_=this&&this.__param||function(y,v){return function(s,u){v(s,u,y)}};Object.defineProperty(e,"__esModule",{value:!0}),e.SoundService=void 0;var f=D(2585),h=function(){function y(v){this._optionsService=v}return Object.defineProperty(y,"audioContext",{get:function(){if(!y._audioContext){var v=window.AudioContext||window.webkitAudioContext;if(!v)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;y._audioContext=new v}return y._audioContext},enumerable:!1,configurable:!0}),y.prototype.playBellSound=function(){var v=y.audioContext;if(v){var s=v.createBufferSource();v.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),function(u){s.buffer=u,s.connect(v.destination),s.start(0)})}},y.prototype._base64ToArrayBuffer=function(v){for(var s=window.atob(v),u=s.length,p=new Uint8Array(u),o=0;o<u;o++)p[o]=s.charCodeAt(o);return p.buffer},y.prototype._removeMimeType=function(v){return v.split(",")[1]},y=l([_(0,f.IOptionsService)],y)}();e.SoundService=h},6349:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CircularList=void 0;var l=D(8460),_=function(){function f(h){this._maxLength=h,this.onDeleteEmitter=new l.EventEmitter,this.onInsertEmitter=new l.EventEmitter,this.onTrimEmitter=new l.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(f.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"maxLength",{get:function(){return this._maxLength},set:function(h){if(this._maxLength!==h){for(var y=new Array(h),v=0;v<Math.min(h,this.length);v++)y[v]=this._array[this._getCyclicIndex(v)];this._array=y,this._maxLength=h,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._length},set:function(h){if(h>this._length)for(var y=this._length;y<h;y++)this._array[y]=void 0;this._length=h},enumerable:!1,configurable:!0}),f.prototype.get=function(h){return this._array[this._getCyclicIndex(h)]},f.prototype.set=function(h,y){this._array[this._getCyclicIndex(h)]=y},f.prototype.push=function(h){this._array[this._getCyclicIndex(this._length)]=h,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},f.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(f.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),f.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},f.prototype.splice=function(h,y){for(var v=[],s=2;s<arguments.length;s++)v[s-2]=arguments[s];if(y){for(var u=h;u<this._length-y;u++)this._array[this._getCyclicIndex(u)]=this._array[this._getCyclicIndex(u+y)];this._length-=y,this.onDeleteEmitter.fire({index:h,amount:y})}for(u=this._length-1;u>=h;u--)this._array[this._getCyclicIndex(u+v.length)]=this._array[this._getCyclicIndex(u)];for(u=0;u<v.length;u++)this._array[this._getCyclicIndex(h+u)]=v[u];if(v.length&&this.onInsertEmitter.fire({index:h,amount:v.length}),this._length+v.length>this._maxLength){var p=this._length+v.length-this._maxLength;this._startIndex+=p,this._length=this._maxLength,this.onTrimEmitter.fire(p)}else this._length+=v.length},f.prototype.trimStart=function(h){h>this._length&&(h=this._length),this._startIndex+=h,this._length-=h,this.onTrimEmitter.fire(h)},f.prototype.shiftElements=function(h,y,v){if(!(y<=0)){if(h<0||h>=this._length)throw new Error("start argument out of range");if(h+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(var s=y-1;s>=0;s--)this.set(h+s+v,this.get(h+s));var u=h+y+v-this._length;if(u>0)for(this._length+=u;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(s=0;s<y;s++)this.set(h+s+v,this.get(h+s))}},f.prototype._getCyclicIndex=function(h){return(this._startIndex+h)%this._maxLength},f}();e.CircularList=_},1439:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.clone=void 0,e.clone=function D(l,_){if(_===void 0&&(_=5),typeof l!="object")return l;var f=Array.isArray(l)?[]:{};for(var h in l)f[h]=_<=1?l[h]:l[h]&&D(l[h],_-1);return f}},8969:function(A,e,D){var l,_=this&&this.__extends||(l=function(C,m){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var I in w)Object.prototype.hasOwnProperty.call(w,I)&&(x[I]=w[I])},l(C,m)},function(C,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function x(){this.constructor=C}l(C,m),C.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)});Object.defineProperty(e,"__esModule",{value:!0}),e.CoreTerminal=void 0;var f=D(844),h=D(2585),y=D(4348),v=D(7866),s=D(744),u=D(7302),p=D(6975),o=D(8460),r=D(1753),t=D(3730),i=D(1480),a=D(7994),c=D(9282),d=D(5435),g=D(5981),S=!1,b=function(C){function m(x){var w=C.call(this)||this;return w._onBinary=new o.EventEmitter,w._onData=new o.EventEmitter,w._onLineFeed=new o.EventEmitter,w._onResize=new o.EventEmitter,w._onScroll=new o.EventEmitter,w._instantiationService=new y.InstantiationService,w.optionsService=new u.OptionsService(x),w._instantiationService.setService(h.IOptionsService,w.optionsService),w._bufferService=w.register(w._instantiationService.createInstance(s.BufferService)),w._instantiationService.setService(h.IBufferService,w._bufferService),w._logService=w._instantiationService.createInstance(v.LogService),w._instantiationService.setService(h.ILogService,w._logService),w.coreService=w.register(w._instantiationService.createInstance(p.CoreService,function(){return w.scrollToBottom()})),w._instantiationService.setService(h.ICoreService,w.coreService),w.coreMouseService=w._instantiationService.createInstance(r.CoreMouseService),w._instantiationService.setService(h.ICoreMouseService,w.coreMouseService),w._dirtyRowService=w._instantiationService.createInstance(t.DirtyRowService),w._instantiationService.setService(h.IDirtyRowService,w._dirtyRowService),w.unicodeService=w._instantiationService.createInstance(i.UnicodeService),w._instantiationService.setService(h.IUnicodeService,w.unicodeService),w._charsetService=w._instantiationService.createInstance(a.CharsetService),w._instantiationService.setService(h.ICharsetService,w._charsetService),w._inputHandler=new d.InputHandler(w._bufferService,w._charsetService,w.coreService,w._dirtyRowService,w._logService,w.optionsService,w.coreMouseService,w.unicodeService),w.register((0,o.forwardEvent)(w._inputHandler.onLineFeed,w._onLineFeed)),w.register(w._inputHandler),w.register((0,o.forwardEvent)(w._bufferService.onResize,w._onResize)),w.register((0,o.forwardEvent)(w.coreService.onData,w._onData)),w.register((0,o.forwardEvent)(w.coreService.onBinary,w._onBinary)),w.register(w.optionsService.onOptionChange(function(I){return w._updateOptions(I)})),w.register(w._bufferService.onScroll(function(I){w._onScroll.fire({position:w._bufferService.buffer.ydisp,source:0}),w._dirtyRowService.markRangeDirty(w._bufferService.buffer.scrollTop,w._bufferService.buffer.scrollBottom)})),w.register(w._inputHandler.onScroll(function(I){w._onScroll.fire({position:w._bufferService.buffer.ydisp,source:0}),w._dirtyRowService.markRangeDirty(w._bufferService.buffer.scrollTop,w._bufferService.buffer.scrollBottom)})),w._writeBuffer=new g.WriteBuffer(function(I,B){return w._inputHandler.parse(I,B)}),w}return _(m,C),Object.defineProperty(m.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onScroll",{get:function(){var x=this;return this._onScrollApi||(this._onScrollApi=new o.EventEmitter,this.register(this._onScroll.event(function(w){var I;(I=x._onScrollApi)===null||I===void 0||I.fire(w.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"options",{get:function(){return this.optionsService.options},set:function(x){for(var w in x)this.optionsService.options[w]=x[w]},enumerable:!1,configurable:!0}),m.prototype.dispose=function(){var x;this._isDisposed||(C.prototype.dispose.call(this),(x=this._windowsMode)===null||x===void 0||x.dispose(),this._windowsMode=void 0)},m.prototype.write=function(x,w){this._writeBuffer.write(x,w)},m.prototype.writeSync=function(x,w){this._logService.logLevel<=h.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(x,w)},m.prototype.resize=function(x,w){isNaN(x)||isNaN(w)||(x=Math.max(x,s.MINIMUM_COLS),w=Math.max(w,s.MINIMUM_ROWS),this._bufferService.resize(x,w))},m.prototype.scroll=function(x,w){w===void 0&&(w=!1),this._bufferService.scroll(x,w)},m.prototype.scrollLines=function(x,w,I){this._bufferService.scrollLines(x,w,I)},m.prototype.scrollPages=function(x){this._bufferService.scrollPages(x)},m.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},m.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},m.prototype.scrollToLine=function(x){this._bufferService.scrollToLine(x)},m.prototype.registerEscHandler=function(x,w){return this._inputHandler.registerEscHandler(x,w)},m.prototype.registerDcsHandler=function(x,w){return this._inputHandler.registerDcsHandler(x,w)},m.prototype.registerCsiHandler=function(x,w){return this._inputHandler.registerCsiHandler(x,w)},m.prototype.registerOscHandler=function(x,w){return this._inputHandler.registerOscHandler(x,w)},m.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},m.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},m.prototype._updateOptions=function(x){var w;switch(x){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():((w=this._windowsMode)===null||w===void 0||w.dispose(),this._windowsMode=void 0)}},m.prototype._enableWindowsMode=function(){var x=this;if(!this._windowsMode){var w=[];w.push(this.onLineFeed(c.updateWindowsModeWrappedState.bind(null,this._bufferService))),w.push(this.registerCsiHandler({final:"H"},function(){return(0,c.updateWindowsModeWrappedState)(x._bufferService),!1})),this._windowsMode={dispose:function(){for(var I=0,B=w;I<B.length;I++)B[I].dispose()}}}},m}(f.Disposable);e.CoreTerminal=b},8460:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forwardEvent=e.EventEmitter=void 0;var D=function(){function l(){this._listeners=[],this._disposed=!1}return Object.defineProperty(l.prototype,"event",{get:function(){var _=this;return this._event||(this._event=function(f){return _._listeners.push(f),{dispose:function(){if(!_._disposed){for(var h=0;h<_._listeners.length;h++)if(_._listeners[h]===f)return void _._listeners.splice(h,1)}}}}),this._event},enumerable:!1,configurable:!0}),l.prototype.fire=function(_,f){for(var h=[],y=0;y<this._listeners.length;y++)h.push(this._listeners[y]);for(y=0;y<h.length;y++)h[y].call(void 0,_,f)},l.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},l}();e.EventEmitter=D,e.forwardEvent=function(l,_){return l(function(f){return _.fire(f)})}},5435:function(A,e,D){var l,_=this&&this.__extends||(l=function(I,B){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,F){E.__proto__=F}||function(E,F){for(var T in F)Object.prototype.hasOwnProperty.call(F,T)&&(E[T]=F[T])},l(I,B)},function(I,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function E(){this.constructor=I}l(I,B),I.prototype=B===null?Object.create(B):(E.prototype=B.prototype,new E)});Object.defineProperty(e,"__esModule",{value:!0}),e.InputHandler=e.WindowsOptionsReportType=void 0;var f,h=D(2584),y=D(7116),v=D(2015),s=D(844),u=D(8273),p=D(482),o=D(8437),r=D(8460),t=D(643),i=D(511),a=D(3734),c=D(2585),d=D(6242),g=D(6351),S=D(5941),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},C=131072;function m(I,B){if(I>24)return B.setWinLines||!1;switch(I){case 1:return!!B.restoreWin;case 2:return!!B.minimizeWin;case 3:return!!B.setWinPosition;case 4:return!!B.setWinSizePixels;case 5:return!!B.raiseWin;case 6:return!!B.lowerWin;case 7:return!!B.refreshWin;case 8:return!!B.setWinSizeChars;case 9:return!!B.maximizeWin;case 10:return!!B.fullscreenWin;case 11:return!!B.getWinState;case 13:return!!B.getWinPosition;case 14:return!!B.getWinSizePixels;case 15:return!!B.getScreenSizePixels;case 16:return!!B.getCellSizePixels;case 18:return!!B.getWinSizeChars;case 19:return!!B.getScreenSizeChars;case 20:return!!B.getIconTitle;case 21:return!!B.getWinTitle;case 22:return!!B.pushTitle;case 23:return!!B.popTitle;case 24:return!!B.setWinLines}return!1}(function(I){I[I.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",I[I.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(f=e.WindowsOptionsReportType||(e.WindowsOptionsReportType={}));var x=function(){function I(B,E,F,T){this._bufferService=B,this._coreService=E,this._logService=F,this._optionsService=T,this._data=new Uint32Array(0)}return I.prototype.hook=function(B){this._data=new Uint32Array(0)},I.prototype.put=function(B,E,F){this._data=(0,u.concat)(this._data,B.subarray(E,F))},I.prototype.unhook=function(B){if(!B)return this._data=new Uint32Array(0),!0;var E=(0,p.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),E){case'"q':this._coreService.triggerDataEvent(h.C0.ESC+'P1$r0"q'+h.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(h.C0.ESC+'P1$r61;1"p'+h.C0.ESC+"\\");break;case"r":var F=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(h.C0.ESC+"P1$r"+F+h.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(h.C0.ESC+"P1$r0m"+h.C0.ESC+"\\");break;case" q":var T={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];T-=this._optionsService.rawOptions.cursorBlink?1:0,this._coreService.triggerDataEvent(h.C0.ESC+"P1$r"+T+" q"+h.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",E),this._coreService.triggerDataEvent(h.C0.ESC+"P0$r"+h.C0.ESC+"\\")}return!0},I}(),w=function(I){function B(E,F,T,H,N,z,Z,X,J){J===void 0&&(J=new v.EscapeSequenceParser);var L=I.call(this)||this;L._bufferService=E,L._charsetService=F,L._coreService=T,L._dirtyRowService=H,L._logService=N,L._optionsService=z,L._coreMouseService=Z,L._unicodeService=X,L._parser=J,L._parseBuffer=new Uint32Array(4096),L._stringDecoder=new p.StringToUtf32,L._utf8Decoder=new p.Utf8ToUtf32,L._workCell=new i.CellData,L._windowTitle="",L._iconName="",L._windowTitleStack=[],L._iconNameStack=[],L._curAttrData=o.DEFAULT_ATTR_DATA.clone(),L._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),L._onRequestBell=new r.EventEmitter,L._onRequestRefreshRows=new r.EventEmitter,L._onRequestReset=new r.EventEmitter,L._onRequestSendFocus=new r.EventEmitter,L._onRequestSyncScrollBar=new r.EventEmitter,L._onRequestWindowsOptionsReport=new r.EventEmitter,L._onA11yChar=new r.EventEmitter,L._onA11yTab=new r.EventEmitter,L._onCursorMove=new r.EventEmitter,L._onLineFeed=new r.EventEmitter,L._onScroll=new r.EventEmitter,L._onTitleChange=new r.EventEmitter,L._onColor=new r.EventEmitter,L._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},L._specialColors=[256,257,258],L.register(L._parser),L._activeBuffer=L._bufferService.buffer,L.register(L._bufferService.buffers.onBufferActivate(function(k){return L._activeBuffer=k.activeBuffer})),L._parser.setCsiHandlerFallback(function(k,G){L._logService.debug("Unknown CSI code: ",{identifier:L._parser.identToString(k),params:G.toArray()})}),L._parser.setEscHandlerFallback(function(k){L._logService.debug("Unknown ESC code: ",{identifier:L._parser.identToString(k)})}),L._parser.setExecuteHandlerFallback(function(k){L._logService.debug("Unknown EXECUTE code: ",{code:k})}),L._parser.setOscHandlerFallback(function(k,G,V){L._logService.debug("Unknown OSC code: ",{identifier:k,action:G,data:V})}),L._parser.setDcsHandlerFallback(function(k,G,V){G==="HOOK"&&(V=V.toArray()),L._logService.debug("Unknown DCS code: ",{identifier:L._parser.identToString(k),action:G,payload:V})}),L._parser.setPrintHandler(function(k,G,V){return L.print(k,G,V)}),L._parser.registerCsiHandler({final:"@"},function(k){return L.insertChars(k)}),L._parser.registerCsiHandler({intermediates:" ",final:"@"},function(k){return L.scrollLeft(k)}),L._parser.registerCsiHandler({final:"A"},function(k){return L.cursorUp(k)}),L._parser.registerCsiHandler({intermediates:" ",final:"A"},function(k){return L.scrollRight(k)}),L._parser.registerCsiHandler({final:"B"},function(k){return L.cursorDown(k)}),L._parser.registerCsiHandler({final:"C"},function(k){return L.cursorForward(k)}),L._parser.registerCsiHandler({final:"D"},function(k){return L.cursorBackward(k)}),L._parser.registerCsiHandler({final:"E"},function(k){return L.cursorNextLine(k)}),L._parser.registerCsiHandler({final:"F"},function(k){return L.cursorPrecedingLine(k)}),L._parser.registerCsiHandler({final:"G"},function(k){return L.cursorCharAbsolute(k)}),L._parser.registerCsiHandler({final:"H"},function(k){return L.cursorPosition(k)}),L._parser.registerCsiHandler({final:"I"},function(k){return L.cursorForwardTab(k)}),L._parser.registerCsiHandler({final:"J"},function(k){return L.eraseInDisplay(k)}),L._parser.registerCsiHandler({prefix:"?",final:"J"},function(k){return L.eraseInDisplay(k)}),L._parser.registerCsiHandler({final:"K"},function(k){return L.eraseInLine(k)}),L._parser.registerCsiHandler({prefix:"?",final:"K"},function(k){return L.eraseInLine(k)}),L._parser.registerCsiHandler({final:"L"},function(k){return L.insertLines(k)}),L._parser.registerCsiHandler({final:"M"},function(k){return L.deleteLines(k)}),L._parser.registerCsiHandler({final:"P"},function(k){return L.deleteChars(k)}),L._parser.registerCsiHandler({final:"S"},function(k){return L.scrollUp(k)}),L._parser.registerCsiHandler({final:"T"},function(k){return L.scrollDown(k)}),L._parser.registerCsiHandler({final:"X"},function(k){return L.eraseChars(k)}),L._parser.registerCsiHandler({final:"Z"},function(k){return L.cursorBackwardTab(k)}),L._parser.registerCsiHandler({final:"`"},function(k){return L.charPosAbsolute(k)}),L._parser.registerCsiHandler({final:"a"},function(k){return L.hPositionRelative(k)}),L._parser.registerCsiHandler({final:"b"},function(k){return L.repeatPrecedingCharacter(k)}),L._parser.registerCsiHandler({final:"c"},function(k){return L.sendDeviceAttributesPrimary(k)}),L._parser.registerCsiHandler({prefix:">",final:"c"},function(k){return L.sendDeviceAttributesSecondary(k)}),L._parser.registerCsiHandler({final:"d"},function(k){return L.linePosAbsolute(k)}),L._parser.registerCsiHandler({final:"e"},function(k){return L.vPositionRelative(k)}),L._parser.registerCsiHandler({final:"f"},function(k){return L.hVPosition(k)}),L._parser.registerCsiHandler({final:"g"},function(k){return L.tabClear(k)}),L._parser.registerCsiHandler({final:"h"},function(k){return L.setMode(k)}),L._parser.registerCsiHandler({prefix:"?",final:"h"},function(k){return L.setModePrivate(k)}),L._parser.registerCsiHandler({final:"l"},function(k){return L.resetMode(k)}),L._parser.registerCsiHandler({prefix:"?",final:"l"},function(k){return L.resetModePrivate(k)}),L._parser.registerCsiHandler({final:"m"},function(k){return L.charAttributes(k)}),L._parser.registerCsiHandler({final:"n"},function(k){return L.deviceStatus(k)}),L._parser.registerCsiHandler({prefix:"?",final:"n"},function(k){return L.deviceStatusPrivate(k)}),L._parser.registerCsiHandler({intermediates:"!",final:"p"},function(k){return L.softReset(k)}),L._parser.registerCsiHandler({intermediates:" ",final:"q"},function(k){return L.setCursorStyle(k)}),L._parser.registerCsiHandler({final:"r"},function(k){return L.setScrollRegion(k)}),L._parser.registerCsiHandler({final:"s"},function(k){return L.saveCursor(k)}),L._parser.registerCsiHandler({final:"t"},function(k){return L.windowOptions(k)}),L._parser.registerCsiHandler({final:"u"},function(k){return L.restoreCursor(k)}),L._parser.registerCsiHandler({intermediates:"'",final:"}"},function(k){return L.insertColumns(k)}),L._parser.registerCsiHandler({intermediates:"'",final:"~"},function(k){return L.deleteColumns(k)}),L._parser.setExecuteHandler(h.C0.BEL,function(){return L.bell()}),L._parser.setExecuteHandler(h.C0.LF,function(){return L.lineFeed()}),L._parser.setExecuteHandler(h.C0.VT,function(){return L.lineFeed()}),L._parser.setExecuteHandler(h.C0.FF,function(){return L.lineFeed()}),L._parser.setExecuteHandler(h.C0.CR,function(){return L.carriageReturn()}),L._parser.setExecuteHandler(h.C0.BS,function(){return L.backspace()}),L._parser.setExecuteHandler(h.C0.HT,function(){return L.tab()}),L._parser.setExecuteHandler(h.C0.SO,function(){return L.shiftOut()}),L._parser.setExecuteHandler(h.C0.SI,function(){return L.shiftIn()}),L._parser.setExecuteHandler(h.C1.IND,function(){return L.index()}),L._parser.setExecuteHandler(h.C1.NEL,function(){return L.nextLine()}),L._parser.setExecuteHandler(h.C1.HTS,function(){return L.tabSet()}),L._parser.registerOscHandler(0,new d.OscHandler(function(k){return L.setTitle(k),L.setIconName(k),!0})),L._parser.registerOscHandler(1,new d.OscHandler(function(k){return L.setIconName(k)})),L._parser.registerOscHandler(2,new d.OscHandler(function(k){return L.setTitle(k)})),L._parser.registerOscHandler(4,new d.OscHandler(function(k){return L.setOrReportIndexedColor(k)})),L._parser.registerOscHandler(10,new d.OscHandler(function(k){return L.setOrReportFgColor(k)})),L._parser.registerOscHandler(11,new d.OscHandler(function(k){return L.setOrReportBgColor(k)})),L._parser.registerOscHandler(12,new d.OscHandler(function(k){return L.setOrReportCursorColor(k)})),L._parser.registerOscHandler(104,new d.OscHandler(function(k){return L.restoreIndexedColor(k)})),L._parser.registerOscHandler(110,new d.OscHandler(function(k){return L.restoreFgColor(k)})),L._parser.registerOscHandler(111,new d.OscHandler(function(k){return L.restoreBgColor(k)})),L._parser.registerOscHandler(112,new d.OscHandler(function(k){return L.restoreCursorColor(k)})),L._parser.registerEscHandler({final:"7"},function(){return L.saveCursor()}),L._parser.registerEscHandler({final:"8"},function(){return L.restoreCursor()}),L._parser.registerEscHandler({final:"D"},function(){return L.index()}),L._parser.registerEscHandler({final:"E"},function(){return L.nextLine()}),L._parser.registerEscHandler({final:"H"},function(){return L.tabSet()}),L._parser.registerEscHandler({final:"M"},function(){return L.reverseIndex()}),L._parser.registerEscHandler({final:"="},function(){return L.keypadApplicationMode()}),L._parser.registerEscHandler({final:">"},function(){return L.keypadNumericMode()}),L._parser.registerEscHandler({final:"c"},function(){return L.fullReset()}),L._parser.registerEscHandler({final:"n"},function(){return L.setgLevel(2)}),L._parser.registerEscHandler({final:"o"},function(){return L.setgLevel(3)}),L._parser.registerEscHandler({final:"|"},function(){return L.setgLevel(3)}),L._parser.registerEscHandler({final:"}"},function(){return L.setgLevel(2)}),L._parser.registerEscHandler({final:"~"},function(){return L.setgLevel(1)}),L._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return L.selectDefaultCharset()}),L._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return L.selectDefaultCharset()});var q=function(k){O._parser.registerEscHandler({intermediates:"(",final:k},function(){return L.selectCharset("("+k)}),O._parser.registerEscHandler({intermediates:")",final:k},function(){return L.selectCharset(")"+k)}),O._parser.registerEscHandler({intermediates:"*",final:k},function(){return L.selectCharset("*"+k)}),O._parser.registerEscHandler({intermediates:"+",final:k},function(){return L.selectCharset("+"+k)}),O._parser.registerEscHandler({intermediates:"-",final:k},function(){return L.selectCharset("-"+k)}),O._parser.registerEscHandler({intermediates:".",final:k},function(){return L.selectCharset("."+k)}),O._parser.registerEscHandler({intermediates:"/",final:k},function(){return L.selectCharset("/"+k)})},O=this;for(var R in y.CHARSETS)q(R);return L._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return L.screenAlignmentPattern()}),L._parser.setErrorHandler(function(k){return L._logService.error("Parsing error: ",k),k}),L._parser.registerDcsHandler({intermediates:"$",final:"q"},new x(L._bufferService,L._coreService,L._logService,L._optionsService)),L}return _(B,I),Object.defineProperty(B.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),B.prototype.dispose=function(){I.prototype.dispose.call(this)},B.prototype._preserveStack=function(E,F,T,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=F,this._parseStack.decodedLength=T,this._parseStack.position=H},B.prototype._logSlowResolvingAsync=function(E){this._logService.logLevel<=c.LogLevelEnum.WARN&&Promise.race([E,new Promise(function(F,T){return setTimeout(function(){return T("#SLOW_TIMEOUT")},5e3)})]).catch(function(F){if(F!=="#SLOW_TIMEOUT")throw F;console.warn("async parser handler taking longer than 5000 ms")})},B.prototype.parse=function(E,F){var T,H=this._activeBuffer.x,N=this._activeBuffer.y,z=0,Z=this._parseStack.paused;if(Z){if(T=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,F))return this._logSlowResolvingAsync(T),T;H=this._parseStack.cursorStartX,N=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>C&&(z=this._parseStack.position+C)}if(this._logService.logLevel<=c.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?' "'+E+'"':' "'+Array.prototype.map.call(E,function(q){return String.fromCharCode(q)}).join("")+'"'),typeof E=="string"?E.split("").map(function(q){return q.charCodeAt(0)}):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<C&&(this._parseBuffer=new Uint32Array(Math.min(E.length,C))),Z||this._dirtyRowService.clearRange(),E.length>C)for(var X=z;X<E.length;X+=C){var J=X+C<E.length?X+C:E.length,L=typeof E=="string"?this._stringDecoder.decode(E.substring(X,J),this._parseBuffer):this._utf8Decoder.decode(E.subarray(X,J),this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,L))return this._preserveStack(H,N,L,X),this._logSlowResolvingAsync(T),T}else if(!Z&&(L=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer),T=this._parser.parse(this._parseBuffer,L)))return this._preserveStack(H,N,L,0),this._logSlowResolvingAsync(T),T;this._activeBuffer.x===H&&this._activeBuffer.y===N||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},B.prototype.print=function(E,F,T){var H,N,z=this._charsetService.charset,Z=this._optionsService.rawOptions.screenReaderMode,X=this._bufferService.cols,J=this._coreService.decPrivateModes.wraparound,L=this._coreService.modes.insertMode,q=this._curAttrData,O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&T-F>0&&O.getWidth(this._activeBuffer.x-1)===2&&O.setCellFromCodePoint(this._activeBuffer.x-1,0,1,q.fg,q.bg,q.extended);for(var R=F;R<T;++R){if(H=E[R],N=this._unicodeService.wcwidth(H),H<127&&z){var k=z[String.fromCharCode(H)];k&&(H=k.charCodeAt(0))}if(Z&&this._onA11yChar.fire((0,p.stringFromCodePoint)(H)),N||!this._activeBuffer.x){if(this._activeBuffer.x+N-1>=X){if(J){for(;this._activeBuffer.x<X;)O.setCellFromCodePoint(this._activeBuffer.x++,0,1,q.fg,q.bg,q.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=X-1,N===2)continue}if(L&&(O.insertCells(this._activeBuffer.x,N,this._activeBuffer.getNullCell(q),q),O.getWidth(X-1)===2&&O.setCellFromCodePoint(X-1,t.NULL_CELL_CODE,t.NULL_CELL_WIDTH,q.fg,q.bg,q.extended)),O.setCellFromCodePoint(this._activeBuffer.x++,H,N,q.fg,q.bg,q.extended),N>0)for(;--N;)O.setCellFromCodePoint(this._activeBuffer.x++,0,0,q.fg,q.bg,q.extended)}else O.getWidth(this._activeBuffer.x-1)?O.addCodepointToCell(this._activeBuffer.x-1,H):O.addCodepointToCell(this._activeBuffer.x-2,H)}T-F>0&&(O.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<X&&T-F>0&&O.getWidth(this._activeBuffer.x)===0&&!O.hasContent(this._activeBuffer.x)&&O.setCellFromCodePoint(this._activeBuffer.x,0,1,q.fg,q.bg,q.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},B.prototype.registerCsiHandler=function(E,F){var T=this;return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,F):this._parser.registerCsiHandler(E,function(H){return!m(H.params[0],T._optionsService.rawOptions.windowOptions)||F(H)})},B.prototype.registerDcsHandler=function(E,F){return this._parser.registerDcsHandler(E,new g.DcsHandler(F))},B.prototype.registerEscHandler=function(E,F){return this._parser.registerEscHandler(E,F)},B.prototype.registerOscHandler=function(E,F){return this._parser.registerOscHandler(E,new d.OscHandler(F))},B.prototype.bell=function(){return this._onRequestBell.fire(),!0},B.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},B.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},B.prototype.backspace=function(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0?void 0:E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);F.hasWidth(this._activeBuffer.x)&&!F.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},B.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0},B.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},B.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},B.prototype._restrictCursor=function(E){E===void 0&&(E=this._bufferService.cols-1),this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},B.prototype._setCursor=function(E,F){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+F):(this._activeBuffer.x=E,this._activeBuffer.y=F),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},B.prototype._moveCursor=function(E,F){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+F)},B.prototype.cursorUp=function(E){var F=this._activeBuffer.y-this._activeBuffer.scrollTop;return F>=0?this._moveCursor(0,-Math.min(F,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0},B.prototype.cursorDown=function(E){var F=this._activeBuffer.scrollBottom-this._activeBuffer.y;return F>=0?this._moveCursor(0,Math.min(F,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0},B.prototype.cursorForward=function(E){return this._moveCursor(E.params[0]||1,0),!0},B.prototype.cursorBackward=function(E){return this._moveCursor(-(E.params[0]||1),0),!0},B.prototype.cursorNextLine=function(E){return this.cursorDown(E),this._activeBuffer.x=0,!0},B.prototype.cursorPrecedingLine=function(E){return this.cursorUp(E),this._activeBuffer.x=0,!0},B.prototype.cursorCharAbsolute=function(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0},B.prototype.cursorPosition=function(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0},B.prototype.charPosAbsolute=function(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0},B.prototype.hPositionRelative=function(E){return this._moveCursor(E.params[0]||1,0),!0},B.prototype.linePosAbsolute=function(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0},B.prototype.vPositionRelative=function(E){return this._moveCursor(0,E.params[0]||1),!0},B.prototype.hVPosition=function(E){return this.cursorPosition(E),!0},B.prototype.tabClear=function(E){var F=E.params[0];return F===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:F===3&&(this._activeBuffer.tabs={}),!0},B.prototype.cursorForwardTab=function(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var F=E.params[0]||1;F--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},B.prototype.cursorBackwardTab=function(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var F=E.params[0]||1;F--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},B.prototype._eraseInBufferLine=function(E,F,T,H){H===void 0&&(H=!1);var N=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);N.replaceCells(F,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H&&(N.isWrapped=!1)},B.prototype._resetBufferLine=function(E){var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);F.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),F.isWrapped=!1},B.prototype.eraseInDisplay=function(E){var F;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(F=this._activeBuffer.y,this._dirtyRowService.markDirty(F),this._eraseInBufferLine(F++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);F<this._bufferService.rows;F++)this._resetBufferLine(F);this._dirtyRowService.markDirty(F);break;case 1:for(F=this._activeBuffer.y,this._dirtyRowService.markDirty(F),this._eraseInBufferLine(F,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(F+1).isWrapped=!1);F--;)this._resetBufferLine(F);this._dirtyRowService.markDirty(0);break;case 2:for(F=this._bufferService.rows,this._dirtyRowService.markDirty(F-1);F--;)this._resetBufferLine(F);this._dirtyRowService.markDirty(0);break;case 3:var T=this._activeBuffer.lines.length-this._bufferService.rows;T>0&&(this._activeBuffer.lines.trimStart(T),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-T,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-T,0),this._onScroll.fire(0))}return!0},B.prototype.eraseInLine=function(E){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},B.prototype.insertLines=function(E){this._restrictCursor();var F=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var T=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,N=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;F--;)this._activeBuffer.lines.splice(N-1,1),this._activeBuffer.lines.splice(T,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},B.prototype.deleteLines=function(E){this._restrictCursor();var F=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var T,H=this._activeBuffer.ybase+this._activeBuffer.y;for(T=this._bufferService.rows-1-this._activeBuffer.scrollBottom,T=this._bufferService.rows-1+this._activeBuffer.ybase-T;F--;)this._activeBuffer.lines.splice(H,1),this._activeBuffer.lines.splice(T,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},B.prototype.insertChars=function(E){this._restrictCursor();var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},B.prototype.deleteChars=function(E){this._restrictCursor();var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},B.prototype.scrollUp=function(E){for(var F=E.params[0]||1;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.scrollDown=function(E){for(var F=E.params[0]||1;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.scrollLeft=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var F=E.params[0]||1,T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){var H=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);H.deleteCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.scrollRight=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var F=E.params[0]||1,T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){var H=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);H.insertCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.insertColumns=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var F=E.params[0]||1,T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){var H=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);H.insertCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.deleteColumns=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var F=E.params[0]||1,T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){var H=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);H.deleteCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},B.prototype.eraseChars=function(E){this._restrictCursor();var F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},B.prototype.repeatPrecedingCharacter=function(E){if(!this._parser.precedingCodepoint)return!0;for(var F=E.params[0]||1,T=new Uint32Array(F),H=0;H<F;++H)T[H]=this._parser.precedingCodepoint;return this.print(T,0,T.length),!0},B.prototype.sendDeviceAttributesPrimary=function(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0},B.prototype.sendDeviceAttributesSecondary=function(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0},B.prototype._is=function(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0},B.prototype.setMode=function(E){for(var F=0;F<E.length;F++)E.params[F]===4&&(this._coreService.modes.insertMode=!0);return!0},B.prototype.setModePrivate=function(E){for(var F=0;F<E.length;F++)switch(E.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),this._charsetService.setgCharset(1,y.DEFAULT_CHARSET),this._charsetService.setgCharset(2,y.DEFAULT_CHARSET),this._charsetService.setgCharset(3,y.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},B.prototype.resetMode=function(E){for(var F=0;F<E.length;F++)E.params[F]===4&&(this._coreService.modes.insertMode=!1);return!0},B.prototype.resetModePrivate=function(E){for(var F=0;F<E.length;F++)switch(E.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[F]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},B.prototype._updateAttrColor=function(E,F,T,H,N){return F===2?(E|=50331648,E&=-16777216,E|=a.AttributeData.fromColorRGB([T,H,N])):F===5&&(E&=-50331904,E|=33554432|255&T),E},B.prototype._extractColor=function(E,F,T){var H=[0,0,-1,0,0,0],N=0,z=0;do{if(H[z+N]=E.params[F+z],E.hasSubParams(F+z)){var Z=E.getSubParams(F+z),X=0;do H[1]===5&&(N=1),H[z+X+1+N]=Z[X];while(++X<Z.length&&X+z+1+N<H.length);break}if(H[1]===5&&z+N>=2||H[1]===2&&z+N>=5)break;H[1]&&(N=1)}while(++z+F<E.length&&z+N<H.length);for(X=2;X<H.length;++X)H[X]===-1&&(H[X]=0);switch(H[0]){case 38:T.fg=this._updateAttrColor(T.fg,H[1],H[3],H[4],H[5]);break;case 48:T.bg=this._updateAttrColor(T.bg,H[1],H[3],H[4],H[5]);break;case 58:T.extended=T.extended.clone(),T.extended.underlineColor=this._updateAttrColor(T.extended.underlineColor,H[1],H[3],H[4],H[5])}return z},B.prototype._processUnderline=function(E,F){F.extended=F.extended.clone(),(!~E||E>5)&&(E=1),F.extended.underlineStyle=E,F.fg|=268435456,E===0&&(F.fg&=-268435457),F.updateExtended()},B.prototype.charAttributes=function(E){if(E.length===1&&E.params[0]===0)return this._curAttrData.fg=o.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=o.DEFAULT_ATTR_DATA.bg,!0;for(var F,T=E.length,H=this._curAttrData,N=0;N<T;N++)(F=E.params[N])>=30&&F<=37?(H.fg&=-50331904,H.fg|=16777216|F-30):F>=40&&F<=47?(H.bg&=-50331904,H.bg|=16777216|F-40):F>=90&&F<=97?(H.fg&=-50331904,H.fg|=16777224|F-90):F>=100&&F<=107?(H.bg&=-50331904,H.bg|=16777224|F-100):F===0?(H.fg=o.DEFAULT_ATTR_DATA.fg,H.bg=o.DEFAULT_ATTR_DATA.bg):F===1?H.fg|=134217728:F===3?H.bg|=67108864:F===4?(H.fg|=268435456,this._processUnderline(E.hasSubParams(N)?E.getSubParams(N)[0]:1,H)):F===5?H.fg|=536870912:F===7?H.fg|=67108864:F===8?H.fg|=1073741824:F===9?H.fg|=2147483648:F===2?H.bg|=134217728:F===21?this._processUnderline(2,H):F===22?(H.fg&=-134217729,H.bg&=-134217729):F===23?H.bg&=-67108865:F===24?H.fg&=-268435457:F===25?H.fg&=-536870913:F===27?H.fg&=-67108865:F===28?H.fg&=-1073741825:F===29?H.fg&=2147483647:F===39?(H.fg&=-67108864,H.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):F===49?(H.bg&=-67108864,H.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):F===38||F===48||F===58?N+=this._extractColor(E,N,H):F===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):F===100?(H.fg&=-67108864,H.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",F);return!0},B.prototype.deviceStatus=function(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(h.C0.ESC+"[0n");break;case 6:var F=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(h.C0.ESC+"["+F+";"+T+"R")}return!0},B.prototype.deviceStatusPrivate=function(E){if(E.params[0]===6){var F=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(h.C0.ESC+"[?"+F+";"+T+"R")}return!0},B.prototype.softReset=function(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},B.prototype.setCursorStyle=function(E){var F=E.params[0]||1;switch(F){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var T=F%2==1;return this._optionsService.options.cursorBlink=T,!0},B.prototype.setScrollRegion=function(E){var F,T=E.params[0]||1;return(E.length<2||(F=E.params[1])>this._bufferService.rows||F===0)&&(F=this._bufferService.rows),F>T&&(this._activeBuffer.scrollTop=T-1,this._activeBuffer.scrollBottom=F-1,this._setCursor(0,0)),!0},B.prototype.windowOptions=function(E){if(!m(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;var F=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:F!==2&&this._onRequestWindowsOptionsReport.fire(f.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(f.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(h.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:F!==0&&F!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),F!==0&&F!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:F!==0&&F!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),F!==0&&F!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},B.prototype.saveCursor=function(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},B.prototype.restoreCursor=function(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},B.prototype.setTitle=function(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0},B.prototype.setIconName=function(E){return this._iconName=E,!0},B.prototype.setOrReportIndexedColor=function(E){for(var F=[],T=E.split(";");T.length>1;){var H=T.shift(),N=T.shift();if(/^\d+$/.exec(H)){var z=parseInt(H);if(0<=z&&z<256)if(N==="?")F.push({type:0,index:z});else{var Z=(0,S.parseColor)(N);Z&&F.push({type:1,index:z,color:Z})}}}return F.length&&this._onColor.fire(F),!0},B.prototype._setOrReportSpecialColor=function(E,F){for(var T=E.split(";"),H=0;H<T.length&&!(F>=this._specialColors.length);++H,++F)if(T[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[F]}]);else{var N=(0,S.parseColor)(T[H]);N&&this._onColor.fire([{type:1,index:this._specialColors[F],color:N}])}return!0},B.prototype.setOrReportFgColor=function(E){return this._setOrReportSpecialColor(E,0)},B.prototype.setOrReportBgColor=function(E){return this._setOrReportSpecialColor(E,1)},B.prototype.setOrReportCursorColor=function(E){return this._setOrReportSpecialColor(E,2)},B.prototype.restoreIndexedColor=function(E){if(!E)return this._onColor.fire([{type:2}]),!0;for(var F=[],T=E.split(";"),H=0;H<T.length;++H)if(/^\d+$/.exec(T[H])){var N=parseInt(T[H]);0<=N&&N<256&&F.push({type:2,index:N})}return F.length&&this._onColor.fire(F),!0},B.prototype.restoreFgColor=function(E){return this._onColor.fire([{type:2,index:256}]),!0},B.prototype.restoreBgColor=function(E){return this._onColor.fire([{type:2,index:257}]),!0},B.prototype.restoreCursorColor=function(E){return this._onColor.fire([{type:2,index:258}]),!0},B.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},B.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},B.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},B.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),!0},B.prototype.selectCharset=function(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(b[E[0]],y.CHARSETS[E[1]]||y.DEFAULT_CHARSET),!0)},B.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},B.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},B.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},B.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},B.prototype.reset=function(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()},B.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},B.prototype.setgLevel=function(E){return this._charsetService.setgLevel(E),!0},B.prototype.screenAlignmentPattern=function(){var E=new i.CellData;E.content=1<<22|"E".charCodeAt(0),E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(var F=0;F<this._bufferService.rows;++F){var T=this._activeBuffer.ybase+this._activeBuffer.y+F,H=this._activeBuffer.lines.get(T);H&&(H.fill(E),H.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},B}(s.Disposable);e.InputHandler=w},844:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDisposeArrayDisposable=e.disposeArray=e.Disposable=void 0;var D=function(){function _(){this._disposables=[],this._isDisposed=!1}return _.prototype.dispose=function(){this._isDisposed=!0;for(var f=0,h=this._disposables;f<h.length;f++)h[f].dispose();this._disposables.length=0},_.prototype.register=function(f){return this._disposables.push(f),f},_.prototype.unregister=function(f){var h=this._disposables.indexOf(f);h!==-1&&this._disposables.splice(h,1)},_}();function l(_){for(var f=0,h=_;f<h.length;f++)h[f].dispose();_.length=0}e.Disposable=D,e.disposeArray=l,e.getDisposeArrayDisposable=function(_){return{dispose:function(){return l(_)}}}},6114:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isLinux=e.isWindows=e.isIphone=e.isIpad=e.isMac=e.isSafari=e.isLegacyEdge=e.isFirefox=void 0;var D=typeof navigator>"u",l=D?"node":navigator.userAgent,_=D?"node":navigator.platform;e.isFirefox=l.includes("Firefox"),e.isLegacyEdge=l.includes("Edge"),e.isSafari=/^((?!chrome|android).)*safari/i.test(l),e.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(_),e.isIpad=_==="iPad",e.isIphone=_==="iPhone",e.isWindows=["Windows","Win16","Win32","WinCE"].includes(_),e.isLinux=_.indexOf("Linux")>=0},8273:(A,e)=>{function D(l,_,f,h){if(f===void 0&&(f=0),h===void 0&&(h=l.length),f>=l.length)return l;f=(l.length+f)%l.length,h=h>=l.length?l.length:(l.length+h)%l.length;for(var y=f;y<h;++y)l[y]=_;return l}Object.defineProperty(e,"__esModule",{value:!0}),e.concat=e.fillFallback=e.fill=void 0,e.fill=function(l,_,f,h){return l.fill?l.fill(_,f,h):D(l,_,f,h)},e.fillFallback=D,e.concat=function(l,_){var f=new l.constructor(l.length+_.length);return f.set(l),f.set(_,l.length),f}},9282:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.updateWindowsModeWrappedState=void 0;var l=D(643);e.updateWindowsModeWrappedState=function(_){var f=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),h=f?.get(_.cols-1),y=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);y&&h&&(y.isWrapped=h[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&h[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendedAttrs=e.AttributeData=void 0;var D=function(){function _(){this.fg=0,this.bg=0,this.extended=new l}return _.toColorRGB=function(f){return[f>>>16&255,f>>>8&255,255&f]},_.fromColorRGB=function(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]},_.prototype.clone=function(){var f=new _;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f},_.prototype.isInverse=function(){return 67108864&this.fg},_.prototype.isBold=function(){return 134217728&this.fg},_.prototype.isUnderline=function(){return 268435456&this.fg},_.prototype.isBlink=function(){return 536870912&this.fg},_.prototype.isInvisible=function(){return 1073741824&this.fg},_.prototype.isItalic=function(){return 67108864&this.bg},_.prototype.isDim=function(){return 134217728&this.bg},_.prototype.isStrikethrough=function(){return 2147483648&this.fg},_.prototype.getFgColorMode=function(){return 50331648&this.fg},_.prototype.getBgColorMode=function(){return 50331648&this.bg},_.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},_.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},_.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},_.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},_.prototype.isFgDefault=function(){return(50331648&this.fg)==0},_.prototype.isBgDefault=function(){return(50331648&this.bg)==0},_.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},_.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},_.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},_.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},_.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},_.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},_.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},_.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},_.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},_.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},_.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},_}();e.AttributeData=D;var l=function(){function _(f,h){f===void 0&&(f=0),h===void 0&&(h=-1),this.underlineStyle=f,this.underlineColor=h}return _.prototype.clone=function(){return new _(this.underlineStyle,this.underlineColor)},_.prototype.isEmpty=function(){return this.underlineStyle===0},_}();e.ExtendedAttrs=l},9092:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferStringIterator=e.Buffer=e.MAX_BUFFER_SIZE=void 0;var l=D(6349),_=D(8437),f=D(511),h=D(643),y=D(4634),v=D(4863),s=D(7116),u=D(3734);e.MAX_BUFFER_SIZE=4294967295;var p=function(){function r(t,i,a){this._hasScrollback=t,this._optionsService=i,this._bufferService=a,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=s.DEFAULT_CHARSET,this.markers=[],this._nullCell=f.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]),this._whitespaceCell=f.CellData.fromCharData([0,h.WHITESPACE_CELL_CHAR,h.WHITESPACE_CELL_WIDTH,h.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return r.prototype.getNullCell=function(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell},r.prototype.getWhitespaceCell=function(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell},r.prototype.getBlankLine=function(t,i){return new _.BufferLine(this._bufferService.cols,this.getNullCell(t),i)},Object.defineProperty(r.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isCursorInViewport",{get:function(){var t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows},enumerable:!1,configurable:!0}),r.prototype._getCorrectBufferLength=function(t){if(!this._hasScrollback)return t;var i=t+this._optionsService.rawOptions.scrollback;return i>e.MAX_BUFFER_SIZE?e.MAX_BUFFER_SIZE:i},r.prototype.fillViewportRows=function(t){if(this.lines.length===0){t===void 0&&(t=_.DEFAULT_ATTR_DATA);for(var i=this._rows;i--;)this.lines.push(this.getBlankLine(t))}},r.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},r.prototype.resize=function(t,i){var a=this.getNullCell(_.DEFAULT_ATTR_DATA),c=this._getCorrectBufferLength(i);if(c>this.lines.maxLength&&(this.lines.maxLength=c),this.lines.length>0){if(this._cols<t)for(var d=0;d<this.lines.length;d++)this.lines.get(d).resize(t,a);var g=0;if(this._rows<i)for(var S=this._rows;S<i;S++)this.lines.length<i+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new _.BufferLine(t,a)):this.ybase>0&&this.lines.length<=this.ybase+this.y+g+1?(this.ybase--,g++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(t,a)));else for(S=this._rows;S>i;S--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(c<this.lines.maxLength){var b=this.lines.length-c;b>0&&(this.lines.trimStart(b),this.ybase=Math.max(this.ybase-b,0),this.ydisp=Math.max(this.ydisp-b,0),this.savedY=Math.max(this.savedY-b,0)),this.lines.maxLength=c}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,i-1),g&&(this.y+=g),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(t,i),this._cols>t))for(d=0;d<this.lines.length;d++)this.lines.get(d).resize(t,a);this._cols=t,this._rows=i},Object.defineProperty(r.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),r.prototype._reflow=function(t,i){this._cols!==t&&(t>this._cols?this._reflowLarger(t,i):this._reflowSmaller(t,i))},r.prototype._reflowLarger=function(t,i){var a=(0,y.reflowLargerGetLinesToRemove)(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(a.length>0){var c=(0,y.reflowLargerCreateNewLayout)(this.lines,a);(0,y.reflowLargerApplyNewLayout)(this.lines,c.layout),this._reflowLargerAdjustViewport(t,i,c.countRemoved)}},r.prototype._reflowLargerAdjustViewport=function(t,i,a){for(var c=this.getNullCell(_.DEFAULT_ATTR_DATA),d=a;d-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new _.BufferLine(t,c))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-a,0)},r.prototype._reflowSmaller=function(t,i){for(var a=this.getNullCell(_.DEFAULT_ATTR_DATA),c=[],d=0,g=this.lines.length-1;g>=0;g--){var S=this.lines.get(g);if(!(!S||!S.isWrapped&&S.getTrimmedLength()<=t)){for(var b=[S];S.isWrapped&&g>0;)S=this.lines.get(--g),b.unshift(S);var C=this.ybase+this.y;if(!(C>=g&&C<g+b.length)){var m,x=b[b.length-1].getTrimmedLength(),w=(0,y.reflowSmallerGetNewLineLengths)(b,this._cols,t),I=w.length-b.length;m=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+I):Math.max(0,this.lines.length-this.lines.maxLength+I);for(var B=[],E=0;E<I;E++){var F=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);B.push(F)}B.length>0&&(c.push({start:g+b.length+d,newLines:B}),d+=B.length),b.push.apply(b,B);var T=w.length-1,H=w[T];H===0&&(H=w[--T]);for(var N=b.length-I-1,z=x;N>=0;){var Z=Math.min(z,H);if(b[T]===void 0)break;if(b[T].copyCellsFrom(b[N],z-Z,H-Z,Z,!0),(H-=Z)==0&&(H=w[--T]),(z-=Z)==0){N--;var X=Math.max(N,0);z=(0,y.getWrappedLineTrimmedLength)(b,X,this._cols)}}for(E=0;E<b.length;E++)w[E]<t&&b[E].setCell(w[E],a);for(var J=I-m;J-- >0;)this.ybase===0?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+d)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+I,this.ybase+i-1)}}}if(c.length>0){var L=[],q=[];for(E=0;E<this.lines.length;E++)q.push(this.lines.get(E));var O=this.lines.length,R=O-1,k=0,G=c[k];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+d);var V=0;for(E=Math.min(this.lines.maxLength-1,O+d-1);E>=0;E--)if(G&&G.start>R+V){for(var Y=G.newLines.length-1;Y>=0;Y--)this.lines.set(E--,G.newLines[Y]);E++,L.push({index:R+1,amount:G.newLines.length}),V+=G.newLines.length,G=c[++k]}else this.lines.set(E,q[R--]);var $=0;for(E=L.length-1;E>=0;E--)L[E].index+=$,this.lines.onInsertEmitter.fire(L[E]),$+=L[E].amount;var Q=Math.max(0,O+d-this.lines.maxLength);Q>0&&this.lines.onTrimEmitter.fire(Q)}},r.prototype.stringIndexToBufferIndex=function(t,i,a){for(a===void 0&&(a=!1);i;){var c=this.lines.get(t);if(!c)return[-1,-1];for(var d=a?c.getTrimmedLength():c.length,g=0;g<d;++g)if(c.get(g)[h.CHAR_DATA_WIDTH_INDEX]&&(i-=c.get(g)[h.CHAR_DATA_CHAR_INDEX].length||1),i<0)return[t,g];t++}return[t,0]},r.prototype.translateBufferLineToString=function(t,i,a,c){a===void 0&&(a=0);var d=this.lines.get(t);return d?d.translateToString(i,a,c):""},r.prototype.getWrappedRangeForLine=function(t){for(var i=t,a=t;i>0&&this.lines.get(i).isWrapped;)i--;for(;a+1<this.lines.length&&this.lines.get(a+1).isWrapped;)a++;return{first:i,last:a}},r.prototype.setupTabStops=function(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0},r.prototype.prevStop=function(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t},r.prototype.nextStop=function(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t},r.prototype.clearMarkers=function(t){if(this._isClearing=!0,t!==void 0)for(var i=0;i<this.markers.length;i++)this.markers[i].line===t&&(this.markers[i].dispose(),this.markers.splice(i--,1));else{for(var a=0,c=this.markers;a<c.length;a++)c[a].dispose();this.markers=[]}this._isClearing=!1},r.prototype.addMarker=function(t){var i=this,a=new v.Marker(t);return this.markers.push(a),a.register(this.lines.onTrim(function(c){a.line-=c,a.line<0&&a.dispose()})),a.register(this.lines.onInsert(function(c){a.line>=c.index&&(a.line+=c.amount)})),a.register(this.lines.onDelete(function(c){a.line>=c.index&&a.line<c.index+c.amount&&a.dispose(),a.line>c.index&&(a.line-=c.amount)})),a.register(a.onDispose(function(){return i._removeMarker(a)})),a},r.prototype._removeMarker=function(t){this._isClearing||this.markers.splice(this.markers.indexOf(t),1)},r.prototype.iterator=function(t,i,a,c,d){return new o(this,t,i,a,c,d)},r}();e.Buffer=p;var o=function(){function r(t,i,a,c,d,g){a===void 0&&(a=0),c===void 0&&(c=t.lines.length),d===void 0&&(d=0),g===void 0&&(g=0),this._buffer=t,this._trimRight=i,this._startIndex=a,this._endIndex=c,this._startOverscan=d,this._endOverscan=g,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return r.prototype.hasNext=function(){return this._current<this._endIndex},r.prototype.next=function(){var t=this._buffer.getWrappedRangeForLine(this._current);t.first<this._startIndex-this._startOverscan&&(t.first=this._startIndex-this._startOverscan),t.last>this._endIndex+this._endOverscan&&(t.last=this._endIndex+this._endOverscan),t.first=Math.max(t.first,0),t.last=Math.min(t.last,this._buffer.lines.length);for(var i="",a=t.first;a<=t.last;++a)i+=this._buffer.translateBufferLineToString(a,this._trimRight);return this._current=t.last+1,{range:t,content:i}},r}();e.BufferStringIterator=o},8437:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferLine=e.DEFAULT_ATTR_DATA=void 0;var l=D(482),_=D(643),f=D(511),h=D(3734);e.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);var y=function(){function v(s,u,p){p===void 0&&(p=!1),this.isWrapped=p,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*s);for(var o=u||f.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),r=0;r<s;++r)this.setCell(r,o);this.length=s}return v.prototype.get=function(s){var u=this._data[3*s+0],p=2097151&u;return[this._data[3*s+1],2097152&u?this._combined[s]:p?(0,l.stringFromCodePoint)(p):"",u>>22,2097152&u?this._combined[s].charCodeAt(this._combined[s].length-1):p]},v.prototype.set=function(s,u){this._data[3*s+1]=u[_.CHAR_DATA_ATTR_INDEX],u[_.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[s]=u[1],this._data[3*s+0]=2097152|s|u[_.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*s+0]=u[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[_.CHAR_DATA_WIDTH_INDEX]<<22},v.prototype.getWidth=function(s){return this._data[3*s+0]>>22},v.prototype.hasWidth=function(s){return 12582912&this._data[3*s+0]},v.prototype.getFg=function(s){return this._data[3*s+1]},v.prototype.getBg=function(s){return this._data[3*s+2]},v.prototype.hasContent=function(s){return 4194303&this._data[3*s+0]},v.prototype.getCodePoint=function(s){var u=this._data[3*s+0];return 2097152&u?this._combined[s].charCodeAt(this._combined[s].length-1):2097151&u},v.prototype.isCombined=function(s){return 2097152&this._data[3*s+0]},v.prototype.getString=function(s){var u=this._data[3*s+0];return 2097152&u?this._combined[s]:2097151&u?(0,l.stringFromCodePoint)(2097151&u):""},v.prototype.loadCell=function(s,u){var p=3*s;return u.content=this._data[p+0],u.fg=this._data[p+1],u.bg=this._data[p+2],2097152&u.content&&(u.combinedData=this._combined[s]),268435456&u.bg&&(u.extended=this._extendedAttrs[s]),u},v.prototype.setCell=function(s,u){2097152&u.content&&(this._combined[s]=u.combinedData),268435456&u.bg&&(this._extendedAttrs[s]=u.extended),this._data[3*s+0]=u.content,this._data[3*s+1]=u.fg,this._data[3*s+2]=u.bg},v.prototype.setCellFromCodePoint=function(s,u,p,o,r,t){268435456&r&&(this._extendedAttrs[s]=t),this._data[3*s+0]=u|p<<22,this._data[3*s+1]=o,this._data[3*s+2]=r},v.prototype.addCodepointToCell=function(s,u){var p=this._data[3*s+0];2097152&p?this._combined[s]+=(0,l.stringFromCodePoint)(u):(2097151&p?(this._combined[s]=(0,l.stringFromCodePoint)(2097151&p)+(0,l.stringFromCodePoint)(u),p&=-2097152,p|=2097152):p=u|1<<22,this._data[3*s+0]=p)},v.prototype.insertCells=function(s,u,p,o){if((s%=this.length)&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,o?.fg||0,o?.bg||0,o?.extended||new h.ExtendedAttrs),u<this.length-s){for(var r=new f.CellData,t=this.length-s-u-1;t>=0;--t)this.setCell(s+u+t,this.loadCell(s+t,r));for(t=0;t<u;++t)this.setCell(s+t,p)}else for(t=s;t<this.length;++t)this.setCell(t,p);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,o?.fg||0,o?.bg||0,o?.extended||new h.ExtendedAttrs)},v.prototype.deleteCells=function(s,u,p,o){if(s%=this.length,u<this.length-s){for(var r=new f.CellData,t=0;t<this.length-s-u;++t)this.setCell(s+t,this.loadCell(s+u+t,r));for(t=this.length-u;t<this.length;++t)this.setCell(t,p)}else for(t=s;t<this.length;++t)this.setCell(t,p);s&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,o?.fg||0,o?.bg||0,o?.extended||new h.ExtendedAttrs),this.getWidth(s)!==0||this.hasContent(s)||this.setCellFromCodePoint(s,0,1,o?.fg||0,o?.bg||0,o?.extended||new h.ExtendedAttrs)},v.prototype.replaceCells=function(s,u,p,o){for(s&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,o?.fg||0,o?.bg||0,o?.extended||new h.ExtendedAttrs),u<this.length&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u,0,1,o?.fg||0,o?.bg||0,o?.extended||new h.ExtendedAttrs);s<u&&s<this.length;)this.setCell(s++,p)},v.prototype.resize=function(s,u){if(s!==this.length){if(s>this.length){var p=new Uint32Array(3*s);this.length&&(3*s<this._data.length?p.set(this._data.subarray(0,3*s)):p.set(this._data)),this._data=p;for(var o=this.length;o<s;++o)this.setCell(o,u)}else if(s){(p=new Uint32Array(3*s)).set(this._data.subarray(0,3*s)),this._data=p;var r=Object.keys(this._combined);for(o=0;o<r.length;o++){var t=parseInt(r[o],10);t>=s&&delete this._combined[t]}}else this._data=new Uint32Array(0),this._combined={};this.length=s}},v.prototype.fill=function(s){this._combined={},this._extendedAttrs={};for(var u=0;u<this.length;++u)this.setCell(u,s)},v.prototype.copyFrom=function(s){for(var u in this.length!==s.length?this._data=new Uint32Array(s._data):this._data.set(s._data),this.length=s.length,this._combined={},s._combined)this._combined[u]=s._combined[u];for(var u in this._extendedAttrs={},s._extendedAttrs)this._extendedAttrs[u]=s._extendedAttrs[u];this.isWrapped=s.isWrapped},v.prototype.clone=function(){var s=new v(0);for(var u in s._data=new Uint32Array(this._data),s.length=this.length,this._combined)s._combined[u]=this._combined[u];for(var u in this._extendedAttrs)s._extendedAttrs[u]=this._extendedAttrs[u];return s.isWrapped=this.isWrapped,s},v.prototype.getTrimmedLength=function(){for(var s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0])return s+(this._data[3*s+0]>>22);return 0},v.prototype.copyCellsFrom=function(s,u,p,o,r){var t=s._data;if(r)for(var i=o-1;i>=0;i--)for(var a=0;a<3;a++)this._data[3*(p+i)+a]=t[3*(u+i)+a];else for(i=0;i<o;i++)for(a=0;a<3;a++)this._data[3*(p+i)+a]=t[3*(u+i)+a];var c=Object.keys(s._combined);for(a=0;a<c.length;a++){var d=parseInt(c[a],10);d>=u&&(this._combined[d-u+p]=s._combined[d])}},v.prototype.translateToString=function(s,u,p){s===void 0&&(s=!1),u===void 0&&(u=0),p===void 0&&(p=this.length),s&&(p=Math.min(p,this.getTrimmedLength()));for(var o="";u<p;){var r=this._data[3*u+0],t=2097151&r;o+=2097152&r?this._combined[u]:t?(0,l.stringFromCodePoint)(t):_.WHITESPACE_CELL_CHAR,u+=r>>22||1}return o},v}();e.BufferLine=y},4841:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRangeLength=void 0,e.getRangeLength=function(D,l){if(D.start.y>D.end.y)throw new Error("Buffer range end ("+D.end.x+", "+D.end.y+") cannot be before start ("+D.start.x+", "+D.start.y+")");return l*(D.end.y-D.start.y)+(D.end.x-D.start.x+1)}},4634:(A,e)=>{function D(l,_,f){if(_===l.length-1)return l[_].getTrimmedLength();var h=!l[_].hasContent(f-1)&&l[_].getWidth(f-1)===1,y=l[_+1].getWidth(0)===2;return h&&y?f-1:f}Object.defineProperty(e,"__esModule",{value:!0}),e.getWrappedLineTrimmedLength=e.reflowSmallerGetNewLineLengths=e.reflowLargerApplyNewLayout=e.reflowLargerCreateNewLayout=e.reflowLargerGetLinesToRemove=void 0,e.reflowLargerGetLinesToRemove=function(l,_,f,h,y){for(var v=[],s=0;s<l.length-1;s++){var u=s,p=l.get(++u);if(p.isWrapped){for(var o=[l.get(s)];u<l.length&&p.isWrapped;)o.push(p),p=l.get(++u);if(h>=s&&h<u)s+=o.length-1;else{for(var r=0,t=D(o,r,_),i=1,a=0;i<o.length;){var c=D(o,i,_),d=c-a,g=f-t,S=Math.min(d,g);o[r].copyCellsFrom(o[i],a,t,S,!1),(t+=S)===f&&(r++,t=0),(a+=S)===c&&(i++,a=0),t===0&&r!==0&&o[r-1].getWidth(f-1)===2&&(o[r].copyCellsFrom(o[r-1],f-1,t++,1,!1),o[r-1].setCell(f-1,y))}o[r].replaceCells(t,f,y);for(var b=0,C=o.length-1;C>0&&(C>r||o[C].getTrimmedLength()===0);C--)b++;b>0&&(v.push(s+o.length-b),v.push(b)),s+=o.length-1}}}return v},e.reflowLargerCreateNewLayout=function(l,_){for(var f=[],h=0,y=_[h],v=0,s=0;s<l.length;s++)if(y===s){var u=_[++h];l.onDeleteEmitter.fire({index:s-v,amount:u}),s+=u-1,v+=u,y=_[++h]}else f.push(s);return{layout:f,countRemoved:v}},e.reflowLargerApplyNewLayout=function(l,_){for(var f=[],h=0;h<_.length;h++)f.push(l.get(_[h]));for(h=0;h<f.length;h++)l.set(h,f[h]);l.length=_.length},e.reflowSmallerGetNewLineLengths=function(l,_,f){for(var h=[],y=l.map(function(t,i){return D(l,i,_)}).reduce(function(t,i){return t+i}),v=0,s=0,u=0;u<y;){if(y-u<f){h.push(y-u);break}v+=f;var p=D(l,s,_);v>p&&(v-=p,s++);var o=l[s].getWidth(v-1)===2;o&&v--;var r=o?f-1:f;h.push(r),u+=r}return h},e.getWrappedLineTrimmedLength=D},5295:function(A,e,D){var l,_=this&&this.__extends||(l=function(v,s){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var o in p)Object.prototype.hasOwnProperty.call(p,o)&&(u[o]=p[o])},l(v,s)},function(v,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=v}l(v,s),v.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.BufferSet=void 0;var f=D(9092),h=D(8460),y=function(v){function s(u,p){var o=v.call(this)||this;return o._optionsService=u,o._bufferService=p,o._onBufferActivate=o.register(new h.EventEmitter),o.reset(),o}return _(s,v),Object.defineProperty(s.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),s.prototype.reset=function(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(s.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),s.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},s.prototype.activateAltBuffer=function(u){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(u),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},s.prototype.resize=function(u,p){this._normal.resize(u,p),this._alt.resize(u,p)},s.prototype.setupTabStops=function(u){this._normal.setupTabStops(u),this._alt.setupTabStops(u)},s}(D(844).Disposable);e.BufferSet=y},511:function(A,e,D){var l,_=this&&this.__extends||(l=function(s,u){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,o){p.__proto__=o}||function(p,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(p[r]=o[r])},l(s,u)},function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function p(){this.constructor=s}l(s,u),s.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)});Object.defineProperty(e,"__esModule",{value:!0}),e.CellData=void 0;var f=D(482),h=D(643),y=D(3734),v=function(s){function u(){var p=s!==null&&s.apply(this,arguments)||this;return p.content=0,p.fg=0,p.bg=0,p.extended=new y.ExtendedAttrs,p.combinedData="",p}return _(u,s),u.fromCharData=function(p){var o=new u;return o.setFromCharData(p),o},u.prototype.isCombined=function(){return 2097152&this.content},u.prototype.getWidth=function(){return this.content>>22},u.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""},u.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},u.prototype.setFromCharData=function(p){this.fg=p[h.CHAR_DATA_ATTR_INDEX],this.bg=0;var o=!1;if(p[h.CHAR_DATA_CHAR_INDEX].length>2)o=!0;else if(p[h.CHAR_DATA_CHAR_INDEX].length===2){var r=p[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){var t=p[h.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=t&&t<=57343?this.content=1024*(r-55296)+t-56320+65536|p[h.CHAR_DATA_WIDTH_INDEX]<<22:o=!0}else o=!0}else this.content=p[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[h.CHAR_DATA_WIDTH_INDEX]<<22;o&&(this.combinedData=p[h.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[h.CHAR_DATA_WIDTH_INDEX]<<22)},u.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},u}(y.AttributeData);e.CellData=v},643:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WHITESPACE_CELL_CODE=e.WHITESPACE_CELL_WIDTH=e.WHITESPACE_CELL_CHAR=e.NULL_CELL_CODE=e.NULL_CELL_WIDTH=e.NULL_CELL_CHAR=e.CHAR_DATA_CODE_INDEX=e.CHAR_DATA_WIDTH_INDEX=e.CHAR_DATA_CHAR_INDEX=e.CHAR_DATA_ATTR_INDEX=e.DEFAULT_ATTR=e.DEFAULT_COLOR=void 0,e.DEFAULT_COLOR=256,e.DEFAULT_ATTR=256|e.DEFAULT_COLOR<<9,e.CHAR_DATA_ATTR_INDEX=0,e.CHAR_DATA_CHAR_INDEX=1,e.CHAR_DATA_WIDTH_INDEX=2,e.CHAR_DATA_CODE_INDEX=3,e.NULL_CELL_CHAR="",e.NULL_CELL_WIDTH=1,e.NULL_CELL_CODE=0,e.WHITESPACE_CELL_CHAR=" ",e.WHITESPACE_CELL_WIDTH=1,e.WHITESPACE_CELL_CODE=32},4863:function(A,e,D){var l,_=this&&this.__extends||(l=function(y,v){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(s[p]=u[p])},l(y,v)},function(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function s(){this.constructor=y}l(y,v),y.prototype=v===null?Object.create(v):(s.prototype=v.prototype,new s)});Object.defineProperty(e,"__esModule",{value:!0}),e.Marker=void 0;var f=D(8460),h=function(y){function v(s){var u=y.call(this)||this;return u.line=s,u._id=v._nextId++,u.isDisposed=!1,u._onDispose=new f.EventEmitter,u}return _(v,y),Object.defineProperty(v.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),v.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),y.prototype.dispose.call(this))},v._nextId=1,v}(D(844).Disposable);e.Marker=h},7116:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CHARSET=e.CHARSETS=void 0,e.CHARSETS={},e.DEFAULT_CHARSET=e.CHARSETS.B,e.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},e.CHARSETS.A={"#":"\xA3"},e.CHARSETS.B=void 0,e.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},e.CHARSETS.C=e.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},e.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},e.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},e.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},e.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},e.CHARSETS.E=e.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},e.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},e.CHARSETS.H=e.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},e.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(A,e)=>{var D,l;Object.defineProperty(e,"__esModule",{value:!0}),e.C1=e.C0=void 0,(l=e.C0||(e.C0={})).NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL="\x7F",(D=e.C1||(e.C1={})).PAD="\x80",D.HOP="\x81",D.BPH="\x82",D.NBH="\x83",D.IND="\x84",D.NEL="\x85",D.SSA="\x86",D.ESA="\x87",D.HTS="\x88",D.HTJ="\x89",D.VTS="\x8A",D.PLD="\x8B",D.PLU="\x8C",D.RI="\x8D",D.SS2="\x8E",D.SS3="\x8F",D.DCS="\x90",D.PU1="\x91",D.PU2="\x92",D.STS="\x93",D.CCH="\x94",D.MW="\x95",D.SPA="\x96",D.EPA="\x97",D.SOS="\x98",D.SGCI="\x99",D.SCI="\x9A",D.CSI="\x9B",D.ST="\x9C",D.OSC="\x9D",D.PM="\x9E",D.APC="\x9F"},7399:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.evaluateKeyboardEvent=void 0;var l=D(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};e.evaluateKeyboardEvent=function(f,h,y,v){var s={type:0,cancel:!1,key:void 0},u=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?s.key=h?l.C0.ESC+"OA":l.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?s.key=h?l.C0.ESC+"OD":l.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?s.key=h?l.C0.ESC+"OC":l.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(s.key=h?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(f.shiftKey){s.key=l.C0.BS;break}if(f.altKey){s.key=l.C0.ESC+l.C0.DEL;break}s.key=l.C0.DEL;break;case 9:if(f.shiftKey){s.key=l.C0.ESC+"[Z";break}s.key=l.C0.HT,s.cancel=!0;break;case 13:s.key=f.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,s.cancel=!0;break;case 27:s.key=l.C0.ESC,f.altKey&&(s.key=l.C0.ESC+l.C0.ESC),s.cancel=!0;break;case 37:if(f.metaKey)break;u?(s.key=l.C0.ESC+"[1;"+(u+1)+"D",s.key===l.C0.ESC+"[1;3D"&&(s.key=l.C0.ESC+(y?"b":"[1;5D"))):s.key=h?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(f.metaKey)break;u?(s.key=l.C0.ESC+"[1;"+(u+1)+"C",s.key===l.C0.ESC+"[1;3C"&&(s.key=l.C0.ESC+(y?"f":"[1;5C"))):s.key=h?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(f.metaKey)break;u?(s.key=l.C0.ESC+"[1;"+(u+1)+"A",y||s.key!==l.C0.ESC+"[1;3A"||(s.key=l.C0.ESC+"[1;5A")):s.key=h?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(f.metaKey)break;u?(s.key=l.C0.ESC+"[1;"+(u+1)+"B",y||s.key!==l.C0.ESC+"[1;3B"||(s.key=l.C0.ESC+"[1;5B")):s.key=h?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(s.key=l.C0.ESC+"[2~");break;case 46:s.key=u?l.C0.ESC+"[3;"+(u+1)+"~":l.C0.ESC+"[3~";break;case 36:s.key=u?l.C0.ESC+"[1;"+(u+1)+"H":h?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:s.key=u?l.C0.ESC+"[1;"+(u+1)+"F":h?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:f.shiftKey?s.type=2:s.key=l.C0.ESC+"[5~";break;case 34:f.shiftKey?s.type=3:s.key=l.C0.ESC+"[6~";break;case 112:s.key=u?l.C0.ESC+"[1;"+(u+1)+"P":l.C0.ESC+"OP";break;case 113:s.key=u?l.C0.ESC+"[1;"+(u+1)+"Q":l.C0.ESC+"OQ";break;case 114:s.key=u?l.C0.ESC+"[1;"+(u+1)+"R":l.C0.ESC+"OR";break;case 115:s.key=u?l.C0.ESC+"[1;"+(u+1)+"S":l.C0.ESC+"OS";break;case 116:s.key=u?l.C0.ESC+"[15;"+(u+1)+"~":l.C0.ESC+"[15~";break;case 117:s.key=u?l.C0.ESC+"[17;"+(u+1)+"~":l.C0.ESC+"[17~";break;case 118:s.key=u?l.C0.ESC+"[18;"+(u+1)+"~":l.C0.ESC+"[18~";break;case 119:s.key=u?l.C0.ESC+"[19;"+(u+1)+"~":l.C0.ESC+"[19~";break;case 120:s.key=u?l.C0.ESC+"[20;"+(u+1)+"~":l.C0.ESC+"[20~";break;case 121:s.key=u?l.C0.ESC+"[21;"+(u+1)+"~":l.C0.ESC+"[21~";break;case 122:s.key=u?l.C0.ESC+"[23;"+(u+1)+"~":l.C0.ESC+"[23~";break;case 123:s.key=u?l.C0.ESC+"[24;"+(u+1)+"~":l.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(y&&!v||!f.altKey||f.metaKey)!y||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?s.key=f.key:f.key&&f.ctrlKey&&f.key==="_"&&(s.key=l.C0.US):f.keyCode===65&&(s.type=1);else{var p=_[f.keyCode],o=p?.[f.shiftKey?1:0];if(o)s.key=l.C0.ESC+o;else if(f.keyCode>=65&&f.keyCode<=90){var r=f.ctrlKey?f.keyCode-64:f.keyCode+32;s.key=l.C0.ESC+String.fromCharCode(r)}}else f.keyCode>=65&&f.keyCode<=90?s.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?s.key=l.C0.NUL:f.keyCode>=51&&f.keyCode<=55?s.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?s.key=l.C0.DEL:f.keyCode===219?s.key=l.C0.ESC:f.keyCode===220?s.key=l.C0.FS:f.keyCode===221&&(s.key=l.C0.GS)}return s}},482:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Utf8ToUtf32=e.StringToUtf32=e.utf32ToString=e.stringFromCodePoint=void 0,e.stringFromCodePoint=function(_){return _>65535?(_-=65536,String.fromCharCode(55296+(_>>10))+String.fromCharCode(_%1024+56320)):String.fromCharCode(_)},e.utf32ToString=function(_,f,h){f===void 0&&(f=0),h===void 0&&(h=_.length);for(var y="",v=f;v<h;++v){var s=_[v];s>65535?(s-=65536,y+=String.fromCharCode(55296+(s>>10))+String.fromCharCode(s%1024+56320)):y+=String.fromCharCode(s)}return y};var D=function(){function _(){this._interim=0}return _.prototype.clear=function(){this._interim=0},_.prototype.decode=function(f,h){var y=f.length;if(!y)return 0;var v=0,s=0;this._interim&&(56320<=(o=f.charCodeAt(s++))&&o<=57343?h[v++]=1024*(this._interim-55296)+o-56320+65536:(h[v++]=this._interim,h[v++]=o),this._interim=0);for(var u=s;u<y;++u){var p=f.charCodeAt(u);if(55296<=p&&p<=56319){if(++u>=y)return this._interim=p,v;var o;56320<=(o=f.charCodeAt(u))&&o<=57343?h[v++]=1024*(p-55296)+o-56320+65536:(h[v++]=p,h[v++]=o)}else p!==65279&&(h[v++]=p)}return v},_}();e.StringToUtf32=D;var l=function(){function _(){this.interim=new Uint8Array(3)}return _.prototype.clear=function(){this.interim.fill(0)},_.prototype.decode=function(f,h){var y=f.length;if(!y)return 0;var v,s,u,p,o=0,r=0,t=0;if(this.interim[0]){var i=!1,a=this.interim[0];a&=(224&a)==192?31:(240&a)==224?15:7;for(var c=0,d=void 0;(d=63&this.interim[++c])&&c<4;)a<<=6,a|=d;for(var g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,S=g-c;t<S;){if(t>=y)return 0;if((192&(d=f[t++]))!=128){t--,i=!0;break}this.interim[c++]=d,a<<=6,a|=63&d}i||(g===2?a<128?t--:h[o++]=a:g===3?a<2048||a>=55296&&a<=57343||a===65279||(h[o++]=a):a<65536||a>1114111||(h[o++]=a)),this.interim.fill(0)}for(var b=y-4,C=t;C<y;){for(;!(!(C<b)||128&(v=f[C])||128&(s=f[C+1])||128&(u=f[C+2])||128&(p=f[C+3]));)h[o++]=v,h[o++]=s,h[o++]=u,h[o++]=p,C+=4;if((v=f[C++])<128)h[o++]=v;else if((224&v)==192){if(C>=y)return this.interim[0]=v,o;if((192&(s=f[C++]))!=128){C--;continue}if((r=(31&v)<<6|63&s)<128){C--;continue}h[o++]=r}else if((240&v)==224){if(C>=y)return this.interim[0]=v,o;if((192&(s=f[C++]))!=128){C--;continue}if(C>=y)return this.interim[0]=v,this.interim[1]=s,o;if((192&(u=f[C++]))!=128){C--;continue}if((r=(15&v)<<12|(63&s)<<6|63&u)<2048||r>=55296&&r<=57343||r===65279)continue;h[o++]=r}else if((248&v)==240){if(C>=y)return this.interim[0]=v,o;if((192&(s=f[C++]))!=128){C--;continue}if(C>=y)return this.interim[0]=v,this.interim[1]=s,o;if((192&(u=f[C++]))!=128){C--;continue}if(C>=y)return this.interim[0]=v,this.interim[1]=s,this.interim[2]=u,o;if((192&(p=f[C++]))!=128){C--;continue}if((r=(7&v)<<18|(63&s)<<12|(63&u)<<6|63&p)<65536||r>1114111)continue;h[o++]=r}}return o},_}();e.Utf8ToUtf32=l},225:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeV6=void 0;var l,_=D(8273),f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],y=function(){function v(){if(this.version="6",!l){l=new Uint8Array(65536),(0,_.fill)(l,1),l[0]=0,(0,_.fill)(l,0,1,32),(0,_.fill)(l,0,127,160),(0,_.fill)(l,2,4352,4448),l[9001]=2,l[9002]=2,(0,_.fill)(l,2,11904,42192),l[12351]=1,(0,_.fill)(l,2,44032,55204),(0,_.fill)(l,2,63744,64256),(0,_.fill)(l,2,65040,65050),(0,_.fill)(l,2,65072,65136),(0,_.fill)(l,2,65280,65377),(0,_.fill)(l,2,65504,65511);for(var s=0;s<f.length;++s)(0,_.fill)(l,0,f[s][0],f[s][1]+1)}}return v.prototype.wcwidth=function(s){return s<32?0:s<127?1:s<65536?l[s]:function(u,p){var o,r=0,t=p.length-1;if(u<p[0][0]||u>p[t][1])return!1;for(;t>=r;)if(u>p[o=r+t>>1][1])r=o+1;else{if(!(u<p[o][0]))return!0;t=o-1}return!1}(s,h)?0:s>=131072&&s<=196605||s>=196608&&s<=262141?2:1},v}();e.UnicodeV6=y},5981:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WriteBuffer=void 0;var D=typeof queueMicrotask>"u"?function(_){Promise.resolve().then(_)}:queueMicrotask,l=function(){function _(f){this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return _.prototype.writeSync=function(f,h){if(h!==void 0&&this._syncCalls>h)this._syncCalls=0;else if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);var v=this._callbacks.shift();v&&v()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},_.prototype.write=function(f,h){var y=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return y._innerWrite()})),this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(h)},_.prototype._innerWrite=function(f,h){var y=this;f===void 0&&(f=0),h===void 0&&(h=!0);for(var v=f||Date.now();this._writeBuffer.length>this._bufferOffset;){var s=this._writeBuffer[this._bufferOffset],u=this._action(s,h);if(u)return void u.catch(function(o){return D(function(){throw o}),Promise.resolve(!1)}).then(function(o){return Date.now()-v>=12?setTimeout(function(){return y._innerWrite(0,o)}):y._innerWrite(v,o)});var p=this._callbacks[this._bufferOffset];if(p&&p(),this._bufferOffset++,this._pendingData-=s.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return y._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},_}();e.WriteBuffer=l},5941:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toRgbString=e.parseColor=void 0;var D=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function _(f,h){var y=f.toString(16),v=y.length<2?"0"+y:y;switch(h){case 4:return y[0];case 8:return v;case 12:return(v+v).slice(0,3);default:return v+v}}e.parseColor=function(f){if(f){var h=f.toLowerCase();if(h.indexOf("rgb:")===0){h=h.slice(4);var y=D.exec(h);if(y){var v=y[1]?15:y[4]?255:y[7]?4095:65535;return[Math.round(parseInt(y[1]||y[4]||y[7]||y[10],16)/v*255),Math.round(parseInt(y[2]||y[5]||y[8]||y[11],16)/v*255),Math.round(parseInt(y[3]||y[6]||y[9]||y[12],16)/v*255)]}}else if(h.indexOf("#")===0&&(h=h.slice(1),l.exec(h)&&[3,6,9,12].includes(h.length))){for(var s=h.length/3,u=[0,0,0],p=0;p<3;++p){var o=parseInt(h.slice(s*p,s*p+s),16);u[p]=s===1?o<<4:s===2?o:s===3?o>>4:o>>8}return u}}},e.toRgbString=function(f,h){h===void 0&&(h=16);var y=f[0],v=f[1],s=f[2];return"rgb:"+_(y,h)+"/"+_(v,h)+"/"+_(s,h)}},5770:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PAYLOAD_LIMIT=void 0,e.PAYLOAD_LIMIT=1e7},6351:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DcsHandler=e.DcsParser=void 0;var l=D(482),_=D(8742),f=D(5770),h=[],y=function(){function u(){this._handlers=Object.create(null),this._active=h,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return u.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=h},u.prototype.registerHandler=function(p,o){this._handlers[p]===void 0&&(this._handlers[p]=[]);var r=this._handlers[p];return r.push(o),{dispose:function(){var t=r.indexOf(o);t!==-1&&r.splice(t,1)}}},u.prototype.clearHandler=function(p){this._handlers[p]&&delete this._handlers[p]},u.prototype.setHandlerFallback=function(p){this._handlerFb=p},u.prototype.reset=function(){if(this._active.length)for(var p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].unhook(!1);this._stack.paused=!1,this._active=h,this._ident=0},u.prototype.hook=function(p,o){if(this.reset(),this._ident=p,this._active=this._handlers[p]||h,this._active.length)for(var r=this._active.length-1;r>=0;r--)this._active[r].hook(o);else this._handlerFb(this._ident,"HOOK",o)},u.prototype.put=function(p,o,r){if(this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].put(p,o,r);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(p,o,r))},u.prototype.unhook=function(p,o){if(o===void 0&&(o=!0),this._active.length){var r=!1,t=this._active.length-1,i=!1;if(this._stack.paused&&(t=this._stack.loopPosition-1,r=o,i=this._stack.fallThrough,this._stack.paused=!1),!i&&r===!1){for(;t>=0&&(r=this._active[t].unhook(p))!==!0;t--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=t,this._stack.fallThrough=!1,r;t--}for(;t>=0;t--)if((r=this._active[t].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=t,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",p);this._active=h,this._ident=0},u}();e.DcsParser=y;var v=new _.Params;v.addParam(0);var s=function(){function u(p){this._handler=p,this._data="",this._params=v,this._hitLimit=!1}return u.prototype.hook=function(p){this._params=p.length>1||p.params[0]?p.clone():v,this._data="",this._hitLimit=!1},u.prototype.put=function(p,o,r){this._hitLimit||(this._data+=(0,l.utf32ToString)(p,o,r),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},u.prototype.unhook=function(p){var o=this,r=!1;if(this._hitLimit)r=!1;else if(p&&(r=this._handler(this._data,this._params))instanceof Promise)return r.then(function(t){return o._params=v,o._data="",o._hitLimit=!1,t});return this._params=v,this._data="",this._hitLimit=!1,r},u}();e.DcsHandler=s},2015:function(A,e,D){var l,_=this&&this.__extends||(l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},l(r,t)},function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=r}l(r,t),r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.EscapeSequenceParser=e.VT500_TRANSITION_TABLE=e.TransitionTable=void 0;var f=D(844),h=D(8273),y=D(8742),v=D(6242),s=D(6351),u=function(){function r(t){this.table=new Uint8Array(t)}return r.prototype.setDefault=function(t,i){(0,h.fill)(this.table,t<<4|i)},r.prototype.add=function(t,i,a,c){this.table[i<<8|t]=a<<4|c},r.prototype.addMany=function(t,i,a,c){for(var d=0;d<t.length;d++)this.table[i<<8|t[d]]=a<<4|c},r}();e.TransitionTable=u;var p=160;e.VT500_TRANSITION_TABLE=function(){var r=new u(4095),t=Array.apply(null,Array(256)).map(function(S,b){return b}),i=function(S,b){return t.slice(S,b)},a=i(32,127),c=i(0,24);c.push(25),c.push.apply(c,i(28,32));var d,g=i(0,14);for(d in r.setDefault(1,0),r.addMany(a,0,2,0),g)r.addMany([24,26,153,154],d,3,0),r.addMany(i(128,144),d,3,0),r.addMany(i(144,152),d,3,0),r.add(156,d,0,0),r.add(27,d,11,1),r.add(157,d,4,8),r.addMany([152,158,159],d,0,7),r.add(155,d,11,3),r.add(144,d,11,9);return r.addMany(c,0,3,0),r.addMany(c,1,3,1),r.add(127,1,0,1),r.addMany(c,8,0,8),r.addMany(c,3,3,3),r.add(127,3,0,3),r.addMany(c,4,3,4),r.add(127,4,0,4),r.addMany(c,6,3,6),r.addMany(c,5,3,5),r.add(127,5,0,5),r.addMany(c,2,3,2),r.add(127,2,0,2),r.add(93,1,4,8),r.addMany(a,8,5,8),r.add(127,8,5,8),r.addMany([156,27,24,26,7],8,6,0),r.addMany(i(28,32),8,0,8),r.addMany([88,94,95],1,0,7),r.addMany(a,7,0,7),r.addMany(c,7,0,7),r.add(156,7,0,0),r.add(127,7,0,7),r.add(91,1,11,3),r.addMany(i(64,127),3,7,0),r.addMany(i(48,60),3,8,4),r.addMany([60,61,62,63],3,9,4),r.addMany(i(48,60),4,8,4),r.addMany(i(64,127),4,7,0),r.addMany([60,61,62,63],4,0,6),r.addMany(i(32,64),6,0,6),r.add(127,6,0,6),r.addMany(i(64,127),6,0,0),r.addMany(i(32,48),3,9,5),r.addMany(i(32,48),5,9,5),r.addMany(i(48,64),5,0,6),r.addMany(i(64,127),5,7,0),r.addMany(i(32,48),4,9,5),r.addMany(i(32,48),1,9,2),r.addMany(i(32,48),2,9,2),r.addMany(i(48,127),2,10,0),r.addMany(i(48,80),1,10,0),r.addMany(i(81,88),1,10,0),r.addMany([89,90,92],1,10,0),r.addMany(i(96,127),1,10,0),r.add(80,1,11,9),r.addMany(c,9,0,9),r.add(127,9,0,9),r.addMany(i(28,32),9,0,9),r.addMany(i(32,48),9,9,12),r.addMany(i(48,60),9,8,10),r.addMany([60,61,62,63],9,9,10),r.addMany(c,11,0,11),r.addMany(i(32,128),11,0,11),r.addMany(i(28,32),11,0,11),r.addMany(c,10,0,10),r.add(127,10,0,10),r.addMany(i(28,32),10,0,10),r.addMany(i(48,60),10,8,10),r.addMany([60,61,62,63],10,0,11),r.addMany(i(32,48),10,9,12),r.addMany(c,12,0,12),r.add(127,12,0,12),r.addMany(i(28,32),12,0,12),r.addMany(i(32,48),12,9,12),r.addMany(i(48,64),12,0,11),r.addMany(i(64,127),12,12,13),r.addMany(i(64,127),10,12,13),r.addMany(i(64,127),9,12,13),r.addMany(c,13,13,13),r.addMany(a,13,13,13),r.add(127,13,0,13),r.addMany([27,156,24,26],13,14,0),r.add(p,0,2,0),r.add(p,8,5,8),r.add(p,6,0,6),r.add(p,11,0,11),r.add(p,13,13,13),r}();var o=function(r){function t(i){i===void 0&&(i=e.VT500_TRANSITION_TABLE);var a=r.call(this)||this;return a._transitions=i,a._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},a.initialState=0,a.currentState=a.initialState,a._params=new y.Params,a._params.addParam(0),a._collect=0,a.precedingCodepoint=0,a._printHandlerFb=function(c,d,g){},a._executeHandlerFb=function(c){},a._csiHandlerFb=function(c,d){},a._escHandlerFb=function(c){},a._errorHandlerFb=function(c){return c},a._printHandler=a._printHandlerFb,a._executeHandlers=Object.create(null),a._csiHandlers=Object.create(null),a._escHandlers=Object.create(null),a._oscParser=new v.OscParser,a._dcsParser=new s.DcsParser,a._errorHandler=a._errorHandlerFb,a.registerEscHandler({final:"\\"},function(){return!0}),a}return _(t,r),t.prototype._identifier=function(i,a){a===void 0&&(a=[64,126]);var c=0;if(i.prefix){if(i.prefix.length>1)throw new Error("only one byte as prefix supported");if((c=i.prefix.charCodeAt(0))&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(i.intermediates){if(i.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var d=0;d<i.intermediates.length;++d){var g=i.intermediates.charCodeAt(d);if(32>g||g>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=g}}if(i.final.length!==1)throw new Error("final must be a single byte");var S=i.final.charCodeAt(0);if(a[0]>S||S>a[1])throw new Error("final must be in range "+a[0]+" .. "+a[1]);return(c<<=8)|S},t.prototype.identToString=function(i){for(var a=[];i;)a.push(String.fromCharCode(255&i)),i>>=8;return a.reverse().join("")},t.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},t.prototype.setPrintHandler=function(i){this._printHandler=i},t.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},t.prototype.registerEscHandler=function(i,a){var c=this._identifier(i,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);var d=this._escHandlers[c];return d.push(a),{dispose:function(){var g=d.indexOf(a);g!==-1&&d.splice(g,1)}}},t.prototype.clearEscHandler=function(i){this._escHandlers[this._identifier(i,[48,126])]&&delete this._escHandlers[this._identifier(i,[48,126])]},t.prototype.setEscHandlerFallback=function(i){this._escHandlerFb=i},t.prototype.setExecuteHandler=function(i,a){this._executeHandlers[i.charCodeAt(0)]=a},t.prototype.clearExecuteHandler=function(i){this._executeHandlers[i.charCodeAt(0)]&&delete this._executeHandlers[i.charCodeAt(0)]},t.prototype.setExecuteHandlerFallback=function(i){this._executeHandlerFb=i},t.prototype.registerCsiHandler=function(i,a){var c=this._identifier(i);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);var d=this._csiHandlers[c];return d.push(a),{dispose:function(){var g=d.indexOf(a);g!==-1&&d.splice(g,1)}}},t.prototype.clearCsiHandler=function(i){this._csiHandlers[this._identifier(i)]&&delete this._csiHandlers[this._identifier(i)]},t.prototype.setCsiHandlerFallback=function(i){this._csiHandlerFb=i},t.prototype.registerDcsHandler=function(i,a){return this._dcsParser.registerHandler(this._identifier(i),a)},t.prototype.clearDcsHandler=function(i){this._dcsParser.clearHandler(this._identifier(i))},t.prototype.setDcsHandlerFallback=function(i){this._dcsParser.setHandlerFallback(i)},t.prototype.registerOscHandler=function(i,a){return this._oscParser.registerHandler(i,a)},t.prototype.clearOscHandler=function(i){this._oscParser.clearHandler(i)},t.prototype.setOscHandlerFallback=function(i){this._oscParser.setHandlerFallback(i)},t.prototype.setErrorHandler=function(i){this._errorHandler=i},t.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},t.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},t.prototype._preserveStack=function(i,a,c,d,g){this._parseStack.state=i,this._parseStack.handlers=a,this._parseStack.handlerPos=c,this._parseStack.transition=d,this._parseStack.chunkPos=g},t.prototype.parse=function(i,a,c){var d,g=0,S=0,b=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,b=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var C=this._parseStack.handlers,m=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&m>-1){for(;m>=0&&(d=C[m](this._params))!==!0;m--)if(d instanceof Promise)return this._parseStack.handlerPos=m,d}this._parseStack.handlers=[];break;case 4:if(c===!1&&m>-1){for(;m>=0&&(d=C[m]())!==!0;m--)if(d instanceof Promise)return this._parseStack.handlerPos=m,d}this._parseStack.handlers=[];break;case 6:if(g=i[this._parseStack.chunkPos],d=this._dcsParser.unhook(g!==24&&g!==26,c))return d;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(g=i[this._parseStack.chunkPos],d=this._oscParser.end(g!==24&&g!==26,c))return d;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,b=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var x=b;x<a;++x){switch(g=i[x],(S=this._transitions.table[this.currentState<<8|(g<160?g:p)])>>4){case 2:for(var w=x+1;;++w){if(w>=a||(g=i[w])<32||g>126&&g<p){this._printHandler(i,x,w),x=w-1;break}if(++w>=a||(g=i[w])<32||g>126&&g<p){this._printHandler(i,x,w),x=w-1;break}if(++w>=a||(g=i[w])<32||g>126&&g<p){this._printHandler(i,x,w),x=w-1;break}if(++w>=a||(g=i[w])<32||g>126&&g<p){this._printHandler(i,x,w),x=w-1;break}}break;case 3:this._executeHandlers[g]?this._executeHandlers[g]():this._executeHandlerFb(g),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:x,code:g,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var I=(C=this._csiHandlers[this._collect<<8|g])?C.length-1:-1;I>=0&&(d=C[I](this._params))!==!0;I--)if(d instanceof Promise)return this._preserveStack(3,C,I,S,x),d;I<0&&this._csiHandlerFb(this._collect<<8|g,this._params),this.precedingCodepoint=0;break;case 8:do switch(g){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(g-48)}while(++x<a&&(g=i[x])>47&&g<60);x--;break;case 9:this._collect<<=8,this._collect|=g;break;case 10:for(var B=this._escHandlers[this._collect<<8|g],E=B?B.length-1:-1;E>=0&&(d=B[E]())!==!0;E--)if(d instanceof Promise)return this._preserveStack(4,B,E,S,x),d;E<0&&this._escHandlerFb(this._collect<<8|g),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|g,this._params);break;case 13:for(var F=x+1;;++F)if(F>=a||(g=i[F])===24||g===26||g===27||g>127&&g<p){this._dcsParser.put(i,x,F),x=F-1;break}break;case 14:if(d=this._dcsParser.unhook(g!==24&&g!==26))return this._preserveStack(6,[],0,S,x),d;g===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var T=x+1;;T++)if(T>=a||(g=i[T])<32||g>127&&g<p){this._oscParser.put(i,x,T),x=T-1;break}break;case 6:if(d=this._oscParser.end(g!==24&&g!==26))return this._preserveStack(5,[],0,S,x),d;g===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}},t}(f.Disposable);e.EscapeSequenceParser=o},6242:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OscHandler=e.OscParser=void 0;var l=D(5770),_=D(482),f=[],h=function(){function v(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return v.prototype.registerHandler=function(s,u){this._handlers[s]===void 0&&(this._handlers[s]=[]);var p=this._handlers[s];return p.push(u),{dispose:function(){var o=p.indexOf(u);o!==-1&&p.splice(o,1)}}},v.prototype.clearHandler=function(s){this._handlers[s]&&delete this._handlers[s]},v.prototype.setHandlerFallback=function(s){this._handlerFb=s},v.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=f},v.prototype.reset=function(){if(this._state===2)for(var s=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;s>=0;--s)this._active[s].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0},v.prototype._start=function(){if(this._active=this._handlers[this._id]||f,this._active.length)for(var s=this._active.length-1;s>=0;s--)this._active[s].start();else this._handlerFb(this._id,"START")},v.prototype._put=function(s,u,p){if(this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].put(s,u,p);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(s,u,p))},v.prototype.start=function(){this.reset(),this._state=1},v.prototype.put=function(s,u,p){if(this._state!==3){if(this._state===1)for(;u<p;){var o=s[u++];if(o===59){this._state=2,this._start();break}if(o<48||57<o)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+o-48}this._state===2&&p-u>0&&this._put(s,u,p)}},v.prototype.end=function(s,u){if(u===void 0&&(u=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var p=!1,o=this._active.length-1,r=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,p=u,r=this._stack.fallThrough,this._stack.paused=!1),!r&&p===!1){for(;o>=0&&(p=this._active[o].end(s))!==!0;o--)if(p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,p;o--}for(;o>=0;o--)if((p=this._active[o].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,p}else this._handlerFb(this._id,"END",s);this._active=f,this._id=-1,this._state=0}},v}();e.OscParser=h;var y=function(){function v(s){this._handler=s,this._data="",this._hitLimit=!1}return v.prototype.start=function(){this._data="",this._hitLimit=!1},v.prototype.put=function(s,u,p){this._hitLimit||(this._data+=(0,_.utf32ToString)(s,u,p),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},v.prototype.end=function(s){var u=this,p=!1;if(this._hitLimit)p=!1;else if(s&&(p=this._handler(this._data))instanceof Promise)return p.then(function(o){return u._data="",u._hitLimit=!1,o});return this._data="",this._hitLimit=!1,p},v}();e.OscHandler=y},8742:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Params=void 0;var D=2147483647,l=function(){function _(f,h){if(f===void 0&&(f=32),h===void 0&&(h=32),this.maxLength=f,this.maxSubParamsLength=h,h>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(h),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return _.fromArray=function(f){var h=new _;if(!f.length)return h;for(var y=Array.isArray(f[0])?1:0;y<f.length;++y){var v=f[y];if(Array.isArray(v))for(var s=0;s<v.length;++s)h.addSubParam(v[s]);else h.addParam(v)}return h},_.prototype.clone=function(){var f=new _(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f},_.prototype.toArray=function(){for(var f=[],h=0;h<this.length;++h){f.push(this.params[h]);var y=this._subParamsIdx[h]>>8,v=255&this._subParamsIdx[h];v-y>0&&f.push(Array.prototype.slice.call(this._subParams,y,v))}return f},_.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},_.prototype.addParam=function(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>D?D:f}},_.prototype.addSubParam=function(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>D?D:f,this._subParamsIdx[this.length-1]++}},_.prototype.hasSubParams=function(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0},_.prototype.getSubParams=function(f){var h=this._subParamsIdx[f]>>8,y=255&this._subParamsIdx[f];return y-h>0?this._subParams.subarray(h,y):null},_.prototype.getSubParamsAll=function(){for(var f={},h=0;h<this.length;++h){var y=this._subParamsIdx[h]>>8,v=255&this._subParamsIdx[h];v-y>0&&(f[h]=this._subParams.slice(y,v))}return f},_.prototype.addDigit=function(f){var h;if(!(this._rejectDigits||!(h=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var y=this._digitIsSub?this._subParams:this.params,v=y[h-1];y[h-1]=~v?Math.min(10*v+f,D):f}},_}();e.Params=l},5741:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AddonManager=void 0;var D=function(){function l(){this._addons=[]}return l.prototype.dispose=function(){for(var _=this._addons.length-1;_>=0;_--)this._addons[_].instance.dispose()},l.prototype.loadAddon=function(_,f){var h=this,y={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(y),f.dispose=function(){return h._wrappedAddonDispose(y)},f.activate(_)},l.prototype._wrappedAddonDispose=function(_){if(!_.isDisposed){for(var f=-1,h=0;h<this._addons.length;h++)if(this._addons[h]===_){f=h;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");_.isDisposed=!0,_.dispose.apply(_.instance),this._addons.splice(f,1)}},l}();e.AddonManager=D},8771:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferApiView=void 0;var l=D(3785),_=D(511),f=function(){function h(y,v){this._buffer=y,this.type=v}return h.prototype.init=function(y){return this._buffer=y,this},Object.defineProperty(h.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),h.prototype.getLine=function(y){var v=this._buffer.lines.get(y);if(v)return new l.BufferLineApiView(v)},h.prototype.getNullCell=function(){return new _.CellData},h}();e.BufferApiView=f},3785:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferLineApiView=void 0;var l=D(511),_=function(){function f(h){this._line=h}return Object.defineProperty(f.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),f.prototype.getCell=function(h,y){if(!(h<0||h>=this._line.length))return y?(this._line.loadCell(h,y),y):this._line.loadCell(h,new l.CellData)},f.prototype.translateToString=function(h,y,v){return this._line.translateToString(h,y,v)},f}();e.BufferLineApiView=_},8285:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferNamespaceApi=void 0;var l=D(8771),_=D(8460),f=function(){function h(y){var v=this;this._core=y,this._onBufferChange=new _.EventEmitter,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return v._onBufferChange.fire(v.active)})}return Object.defineProperty(h.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),h}();e.BufferNamespaceApi=f},7975:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ParserApi=void 0;var D=function(){function l(_){this._core=_}return l.prototype.registerCsiHandler=function(_,f){return this._core.registerCsiHandler(_,function(h){return f(h.toArray())})},l.prototype.addCsiHandler=function(_,f){return this.registerCsiHandler(_,f)},l.prototype.registerDcsHandler=function(_,f){return this._core.registerDcsHandler(_,function(h,y){return f(h,y.toArray())})},l.prototype.addDcsHandler=function(_,f){return this.registerDcsHandler(_,f)},l.prototype.registerEscHandler=function(_,f){return this._core.registerEscHandler(_,f)},l.prototype.addEscHandler=function(_,f){return this.registerEscHandler(_,f)},l.prototype.registerOscHandler=function(_,f){return this._core.registerOscHandler(_,f)},l.prototype.addOscHandler=function(_,f){return this.registerOscHandler(_,f)},l}();e.ParserApi=D},7090:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeApi=void 0;var D=function(){function l(_){this._core=_}return l.prototype.register=function(_){this._core.unicodeService.register(_)},Object.defineProperty(l.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(_){this._core.unicodeService.activeVersion=_},enumerable:!1,configurable:!0}),l}();e.UnicodeApi=D},744:function(A,e,D){var l,_=this&&this.__extends||(l=function(o,r){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])},l(o,r)},function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=o}l(o,r),o.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),f=this&&this.__decorate||function(o,r,t,i){var a,c=arguments.length,d=c<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,r,t,i);else for(var g=o.length-1;g>=0;g--)(a=o[g])&&(d=(c<3?a(d):c>3?a(r,t,d):a(r,t))||d);return c>3&&d&&Object.defineProperty(r,t,d),d},h=this&&this.__param||function(o,r){return function(t,i){r(t,i,o)}};Object.defineProperty(e,"__esModule",{value:!0}),e.BufferService=e.MINIMUM_ROWS=e.MINIMUM_COLS=void 0;var y=D(2585),v=D(5295),s=D(8460),u=D(844);e.MINIMUM_COLS=2,e.MINIMUM_ROWS=1;var p=function(o){function r(t){var i=o.call(this)||this;return i._optionsService=t,i.isUserScrolling=!1,i._onResize=new s.EventEmitter,i._onScroll=new s.EventEmitter,i.cols=Math.max(t.rawOptions.cols||0,e.MINIMUM_COLS),i.rows=Math.max(t.rawOptions.rows||0,e.MINIMUM_ROWS),i.buffers=new v.BufferSet(t,i),i}return _(r,o),Object.defineProperty(r.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){o.prototype.dispose.call(this),this.buffers.dispose()},r.prototype.resize=function(t,i){this.cols=t,this.rows=i,this.buffers.resize(t,i),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:t,rows:i})},r.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},r.prototype.scroll=function(t,i){i===void 0&&(i=!1);var a,c=this.buffer;(a=this._cachedBlankLine)&&a.length===this.cols&&a.getFg(0)===t.fg&&a.getBg(0)===t.bg||(a=c.getBlankLine(t,i),this._cachedBlankLine=a),a.isWrapped=i;var d=c.ybase+c.scrollTop,g=c.ybase+c.scrollBottom;if(c.scrollTop===0){var S=c.lines.isFull;g===c.lines.length-1?S?c.lines.recycle().copyFrom(a):c.lines.push(a.clone()):c.lines.splice(g+1,0,a.clone()),S?this.isUserScrolling&&(c.ydisp=Math.max(c.ydisp-1,0)):(c.ybase++,this.isUserScrolling||c.ydisp++)}else{var b=g-d+1;c.lines.shiftElements(d+1,b-1,-1),c.lines.set(g,a.clone())}this.isUserScrolling||(c.ydisp=c.ybase),this._onScroll.fire(c.ydisp)},r.prototype.scrollLines=function(t,i,a){var c=this.buffer;if(t<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else t+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);var d=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+t,c.ybase),0),d!==c.ydisp&&(i||this._onScroll.fire(c.ydisp))},r.prototype.scrollPages=function(t){this.scrollLines(t*(this.rows-1))},r.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},r.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},r.prototype.scrollToLine=function(t){var i=t-this.buffer.ydisp;i!==0&&this.scrollLines(i)},f([h(0,y.IOptionsService)],r)}(u.Disposable);e.BufferService=p},7994:(A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CharsetService=void 0;var D=function(){function l(){this.glevel=0,this._charsets=[]}return l.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},l.prototype.setgLevel=function(_){this.glevel=_,this.charset=this._charsets[_]},l.prototype.setgCharset=function(_,f){this._charsets[_]=f,this.glevel===_&&(this.charset=f)},l}();e.CharsetService=D},1753:function(A,e,D){var l=this&&this.__decorate||function(o,r,t,i){var a,c=arguments.length,d=c<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,r,t,i);else for(var g=o.length-1;g>=0;g--)(a=o[g])&&(d=(c<3?a(d):c>3?a(r,t,d):a(r,t))||d);return c>3&&d&&Object.defineProperty(r,t,d),d},_=this&&this.__param||function(o,r){return function(t,i){r(t,i,o)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CoreMouseService=void 0;var f=D(2585),h=D(8460),y={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(o){return o.button!==4&&o.action===1&&(o.ctrl=!1,o.alt=!1,o.shift=!1,!0)}},VT200:{events:19,restrict:function(o){return o.action!==32}},DRAG:{events:23,restrict:function(o){return o.action!==32||o.button!==3}},ANY:{events:31,restrict:function(o){return!0}}};function v(o,r){var t=(o.ctrl?16:0)|(o.shift?4:0)|(o.alt?8:0);return o.button===4?(t|=64,t|=o.action):(t|=3&o.button,4&o.button&&(t|=64),8&o.button&&(t|=128),o.action===32?t|=32:o.action!==0||r||(t|=3)),t}var s=String.fromCharCode,u={DEFAULT:function(o){var r=[v(o,!1)+32,o.col+32,o.row+32];return r[0]>255||r[1]>255||r[2]>255?"":"\x1B[M"+s(r[0])+s(r[1])+s(r[2])},SGR:function(o){var r=o.action===0&&o.button!==4?"m":"M";return"\x1B[<"+v(o,!0)+";"+o.col+";"+o.row+r}},p=function(){function o(r,t){this._bufferService=r,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new h.EventEmitter,this._lastEvent=null;for(var i=0,a=Object.keys(y);i<a.length;i++){var c=a[i];this.addProtocol(c,y[c])}for(var d=0,g=Object.keys(u);d<g.length;d++){var S=g[d];this.addEncoding(S,u[S])}this.reset()}return o.prototype.addProtocol=function(r,t){this._protocols[r]=t},o.prototype.addEncoding=function(r,t){this._encodings[r]=t},Object.defineProperty(o.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(r){if(!this._protocols[r])throw new Error('unknown protocol "'+r+'"');this._activeProtocol=r,this._onProtocolChange.fire(this._protocols[r].events)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(r){if(!this._encodings[r])throw new Error('unknown encoding "'+r+'"');this._activeEncoding=r},enumerable:!1,configurable:!0}),o.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(o.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),o.prototype.triggerMouseEvent=function(r){if(r.col<0||r.col>=this._bufferService.cols||r.row<0||r.row>=this._bufferService.rows||r.button===4&&r.action===32||r.button===3&&r.action!==32||r.button!==4&&(r.action===2||r.action===3)||(r.col++,r.row++,r.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,r))||!this._protocols[this._activeProtocol].restrict(r))return!1;var t=this._encodings[this._activeEncoding](r);return t&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=r,!0},o.prototype.explainEvents=function(r){return{down:!!(1&r),up:!!(2&r),drag:!!(4&r),move:!!(8&r),wheel:!!(16&r)}},o.prototype._compareEvents=function(r,t){return r.col===t.col&&r.row===t.row&&r.button===t.button&&r.action===t.action&&r.ctrl===t.ctrl&&r.alt===t.alt&&r.shift===t.shift},l([_(0,f.IBufferService),_(1,f.ICoreService)],o)}();e.CoreMouseService=p},6975:function(A,e,D){var l,_=this&&this.__extends||(l=function(t,i){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])},l(t,i)},function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function a(){this.constructor=t}l(t,i),t.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}),f=this&&this.__decorate||function(t,i,a,c){var d,g=arguments.length,S=g<3?i:c===null?c=Object.getOwnPropertyDescriptor(i,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(t,i,a,c);else for(var b=t.length-1;b>=0;b--)(d=t[b])&&(S=(g<3?d(S):g>3?d(i,a,S):d(i,a))||S);return g>3&&S&&Object.defineProperty(i,a,S),S},h=this&&this.__param||function(t,i){return function(a,c){i(a,c,t)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CoreService=void 0;var y=D(2585),v=D(8460),s=D(1439),u=D(844),p=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),r=function(t){function i(a,c,d,g){var S=t.call(this)||this;return S._bufferService=c,S._logService=d,S._optionsService=g,S.isCursorInitialized=!1,S.isCursorHidden=!1,S._onData=S.register(new v.EventEmitter),S._onUserInput=S.register(new v.EventEmitter),S._onBinary=S.register(new v.EventEmitter),S._scrollToBottom=a,S.register({dispose:function(){return S._scrollToBottom=void 0}}),S.modes=(0,s.clone)(p),S.decPrivateModes=(0,s.clone)(o),S}return _(i,t),Object.defineProperty(i.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.modes=(0,s.clone)(p),this.decPrivateModes=(0,s.clone)(o)},i.prototype.triggerDataEvent=function(a,c){if(c===void 0&&(c=!1),!this._optionsService.rawOptions.disableStdin){var d=this._bufferService.buffer;d.ybase!==d.ydisp&&this._scrollToBottom(),c&&this._onUserInput.fire(),this._logService.debug('sending data "'+a+'"',function(){return a.split("").map(function(g){return g.charCodeAt(0)})}),this._onData.fire(a)}},i.prototype.triggerBinaryEvent=function(a){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+a+'"',function(){return a.split("").map(function(c){return c.charCodeAt(0)})}),this._onBinary.fire(a))},f([h(1,y.IBufferService),h(2,y.ILogService),h(3,y.IOptionsService)],i)}(u.Disposable);e.CoreService=r},3730:function(A,e,D){var l=this&&this.__decorate||function(y,v,s,u){var p,o=arguments.length,r=o<3?v:u===null?u=Object.getOwnPropertyDescriptor(v,s):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(y,v,s,u);else for(var t=y.length-1;t>=0;t--)(p=y[t])&&(r=(o<3?p(r):o>3?p(v,s,r):p(v,s))||r);return o>3&&r&&Object.defineProperty(v,s,r),r},_=this&&this.__param||function(y,v){return function(s,u){v(s,u,y)}};Object.defineProperty(e,"__esModule",{value:!0}),e.DirtyRowService=void 0;var f=D(2585),h=function(){function y(v){this._bufferService=v,this.clearRange()}return Object.defineProperty(y.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),y.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},y.prototype.markDirty=function(v){v<this._start?this._start=v:v>this._end&&(this._end=v)},y.prototype.markRangeDirty=function(v,s){if(v>s){var u=v;v=s,s=u}v<this._start&&(this._start=v),s>this._end&&(this._end=s)},y.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},l([_(0,f.IBufferService)],y)}();e.DirtyRowService=h},4348:function(A,e,D){var l=this&&this.__spreadArray||function(v,s,u){if(u||arguments.length===2)for(var p,o=0,r=s.length;o<r;o++)!p&&o in s||(p||(p=Array.prototype.slice.call(s,0,o)),p[o]=s[o]);return v.concat(p||Array.prototype.slice.call(s))};Object.defineProperty(e,"__esModule",{value:!0}),e.InstantiationService=e.ServiceCollection=void 0;var _=D(2585),f=D(8343),h=function(){function v(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];this._entries=new Map;for(var p=0,o=s;p<o.length;p++){var r=o[p],t=r[0],i=r[1];this.set(t,i)}}return v.prototype.set=function(s,u){var p=this._entries.get(s);return this._entries.set(s,u),p},v.prototype.forEach=function(s){this._entries.forEach(function(u,p){return s(p,u)})},v.prototype.has=function(s){return this._entries.has(s)},v.prototype.get=function(s){return this._entries.get(s)},v}();e.ServiceCollection=h;var y=function(){function v(){this._services=new h,this._services.set(_.IInstantiationService,this)}return v.prototype.setService=function(s,u){this._services.set(s,u)},v.prototype.getService=function(s){return this._services.get(s)},v.prototype.createInstance=function(s){for(var u=[],p=1;p<arguments.length;p++)u[p-1]=arguments[p];for(var o=(0,f.getServiceDependencies)(s).sort(function(g,S){return g.index-S.index}),r=[],t=0,i=o;t<i.length;t++){var a=i[t],c=this._services.get(a.id);if(!c)throw new Error("[createInstance] "+s.name+" depends on UNKNOWN service "+a.id+".");r.push(c)}var d=o.length>0?o[0].index:u.length;if(u.length!==d)throw new Error("[createInstance] First service dependency of "+s.name+" at position "+(d+1)+" conflicts with "+u.length+" static arguments");return new(s.bind.apply(s,l([void 0],l(l([],u,!0),r,!0),!1)))},v}();e.InstantiationService=y},7866:function(A,e,D){var l=this&&this.__decorate||function(s,u,p,o){var r,t=arguments.length,i=t<3?u:o===null?o=Object.getOwnPropertyDescriptor(u,p):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(s,u,p,o);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(i=(t<3?r(i):t>3?r(u,p,i):r(u,p))||i);return t>3&&i&&Object.defineProperty(u,p,i),i},_=this&&this.__param||function(s,u){return function(p,o){u(p,o,s)}},f=this&&this.__spreadArray||function(s,u,p){if(p||arguments.length===2)for(var o,r=0,t=u.length;r<t;r++)!o&&r in u||(o||(o=Array.prototype.slice.call(u,0,r)),o[r]=u[r]);return s.concat(o||Array.prototype.slice.call(u))};Object.defineProperty(e,"__esModule",{value:!0}),e.LogService=void 0;var h=D(2585),y={debug:h.LogLevelEnum.DEBUG,info:h.LogLevelEnum.INFO,warn:h.LogLevelEnum.WARN,error:h.LogLevelEnum.ERROR,off:h.LogLevelEnum.OFF},v=function(){function s(u){var p=this;this._optionsService=u,this.logLevel=h.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(o){o==="logLevel"&&p._updateLogLevel()})}return s.prototype._updateLogLevel=function(){this.logLevel=y[this._optionsService.rawOptions.logLevel]},s.prototype._evalLazyOptionalParams=function(u){for(var p=0;p<u.length;p++)typeof u[p]=="function"&&(u[p]=u[p]())},s.prototype._log=function(u,p,o){this._evalLazyOptionalParams(o),u.call.apply(u,f([console,"xterm.js: "+p],o,!1))},s.prototype.debug=function(u){for(var p=[],o=1;o<arguments.length;o++)p[o-1]=arguments[o];this.logLevel<=h.LogLevelEnum.DEBUG&&this._log(console.log,u,p)},s.prototype.info=function(u){for(var p=[],o=1;o<arguments.length;o++)p[o-1]=arguments[o];this.logLevel<=h.LogLevelEnum.INFO&&this._log(console.info,u,p)},s.prototype.warn=function(u){for(var p=[],o=1;o<arguments.length;o++)p[o-1]=arguments[o];this.logLevel<=h.LogLevelEnum.WARN&&this._log(console.warn,u,p)},s.prototype.error=function(u){for(var p=[],o=1;o<arguments.length;o++)p[o-1]=arguments[o];this.logLevel<=h.LogLevelEnum.ERROR&&this._log(console.error,u,p)},l([_(0,h.IOptionsService)],s)}();e.LogService=v},7302:function(A,e,D){var l=this&&this.__assign||function(){return l=Object.assign||function(v){for(var s,u=1,p=arguments.length;u<p;u++)for(var o in s=arguments[u])Object.prototype.hasOwnProperty.call(s,o)&&(v[o]=s[o]);return v},l.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.OptionsService=e.DEFAULT_OPTIONS=e.DEFAULT_BELL_SOUND=void 0;var _=D(8460),f=D(6114);e.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",e.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:e.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var h=["normal","bold","100","200","300","400","500","600","700","800","900"],y=function(){function v(s){this._onOptionChange=new _.EventEmitter;var u=l({},e.DEFAULT_OPTIONS);for(var p in s)if(p in u)try{var o=s[p];u[p]=this._sanitizeAndValidateOption(p,o)}catch(r){console.error(r)}this.rawOptions=u,this.options=l({},u),this._setupOptions()}return Object.defineProperty(v.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),v.prototype._setupOptions=function(){var s=this,u=function(t){if(!(t in e.DEFAULT_OPTIONS))throw new Error('No option with key "'+t+'"');return s.rawOptions[t]},p=function(t,i){if(!(t in e.DEFAULT_OPTIONS))throw new Error('No option with key "'+t+'"');i=s._sanitizeAndValidateOption(t,i),s.rawOptions[t]!==i&&(s.rawOptions[t]=i,s._onOptionChange.fire(t))};for(var o in this.rawOptions){var r={get:u.bind(this,o),set:p.bind(this,o)};Object.defineProperty(this.options,o,r)}},v.prototype.setOption=function(s,u){this.options[s]=u},v.prototype._sanitizeAndValidateOption=function(s,u){switch(s){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":u||(u=e.DEFAULT_OPTIONS[s]);break;case"fontWeight":case"fontWeightBold":if(typeof u=="number"&&1<=u&&u<=1e3)break;u=h.includes(u)?u:e.DEFAULT_OPTIONS[s];break;case"cursorWidth":u=Math.floor(u);case"lineHeight":case"tabStopWidth":if(u<1)throw new Error(s+" cannot be less than 1, value: "+u);break;case"minimumContrastRatio":u=Math.max(1,Math.min(21,Math.round(10*u)/10));break;case"scrollback":if((u=Math.min(u,4294967295))<0)throw new Error(s+" cannot be less than 0, value: "+u);break;case"fastScrollSensitivity":case"scrollSensitivity":if(u<=0)throw new Error(s+" cannot be less than or equal to 0, value: "+u);case"rows":case"cols":if(!u&&u!==0)throw new Error(s+" must be numeric, value: "+u)}return u},v.prototype.getOption=function(s){return this.options[s]},v}();e.OptionsService=y},8343:(A,e)=>{function D(l,_,f){_.di$target===_?_.di$dependencies.push({id:l,index:f}):(_.di$dependencies=[{id:l,index:f}],_.di$target=_)}Object.defineProperty(e,"__esModule",{value:!0}),e.createDecorator=e.getServiceDependencies=e.serviceRegistry=void 0,e.serviceRegistry=new Map,e.getServiceDependencies=function(l){return l.di$dependencies||[]},e.createDecorator=function(l){if(e.serviceRegistry.has(l))return e.serviceRegistry.get(l);var _=function(f,h,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");D(_,f,y)};return _.toString=function(){return l},e.serviceRegistry.set(l,_),_}},2585:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IUnicodeService=e.IOptionsService=e.ILogService=e.LogLevelEnum=e.IInstantiationService=e.IDirtyRowService=e.ICharsetService=e.ICoreService=e.ICoreMouseService=e.IBufferService=void 0;var l,_=D(8343);e.IBufferService=(0,_.createDecorator)("BufferService"),e.ICoreMouseService=(0,_.createDecorator)("CoreMouseService"),e.ICoreService=(0,_.createDecorator)("CoreService"),e.ICharsetService=(0,_.createDecorator)("CharsetService"),e.IDirtyRowService=(0,_.createDecorator)("DirtyRowService"),e.IInstantiationService=(0,_.createDecorator)("InstantiationService"),(l=e.LogLevelEnum||(e.LogLevelEnum={}))[l.DEBUG=0]="DEBUG",l[l.INFO=1]="INFO",l[l.WARN=2]="WARN",l[l.ERROR=3]="ERROR",l[l.OFF=4]="OFF",e.ILogService=(0,_.createDecorator)("LogService"),e.IOptionsService=(0,_.createDecorator)("OptionsService"),e.IUnicodeService=(0,_.createDecorator)("UnicodeService")},1480:(A,e,D)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeService=void 0;var l=D(8460),_=D(225),f=function(){function h(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter;var y=new _.UnicodeV6;this.register(y),this._active=y.version,this._activeProvider=y}return Object.defineProperty(h.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"activeVersion",{get:function(){return this._active},set:function(y){if(!this._providers[y])throw new Error('unknown Unicode version "'+y+'"');this._active=y,this._activeProvider=this._providers[y],this._onChange.fire(y)},enumerable:!1,configurable:!0}),h.prototype.register=function(y){this._providers[y.version]=y},h.prototype.wcwidth=function(y){return this._activeProvider.wcwidth(y)},h.prototype.getStringCellWidth=function(y){for(var v=0,s=y.length,u=0;u<s;++u){var p=y.charCodeAt(u);if(55296<=p&&p<=56319){if(++u>=s)return v+this.wcwidth(p);var o=y.charCodeAt(u);56320<=o&&o<=57343?p=1024*(p-55296)+o-56320+65536:v+=this.wcwidth(o)}v+=this.wcwidth(p)}return v},h}();e.UnicodeService=f}},P={};return function A(e){var D=P[e];if(D!==void 0)return D.exports;var l=P[e]={exports:{}};return M[e].call(l.exports,l,l.exports,A),l.exports}(4389)})()})});var Ir=We((Kt,wr)=>{(function(M,P){typeof Kt=="object"&&typeof wr=="object"?wr.exports=P():typeof define=="function"&&define.amd?define([],P):typeof Kt=="object"?Kt.WebLinksAddon=P():M.WebLinksAddon=P()})(self,function(){return(()=>{"use strict";var M={6:(D,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.LinkComputer=l.WebLinkProvider=void 0;var _=function(){function h(y,v,s,u){u===void 0&&(u={}),this._terminal=y,this._regex=v,this._handler=s,this._options=u}return h.prototype.provideLinks=function(y,v){var s=f.computeLink(y,this._regex,this._terminal,this._handler);v(this._addCallbacks(s))},h.prototype._addCallbacks=function(y){var v=this;return y.map(function(s){return s.leave=v._options.leave,s.hover=function(u,p){if(v._options.hover){var o=s.range;v._options.hover(u,p,o)}},s})},h}();l.WebLinkProvider=_;var f=function(){function h(){}return h.computeLink=function(y,v,s,u){for(var p,o=new RegExp(v.source,(v.flags||"")+"g"),r=h._translateBufferLineToStringWithWrap(y-1,!1,s),t=r[0],i=r[1],a=-1,c=[];(p=o.exec(t))!==null;){var d=p[1];if(!d){console.log("match found without corresponding matchIndex");break}if(a=t.indexOf(d,a+1),o.lastIndex=a+d.length,a<0)break;for(var g=a+d.length,S=i+1;g>s.cols;)g-=s.cols,S++;var b={start:{x:a+1,y:i+1},end:{x:g,y:S}};c.push({range:b,text:d,activate:u})}return c},h._translateBufferLineToStringWithWrap=function(y,v,s){var u,p,o="";do{if(!(t=s.buffer.active.getLine(y)))break;t.isWrapped&&y--,p=t.isWrapped}while(p);var r=y;do{var t,i=s.buffer.active.getLine(y+1);if(u=!!i&&i.isWrapped,!(t=s.buffer.active.getLine(y)))break;o+=t.translateToString(!u&&v).substring(0,s.cols),y++}while(u);return[o,r]},h}();l.LinkComputer=f}},P={};function A(D){var l=P[D];if(l!==void 0)return l.exports;var _=P[D]={exports:{}};return M[D](_,_.exports,A),_.exports}var e={};return(()=>{var D=e;Object.defineProperty(D,"__esModule",{value:!0}),D.WebLinksAddon=void 0;var l=A(6),_=new RegExp(`(?:^|[^\\da-z\\.-]+)((https?:\\/\\/)((([\\da-z\\.-]+)\\.([a-z\\.]{2,18}))|((\\d{1,3}\\.){3}\\d{1,3})|(localhost))(:\\d{1,5})?((\\/[\\/\\w\\.\\-%~:+@]*)*([^:"'\\s]))?(\\?[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?(#[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?)($|[^\\/\\w\\.\\-%]+)`);function f(y,v){var s=window.open();if(s){try{s.opener=null}catch{}s.location.href=v}else console.warn("Opening link blocked as opener could not be cleared")}var h=function(){function y(v,s,u){v===void 0&&(v=f),s===void 0&&(s={}),u===void 0&&(u=!1),this._handler=v,this._options=s,this._useLinkProvider=u}return y.prototype.activate=function(v){if(this._terminal=v,this._useLinkProvider&&"registerLinkProvider"in this._terminal){var s=(u=this._options).urlRegex||_;this._linkProvider=this._terminal.registerLinkProvider(new l.WebLinkProvider(this._terminal,s,this._handler,u))}else{var u;(u=this._options).matchIndex=1,this._linkMatcherId=this._terminal.registerLinkMatcher(_,this._handler,u)}},y.prototype.dispose=function(){var v;this._linkMatcherId!==void 0&&this._terminal!==void 0&&this._terminal.deregisterLinkMatcher(this._linkMatcherId),(v=this._linkProvider)===null||v===void 0||v.dispose()},y}();D.WebLinksAddon=h})(),e})()})});var Yr=We((an,kr)=>{var me={};typeof kr>"u"?window.eastasianwidth=me:kr.exports=me;me.eastAsianWidth=function(M){var P=M.charCodeAt(0),A=M.length==2?M.charCodeAt(1):0,e=P;return 55296<=P&&P<=56319&&56320<=A&&A<=57343&&(P&=1023,A&=1023,e=P<<10|A,e+=65536),e==12288||65281<=e&&e<=65376||65504<=e&&e<=65510?"F":e==8361||65377<=e&&e<=65470||65474<=e&&e<=65479||65482<=e&&e<=65487||65490<=e&&e<=65495||65498<=e&&e<=65500||65512<=e&&e<=65518?"H":4352<=e&&e<=4447||4515<=e&&e<=4519||4602<=e&&e<=4607||9001<=e&&e<=9002||11904<=e&&e<=11929||11931<=e&&e<=12019||12032<=e&&e<=12245||12272<=e&&e<=12283||12289<=e&&e<=12350||12353<=e&&e<=12438||12441<=e&&e<=12543||12549<=e&&e<=12589||12593<=e&&e<=12686||12688<=e&&e<=12730||12736<=e&&e<=12771||12784<=e&&e<=12830||12832<=e&&e<=12871||12880<=e&&e<=13054||13056<=e&&e<=19903||19968<=e&&e<=42124||42128<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||55216<=e&&e<=55238||55243<=e&&e<=55291||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65106||65108<=e&&e<=65126||65128<=e&&e<=65131||110592<=e&&e<=110593||127488<=e&&e<=127490||127504<=e&&e<=127546||127552<=e&&e<=127560||127568<=e&&e<=127569||131072<=e&&e<=194367||177984<=e&&e<=196605||196608<=e&&e<=262141?"W":32<=e&&e<=126||162<=e&&e<=163||165<=e&&e<=166||e==172||e==175||10214<=e&&e<=10221||10629<=e&&e<=10630?"Na":e==161||e==164||167<=e&&e<=168||e==170||173<=e&&e<=174||176<=e&&e<=180||182<=e&&e<=186||188<=e&&e<=191||e==198||e==208||215<=e&&e<=216||222<=e&&e<=225||e==230||232<=e&&e<=234||236<=e&&e<=237||e==240||242<=e&&e<=243||247<=e&&e<=250||e==252||e==254||e==257||e==273||e==275||e==283||294<=e&&e<=295||e==299||305<=e&&e<=307||e==312||319<=e&&e<=322||e==324||328<=e&&e<=331||e==333||338<=e&&e<=339||358<=e&&e<=359||e==363||e==462||e==464||e==466||e==468||e==470||e==472||e==474||e==476||e==593||e==609||e==708||e==711||713<=e&&e<=715||e==717||e==720||728<=e&&e<=731||e==733||e==735||768<=e&&e<=879||913<=e&&e<=929||931<=e&&e<=937||945<=e&&e<=961||963<=e&&e<=969||e==1025||1040<=e&&e<=1103||e==1105||e==8208||8211<=e&&e<=8214||8216<=e&&e<=8217||8220<=e&&e<=8221||8224<=e&&e<=8226||8228<=e&&e<=8231||e==8240||8242<=e&&e<=8243||e==8245||e==8251||e==8254||e==8308||e==8319||8321<=e&&e<=8324||e==8364||e==8451||e==8453||e==8457||e==8467||e==8470||8481<=e&&e<=8482||e==8486||e==8491||8531<=e&&e<=8532||8539<=e&&e<=8542||8544<=e&&e<=8555||8560<=e&&e<=8569||e==8585||8592<=e&&e<=8601||8632<=e&&e<=8633||e==8658||e==8660||e==8679||e==8704||8706<=e&&e<=8707||8711<=e&&e<=8712||e==8715||e==8719||e==8721||e==8725||e==8730||8733<=e&&e<=8736||e==8739||e==8741||8743<=e&&e<=8748||e==8750||8756<=e&&e<=8759||8764<=e&&e<=8765||e==8776||e==8780||e==8786||8800<=e&&e<=8801||8804<=e&&e<=8807||8810<=e&&e<=8811||8814<=e&&e<=8815||8834<=e&&e<=8835||8838<=e&&e<=8839||e==8853||e==8857||e==8869||e==8895||e==8978||9312<=e&&e<=9449||9451<=e&&e<=9547||9552<=e&&e<=9587||9600<=e&&e<=9615||9618<=e&&e<=9621||9632<=e&&e<=9633||9635<=e&&e<=9641||9650<=e&&e<=9651||9654<=e&&e<=9655||9660<=e&&e<=9661||9664<=e&&e<=9665||9670<=e&&e<=9672||e==9675||9678<=e&&e<=9681||9698<=e&&e<=9701||e==9711||9733<=e&&e<=9734||e==9737||9742<=e&&e<=9743||9748<=e&&e<=9749||e==9756||e==9758||e==9792||e==9794||9824<=e&&e<=9825||9827<=e&&e<=9829||9831<=e&&e<=9834||9836<=e&&e<=9837||e==9839||9886<=e&&e<=9887||9918<=e&&e<=9919||9924<=e&&e<=9933||9935<=e&&e<=9953||e==9955||9960<=e&&e<=9983||e==10045||e==10071||10102<=e&&e<=10111||11093<=e&&e<=11097||12872<=e&&e<=12879||57344<=e&&e<=63743||65024<=e&&e<=65039||e==65533||127232<=e&&e<=127242||127248<=e&&e<=127277||127280<=e&&e<=127337||127344<=e&&e<=127386||917760<=e&&e<=917999||983040<=e&&e<=1048573||1048576<=e&&e<=1114109?"A":"N"};me.characterLength=function(M){var P=this.eastAsianWidth(M);return P=="F"||P=="W"||P=="A"?2:1};function Xr(M){return M.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}me.length=function(M){for(var P=Xr(M),A=0,e=0;e<P.length;e++)A=A+this.characterLength(P[e]);return A};me.slice=function(M,P,A){textLen=me.length(M),P=P||0,A=A||1,P<0&&(P=textLen+P),A<0&&(A=textLen+A);for(var e="",D=0,l=Xr(M),_=0;_<l.length;_++){var f=l[_],h=me.length(f);if(D>=P-(h==2?1:0))if(D+h<=A)e+=f;else break;D+=h}return e}});var Jr=We((un,Zr)=>{"use strict";Zr.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});var ii=We((_n,ri)=>{ri.exports=function(M,P){P||(P={});var A={bools:{},strings:{},unknownFn:null};typeof P.unknown=="function"&&(A.unknownFn=P.unknown),typeof P.boolean=="boolean"&&P.boolean?A.allBools=!0:[].concat(P.boolean).filter(Boolean).forEach(function(d){A.bools[d]=!0});var e={};Object.keys(P.alias||{}).forEach(function(d){e[d]=[].concat(P.alias[d]),e[d].forEach(function(g){e[g]=[d].concat(e[d].filter(function(S){return g!==S}))})}),[].concat(P.string).filter(Boolean).forEach(function(d){A.strings[d]=!0,e[d]&&(A.strings[e[d]]=!0)});var D=P.default||{},l={_:[]};Object.keys(A.bools).forEach(function(d){h(d,D[d]===void 0?!1:D[d])});var _=[];M.indexOf("--")!==-1&&(_=M.slice(M.indexOf("--")+1),M=M.slice(0,M.indexOf("--")));function f(d,g){return A.allBools&&/^--[^=]+$/.test(g)||A.strings[d]||A.bools[d]||e[d]}function h(d,g,S){if(!(S&&A.unknownFn&&!f(d,S)&&A.unknownFn(S)===!1)){var b=!A.strings[d]&&ti(g)?Number(g):g;y(l,d.split("."),b),(e[d]||[]).forEach(function(C){y(l,C.split("."),b)})}}function y(d,g,S){for(var b=d,C=0;C<g.length-1;C++){var m=g[C];if(m==="__proto__")return;b[m]===void 0&&(b[m]={}),(b[m]===Object.prototype||b[m]===Number.prototype||b[m]===String.prototype)&&(b[m]={}),b[m]===Array.prototype&&(b[m]=[]),b=b[m]}var m=g[g.length-1];m!=="__proto__"&&((b===Object.prototype||b===Number.prototype||b===String.prototype)&&(b={}),b===Array.prototype&&(b=[]),b[m]===void 0||A.bools[m]||typeof b[m]=="boolean"?b[m]=S:Array.isArray(b[m])?b[m].push(S):b[m]=[b[m],S])}function v(d){return e[d].some(function(g){return A.bools[g]})}for(var s=0;s<M.length;s++){var u=M[s];if(/^--.+=/.test(u)){var p=u.match(/^--([^=]+)=([\s\S]*)$/),o=p[1],r=p[2];A.bools[o]&&(r=r!=="false"),h(o,r,u)}else if(/^--no-.+/.test(u)){var o=u.match(/^--no-(.+)/)[1];h(o,!1,u)}else if(/^--.+/.test(u)){var o=u.match(/^--(.+)/)[1],t=M[s+1];t!==void 0&&!/^-/.test(t)&&!A.bools[o]&&!A.allBools&&(e[o]?!v(o):!0)?(h(o,t,u),s++):/^(true|false)$/.test(t)?(h(o,t==="true",u),s++):h(o,A.strings[o]?"":!0,u)}else if(/^-[^-]+/.test(u)){for(var i=u.slice(1,-1).split(""),a=!1,c=0;c<i.length;c++){var t=u.slice(c+2);if(t==="-"){h(i[c],t,u);continue}if(/[A-Za-z]/.test(i[c])&&/=/.test(t)){h(i[c],t.split("=")[1],u),a=!0;break}if(/[A-Za-z]/.test(i[c])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(t)){h(i[c],t,u),a=!0;break}if(i[c+1]&&i[c+1].match(/\W/)){h(i[c],u.slice(c+2),u),a=!0;break}else h(i[c],A.strings[i[c]]?"":!0,u)}var o=u.slice(-1)[0];!a&&o!=="-"&&(M[s+1]&&!/^(-|--)[^-]/.test(M[s+1])&&!A.bools[o]&&(e[o]?!v(o):!0)?(h(o,M[s+1],u),s++):M[s+1]&&/^(true|false)$/.test(M[s+1])?(h(o,M[s+1]==="true",u),s++):h(o,A.strings[o]?"":!0,u))}else if((!A.unknownFn||A.unknownFn(u)!==!1)&&l._.push(A.strings._||!ti(u)?u:Number(u)),P.stopEarly){l._.push.apply(l._,M.slice(s+1));break}}return Object.keys(D).forEach(function(d){Ki(l,d.split("."))||(y(l,d.split("."),D[d]),(e[d]||[]).forEach(function(g){y(l,g.split("."),D[d])}))}),P["--"]?(l["--"]=new Array,_.forEach(function(d){l["--"].push(d)})):_.forEach(function(d){l._.push(d)}),l};function Ki(M,P){var A=M;P.slice(0,-1).forEach(function(D){A=A[D]||{}});var e=P[P.length-1];return e in A}function ti(M){return typeof M=="number"||/^0x[0-9a-f]+$/i.test(M)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(M)}});var li=Ue(Pr(),1),hi=Ue(Ir(),1);var Hr=(M=0)=>P=>`\x1B[${P+M}m`,jr=(M=0)=>P=>`\x1B[${38+M};5;${P}m`,Wr=(M=0)=>(P,A,e)=>`\x1B[${38+M};2;${P};${A};${e}m`;function Ei(){let M=new Map,P={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};P.color.gray=P.color.blackBright,P.bgColor.bgGray=P.bgColor.bgBlackBright,P.color.grey=P.color.blackBright,P.bgColor.bgGrey=P.bgColor.bgBlackBright;for(let[A,e]of Object.entries(P)){for(let[D,l]of Object.entries(e))P[D]={open:`\x1B[${l[0]}m`,close:`\x1B[${l[1]}m`},e[D]=P[D],M.set(l[0],l[1]);Object.defineProperty(P,A,{value:e,enumerable:!1})}return Object.defineProperty(P,"codes",{value:M,enumerable:!1}),P.color.close="\x1B[39m",P.bgColor.close="\x1B[49m",P.color.ansi=Hr(),P.color.ansi256=jr(),P.color.ansi16m=Wr(),P.bgColor.ansi=Hr(10),P.bgColor.ansi256=jr(10),P.bgColor.ansi16m=Wr(10),Object.defineProperties(P,{rgbToAnsi256:{value:(A,e,D)=>A===e&&e===D?A<8?16:A>248?231:Math.round((A-8)/247*24)+232:16+36*Math.round(A/255*5)+6*Math.round(e/255*5)+Math.round(D/255*5),enumerable:!1},hexToRgb:{value:A=>{let e=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(A.toString(16));if(!e)return[0,0,0];let{colorString:D}=e.groups;D.length===3&&(D=[...D].map(_=>_+_).join(""));let l=Number.parseInt(D,16);return[l>>16&255,l>>8&255,l&255]},enumerable:!1},hexToAnsi256:{value:A=>P.rgbToAnsi256(...P.hexToRgb(A)),enumerable:!1},ansi256ToAnsi:{value:A=>{if(A<8)return 30+A;if(A<16)return 90+(A-8);let e,D,l;if(A>=232)e=((A-232)*10+8)/255,D=e,l=e;else{A-=16;let h=A%36;e=Math.floor(A/36)/5,D=Math.floor(h/6)/5,l=h%6/5}let _=Math.max(e,D,l)*2;if(_===0)return 30;let f=30+(Math.round(l)<<2|Math.round(D)<<1|Math.round(e));return _===2&&(f+=60),f},enumerable:!1},rgbToAnsi:{value:(A,e,D)=>P.ansi256ToAnsi(P.rgbToAnsi256(A,e,D)),enumerable:!1},hexToAnsi:{value:A=>P.ansi256ToAnsi(P.hexToAnsi256(A)),enumerable:!1}}),P}var wi=Ei(),he=wi;var xi=/\b(Chrome|Chromium)\//.test(navigator.userAgent),Ur=xi?{level:1,hasBasic:!0,has256:!1,has16m:!1}:!1,Fi={stdout:Ur,stderr:Ur},qr=Fi;function Nr(M,P,A){let e=M.indexOf(P);if(e===-1)return M;let D=P.length,l=0,_="";do _+=M.substr(l,e-l)+P+A,l=e+D,e=M.indexOf(P,l);while(e!==-1);return _+=M.slice(l),_}function zr(M,P,A,e){let D=0,l="";do{let _=M[e-1]==="\r";l+=M.substr(D,(_?e-1:e)-D)+P+(_?`\r
`:`
`)+A,D=e+1,e=M.indexOf(`
`,D)}while(e!==-1);return l+=M.slice(D),l}var{stdout:Kr,stderr:Gr}=qr,xr=Symbol("GENERATOR"),Me=Symbol("STYLER"),qe=Symbol("IS_EMPTY"),Vr=["ansi","ansi","ansi256","ansi16m"],Oe=Object.create(null),Li=(M,P={})=>{if(P.level&&!(Number.isInteger(P.level)&&P.level>=0&&P.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let A=Kr?Kr.level:0;M.level=P.level===void 0?A:P.level};var Ai=M=>{let P=(...A)=>A.join(" ");return Li(P,M),Object.setPrototypeOf(P,Ne.prototype),P};function Ne(M){return Ai(M)}Object.setPrototypeOf(Ne.prototype,Function.prototype);for(let[M,P]of Object.entries(he))Oe[M]={get(){let A=Gt(this,Lr(P.open,P.close,this[Me]),this[qe]);return Object.defineProperty(this,M,{value:A}),A}};Oe.visible={get(){let M=Gt(this,this[Me],!0);return Object.defineProperty(this,"visible",{value:M}),M}};var Fr=(M,P,A,...e)=>M==="rgb"?P==="ansi16m"?he[A].ansi16m(...e):P==="ansi256"?he[A].ansi256(he.rgbToAnsi256(...e)):he[A].ansi(he.rgbToAnsi(...e)):M==="hex"?Fr("rgb",P,A,...he.hexToRgb(...e)):he[A][M](...e),Bi=["rgb","hex","ansi256"];for(let M of Bi){Oe[M]={get(){let{level:A}=this;return function(...e){let D=Lr(Fr(M,Vr[A],"color",...e),he.color.close,this[Me]);return Gt(this,D,this[qe])}}};let P="bg"+M[0].toUpperCase()+M.slice(1);Oe[P]={get(){let{level:A}=this;return function(...e){let D=Lr(Fr(M,Vr[A],"bgColor",...e),he.bgColor.close,this[Me]);return Gt(this,D,this[qe])}}}}var ki=Object.defineProperties(()=>{},{...Oe,level:{enumerable:!0,get(){return this[xr].level},set(M){this[xr].level=M}}}),Lr=(M,P,A)=>{let e,D;return A===void 0?(e=M,D=P):(e=A.openAll+M,D=P+A.closeAll),{open:M,close:P,openAll:e,closeAll:D,parent:A}},Gt=(M,P,A)=>{let e=(...D)=>Mi(e,D.length===1?""+D[0]:D.join(" "));return Object.setPrototypeOf(e,ki),e[xr]=M,e[Me]=P,e[qe]=A,e},Mi=(M,P)=>{if(M.level<=0||!P)return M[qe]?"":P;let A=M[Me];if(A===void 0)return P;let{openAll:e,closeAll:D}=A;if(P.includes("\x1B"))for(;A!==void 0;)P=Nr(P,A.close,A.open),A=A.parent;let l=P.indexOf(`
`);return l!==-1&&(P=zr(P,D,e,l)),e+P+D};Object.defineProperties(Ne.prototype,Oe);var Oi=Ne(),en=Ne({level:Gr?Gr.level:0});var Ce=Oi;var Ri=M=>new Promise(P=>setTimeout(P,M)),ze=Ri;function Ar({onlyFirst:M=!1}={}){let P=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(P,M?void 0:"g")}function Br(M){if(typeof M!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof M}\``);return M.replace(Ar(),"")}var $r=Ue(Yr(),1),Qr=Ue(Jr(),1);function se(M,P={}){if(typeof M!="string"||M.length===0||(P={ambiguousIsNarrow:!0,...P},M=Br(M),M.length===0))return 0;M=M.replace((0,Qr.default)(),"  ");let A=P.ambiguousIsNarrow?1:2,e=0;for(let D of M){let l=D.codePointAt(0);if(l<=31||l>=127&&l<=159||l>=768&&l<=879)continue;switch($r.default.eastAsianWidth(D)){case"F":case"W":e+=2;break;case"A":e+=A;break;default:e+=1}}return e}var ei=({term:M,perm:P,sto:A,AF:e,chalk:D})=>[async()=>{M.writeln("Welcome to HumanOS. Type `help` for help."),P.enable("cmds.help"),M.listenOnce("command-run",async l=>{if(l==="help")return await M.nextLevel()}),M.startReading()},async()=>{M.endReading(),await M.echo(D.bold("HELPLESS\uFF1F\u600E\u4E48\u56DE\u4E8B\uFF1F\uFF1F")+"\u4ECA\u5929\u4E5F\u4E0D\u662F\u2026\u2026\u4E3A\u4EC0\u4E48\u7EC8\u7AEF\u4E0A\u6709\u6211\u7684\u60F3\u6CD5\uFF1F\uFF01",{t:60}),await M.echo(["\u867D\u7136\u597D\u50CF\u5B9E\u65F6\u8BB0\u5F55\u601D\u7EF4\u6D41\u4E5F\u662F HumanOS \u63D0\u4F9B\u7684\u670D\u52A1\uFF0C\u4F46\u5E94\u8BE5\u662F\u989D\u5916\u4ED8\u8D39\u7684\u624D\u5BF9\u2026\u2026","\u554A\u554A\uFF0C\u770B\u7740\u81EA\u5DF1\u7684\u60F3\u6CD5\u59D4\u5B9E\u5F88\u5947\u602A\u5462","\u4E0D\u77E5\u9053 `help` \u547D\u4EE4\u4EC0\u4E48\u60C5\u51B5\uFF0C\u767B\u51FA\u4E0A\u7F51\u67E5\u67E5\u597D\u4E86"]),M.startReading();let l=0;M.listenOnce("command-not-found",async _=>{if(["logout","exit"].includes(_))return await M.nextLevel();++l===4&&(M.endReading(),await M.echo("\u2026\u2026\u767B\u51FA\u547D\u4EE4\uFF0C\u597D\u50CF\u6709\u4E00\u4E2A\u662F `logout` \u5427\uFF0C\u600E\u4E48\u8FDE\u8FD9\u4E5F\u5FD8\u4E86"),M.startReading())})},async()=>{M.endReading(),await M.echo(D.bold("\u4E0D\u80FD\u767B\u51FA\uFF1F\uFF01"),{t:60}),await M.echo(["User\uFF0C\u4F60\u597D\u50CF\u9047\u5230\u4E86\u9EBB\u70E6\uFF1F","\u6211\u662F\u5177\u6709\u4EBA\u5DE5\u667A\u80FD\u7684\u3001\u7CFB\u7EDF\u53C2\u8003\u624B\u518C\u7684\u63A5\u53E3 `human`","\u8981\u662F\u4F60\u95EE\u6211\u548C `man` \u4EC0\u4E48\u5173\u7CFB\u2026\u2026\u53EF\u80FD\u6211\u662F\u4ED6\u7684\u65E0\u6027\u522B HumanOS \u7279\u4F9B\u7248\uFF1F","\u5662\u8BF4\u56DE\u6B63\u9898\uFF0C\u4E0D\u80FD\u767B\u51FA\u5C31\u8BF4\u660E\uFF0C\u4F60\u53EF\u80FD\u4E0D\u5E78\u5730\uFF0C\u5443\uFF0C\u5DF2\u7ECF\u53D8\u6210\u690D\u7269\u4EBA\u4E86","\u7136\u540E\u4F60\u7684\u4E00\u7F15\u610F\u8BC6\u88AB\u4FDD\u5B58\u5728\u4E86\u7EC8\u7AEF\u4E2D","\u2026\u2026\u4ECE\u8FD9\u4E2A\u89D2\u5EA6\u6765\u770B\u4F60\u8FD8\u662F\u5F88\u5E78\u8FD0\u7684","\u6709\u4EC0\u4E48\u95EE\u9898\u4F7F\u7528 `human` \u547D\u4EE4\u6211\u5C31\u4F1A\u51FA\u73B0\u54E6"],{c:"cyan",t:80}),await M.echo(["\u690D\u7269\u4EBA\u2026\u2026\u6211\u4E4B\u524D\u5728\u5BB6\u2026\u2026\u5728\u5BB6\u2026\u2026\u5728\u5BB6\u2026\u2026\u597D\u75DB\uFF01",D.bold("\u4EC0\u4E48\u4E5F\u60F3\u4E0D\u8D77\u6765\u4E86"),"\u5BC4\uFF01","\u81F3\u5C11\u53EF\u4EE5\u80AF\u5B9A\u7684\u662F\u6211\u6B7B\u5728\u5BB6\u91CC\uFF0C\u8FD9\u6BD4\u5728\u5927\u8857\u4E0A\u88AB\u4EBA\u6345\u6B7B\u5B89\u5168\u591A\u4E86"]),P.enable("cmds.human","human.","human.human"),M.listenOnce("command-run",async(l,[_])=>{if(l==="human"&&_==="human")return await M.nextLevel()}),M.startReading()},async()=>{M.endReading(),await M.echo(["User\uFF0C\u5F88\u9AD8\u5174\u6211\u4EEC\u80FD\u7528\u547D\u4EE4\u884C\u7684\u65B9\u5F0F\u4EA4\u6D41\u4E86","\u8FD9\u5F88\u9177\uFF01\u5F53\u7136\uFF0C\u4F5C\u4E3A `human`\uFF0C\u6211\u4E5F\u80FD\u50CF\u4EBA\u7C7B\u90A3\u6837\u8C08\u8BDD","\u800C\u6211\u7684\u4F18\u70B9\u5728\u4E8E\u53EA\u8981\u4F60\u6309\u4E0B `Ctrl + Z` \u6211\u5C31\u4F1A\u52A0\u5FEB\u8BED\u901F","\u6BD5\u7ADF\u8C01\u4F1A\u559C\u6B22\u4E00\u4E2A\u78E8\u78E8\u5527\u5527\u7684\u547D\u4EE4\u884C\u5DE5\u5177\u5462\uFF1F","\u8BF4\u56DE\u6B63\u9898\uFF0C\u4F60\u7684\u5927\u8111\u53D7\u4E86\u635F\u4F24\uFF0C\u5BFC\u81F4\u6211\u7684\u7B97\u529B\u5F88\u53D7\u9650","\u2026\u2026\u4E0D\u592A\u597D\u610F\u601D\u5730\u8BF4\uFF0C\u6211\u73B0\u5728\u548C\u4EBA\u5DE5\u667A\u969C\u6CA1\u4EC0\u4E48\u4E24\u6837","\u4F46\u4F60\u8FD8\u662F\u53EF\u4EE5\u901A\u8FC7 `echo` \u548C\u6211\u5BF9\u8BDD\u7684\uFF01"],{c:"cyan",t:80}),P.enable("cmds.echo","human.echo","ff","af"),e.enable(),M.listenOnce("af",async l=>{if(l>=4)return await M.nextLevel()}),M.startReading()},async()=>{M.endReading(),await M.echo(["\u6211\u662F\u4E0D\u662F\u5F88\u806A\u660E\u5462\uFF01\uFF01","\u597D\u5427\uFF0C\u6211\u627F\u8BA4\u6211\u53EA\u662F\u4E34\u65F6\u627E\u4E86\u4E00\u4E2A\u5B57\u7B26\u4E32\u66FF\u6362\u7684\u7A0B\u5E8F","\u8981\u662F\u4F60\u89C9\u5F97\u4EBA\u5DE5\u667A\u969C\u8FD8\u633A\u597D\u73A9\u7684\u8BDD\uFF0C\u8BF4\u4E00\u58F0 Hi Human \u5C31\u4F1A\u5524\u9192\u6211\u54E6","\u6211\u4E5F\u4E0D\u60F3\u8FD9\u4E48\u6C99\u96D5\uFF0C\u4F46\u4F60\u7684\u5927\u8111\u60C5\u51B5\u5B9E\u5728\u592A\u7CDF\u7CD5\u4E86\u2026\u2026","\u6211\u4EEC\u5E94\u8BE5\u8BD5\u7740\u68C0\u67E5\u4E00\u4E0B\u7CFB\u7EDF\u7684\u60C5\u51B5"],{c:"cyan",t:80}),await M.echo(["\u65E0\u8BBA\u5982\u4F55\u73B0\u5728\u7684\u60C5\u51B5\u90FD"+D.bold("\u592A\u8BE1\u5F02\u4E86"),D.italic("\u8FD9\u4E9B\u547D\u4EE4\u597D\u50CF\u90FD\u2026\u2026\u6709\u4E86\u81EA\u5DF1\u7684\u60F3\u6CD5\u4E00\u6837"),"\u4E0D\u8FC7\u81EA\u4ECE `human` \u544A\u8BC9\u6211\u5C31\u662F `echo` \u5728\u6253\u5370\u6211\u7684\u601D\u7EF4\u6D41\u4E4B\u540E","\u6211\u4F3C\u4E4E\u9010\u6E10\u80FD\u63A7\u5236\u5B83\u4E86\uFF0C\u800C\u4E14\u5BF9\u60C5\u7EEA\u91CD\u65B0\u6709\u4E86\u63A7\u5236\u2026\u2026\u53EF\u80FD\u5427","\u8BB0\u5FC6\u8FD8\u662F\u4E00\u56E2\u7CDF\uFF0C\u4E00\u65E6\u56DE\u60F3\u4EC0\u4E48\u5C31\u4F1A\u75DB\u5F97\u751F\u6D3B\u4E0D\u80FD\u81EA\u7406",D.dim("\u597D\u5427\u690D\u7269\u4EBA\u4F3C\u4E4E\u786E\u5B9E\u4E0D\u80FD\u81EA\u7406"),"\u6211\u5728\u60F3\u4E9B\u4EC0\u4E48\u554A\u3001\u3001\u73B0\u5728\u5E94\u8BE5\u7740\u624B\u68C0\u67E5\u7CFB\u7EDF\u624D\u5BF9","\u8BB0\u5F97 HumanOS \u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8BB0\u5FC6\u6587\u4EF6","\u6211\u5F97\u6478\u7D22\u4E00\u4E0B\u6587\u4EF6\u7CFB\u7EDF\u4E86"],{t:100}),P.enable("cmds.ls","cmds.cat","cmds.cd","cmds.pwd","human.ls","human.cat","human.cd","human.pwd"),M.listenOnce("cat",async l=>{if(l.join("/")==="home/Memories/before_human.mem")return await M.nextLevel()}),M.startReading()},async()=>{M.endReading(),M.writeln(D.blueBright("// TODO")),M.startReading()}];var Ti="sudoer-of-myself-workspace",Pi="0.3.0",Ii="module",Hi={type:"git",url:"https://github.com/ForkKILLET/SudoerOfMyself.git"},ji="./src/index.js",Wi={node:"^12.20.0 || ^14.13.1 || >=16.0.0"},Ui="Fork\u03A8KILLET <fork_killet@qq.com>",qi="MIT",Ni={chalk:"^5.0.0",esbuild:"^0.14.20",minimist:"^1.2.5","simple-async-sleep":"^1.0.3","string-width":"^5.1.0",xterm:"^4.17.0","xterm-addon-web-links":"^0.5.1"},zi={"http-server":"^14.1.0"},Ke={name:Ti,version:Pi,type:Ii,repository:Hi,exports:ji,engines:Wi,author:Ui,license:qi,dependencies:Ni,devDependencies:zi};var Ge=Ue(ii(),1);var ni={"":["\u60A8\u9700\u8981\u4EC0\u4E48\u624B\u518C\u9875\uFF1F","\u4F8B\u5982\uFF0C\u5C1D\u8BD5\u4F7F\u7528 `human human`\u3002"],version:["\u663E\u793A SudoerOfMyself \u7684\u7248\u672C\u3002","`version --dependence | -d` \u663E\u793A\u4F9D\u8D56"],logo:["\u663E\u793A SudoerOfMyself \u7684\u56FE\u6807\u3002"],human:["\u5177\u6709\u4EBA\u5DE5\u667A\u80FD\u7684\u3001\u7CFB\u7EDF\u53C2\u8003\u624B\u518C\u7684\u63A5\u53E3\u3002"],echo:["\u663E\u793A\u4E00\u884C\u601D\u60F3\u3002","`echo --angrily | -a`      \u751F\u6C14\u5730\u60F3","`echo --tremulously | -t`  \u53D1\u6296\u5730\u60F3","`echo --seriously | -S`    \u4E25\u8083\u5730\u60F3","`echo --sadly | -s`        \u4F24\u5FC3\u5730\u60F3"],pwd:["\u663E\u793A\u51FA\u5F53\u524D\u5DE5\u4F5C\u76EE\u5F55\u7684\u540D\u79F0\u3002"],ls:["\u5217\u51FA\u76EE\u5F55\u5185\u5BB9\u3002","`-a | --all`      \u5217\u51FA\u6240\u6709\u6587\u4EF6\uFF0C\u5305\u62EC\u4EE5 `.` \u5F00\u5934\u7684\u9690\u542B\u6587\u4EF6\u3002","`-l | --long`     \u9664\u6BCF\u4E2A\u6587\u4EF6\u540D\u5916\uFF0C\u589E\u52A0\u663E\u793A\u6587\u4EF6\u7C7B\u578B\u3001\u6743\u9650\u3001\u6240\u6709\u8005\u540D\u3002","`-c | --color`    \u4F7F\u7528\u989C\u8272\u533A\u522B\u6587\u4EF6\u7C7B\u522B\u3002","`-F | --classify` \u5728\u6BCF\u4E2A\u6587\u4EF6\u540D\u540E\u9644\u4E0A\u4E00\u4E2A\u5B57\u7B26\u4EE5\u8BF4\u660E\u8BE5\u6587\u4EF6\u7684\u7C7B\u578B\u3002","                `*` \u8868\u793A\u666E\u901A\u7684\u53EF\u6267\u884C\u6587\u4EF6\uFF1B`/` \u8868\u793A\u76EE\u5F55\uFF1B`@` \u8868\u793A\u7B26\u53F7\u94FE\u63A5\uFF1B`|` \u8868\u793A\u7BA1\u9053 (FIFO)\uFF1B","                `=` \u8868\u793A\u5957\u63A5\u5B57 (socket) \uFF1B`#` \u8868\u793A\u5757\u8BBE\u5907\uFF1B`%` \u8868\u793A\u5B57\u7B26\u8BBE\u5907\uFF1B\u4EC0\u4E48\u4E5F\u6CA1\u6709\u5219\u8868\u793A\u666E\u901A\u6587\u4EF6\u3002"],cd:["\u6539\u53D8\u5F53\u524D\u7684\u5DE5\u4F5C\u76EE\u5F55\u3002"],cat:["\u8FDE\u63A5\u6587\u4EF6\u5E76\u5728\u6807\u51C6\u8F93\u51FA\u4E0A\u8F93\u51FA\u3002"],sl:["Save/Load","`sl --save | -s`                  \u624B\u52A8\u5B58\u6863\uFF08\u4F1A\u5728\u5173\u95ED\u6807\u7B7E\u9875\u65F6\u81EA\u52A8\u5B58\u6863\uFF09","`sl --auto-save | -a [ second ]`  \u6BCF second \u79D2\u81EA\u52A8\u5B58\u6863\u4E00\u6B21\uFF0C\u9ED8\u8BA4\u4E3A 10","`sl --export | -e`                \u5BFC\u51FA\u5B58\u6863\u4E3A\u4EFB\u4EBA\u6446\u5E03\u7684 JSON","`sl --export-clip | -E`           \u5BFC\u51FA\u5B58\u6863\u5230\u526A\u8D34\u677F","`sl --import | -i < JSON >`       \u4ECE JSON \u5BFC\u5165\u5B58\u6863","`sl --import-clip | -I`           \u4ECE\u526A\u8D34\u677F\u5BFC\u5165\u5B58\u6863\uFF08\u90E8\u5206\u6D4F\u89C8\u5668\u53EF\u80FD\u4E0D\u652F\u6301\uFF09","`sl --locomotive | -l`            \u61C2\u7684\u90FD\u61C2"]};var oi=({term:M,perm:P,sto:A,cmds:e,chalk:D})=>{Array.isArray(A.cwd)||(A.cwd=[]);let l=A.usrs??={root:0,myself:1},_=A.grps??={root:[0,[0]],human:[1,[1]]},f={ls:{colors:{dir:"cyan",exe:"green",blk:"yellow",chr:"yellow",nor:"white"},indicators:{dir:"/",exe:"*",blk:"#",chr:"%",nor:"",pip:"|",soc:"="},shortTypes:{dir:"d",exe:"-",blk:"b",chr:"c",nor:"-",pip:"p",soc:"s"},longTypes:{dir:"directory",exe:"executable",blk:"block device",chr:"character device",nor:"file",pip:"FIFO",soc:"socket"}},d:h=>h.reduce((y,v)=>y.children[v],A.files),cwd:()=>f.d(A.cwd),relpath:(h,y,...v)=>{let s=h?.startsWith("/")?(h=h.slice(1),[]):[].concat(A.cwd),u=h?h.split("/"):[],p,o,r=f.d(s);try{for([p,o]of u.entries())if(o!==".")if(o==="..")s.pop(),r=f.d(s);else{if(r=r.children[n],!r)throw"no such file or directory";if(r.ty!=="dir"&&p!==u.length-1)throw"not a directory";s.push(o)}if(v.length&&!v.includes(r.ty))throw o=s.pop()??"","not a "+v.map(t=>f.ls.longTypes[t]).join(" or ");return[s,r]}catch(t){return y&&M.writeln([t+": ",...s,D.red(o),...u.slice(p+1)].join("/")),[null,null]}}};return f};var si=({term:M,perm:P,sto:A,chalk:e})=>{P.enable("cmds.version","cmds.logo","cmds.sl","human.version","human.logo","human.sl");let D={version:(..._)=>{let f=(0,Ge.default)(_,{stopEarly:!0,boolean:["dependence"],alias:{d:"dependence"}});M.writeln(`v${Ke.version}, by ${e.yellow(Ke.author.split(" ")[0])}, on ${e.cyan("2022/3/14 14:43:34")},\r
at ${e.green(Ke.repository.url)}`+(f.dependence?`, with:\r
${["dependencies","devDependencies"].map(h=>e.underline(h)+`\r
`+Object.entries(Ke[h]).map(([y,v])=>y+" "+e.cyan(v)).join(`\r
`)).join(`\r
`)}`:""))},logo:async()=>{let _=document.getElementById("logo");_.style.display="block",await ze(2e3),_.style.display=""},sl:async(..._)=>{let f=(0,Ge.default)(_,{stopEarly:!0,boolean:["save","export","export-clip","import-clip","locomotive"],string:["import"],alias:{s:"save",a:"auto-save",e:"export",E:"export-clip",i:"import",I:"import-clip",l:"locomotive"}}),h=f.s+("a"in f)+f.e+f.E+f.I+("i"in f)+f.l;if(h===0)return M.writeln("sl: no operation specified");if(h>1)return M.writeln("sl: only one operation may be used at a time");if(f.s&&A.__save(),"a"in f&&(M.autoSaveTimer&&(clearInterval(M.autoSaveTimer),M.writeln("sl: old auto-saver killed")),M.autoSaveTimer=setInterval(()=>{A.__save(),console.log("Auto saved")},(f.a===!0?10:f.a)*1e3)),f.e&&M.writeln(e.blueBright(JSON.stringify(A))),f.E){try{await navigator.clipboard.writeText(JSON.stringify(A))}catch{return M.writeln("sl: failed to access clipboard")}M.writeln("sl: exported to clipboard")}if("i"in f||f.I){let y=f.i;if(f.I)try{y=await navigator.clipboard.readText()}catch{return M.writeln("sl: failed to access clipboard")}try{console.log(y);let v=JSON.parse(y);for(let s in A)s.startsWith("__")||delete A[s];for(let s in v)s.startsWith("__")||(A[s]=v[s]);f.I&&M.writeln("sl: imported from clipboard"),history.go()}catch(v){M.writeln(`sl: ${v.message.slice(12)}`)}}f.l&&(M.clear(),M.write(String.raw`
                    (@@) (  ) (@)  ( )  @@    ()    @     O     @     O      @
               (   )
           (@@@@)
        (    )

      (@@@)
     ++      +------ ____                 ____________________ ____________________
     ||      |+-+ |  |   \@@@@@@@@@@@     |  ___ ___ ___ ___ | |  ___ ___ ___ ___ |
   /---------|| | |  |    \@@@@@@@@@@@@@_ |  |_| |_| |_| |_| | |  |_| |_| |_| |_| |
  + ========  +-+ |  |                  | |__________________| |__________________|
 _|--O========O~\-+  |__________________| |__________________| |__________________|
//// \_/      \_/       (O)       (O)        (O)        (O)       (O)        (O)

// There's no money for animation. Sponsor us XD
`.replaceAll(`
`,`\r
`)))},help:()=>M.writeln("You are HELPLESS. No one will help you. jaja."),human:async(_="")=>{P.find(`human.${_}`)?await M.echo(ni[_].map(f=>f.replace(/`(.+?)`/g,h=>e.underline(h.slice(1,-1)))),{t:0,c:"cyan"}):await M.writeln(`human: ${_}: page not found.`)},echo:async(..._)=>{let f=(0,Ge.default)(_,{stopEarly:!0,boolean:["angrily","tremulously","seriously","sadly"],alias:{a:"angrily",t:"tremulously",S:"seriously",s:"sadly"}}),h=f._.join(" "),y=h;f.a&&(y=e.bold(y)),f.t&&(y=e.italic(y)),f.S&&(y=e.underline(y)),f.s&&(y=e.dim(y)),await M.echo([y],{t:f.angrily?60:void 0}),await M.trigger("echo",h,f)},pwd:()=>{M.writeln("/"+A.cwd.join("/"))},ls:(..._)=>{let f=Object.entries(A.usrs),h=[],y=f.reduce((s,u)=>Math.max(s,h[u[1]]=se(u[0])),0),v=(0,Ge.default)(_,{boolean:["color","classify","long","all"],alias:{a:"all",c:"color",F:"classify",l:"long"}});v._.length||v._.push("");for(let s of v._){v._.length>1&&M.writeln(s+":");let[,u]=l.relpath(s,!0);if(!u)return;if(u.ty==="dir"){let p=Object.values(u.children);v.a||(p=p.filter(({n:r})=>r[0]!=="."));let o=p.map(({ty:r,n:t,perm:i,owner:a})=>{if(v.c&&(t=e[l.ls.colors[r]](t)),v.F&&(t+=l.ls.indicators[r]),v.l){let c=[..."rwx".repeat(3)],d=parseInt(i,8);for(let S=0;S<=8;S++)d&1<<8-S||(c[S]="-");let g=f.find(S=>S[1]===a);t=l.ls.shortTypes[r]+c.join("")+" "+g[0]+" ".repeat(y-h[g[1]]+1)+t}return t}).join(v.l?`\r
`:"  ");M.write(o+(o?`\r
`:""))}else M.writeln(u.n);v._.length>1&&M.writeln("")}},cd:_=>{let[f]=l.relpath(_,!0,"dir");f&&(A.cwd=f)},cat:async _=>{let[f,h]=l.relpath(_,!0,"nor","exe");!h||(M.writeln(h.cont),await M.trigger("cat",f,h))},bag:()=>{}},l=oi({term:M,perm:P,sto:A,cmds:D,chalk:e});return{fs:l,cmds:D}};var ai=({term:M,perm:P,sto:A})=>{let e={enable:()=>A.afOn=!0,disable:()=>A.afOn=!1,init:()=>{M.listen("echo",async(D,l)=>{if(!!P.find("af")){if(D.toLowerCase()==="hi human")e.enable(),D="Hi User";else if(D.toLowerCase()==="bye human")e.disable(),D="Bye User";else if(!A.afOn)return;A.afTime??=0,await M.echo([D.replace(/[!?]/g,_=>({"!":"\uFF01","?":"\uFF1F"})[_]).replace(/[你我]/g,_=>({\u4F60:"\u6211",\u6211:"\u4F60"})[_]).replace(/吗？/g,"\u3002").replace(/？$/,"\uFF1F\u6211\u4E5F\u4E0D\u77E5\u9053\u3002")+(l.angrily?"\u2026\u2026\u600E\u4E48\u4E86 User\uFF0C\u4E0D\u8981\u751F\u6C14\u5462~":"")+(l.tremulously?"\u2026\u2026\u514B\u670D\u6050\u60E7\u6700\u597D\u7684\u65B9\u5F0F\u5C31\u662F\u9762\u5BF9\u5B83\uFF01":"")+(l.seriously?"\u2026\u2026\u554A\u5BF9\u5BF9\u5BF9\uFF01":"")+(l.sadly?" ( \xB4\u30FB\u03C9\u30FB)\u30CE(._.`)":"")||"User\uFF0C\u4F60\u600E\u4E48\u4E0D\u8BF4\u8BDD\u5566"],{c:"cyan",t:80}),await M.trigger("af",++A.afTime)}})}};return e};var ui=({sto:M,cmds:P})=>{let{usrs:A}=M,e={bins:()=>Object.entries(P).map(([_,f])=>({n:_,ty:"exe",v:f.toString(),perm:perm.find(`cmds.${_}`)?755:750,owner:A.root})),history:()=>M.history.join(`\r
`)},D={ty:"dir",children:{bin:{ty:"dir",perm:755,owner:A.root,children:e.bins},home:{ty:"dir",perm:755,owner:A.myself,children:{Memories:{ty:"dir",perm:750,owner:A.myself,children:{"before_human.mem":{ty:"nor",cont:["[2099/07/?? \u661F\u671F\u56DB \u4E0A\u5348 ?] \u82B1 \uFFE59980 \u4E70\u4E86 HumanOS \u6D4B\u8BD5\u7248\uFF0C\uFFE519 \u4F18\u60E0\u5238\u771F\u4E0D\u9519\u3002\u8FD9\u73A9\u610F\u80FD\u5927\u5E45\u63D0\u9AD8\u6211\u7684\u5DE5\u4F5C\u6548\u7387\u3002\u628A\u5927\u8111\u6302\u8F7D\u6210 HumanFS \u7136\u540E\u901A\u8FC7\u7EC8\u7AEF\u8BBF\u95EE\uFF0C\u771F\u662F\u4E0D\u6562\u76F8\u4FE1\u3002","[2099/07/?? \u661F\u671F\u65E5 \u4E0B\u5348 ?] \u5B89\u88C5\u670D\u52A1\u5C45\u7136\u8981\u53E6\u884C\u4ED8\u8D39\uFF0C\u600E\u4E48\u6562\u7684\u5440\u3002\u6839\u636E\u6211\u8FD9\u51E0\u5929\u7684\u8003\u8BC1\uFF0C\u6234\u4E0A\u5934\u76D4\u8DD1\u4E00\u4E0B\u5B89\u88C5\u811A\u672C\u5C31\u5B8C\u4E8B\uFF0C\u7EDD\u65E0\u5371\u9669\u3002","[2099/07/?? \u661F\u671F\u4E94 \u4E0B\u5348 ?] \u6211\u7684\u6002\u771F\u662F\u8D85\u51FA\u6211\u7684\u60F3\u8C61\u3002\u518D\u7B49\u51E0\u4E2A\u6708\u514D\u8D39\u9886\u6B63\u5F0F\u7248\u4E0D\u9999\u5417\u3002","[2099/07/?? \u661F\u671F\u4E94 \u665A\u4E0A ?] \u6211\u662F\u50BB\u903C\uFF0C\u8BBA\u6587\u7ED9\u5220\u4E86\uFF0C9902 \u5E74\u4E86\u600E\u4E48\u8FD8\u6709\u4EBA\u4E0D\u8BB0\u5F97\u5907\u4EFD\u3002","[2099/07/?? \u661F\u671F\u4E94 \u665A\u4E0A ?] \u6216\u8BB8\u6211\u80FD\u4ECE\u8BB0\u5FC6\u91CC\u628A\u5B83\u5BFC\u51FA\u6765\u3002\u5E72\u4E86\u5144\u5F1F\u4EEC\u3002\u5148\u6234\u5934\u76D4\u2026\u2026\u8BF6\u5BF9\u2026\u2026\u6587\u6863\u91CC\u600E\u4E48\u6CA1\u8BF4\u6709\u4E00\u952E\u5B89\u88C5\uFF0C\u7EAF\u7EAF**\u2026\u2026\u7F51\u901F\u597D\u6162\u2026\u2026\u6211\u8349\u4EC0\u4E48\u4E1C\u897F?????????????????????????","[2099/07/13 \u661F\u671F\u4E94 \u665A\u4E0A 23:30:05] \u6210\u4E86\u2026\u2026\u662F\u7EC8\u7AEF\uFF0C\u597D"].join(`\r
`)}}},".history":{ty:"nor",perm:750,owner:A.myself,children:e.history}}},dev:{ty:"dir",perm:755,owner:A.root,children:{tty:{ty:"chr",perm:666,owner:A.root},brain:{ty:"blk",perm:660,owner:A.root}}},"lost+found":{ty:"dir",perm:700,owner:A.root,children:{}}}},l=(_,f)=>{if(typeof f.children=="string"){_.children=f.children;return}for(let[h,y]of Object.entries(f.children)){let v=_[h];if(v===void 0){_.children[h]=v={};for(let s in y)typeof y[s]=="function"?Object.defineProperty(v,s,{get:()=>y[s]()}):v[s]=y[s];v.n=y.n=h}y.ty==="dir"&&typeof y.children!="function"&&l(v,y)}};(typeof M.files?.children!="object"||Array.isArray(M.files.children))&&(M.files={ty:"dir",children:{}}),l(M.files,D)};var W=new li.Terminal({rows:30,cols:97,cursorBlink:!0,fontFamily:"'Fira Code', consolas, monospace"});W.loadAddon(new hi.WebLinksAddon);W.open(document.getElementById("xterm"));W.writePrompt=()=>W.write(W.prompt);W.delete=(M,P,A)=>W.write((P?"\b".repeat(M):"")+(A?" ".repeat(M)+"\b".repeat(M):""));W.historyLn=()=>{W.write("\r"),W.writePrompt(),W.delete(se(W.ln),!1,!0),W.write(W.ln=W.historyIndex?te.history.at(-W.historyIndex):""),W.cursorIndex=W.ln.length};Object.defineProperties(W,{lnPre:{get:()=>W.ln.slice(0,W.cursorIndex)},lnPost:{get:()=>W.ln.slice(W.cursorIndex)},lnPostN:{get:()=>W.ln.slice(W.cursorIndex+1)},lnCur:{get:()=>W.ln[W.cursorIndex-1]},lnCurN:{get:()=>W.ln[W.cursorIndex]}});W.readln=async()=>(W.writePrompt(),te.history.at(-1)!==W.ln&&W.ln&&te.history.push(W.ln),W.historyIndex=0,W.cursorIndex=0,W.ln="",await new Promise(M=>W.lnComplete=M),delete W.lnComplete,W.ln=W.ln.trim());W.onData(M=>{switch(M[0]){case"\x7F":if(!W.enableRead)return;if(W.cursorIndex>0){let P=se(W.lnCur);W.delete(P,!0,!1),W.cursorIndex--,W.ln=W.lnPre+W.lnPostN,W.write(W.lnPost+" ".repeat(P)),W.delete(se(W.lnPost)+P,!0,!1)}break;case"\r":if(!W.enableRead)return;W.writeln(""),W.lnComplete();break;case"\f":if(!W.enableRead)return;W.clear();break;case"":W.write("\x1B[D".repeat(se(W.lnPre))),W.cursorIndex=0;break;case"":W.write("\x1B[C".repeat(se(W.lnPost))),W.cursorIndex=W.ln.length;break;case"":Re.find("ff")&&(W.fastForward=!0);break;case"\x1B":switch(M.slice(1)){case"[A":if(!W.enableRead)return;W.historyIndex<te.history.length&&(W.historyIndex++,W.historyLn());break;case"[B":if(!W.enableRead)return;W.historyIndex>0&&(W.historyIndex--,W.historyLn());break;case"[D":if(!W.enableRead)return;W.cursorIndex>0&&(W.write(M.repeat(se(W.lnCur))),W.cursorIndex--);break;case"[C":if(!W.enableRead)return;W.cursorIndex<W.ln.length&&(W.write(M.repeat(se(W.lnCurN))),W.cursorIndex++);break;case"":W.blur();break;default:console.log("Key ESC: %s",M.slice(1))}break;default:if(M<" "||M>"~"&&M<"\xA0"){console.log("Key code: %d",M.charCodeAt());return}if(!W.enableRead)return;W.write(M+W.lnPost),W.write("\b".repeat(se(W.lnPost))),W.ln=W.lnPre+M+W.lnPost,W.cursorIndex+=M.length}});W.listeners={};W.listen=(M,P)=>{let A=W.listeners[M]??=[];return A.push(P),{dispose:()=>A.splice(A.findIndex(e=>e===P),1)}};W.listenOnce=(M,P)=>{let{dispose:A}=W.listen(M,async(...e)=>{await P(...e)&&A()});return{dispose:A}};W.trigger=async(M,...P)=>{console.log(`Trigger: %s, arg:
%o`,M,P);for(let A of W.listeners[M]??[])await A(...P)};var te=JSON.parse(localStorage.SudoerOfMyself??"{}");te.__save=()=>{localStorage.SudoerOfMyself=JSON.stringify(te)};addEventListener("beforeunload",te.__save);te.history??=[];Ce.level=1;W.prompt=Ce.green("$ ");te.perms??={};var ci=M=>(...P)=>{let{perms:A}=te;P.forEach(e=>A[e]=M),te.perms=A},Re={enable:ci(!0),disable:ci(!1),find:M=>te.perms[M]},{cmds:Fe,fs:fi}=si({term:W,perm:Re,sto:te,chalk:Ce}),Gi=ai({term:W,perm:Re,sto:te});ui({sto:te,cmds:Fe});var Mr=ei({term:W,perm:Re,sto:te,cmds:Fe,fs:fi,AF:Gi,chalk:Ce});W.isReading=!1;W.startReading=async()=>{if(W.enableRead=!0,!W.isReading){for(W.isReading=!0;W.enableRead;){let M=await W.readln();if(!M)continue;let[P,...A]=M.split(" ");if(!Re.find(`cmds.${P}`))P in Fe?(W.writeln(`${P}: permission denied.`),await W.trigger("command-no-perm")):(W.writeln(`${P}: command not found.`),await W.trigger("command-not-found",P));else{W.enableRead=!1;try{await Fe[P]?.(...A)}catch(e){console.log(e),W.writeln("core dumped: "+Ce.red(e.message??e))}W.enableRead=!0,await W.trigger("command-run",P,A)}}W.isReading=!1}};W.endReading=()=>{W.enableRead=!1};te.level??=0;W.currLevel=()=>Mr[te.level]?.(W,Fe);W.nextLevel=async()=>(await Mr[++te.level]?.(W,Fe),!0);W.echo=async(M,{t:P,c:A}={})=>{M=(Array.isArray(M)?M:[M]).map(e=>`* ${e}\r
`).join("");for(let e=0;e<M.length;e++){let D=M[e];if(D==="\x1B")for(;M[e]!=="m";)D+=M[++e];W.write(Ce[A??"yellow"](D)),await ze(W.fastForward?5:P??120)}W.fastForward=!1};Object.assign(window,{term:W,perm:Re,levels:Mr,cmds:Fe,fs:fi,sto:te,ex:{chalk:Ce,sleep:ze,stringWidth:se}});W.currLevel();})();
//# sourceMappingURL=bundle.js.map
